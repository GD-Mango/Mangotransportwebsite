var z1=Object.defineProperty;var W1=(r,e,t)=>e in r?z1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var fr=(r,e,t)=>W1(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function H1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Rh={exports:{}},cu={},Dh={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function V1(){if(a0)return Ht;a0=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),N=Symbol.iterator;function b(H){return H===null||typeof H!="object"?null:(H=N&&H[N]||H["@@iterator"],typeof H=="function"?H:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,A={};function P(H,E,V){this.props=H,this.context=E,this.refs=A,this.updater=V||y}P.prototype.isReactComponent={},P.prototype.setState=function(H,E){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,E,"setState")},P.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function T(){}T.prototype=P.prototype;function R(H,E,V){this.props=H,this.context=E,this.refs=A,this.updater=V||y}var C=R.prototype=new T;C.constructor=R,L(C,P.prototype),C.isPureReactComponent=!0;var j=Array.isArray,J=Object.prototype.hasOwnProperty,$={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function se(H,E,V){var q,ie={},ce=null,re=null;if(E!=null)for(q in E.ref!==void 0&&(re=E.ref),E.key!==void 0&&(ce=""+E.key),E)J.call(E,q)&&!le.hasOwnProperty(q)&&(ie[q]=E[q]);var he=arguments.length-2;if(he===1)ie.children=V;else if(1<he){for(var ve=Array(he),Ne=0;Ne<he;Ne++)ve[Ne]=arguments[Ne+2];ie.children=ve}if(H&&H.defaultProps)for(q in he=H.defaultProps,he)ie[q]===void 0&&(ie[q]=he[q]);return{$$typeof:r,type:H,key:ce,ref:re,props:ie,_owner:$.current}}function Y(H,E){return{$$typeof:r,type:H.type,key:E,ref:H.ref,props:H.props,_owner:H._owner}}function me(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function M(H){var E={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(V){return E[V]})}var z=/\/+/g;function B(H,E){return typeof H=="object"&&H!==null&&H.key!=null?M(""+H.key):E.toString(36)}function K(H,E,V,q,ie){var ce=typeof H;(ce==="undefined"||ce==="boolean")&&(H=null);var re=!1;if(H===null)re=!0;else switch(ce){case"string":case"number":re=!0;break;case"object":switch(H.$$typeof){case r:case e:re=!0}}if(re)return re=H,ie=ie(re),H=q===""?"."+B(re,0):q,j(ie)?(V="",H!=null&&(V=H.replace(z,"$&/")+"/"),K(ie,E,V,"",function(Ne){return Ne})):ie!=null&&(me(ie)&&(ie=Y(ie,V+(!ie.key||re&&re.key===ie.key?"":(""+ie.key).replace(z,"$&/")+"/")+H)),E.push(ie)),1;if(re=0,q=q===""?".":q+":",j(H))for(var he=0;he<H.length;he++){ce=H[he];var ve=q+B(ce,he);re+=K(ce,E,V,ve,ie)}else if(ve=b(H),typeof ve=="function")for(H=ve.call(H),he=0;!(ce=H.next()).done;)ce=ce.value,ve=q+B(ce,he++),re+=K(ce,E,V,ve,ie);else if(ce==="object")throw E=String(H),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.");return re}function ge(H,E,V){if(H==null)return H;var q=[],ie=0;return K(H,q,"","",function(ce){return E.call(V,ce,ie++)}),q}function ue(H){if(H._status===-1){var E=H._result;E=E(),E.then(function(V){(H._status===0||H._status===-1)&&(H._status=1,H._result=V)},function(V){(H._status===0||H._status===-1)&&(H._status=2,H._result=V)}),H._status===-1&&(H._status=0,H._result=E)}if(H._status===1)return H._result.default;throw H._result}var we={current:null},ae={transition:null},ne={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:ae,ReactCurrentOwner:$};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ht.Children={map:ge,forEach:function(H,E,V){ge(H,function(){E.apply(this,arguments)},V)},count:function(H){var E=0;return ge(H,function(){E++}),E},toArray:function(H){return ge(H,function(E){return E})||[]},only:function(H){if(!me(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ht.Component=P,Ht.Fragment=t,Ht.Profiler=a,Ht.PureComponent=R,Ht.StrictMode=s,Ht.Suspense=h,Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Ht.act=te,Ht.cloneElement=function(H,E,V){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var q=L({},H.props),ie=H.key,ce=H.ref,re=H._owner;if(E!=null){if(E.ref!==void 0&&(ce=E.ref,re=$.current),E.key!==void 0&&(ie=""+E.key),H.type&&H.type.defaultProps)var he=H.type.defaultProps;for(ve in E)J.call(E,ve)&&!le.hasOwnProperty(ve)&&(q[ve]=E[ve]===void 0&&he!==void 0?he[ve]:E[ve])}var ve=arguments.length-2;if(ve===1)q.children=V;else if(1<ve){he=Array(ve);for(var Ne=0;Ne<ve;Ne++)he[Ne]=arguments[Ne+2];q.children=he}return{$$typeof:r,type:H.type,key:ie,ref:ce,props:q,_owner:re}},Ht.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:o,_context:H},H.Consumer=H},Ht.createElement=se,Ht.createFactory=function(H){var E=se.bind(null,H);return E.type=H,E},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(H){return{$$typeof:d,render:H}},Ht.isValidElement=me,Ht.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:ue}},Ht.memo=function(H,E){return{$$typeof:g,type:H,compare:E===void 0?null:E}},Ht.startTransition=function(H){var E=ae.transition;ae.transition={};try{H()}finally{ae.transition=E}},Ht.unstable_act=te,Ht.useCallback=function(H,E){return we.current.useCallback(H,E)},Ht.useContext=function(H){return we.current.useContext(H)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(H){return we.current.useDeferredValue(H)},Ht.useEffect=function(H,E){return we.current.useEffect(H,E)},Ht.useId=function(){return we.current.useId()},Ht.useImperativeHandle=function(H,E,V){return we.current.useImperativeHandle(H,E,V)},Ht.useInsertionEffect=function(H,E){return we.current.useInsertionEffect(H,E)},Ht.useLayoutEffect=function(H,E){return we.current.useLayoutEffect(H,E)},Ht.useMemo=function(H,E){return we.current.useMemo(H,E)},Ht.useReducer=function(H,E,V){return we.current.useReducer(H,E,V)},Ht.useRef=function(H){return we.current.useRef(H)},Ht.useState=function(H){return we.current.useState(H)},Ht.useSyncExternalStore=function(H,E,V){return we.current.useSyncExternalStore(H,E,V)},Ht.useTransition=function(){return we.current.useTransition()},Ht.version="18.3.1",Ht}var o0;function Gf(){return o0||(o0=1,Dh.exports=V1()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function G1(){if(l0)return cu;l0=1;var r=Gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,g){var v,N={},b=null,y=null;g!==void 0&&(b=""+g),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(y=h.ref);for(v in h)s.call(h,v)&&!o.hasOwnProperty(v)&&(N[v]=h[v]);if(d&&d.defaultProps)for(v in h=d.defaultProps,h)N[v]===void 0&&(N[v]=h[v]);return{$$typeof:e,type:d,key:b,ref:y,props:N,_owner:a.current}}return cu.Fragment=t,cu.jsx=c,cu.jsxs=c,cu}var c0;function K1(){return c0||(c0=1,Rh.exports=G1()),Rh.exports}var u=K1(),md={},Fh={exports:{}},Ps={},Bh={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function J1(){return u0||(u0=1,(function(r){function e(ae,ne){var te=ae.length;ae.push(ne);e:for(;0<te;){var H=te-1>>>1,E=ae[H];if(0<a(E,ne))ae[H]=ne,ae[te]=E,te=H;else break e}}function t(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var ne=ae[0],te=ae.pop();if(te!==ne){ae[0]=te;e:for(var H=0,E=ae.length,V=E>>>1;H<V;){var q=2*(H+1)-1,ie=ae[q],ce=q+1,re=ae[ce];if(0>a(ie,te))ce<E&&0>a(re,ie)?(ae[H]=re,ae[ce]=te,H=ce):(ae[H]=ie,ae[q]=te,H=q);else if(ce<E&&0>a(re,te))ae[H]=re,ae[ce]=te,H=ce;else break e}}return ne}function a(ae,ne){var te=ae.sortIndex-ne.sortIndex;return te!==0?te:ae.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var h=[],g=[],v=1,N=null,b=3,y=!1,L=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ae){for(var ne=t(g);ne!==null;){if(ne.callback===null)s(g);else if(ne.startTime<=ae)s(g),ne.sortIndex=ne.expirationTime,e(h,ne);else break;ne=t(g)}}function j(ae){if(A=!1,C(ae),!L)if(t(h)!==null)L=!0,ue(J);else{var ne=t(g);ne!==null&&we(j,ne.startTime-ae)}}function J(ae,ne){L=!1,A&&(A=!1,T(se),se=-1),y=!0;var te=b;try{for(C(ne),N=t(h);N!==null&&(!(N.expirationTime>ne)||ae&&!M());){var H=N.callback;if(typeof H=="function"){N.callback=null,b=N.priorityLevel;var E=H(N.expirationTime<=ne);ne=r.unstable_now(),typeof E=="function"?N.callback=E:N===t(h)&&s(h),C(ne)}else s(h);N=t(h)}if(N!==null)var V=!0;else{var q=t(g);q!==null&&we(j,q.startTime-ne),V=!1}return V}finally{N=null,b=te,y=!1}}var $=!1,le=null,se=-1,Y=5,me=-1;function M(){return!(r.unstable_now()-me<Y)}function z(){if(le!==null){var ae=r.unstable_now();me=ae;var ne=!0;try{ne=le(!0,ae)}finally{ne?B():($=!1,le=null)}}else $=!1}var B;if(typeof R=="function")B=function(){R(z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ge=K.port2;K.port1.onmessage=z,B=function(){ge.postMessage(null)}}else B=function(){P(z,0)};function ue(ae){le=ae,$||($=!0,B())}function we(ae,ne){se=P(function(){ae(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){L||y||(L=!0,ue(J))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(ae){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var te=b;b=ne;try{return ae()}finally{b=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var te=b;b=ae;try{return ne()}finally{b=te}},r.unstable_scheduleCallback=function(ae,ne,te){var H=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?H+te:H):te=H,ae){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=te+E,ae={id:v++,callback:ne,priorityLevel:ae,startTime:te,expirationTime:E,sortIndex:-1},te>H?(ae.sortIndex=te,e(g,ae),t(h)===null&&ae===t(g)&&(A?(T(se),se=-1):A=!0,we(j,te-H))):(ae.sortIndex=E,e(h,ae),L||y||(L=!0,ue(J))),ae},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(ae){var ne=b;return function(){var te=b;b=ne;try{return ae.apply(this,arguments)}finally{b=te}}}})(Mh)),Mh}var d0;function Y1(){return d0||(d0=1,Bh.exports=J1()),Bh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function X1(){if(h0)return Ps;h0=1;var r=Gf(),e=Y1();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(a[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},N={};function b(n){return h.call(N,n)?!0:h.call(v,n)?!1:g.test(n)?N[n]=!0:(v[n]=!0,!1)}function y(n,i,l,p){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,i,l,p){if(i===null||typeof i>"u"||y(n,i,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function A(n,i,l,p,w,S,D){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=S,this.removeEmptyString=D}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){P[n]=new A(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];P[i]=new A(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){P[n]=new A(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){P[n]=new A(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){P[n]=new A(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){P[n]=new A(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){P[n]=new A(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){P[n]=new A(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){P[n]=new A(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(T,R);P[i]=new A(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(T,R);P[i]=new A(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(T,R);P[i]=new A(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){P[n]=new A(n,1,!1,n.toLowerCase(),null,!1,!1)}),P.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){P[n]=new A(n,1,!1,n.toLowerCase(),null,!0,!0)});function C(n,i,l,p){var w=P.hasOwnProperty(i)?P[i]:null;(w!==null?w.type!==0:p||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(L(i,l,w,p)&&(l=null),p||w===null?b(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):w.mustUseProperty?n[w.propertyName]=l===null?w.type===3?!1:"":l:(i=w.attributeName,p=w.attributeNamespace,l===null?n.removeAttribute(i):(w=w.type,l=w===3||w===4&&l===!0?"":""+l,p?n.setAttributeNS(p,i,l):n.setAttribute(i,l))))}var j=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),$=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),ae=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=ae&&n[ae]||n["@@iterator"],typeof n=="function"?n:null)}var te=Object.assign,H;function E(n){if(H===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);H=i&&i[1]||""}return`
`+H+n}var V=!1;function q(n,i){if(!n||V)return"";V=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Ee){var p=Ee}Reflect.construct(n,[],i)}else{try{i.call()}catch(Ee){p=Ee}n.call(i.prototype)}else{try{throw Error()}catch(Ee){p=Ee}n()}}catch(Ee){if(Ee&&p&&typeof Ee.stack=="string"){for(var w=Ee.stack.split(`
`),S=p.stack.split(`
`),D=w.length-1,oe=S.length-1;1<=D&&0<=oe&&w[D]!==S[oe];)oe--;for(;1<=D&&0<=oe;D--,oe--)if(w[D]!==S[oe]){if(D!==1||oe!==1)do if(D--,oe--,0>oe||w[D]!==S[oe]){var pe=`
`+w[D].replace(" at new "," at ");return n.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",n.displayName)),pe}while(1<=D&&0<=oe);break}}}finally{V=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?E(n):""}function ie(n){switch(n.tag){case 5:return E(n.type);case 16:return E("Lazy");case 13:return E("Suspense");case 19:return E("SuspenseList");case 0:case 2:case 15:return n=q(n.type,!1),n;case 11:return n=q(n.type.render,!1),n;case 1:return n=q(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case le:return"Fragment";case $:return"Portal";case Y:return"Profiler";case se:return"StrictMode";case B:return"Suspense";case K:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case M:return(n.displayName||"Context")+".Consumer";case me:return(n._context.displayName||"Context")+".Provider";case z:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ge:return i=n.displayName||null,i!==null?i:ce(n.type)||"Memo";case ue:i=n._payload,n=n._init;try{return ce(n(i))}catch{}}return null}function re(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(i);case 8:return i===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function he(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ve(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ne(n){var i=ve(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),p=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var w=l.get,S=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return w.call(this)},set:function(D){p=""+D,S.call(this,D)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function De(n){n._valueTracker||(n._valueTracker=Ne(n))}function We(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),p="";return n&&(p=ve(n)?n.checked?"true":"false":n.value),n=p,n!==l?(i.setValue(n),!0):!1}function qe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function it(n,i){var l=i.checked;return te({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Q(n,i){var l=i.defaultValue==null?"":i.defaultValue,p=i.checked!=null?i.checked:i.defaultChecked;l=he(i.value!=null?i.value:l),n._wrapperState={initialChecked:p,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ve(n,i){i=i.checked,i!=null&&C(n,"checked",i,!1)}function Rt(n,i){Ve(n,i);var l=he(i.value),p=i.type;if(l!=null)p==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Be(n,i.type,l):i.hasOwnProperty("defaultValue")&&Be(n,i.type,he(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function mt(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var p=i.type;if(!(p!=="submit"&&p!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Be(n,i,l){(i!=="number"||qe(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var ht=Array.isArray;function Ge(n,i,l,p){if(n=n.options,i){i={};for(var w=0;w<l.length;w++)i["$"+l[w]]=!0;for(l=0;l<n.length;l++)w=i.hasOwnProperty("$"+n[l].value),n[l].selected!==w&&(n[l].selected=w),w&&p&&(n[l].defaultSelected=!0)}else{for(l=""+he(l),i=null,w=0;w<n.length;w++){if(n[w].value===l){n[w].selected=!0,p&&(n[w].defaultSelected=!0);return}i!==null||n[w].disabled||(i=n[w])}i!==null&&(i.selected=!0)}}function gt(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ft(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(ht(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:he(l)}}function Yt(n,i){var l=he(i.value),p=he(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),p!=null&&(n.defaultValue=""+p)}function $t(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Ct(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Mt,at=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,p,w){MSApp.execUnsafeLocalFunction(function(){return n(i,l,p,w)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Mt=Mt||document.createElement("div"),Mt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Mt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function jt(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rr=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(n){Rr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),rt[i]=rt[n]})});function Gt(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||rt.hasOwnProperty(n)&&rt[n]?(""+i).trim():i+"px"}function Bt(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var p=l.indexOf("--")===0,w=Gt(l,i[l],p);l==="float"&&(l="cssFloat"),p?n.setProperty(l,w):n[l]=w}}var Ut=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gr(n,i){if(i){if(Ut[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function pt(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ir=null;function vt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Et=null,nr=null,It=null;function yt(n){if(n=ko(n)){if(typeof Et!="function")throw Error(t(280));var i=n.stateNode;i&&(i=dl(i),Et(n.stateNode,n.type,i))}}function Xt(n){nr?It?It.push(n):It=[n]:nr=n}function Gi(){if(nr){var n=nr,i=It;if(It=nr=null,yt(n),i)for(n=0;n<i.length;n++)yt(i[n])}}function mn(n,i){return n(i)}function ei(){}var ps=!1;function xt(n,i,l){if(ps)return n(i,l);ps=!0;try{return mn(n,i,l)}finally{ps=!1,(nr!==null||It!==null)&&(ei(),Gi())}}function ts(n,i){var l=n.stateNode;if(l===null)return null;var p=dl(l);if(p===null)return null;l=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Ts=!1;if(d)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ts=!1}function gs(n,i,l,p,w,S,D,oe,pe){var Ee=Array.prototype.slice.call(arguments,3);try{i.apply(l,Ee)}catch(Ue){this.onError(Ue)}}var mr=!1,Dr=null,Hr=!1,wi=null,Ki={onError:function(n){mr=!0,Dr=n}};function Is(n,i,l,p,w,S,D,oe,pe){mr=!1,Dr=null,gs.apply(Ki,arguments)}function ti(n,i,l,p,w,S,D,oe,pe){if(Is.apply(this,arguments),mr){if(mr){var Ee=Dr;mr=!1,Dr=null}else throw Error(t(198));Hr||(Hr=!0,wi=Ee)}}function vn(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function ms(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function rs(n){if(vn(n)!==n)throw Error(t(188))}function va(n){var i=n.alternate;if(!i){if(i=vn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,p=i;;){var w=l.return;if(w===null)break;var S=w.alternate;if(S===null){if(p=w.return,p!==null){l=p;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===l)return rs(w),n;if(S===p)return rs(w),i;S=S.sibling}throw Error(t(188))}if(l.return!==p.return)l=w,p=S;else{for(var D=!1,oe=w.child;oe;){if(oe===l){D=!0,l=w,p=S;break}if(oe===p){D=!0,p=w,l=S;break}oe=oe.sibling}if(!D){for(oe=S.child;oe;){if(oe===l){D=!0,l=S,p=w;break}if(oe===p){D=!0,p=S,l=w;break}oe=oe.sibling}if(!D)throw Error(t(189))}}if(l.alternate!==p)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function Os(n){return n=va(n),n!==null?Ji(n):null}function Ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ji(n);if(i!==null)return i;n=n.sibling}return null}var ya=e.unstable_scheduleCallback,xa=e.unstable_cancelCallback,ro=e.unstable_shouldYield,Dc=e.unstable_requestPaint,xr=e.unstable_now,Ul=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,Yi=e.unstable_NormalPriority,$l=e.unstable_LowPriority,so=e.unstable_IdlePriority,wa=null,ss=null;function ql(n){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(wa,n,void 0,(n.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:Gr,io=Math.log,Fc=Math.LN2;function Gr(n){return n>>>=0,n===0?32:31-(io(n)/Fc|0)|0}var ba=64,is=4194304;function ri(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _a(n,i){var l=n.pendingLanes;if(l===0)return 0;var p=0,w=n.suspendedLanes,S=n.pingedLanes,D=l&268435455;if(D!==0){var oe=D&~w;oe!==0?p=ri(oe):(S&=D,S!==0&&(p=ri(S)))}else D=l&~w,D!==0?p=ri(D):S!==0&&(p=ri(S));if(p===0)return 0;if(i!==0&&i!==p&&(i&w)===0&&(w=p&-p,S=i&-i,w>=S||w===16&&(S&4194240)!==0))return i;if((p&4)!==0&&(p|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=p;0<i;)l=31-Vr(i),w=1<<l,p|=n[l],i&=~w;return p}function vs(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rn(n,i){for(var l=n.suspendedLanes,p=n.pingedLanes,w=n.expirationTimes,S=n.pendingLanes;0<S;){var D=31-Vr(S),oe=1<<D,pe=w[D];pe===-1?((oe&l)===0||(oe&p)!==0)&&(w[D]=vs(oe,i)):pe<=i&&(n.expiredLanes|=oe),S&=~oe}}function Rs(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Go(){var n=ba;return ba<<=1,(ba&4194240)===0&&(ba=64),n}function Ko(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Na(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Vr(i),n[i]=l}function ni(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<l;){var w=31-Vr(l),S=1<<w;i[w]=0,p[w]=-1,n[w]=-1,l&=~S}}function ao(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var p=31-Vr(l),w=1<<p;w&i|n[p]&i&&(n[p]|=i),l&=~w}}var Jt=0;function Sa(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Xi,Jo,zl,Wl,oo,lo=!1,Un=[],si=null,$n=null,ys=null,ka=new Map,_t=new Map,ii=[],Bc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hl(n,i){switch(n){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ka.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(i.pointerId)}}function as(n,i,l,p,w,S){return n===null||n.nativeEvent!==S?(n={blockedOn:i,domEventName:l,eventSystemFlags:p,nativeEvent:S,targetContainers:[w]},i!==null&&(i=ko(i),i!==null&&Jo(i)),n):(n.eventSystemFlags|=p,i=n.targetContainers,w!==null&&i.indexOf(w)===-1&&i.push(w),n)}function bi(n,i,l,p,w){switch(i){case"focusin":return si=as(si,n,i,l,p,w),!0;case"dragenter":return $n=as($n,n,i,l,p,w),!0;case"mouseover":return ys=as(ys,n,i,l,p,w),!0;case"pointerover":var S=w.pointerId;return ka.set(S,as(ka.get(S)||null,n,i,l,p,w)),!0;case"gotpointercapture":return S=w.pointerId,_t.set(S,as(_t.get(S)||null,n,i,l,p,w)),!0}return!1}function Vl(n){var i=la(n.target);if(i!==null){var l=vn(i);if(l!==null){if(i=l.tag,i===13){if(i=ms(l),i!==null){n.blockedOn=i,oo(n.priority,function(){zl(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function co(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=Ea(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var p=new l.constructor(l.type,l);ir=p,l.target.dispatchEvent(p),ir=null}else return i=ko(l),i!==null&&Jo(i),n.blockedOn=l,!1;i.shift()}return!0}function ja(n,i,l){co(n)&&l.delete(i)}function Yo(){lo=!1,si!==null&&co(si)&&(si=null),$n!==null&&co($n)&&($n=null),ys!==null&&co(ys)&&(ys=null),ka.forEach(ja),_t.forEach(ja)}function Ds(n,i){n.blockedOn===i&&(n.blockedOn=null,lo||(lo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yo)))}function Aa(n){function i(w){return Ds(w,n)}if(0<Un.length){Ds(Un[0],n);for(var l=1;l<Un.length;l++){var p=Un[l];p.blockedOn===n&&(p.blockedOn=null)}}for(si!==null&&Ds(si,n),$n!==null&&Ds($n,n),ys!==null&&Ds(ys,n),ka.forEach(i),_t.forEach(i),l=0;l<ii.length;l++)p=ii[l],p.blockedOn===n&&(p.blockedOn=null);for(;0<ii.length&&(l=ii[0],l.blockedOn===null);)Vl(l),l.blockedOn===null&&ii.shift()}var qn=j.ReactCurrentBatchConfig,uo=!0;function Xo(n,i,l,p){var w=Jt,S=qn.transition;qn.transition=null;try{Jt=1,ho(n,i,l,p)}finally{Jt=w,qn.transition=S}}function Qo(n,i,l,p){var w=Jt,S=qn.transition;qn.transition=null;try{Jt=4,ho(n,i,l,p)}finally{Jt=w,qn.transition=S}}function ho(n,i,l,p){if(uo){var w=Ea(n,i,l,p);if(w===null)ll(n,i,p,xs,l),Hl(n,p);else if(bi(w,n,i,l,p))p.stopPropagation();else if(Hl(n,p),i&4&&-1<Bc.indexOf(n)){for(;w!==null;){var S=ko(w);if(S!==null&&Xi(S),S=Ea(n,i,l,p),S===null&&ll(n,i,p,xs,l),S===w)break;w=S}w!==null&&p.stopPropagation()}else ll(n,i,p,null,l)}}var xs=null;function Ea(n,i,l,p){if(xs=null,n=vt(p),n=la(n),n!==null)if(i=vn(n),i===null)n=null;else if(l=i.tag,l===13){if(n=ms(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return xs=n,null}function La(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ul()){case no:return 1;case ns:return 4;case Yi:case $l:return 16;case so:return 536870912;default:return 16}default:return 16}}var ws=null,_i=null,Qi=null;function Zo(){if(Qi)return Qi;var n,i=_i,l=i.length,p,w="value"in ws?ws.value:ws.textContent,S=w.length;for(n=0;n<l&&i[n]===w[n];n++);var D=l-n;for(p=1;p<=D&&i[l-p]===w[S-p];p++);return Qi=w.slice(n,1<p?1-p:void 0)}function Pa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function bs(){return!0}function ai(){return!1}function jn(n){function i(l,p,w,S,D){this._reactName=l,this._targetInst=w,this.type=p,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var oe in n)n.hasOwnProperty(oe)&&(l=n[oe],this[oe]=l?l(S):S[oe]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?bs:ai,this.isPropagationStopped=ai,this}return te(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),i}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=jn(_s),x=te({},_s,{view:0,detail:0}),O=jn(x),ee,de,be,Ie=te({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==be&&(be&&n.type==="mousemove"?(ee=n.screenX-be.screenX,de=n.screenY-be.screenY):de=ee=0,be=n),ee)},movementY:function(n){return"movementY"in n?n.movementY:de}}),Fe=jn(Ie),Qe=te({},Ie,{dataTransfer:0}),lt=jn(Qe),At=te({},x,{relatedTarget:0}),Tt=jn(At),Kt=te({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),jr=jn(Kt),Kr=te({},_s,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vr=jn(Kr),nn=te({},_s,{data:0}),Fr=jn(nn),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ni={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Fs[n])?!!i[n]:!1}function Ca(){return Si}var po=te({},x,{key:function(n){if(n.key){var i=yn[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Pa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ni[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(n){return n.type==="keypress"?Pa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zi=jn(po),Ta=te({},Ie,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ea=jn(Ta),ta=te({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),xn=jn(ta),Ia=te({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oa=jn(Ia),el=te({},Ie,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tl=jn(el),In=[9,13,27,32],Bs=d&&"CompositionEvent"in window,oi=null;d&&"documentMode"in document&&(oi=document.documentMode);var Gl=d&&"TextEvent"in window&&!oi,os=d&&(!Bs||oi&&8<oi&&11>=oi),ra=" ",go=!1;function mo(n,i){switch(n){case"keyup":return In.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ki(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ns=!1;function ls(n,i){switch(n){case"compositionend":return ki(i);case"keypress":return i.which!==32?null:(go=!0,ra);case"textInput":return n=i.data,n===ra&&go?null:n;default:return null}}function cs(n,i){if(Ns)return n==="compositionend"||!Bs&&mo(n,i)?(n=Zo(),Qi=_i=ws=null,Ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return os&&i.locale!=="ko"?null:i.data;default:return null}}var na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function li(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!na[n.type]:i==="textarea"}function ji(n,i,l,p){Xt(p),i=Ql(i,"onChange"),0<i.length&&(l=new fo("onChange","change",null,l,p),n.push({event:l,listeners:i}))}var Ai=null,ci=null;function Br(n){al(n,0)}function Ra(n){var i=Ha(n);if(We(i))return n}function ui(n,i){if(n==="change")return i}var Ms=!1;if(d){var Da;if(d){var Fa="oninput"in document;if(!Fa){var vo=document.createElement("div");vo.setAttribute("oninput","return;"),Fa=typeof vo.oninput=="function"}Da=Fa}else Da=!1;Ms=Da&&(!document.documentMode||9<document.documentMode)}function yo(){Ai&&(Ai.detachEvent("onpropertychange",Ei),ci=Ai=null)}function Ei(n){if(n.propertyName==="value"&&Ra(ci)){var i=[];ji(i,ci,n,vt(n)),xt(Br,i)}}function sa(n,i,l){n==="focusin"?(yo(),Ai=i,ci=l,Ai.attachEvent("onpropertychange",Ei)):n==="focusout"&&yo()}function ia(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ra(ci)}function Ba(n,i){if(n==="click")return Ra(i)}function aa(n,i){if(n==="input"||n==="change")return Ra(i)}function Ma(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Lr=typeof Object.is=="function"?Object.is:Ma;function zn(n,i){if(Lr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),p=Object.keys(i);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var w=l[p];if(!h.call(i,w)||!Lr(n[w],i[w]))return!1}return!0}function Qt(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ar(n,i){var l=Qt(n);n=0;for(var p;l;){if(l.nodeType===3){if(p=n+l.textContent.length,n<=i&&p>=i)return{node:l,offset:i-n};n=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Qt(l)}}function Pr(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Pr(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jr(){for(var n=window,i=qe();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=qe(n.document)}return i}function Us(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function rl(n){var i=Jr(),l=n.focusedElem,p=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Pr(l.ownerDocument.documentElement,l)){if(p!==null&&Us(l)){if(i=p.start,n=p.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var w=l.textContent.length,S=Math.min(p.start,w);p=p.end===void 0?S:Math.min(p.end,w),!n.extend&&S>p&&(w=p,p=S,S=w),w=ar(l,S);var D=ar(l,p);w&&D&&(n.rangeCount!==1||n.anchorNode!==w.node||n.anchorOffset!==w.offset||n.focusNode!==D.node||n.focusOffset!==D.offset)&&(i=i.createRange(),i.setStart(w.node,w.offset),n.removeAllRanges(),S>p?(n.addRange(i),n.extend(D.node,D.offset)):(i.setEnd(D.node,D.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xo=d&&"documentMode"in document&&11>=document.documentMode,Li=null,Kl=null,wo=null,Jl=!1;function Mc(n,i,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Jl||Li==null||Li!==qe(p)||(p=Li,"selectionStart"in p&&Us(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),wo&&zn(wo,p)||(wo=p,p=Ql(Kl,"onSelect"),0<p.length&&(i=new fo("onSelect","select",null,i,l),n.push({event:i,listeners:p}),i.target=Li)))}function nl(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Ua={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},$a={},Uc={};d&&(Uc=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function sl(n){if($a[n])return $a[n];if(!Ua[n])return n;var i=Ua[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Uc)return $a[n]=i[l];return n}var $c=sl("animationend"),qc=sl("animationiteration"),zc=sl("animationstart"),Wc=sl("transitionend"),Hc=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(n,i){Hc.set(n,i),o(i,[n])}for(var bo=0;bo<Vc.length;bo++){var On=Vc[bo],Ss=On.toLowerCase(),Yl=On[0].toUpperCase()+On.slice(1);di(Ss,"on"+Yl)}di($c,"onAnimationEnd"),di(qc,"onAnimationIteration"),di(zc,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(Wc,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function il(n,i,l){var p=n.type||"unknown-event";n.currentTarget=l,ti(p,i,void 0,n),n.currentTarget=null}function al(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var p=n[l],w=p.event;p=p.listeners;e:{var S=void 0;if(i)for(var D=p.length-1;0<=D;D--){var oe=p[D],pe=oe.instance,Ee=oe.currentTarget;if(oe=oe.listener,pe!==S&&w.isPropagationStopped())break e;il(w,oe,Ee),S=pe}else for(D=0;D<p.length;D++){if(oe=p[D],pe=oe.instance,Ee=oe.currentTarget,oe=oe.listener,pe!==S&&w.isPropagationStopped())break e;il(w,oe,Ee),S=pe}}}if(Hr)throw n=wi,Hr=!1,wi=null,n}function cr(n,i){var l=i[Hn];l===void 0&&(l=i[Hn]=new Set);var p=n+"__bubble";l.has(p)||(ol(i,n,2,!1),l.add(p))}function Xl(n,i,l){var p=0;i&&(p|=4),ol(l,n,p,i)}var _o="_reactListening"+Math.random().toString(36).slice(2);function qa(n){if(!n[_o]){n[_o]=!0,s.forEach(function(l){l!=="selectionchange"&&(Du.has(l)||Xl(l,!1,n),Xl(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_o]||(i[_o]=!0,Xl("selectionchange",!1,i))}}function ol(n,i,l,p){switch(La(i)){case 1:var w=Xo;break;case 4:w=Qo;break;default:w=ho}l=w.bind(null,i,l,n),w=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(w=!0),p?w!==void 0?n.addEventListener(i,l,{capture:!0,passive:w}):n.addEventListener(i,l,!0):w!==void 0?n.addEventListener(i,l,{passive:w}):n.addEventListener(i,l,!1)}function ll(n,i,l,p,w){var S=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var oe=p.stateNode.containerInfo;if(oe===w||oe.nodeType===8&&oe.parentNode===w)break;if(D===4)for(D=p.return;D!==null;){var pe=D.tag;if((pe===3||pe===4)&&(pe=D.stateNode.containerInfo,pe===w||pe.nodeType===8&&pe.parentNode===w))return;D=D.return}for(;oe!==null;){if(D=la(oe),D===null)return;if(pe=D.tag,pe===5||pe===6){p=S=D;continue e}oe=oe.parentNode}}p=p.return}xt(function(){var Ee=S,Ue=vt(l),$e=[];e:{var Me=Hc.get(n);if(Me!==void 0){var Ke=fo,tt=n;switch(n){case"keypress":if(Pa(l)===0)break e;case"keydown":case"keyup":Ke=Zi;break;case"focusin":tt="focus",Ke=Tt;break;case"focusout":tt="blur",Ke=Tt;break;case"beforeblur":case"afterblur":Ke=Tt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=Fe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=lt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=xn;break;case $c:case qc:case zc:Ke=jr;break;case Wc:Ke=Oa;break;case"scroll":Ke=O;break;case"wheel":Ke=tl;break;case"copy":case"cut":case"paste":Ke=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=ea}var ot=(i&4)!==0,on=!ot&&n==="scroll",ke=ot?Me!==null?Me+"Capture":null:Me;ot=[];for(var xe=Ee,Ae;xe!==null;){Ae=xe;var ze=Ae.stateNode;if(Ae.tag===5&&ze!==null&&(Ae=ze,ke!==null&&(ze=ts(xe,ke),ze!=null&&ot.push(cl(xe,ze,Ae)))),on)break;xe=xe.return}0<ot.length&&(Me=new Ke(Me,tt,null,l,Ue),$e.push({event:Me,listeners:ot}))}}if((i&7)===0){e:{if(Me=n==="mouseover"||n==="pointerover",Ke=n==="mouseout"||n==="pointerout",Me&&l!==ir&&(tt=l.relatedTarget||l.fromElement)&&(la(tt)||tt[An]))break e;if((Ke||Me)&&(Me=Ue.window===Ue?Ue:(Me=Ue.ownerDocument)?Me.defaultView||Me.parentWindow:window,Ke?(tt=l.relatedTarget||l.toElement,Ke=Ee,tt=tt?la(tt):null,tt!==null&&(on=vn(tt),tt!==on||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(Ke=null,tt=Ee),Ke!==tt)){if(ot=Fe,ze="onMouseLeave",ke="onMouseEnter",xe="mouse",(n==="pointerout"||n==="pointerover")&&(ot=ea,ze="onPointerLeave",ke="onPointerEnter",xe="pointer"),on=Ke==null?Me:Ha(Ke),Ae=tt==null?Me:Ha(tt),Me=new ot(ze,xe+"leave",Ke,l,Ue),Me.target=on,Me.relatedTarget=Ae,ze=null,la(Ue)===Ee&&(ot=new ot(ke,xe+"enter",tt,l,Ue),ot.target=Ae,ot.relatedTarget=on,ze=ot),on=ze,Ke&&tt)t:{for(ot=Ke,ke=tt,xe=0,Ae=ot;Ae;Ae=za(Ae))xe++;for(Ae=0,ze=ke;ze;ze=za(ze))Ae++;for(;0<xe-Ae;)ot=za(ot),xe--;for(;0<Ae-xe;)ke=za(ke),Ae--;for(;xe--;){if(ot===ke||ke!==null&&ot===ke.alternate)break t;ot=za(ot),ke=za(ke)}ot=null}else ot=null;Ke!==null&&Fu($e,Me,Ke,ot,!1),tt!==null&&on!==null&&Fu($e,on,tt,ot,!0)}}e:{if(Me=Ee?Ha(Ee):window,Ke=Me.nodeName&&Me.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Me.type==="file")var ut=ui;else if(li(Me))if(Ms)ut=aa;else{ut=ia;var wt=sa}else(Ke=Me.nodeName)&&Ke.toLowerCase()==="input"&&(Me.type==="checkbox"||Me.type==="radio")&&(ut=Ba);if(ut&&(ut=ut(n,Ee))){ji($e,ut,l,Ue);break e}wt&&wt(n,Me,Ee),n==="focusout"&&(wt=Me._wrapperState)&&wt.controlled&&Me.type==="number"&&Be(Me,"number",Me.value)}switch(wt=Ee?Ha(Ee):window,n){case"focusin":(li(wt)||wt.contentEditable==="true")&&(Li=wt,Kl=Ee,wo=null);break;case"focusout":wo=Kl=Li=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Mc($e,l,Ue);break;case"selectionchange":if(xo)break;case"keydown":case"keyup":Mc($e,l,Ue)}var bt;if(Bs)e:{switch(n){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Ns?mo(n,l)&&(Lt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Lt="onCompositionStart");Lt&&(os&&l.locale!=="ko"&&(Ns||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Ns&&(bt=Zo()):(ws=Ue,_i="value"in ws?ws.value:ws.textContent,Ns=!0)),wt=Ql(Ee,Lt),0<wt.length&&(Lt=new Fr(Lt,n,null,l,Ue),$e.push({event:Lt,listeners:wt}),bt?Lt.data=bt:(bt=ki(l),bt!==null&&(Lt.data=bt)))),(bt=Gl?ls(n,l):cs(n,l))&&(Ee=Ql(Ee,"onBeforeInput"),0<Ee.length&&(Ue=new Fr("onBeforeInput","beforeinput",null,l,Ue),$e.push({event:Ue,listeners:Ee}),Ue.data=bt))}al($e,i)})}function cl(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Ql(n,i){for(var l=i+"Capture",p=[];n!==null;){var w=n,S=w.stateNode;w.tag===5&&S!==null&&(w=S,S=ts(n,l),S!=null&&p.unshift(cl(n,S,w)),S=ts(n,i),S!=null&&p.push(cl(n,S,w))),n=n.return}return p}function za(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Fu(n,i,l,p,w){for(var S=i._reactName,D=[];l!==null&&l!==p;){var oe=l,pe=oe.alternate,Ee=oe.stateNode;if(pe!==null&&pe===p)break;oe.tag===5&&Ee!==null&&(oe=Ee,w?(pe=ts(l,S),pe!=null&&D.unshift(cl(l,pe,oe))):w||(pe=ts(l,S),pe!=null&&D.push(cl(l,pe,oe)))),l=l.return}D.length!==0&&n.push({event:i,listeners:D})}var Jd=/\r\n?/g,Yd=/\u0000|\uFFFD/g;function Bu(n){return(typeof n=="string"?n:""+n).replace(Jd,`
`).replace(Yd,"")}function Zl(n,i,l){if(i=Bu(i),Bu(n)!==i&&l)throw Error(t(425))}function No(){}var ul=null,Wa=null;function Gc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kc=typeof setTimeout=="function"?setTimeout:void 0,Mu=typeof clearTimeout=="function"?clearTimeout:void 0,Uu=typeof Promise=="function"?Promise:void 0,Xd=typeof queueMicrotask=="function"?queueMicrotask:typeof Uu<"u"?function(n){return Uu.resolve(null).then(n).catch(Qd)}:Kc;function Qd(n){setTimeout(function(){throw n})}function Jc(n,i){var l=i,p=0;do{var w=l.nextSibling;if(n.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(p===0){n.removeChild(w),Aa(i);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=w}while(l);Aa(i)}function Rn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function ks(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var Wn=Math.random().toString(36).slice(2),hi="__reactFiber$"+Wn,So="__reactProps$"+Wn,An="__reactContainer$"+Wn,Hn="__reactEvents$"+Wn,Zd="__reactListeners$"+Wn,eh="__reactHandles$"+Wn;function la(n){var i=n[hi];if(i)return i;for(var l=n.parentNode;l;){if(i=l[An]||l[hi]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=ks(n);n!==null;){if(l=n[hi])return l;n=ks(n)}return i}n=l,l=n.parentNode}return null}function ko(n){return n=n[hi]||n[An],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ha(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function dl(n){return n[So]||null}var Yc=[],Pi=-1;function $s(n){return{current:n}}function sr(n){0>Pi||(n.current=Yc[Pi],Yc[Pi]=null,Pi--)}function or(n,i){Pi++,Yc[Pi]=n.current,n.current=i}var ca={},wn=$s(ca),Vn=$s(!1),Va=ca;function jo(n,i){var l=n.type.contextTypes;if(!l)return ca;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===i)return p.__reactInternalMemoizedMaskedChildContext;var w={},S;for(S in l)w[S]=i[S];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=w),w}function Gn(n){return n=n.childContextTypes,n!=null}function ec(){sr(Vn),sr(wn)}function $u(n,i,l){if(wn.current!==ca)throw Error(t(168));or(wn,i),or(Vn,l)}function Xc(n,i,l){var p=n.stateNode;if(i=i.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var w in p)if(!(w in i))throw Error(t(108,re(n)||"Unknown",w));return te({},l,p)}function Ga(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ca,Va=wn.current,or(wn,n),or(Vn,Vn.current),!0}function qu(n,i,l){var p=n.stateNode;if(!p)throw Error(t(169));l?(n=Xc(n,i,Va),p.__reactInternalMemoizedMergedChildContext=n,sr(Vn),sr(wn),or(wn,n)):sr(Vn),or(Vn,l)}var Ci=null,hl=!1,f=!1;function m(n){Ci===null?Ci=[n]:Ci.push(n)}function _(n){hl=!0,m(n)}function k(){if(!f&&Ci!==null){f=!0;var n=0,i=Jt;try{var l=Ci;for(Jt=1;n<l.length;n++){var p=l[n];do p=p(!0);while(p!==null)}Ci=null,hl=!1}catch(w){throw Ci!==null&&(Ci=Ci.slice(n+1)),ya(no,k),w}finally{Jt=i,f=!1}}return null}var I=[],F=0,U=null,W=0,G=[],X=0,fe=null,Se=1,Z="";function ye(n,i){I[F++]=W,I[F++]=U,U=n,W=i}function _e(n,i,l){G[X++]=Se,G[X++]=Z,G[X++]=fe,fe=n;var p=Se;n=Z;var w=32-Vr(p)-1;p&=~(1<<w),l+=1;var S=32-Vr(i)+w;if(30<S){var D=w-w%5;S=(p&(1<<D)-1).toString(32),p>>=D,w-=D,Se=1<<32-Vr(i)+w|l<<w|p,Z=S+n}else Se=1<<S|l<<w|p,Z=n}function Ce(n){n.return!==null&&(ye(n,1),_e(n,1,0))}function je(n){for(;n===U;)U=I[--F],I[F]=null,W=I[--F],I[F]=null;for(;n===fe;)fe=G[--X],G[X]=null,Z=G[--X],G[X]=null,Se=G[--X],G[X]=null}var Le=null,Pe=null,Oe=!1,Re=null;function ct(n,i){var l=vi(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function Je(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Le=n,Pe=Rn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Le=n,Pe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=fe!==null?{id:Se,overflow:Z}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=vi(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,Le=n,Pe=null,!0):!1;default:return!1}}function Ot(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ze(n){if(Oe){var i=Pe;if(i){var l=i;if(!Je(n,i)){if(Ot(n))throw Error(t(418));i=Rn(l.nextSibling);var p=Le;i&&Je(n,i)?ct(p,l):(n.flags=n.flags&-4097|2,Oe=!1,Le=n)}}else{if(Ot(n))throw Error(t(418));n.flags=n.flags&-4097|2,Oe=!1,Le=n}}}function Wt(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Le=n}function Cr(n){if(n!==Le)return!1;if(!Oe)return Wt(n),Oe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Gc(n.type,n.memoizedProps)),i&&(i=Pe)){if(Ot(n))throw Dt(),Error(t(418));for(;i;)ct(n,i),i=Rn(i.nextSibling)}if(Wt(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){Pe=Rn(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}Pe=null}}else Pe=Le?Rn(n.stateNode.nextSibling):null;return!0}function Dt(){for(var n=Pe;n;)n=Rn(n.nextSibling)}function Ye(){Pe=Le=null,Oe=!1}function He(n){Re===null?Re=[n]:Re.push(n)}var Mr=j.ReactCurrentBatchConfig;function kt(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var p=l.stateNode}if(!p)throw Error(t(147,n));var w=p,S=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(D){var oe=w.refs;D===null?delete oe[S]:oe[S]=D},i._stringRef=S,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function zt(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function yr(n){var i=n._init;return i(n._payload)}function dn(n){function i(ke,xe){if(n){var Ae=ke.deletions;Ae===null?(ke.deletions=[xe],ke.flags|=16):Ae.push(xe)}}function l(ke,xe){if(!n)return null;for(;xe!==null;)i(ke,xe),xe=xe.sibling;return null}function p(ke,xe){for(ke=new Map;xe!==null;)xe.key!==null?ke.set(xe.key,xe):ke.set(xe.index,xe),xe=xe.sibling;return ke}function w(ke,xe){return ke=Do(ke,xe),ke.index=0,ke.sibling=null,ke}function S(ke,xe,Ae){return ke.index=Ae,n?(Ae=ke.alternate,Ae!==null?(Ae=Ae.index,Ae<xe?(ke.flags|=2,xe):Ae):(ke.flags|=2,xe)):(ke.flags|=1048576,xe)}function D(ke){return n&&ke.alternate===null&&(ke.flags|=2),ke}function oe(ke,xe,Ae,ze){return xe===null||xe.tag!==6?(xe=Lh(Ae,ke.mode,ze),xe.return=ke,xe):(xe=w(xe,Ae),xe.return=ke,xe)}function pe(ke,xe,Ae,ze){var ut=Ae.type;return ut===le?Ue(ke,xe,Ae.props.children,ze,Ae.key):xe!==null&&(xe.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===ue&&yr(ut)===xe.type)?(ze=w(xe,Ae.props),ze.ref=kt(ke,xe,Ae),ze.return=ke,ze):(ze=ld(Ae.type,Ae.key,Ae.props,null,ke.mode,ze),ze.ref=kt(ke,xe,Ae),ze.return=ke,ze)}function Ee(ke,xe,Ae,ze){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ae.containerInfo||xe.stateNode.implementation!==Ae.implementation?(xe=Ph(Ae,ke.mode,ze),xe.return=ke,xe):(xe=w(xe,Ae.children||[]),xe.return=ke,xe)}function Ue(ke,xe,Ae,ze,ut){return xe===null||xe.tag!==7?(xe=wl(Ae,ke.mode,ze,ut),xe.return=ke,xe):(xe=w(xe,Ae),xe.return=ke,xe)}function $e(ke,xe,Ae){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=Lh(""+xe,ke.mode,Ae),xe.return=ke,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case J:return Ae=ld(xe.type,xe.key,xe.props,null,ke.mode,Ae),Ae.ref=kt(ke,null,xe),Ae.return=ke,Ae;case $:return xe=Ph(xe,ke.mode,Ae),xe.return=ke,xe;case ue:var ze=xe._init;return $e(ke,ze(xe._payload),Ae)}if(ht(xe)||ne(xe))return xe=wl(xe,ke.mode,Ae,null),xe.return=ke,xe;zt(ke,xe)}return null}function Me(ke,xe,Ae,ze){var ut=xe!==null?xe.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return ut!==null?null:oe(ke,xe,""+Ae,ze);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case J:return Ae.key===ut?pe(ke,xe,Ae,ze):null;case $:return Ae.key===ut?Ee(ke,xe,Ae,ze):null;case ue:return ut=Ae._init,Me(ke,xe,ut(Ae._payload),ze)}if(ht(Ae)||ne(Ae))return ut!==null?null:Ue(ke,xe,Ae,ze,null);zt(ke,Ae)}return null}function Ke(ke,xe,Ae,ze,ut){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ke=ke.get(Ae)||null,oe(xe,ke,""+ze,ut);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case J:return ke=ke.get(ze.key===null?Ae:ze.key)||null,pe(xe,ke,ze,ut);case $:return ke=ke.get(ze.key===null?Ae:ze.key)||null,Ee(xe,ke,ze,ut);case ue:var wt=ze._init;return Ke(ke,xe,Ae,wt(ze._payload),ut)}if(ht(ze)||ne(ze))return ke=ke.get(Ae)||null,Ue(xe,ke,ze,ut,null);zt(xe,ze)}return null}function tt(ke,xe,Ae,ze){for(var ut=null,wt=null,bt=xe,Lt=xe=0,Tn=null;bt!==null&&Lt<Ae.length;Lt++){bt.index>Lt?(Tn=bt,bt=null):Tn=bt.sibling;var rr=Me(ke,bt,Ae[Lt],ze);if(rr===null){bt===null&&(bt=Tn);break}n&&bt&&rr.alternate===null&&i(ke,bt),xe=S(rr,xe,Lt),wt===null?ut=rr:wt.sibling=rr,wt=rr,bt=Tn}if(Lt===Ae.length)return l(ke,bt),Oe&&ye(ke,Lt),ut;if(bt===null){for(;Lt<Ae.length;Lt++)bt=$e(ke,Ae[Lt],ze),bt!==null&&(xe=S(bt,xe,Lt),wt===null?ut=bt:wt.sibling=bt,wt=bt);return Oe&&ye(ke,Lt),ut}for(bt=p(ke,bt);Lt<Ae.length;Lt++)Tn=Ke(bt,ke,Lt,Ae[Lt],ze),Tn!==null&&(n&&Tn.alternate!==null&&bt.delete(Tn.key===null?Lt:Tn.key),xe=S(Tn,xe,Lt),wt===null?ut=Tn:wt.sibling=Tn,wt=Tn);return n&&bt.forEach(function(Fo){return i(ke,Fo)}),Oe&&ye(ke,Lt),ut}function ot(ke,xe,Ae,ze){var ut=ne(Ae);if(typeof ut!="function")throw Error(t(150));if(Ae=ut.call(Ae),Ae==null)throw Error(t(151));for(var wt=ut=null,bt=xe,Lt=xe=0,Tn=null,rr=Ae.next();bt!==null&&!rr.done;Lt++,rr=Ae.next()){bt.index>Lt?(Tn=bt,bt=null):Tn=bt.sibling;var Fo=Me(ke,bt,rr.value,ze);if(Fo===null){bt===null&&(bt=Tn);break}n&&bt&&Fo.alternate===null&&i(ke,bt),xe=S(Fo,xe,Lt),wt===null?ut=Fo:wt.sibling=Fo,wt=Fo,bt=Tn}if(rr.done)return l(ke,bt),Oe&&ye(ke,Lt),ut;if(bt===null){for(;!rr.done;Lt++,rr=Ae.next())rr=$e(ke,rr.value,ze),rr!==null&&(xe=S(rr,xe,Lt),wt===null?ut=rr:wt.sibling=rr,wt=rr);return Oe&&ye(ke,Lt),ut}for(bt=p(ke,bt);!rr.done;Lt++,rr=Ae.next())rr=Ke(bt,ke,Lt,rr.value,ze),rr!==null&&(n&&rr.alternate!==null&&bt.delete(rr.key===null?Lt:rr.key),xe=S(rr,xe,Lt),wt===null?ut=rr:wt.sibling=rr,wt=rr);return n&&bt.forEach(function(q1){return i(ke,q1)}),Oe&&ye(ke,Lt),ut}function on(ke,xe,Ae,ze){if(typeof Ae=="object"&&Ae!==null&&Ae.type===le&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case J:e:{for(var ut=Ae.key,wt=xe;wt!==null;){if(wt.key===ut){if(ut=Ae.type,ut===le){if(wt.tag===7){l(ke,wt.sibling),xe=w(wt,Ae.props.children),xe.return=ke,ke=xe;break e}}else if(wt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===ue&&yr(ut)===wt.type){l(ke,wt.sibling),xe=w(wt,Ae.props),xe.ref=kt(ke,wt,Ae),xe.return=ke,ke=xe;break e}l(ke,wt);break}else i(ke,wt);wt=wt.sibling}Ae.type===le?(xe=wl(Ae.props.children,ke.mode,ze,Ae.key),xe.return=ke,ke=xe):(ze=ld(Ae.type,Ae.key,Ae.props,null,ke.mode,ze),ze.ref=kt(ke,xe,Ae),ze.return=ke,ke=ze)}return D(ke);case $:e:{for(wt=Ae.key;xe!==null;){if(xe.key===wt)if(xe.tag===4&&xe.stateNode.containerInfo===Ae.containerInfo&&xe.stateNode.implementation===Ae.implementation){l(ke,xe.sibling),xe=w(xe,Ae.children||[]),xe.return=ke,ke=xe;break e}else{l(ke,xe);break}else i(ke,xe);xe=xe.sibling}xe=Ph(Ae,ke.mode,ze),xe.return=ke,ke=xe}return D(ke);case ue:return wt=Ae._init,on(ke,xe,wt(Ae._payload),ze)}if(ht(Ae))return tt(ke,xe,Ae,ze);if(ne(Ae))return ot(ke,xe,Ae,ze);zt(ke,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,xe!==null&&xe.tag===6?(l(ke,xe.sibling),xe=w(xe,Ae),xe.return=ke,ke=xe):(l(ke,xe),xe=Lh(Ae,ke.mode,ze),xe.return=ke,ke=xe),D(ke)):l(ke,xe)}return on}var Yr=dn(!0),Ar=dn(!1),sn=$s(null),hn=null,_r=null,Vt=null;function Zt(){Vt=_r=hn=null}function Nr(n){var i=sn.current;sr(sn),n._currentValue=i}function er(n,i,l){for(;n!==null;){var p=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),n===l)break;n=n.return}}function Tr(n,i){hn=n,Vt=_r=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(As=!0),n.firstContext=null)}function Ir(n){var i=n._currentValue;if(Vt!==n)if(n={context:n,memoizedValue:i,next:null},_r===null){if(hn===null)throw Error(t(308));_r=n,hn.dependencies={lanes:0,firstContext:n}}else _r=_r.next=n;return i}var ur=null;function En(n){ur===null?ur=[n]:ur.push(n)}function lr(n,i,l,p){var w=i.interleaved;return w===null?(l.next=l,En(i)):(l.next=w.next,w.next=l),i.interleaved=l,dr(n,p)}function dr(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Xr=!1;function bn(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kn(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ur(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function $r(n,i,l){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(tr&2)!==0){var w=p.pending;return w===null?i.next=i:(i.next=w.next,w.next=i),p.pending=i,dr(n,l)}return w=p.interleaved,w===null?(i.next=i,En(p)):(i.next=w.next,w.next=i),p.interleaved=i,dr(n,l)}function Ln(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var p=i.lanes;p&=n.pendingLanes,l|=p,i.lanes=l,ao(n,l)}}function hr(n,i){var l=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var w=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var D={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?w=S=D:S=S.next=D,l=l.next}while(l!==null);S===null?w=S=i:S=S.next=i}else w=S=i;l={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:p.shared,effects:p.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Pn(n,i,l,p){var w=n.updateQueue;Xr=!1;var S=w.firstBaseUpdate,D=w.lastBaseUpdate,oe=w.shared.pending;if(oe!==null){w.shared.pending=null;var pe=oe,Ee=pe.next;pe.next=null,D===null?S=Ee:D.next=Ee,D=pe;var Ue=n.alternate;Ue!==null&&(Ue=Ue.updateQueue,oe=Ue.lastBaseUpdate,oe!==D&&(oe===null?Ue.firstBaseUpdate=Ee:oe.next=Ee,Ue.lastBaseUpdate=pe))}if(S!==null){var $e=w.baseState;D=0,Ue=Ee=pe=null,oe=S;do{var Me=oe.lane,Ke=oe.eventTime;if((p&Me)===Me){Ue!==null&&(Ue=Ue.next={eventTime:Ke,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var tt=n,ot=oe;switch(Me=i,Ke=l,ot.tag){case 1:if(tt=ot.payload,typeof tt=="function"){$e=tt.call(Ke,$e,Me);break e}$e=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=ot.payload,Me=typeof tt=="function"?tt.call(Ke,$e,Me):tt,Me==null)break e;$e=te({},$e,Me);break e;case 2:Xr=!0}}oe.callback!==null&&oe.lane!==0&&(n.flags|=64,Me=w.effects,Me===null?w.effects=[oe]:Me.push(oe))}else Ke={eventTime:Ke,lane:Me,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Ue===null?(Ee=Ue=Ke,pe=$e):Ue=Ue.next=Ke,D|=Me;if(oe=oe.next,oe===null){if(oe=w.shared.pending,oe===null)break;Me=oe,oe=Me.next,Me.next=null,w.lastBaseUpdate=Me,w.shared.pending=null}}while(!0);if(Ue===null&&(pe=$e),w.baseState=pe,w.firstBaseUpdate=Ee,w.lastBaseUpdate=Ue,i=w.shared.interleaved,i!==null){w=i;do D|=w.lane,w=w.next;while(w!==i)}else S===null&&(w.shared.lanes=0);ml|=D,n.lanes=D,n.memoizedState=$e}}function js(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var p=n[i],w=p.callback;if(w!==null){if(p.callback=null,p=l,typeof w!="function")throw Error(t(191,w));w.call(p)}}}var qs={},fn=$s(qs),qr=$s(qs),ua=$s(qs);function Ti(n){if(n===qs)throw Error(t(174));return n}function Ao(n,i){switch(or(ua,i),or(qr,n),or(fn,qs),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=qt(i,n)}sr(fn),or(fn,i)}function fi(){sr(fn),sr(qr),sr(ua)}function zu(n){Ti(ua.current);var i=Ti(fn.current),l=qt(i,n.type);i!==l&&(or(qr,n),or(fn,l))}function Qc(n){qr.current===n&&(sr(fn),sr(qr))}var wr=$s(0);function zs(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zc=[];function eu(){for(var n=0;n<Zc.length;n++)Zc[n]._workInProgressVersionPrimary=null;Zc.length=0}var tc=j.ReactCurrentDispatcher,rc=j.ReactCurrentBatchConfig,pi=0,Sr=null,Qr=null,zr=null,Eo=!1,Ii=!1,Lo=0,th=0;function an(){throw Error(t(321))}function nc(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Lr(n[l],i[l]))return!1;return!0}function fl(n,i,l,p,w,S){if(pi=S,Sr=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,tc.current=n===null||n.memoizedState===null?p1:g1,n=l(p,w),Ii){S=0;do{if(Ii=!1,Lo=0,25<=S)throw Error(t(301));S+=1,zr=Qr=null,i.updateQueue=null,tc.current=m1,n=l(p,w)}while(Ii)}if(tc.current=Ku,i=Qr!==null&&Qr.next!==null,pi=0,zr=Qr=Sr=null,Eo=!1,i)throw Error(t(300));return n}function gi(){var n=Lo!==0;return Lo=0,n}function Ws(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?Sr.memoizedState=zr=n:zr=zr.next=n,zr}function us(){if(Qr===null){var n=Sr.alternate;n=n!==null?n.memoizedState:null}else n=Qr.next;var i=zr===null?Sr.memoizedState:zr.next;if(i!==null)zr=i,Qr=n;else{if(n===null)throw Error(t(310));Qr=n,n={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},zr===null?Sr.memoizedState=zr=n:zr=zr.next=n}return zr}function pl(n,i){return typeof i=="function"?i(n):i}function sc(n){var i=us(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var p=Qr,w=p.baseQueue,S=l.pending;if(S!==null){if(w!==null){var D=w.next;w.next=S.next,S.next=D}p.baseQueue=w=S,l.pending=null}if(w!==null){S=w.next,p=p.baseState;var oe=D=null,pe=null,Ee=S;do{var Ue=Ee.lane;if((pi&Ue)===Ue)pe!==null&&(pe=pe.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),p=Ee.hasEagerState?Ee.eagerState:n(p,Ee.action);else{var $e={lane:Ue,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};pe===null?(oe=pe=$e,D=p):pe=pe.next=$e,Sr.lanes|=Ue,ml|=Ue}Ee=Ee.next}while(Ee!==null&&Ee!==S);pe===null?D=p:pe.next=oe,Lr(p,i.memoizedState)||(As=!0),i.memoizedState=p,i.baseState=D,i.baseQueue=pe,l.lastRenderedState=p}if(n=l.interleaved,n!==null){w=n;do S=w.lane,Sr.lanes|=S,ml|=S,w=w.next;while(w!==n)}else w===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function da(n){var i=us(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var p=l.dispatch,w=l.pending,S=i.memoizedState;if(w!==null){l.pending=null;var D=w=w.next;do S=n(S,D.action),D=D.next;while(D!==w);Lr(S,i.memoizedState)||(As=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),l.lastRenderedState=S}return[S,p]}function Wu(){}function tu(n,i){var l=Sr,p=us(),w=i(),S=!Lr(p.memoizedState,w);if(S&&(p.memoizedState=w,As=!0),p=p.queue,oc(Vu.bind(null,l,p,n),[n]),p.getSnapshot!==i||S||zr!==null&&zr.memoizedState.tag&1){if(l.flags|=2048,ds(9,ru.bind(null,l,p,w,i),void 0,null),Cn===null)throw Error(t(349));(pi&30)!==0||Hu(l,i,w)}return w}function Hu(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Sr.updateQueue,i===null?(i={lastEffect:null,stores:null},Sr.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function ru(n,i,l,p){i.value=l,i.getSnapshot=p,Po(i)&&ic(n)}function Vu(n,i,l){return l(function(){Po(i)&&ic(n)})}function Po(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Lr(n,l)}catch{return!0}}function ic(n){var i=dr(n,1);i!==null&&Bi(i,n,1,-1)}function gl(n){var i=Ws();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:n},i.queue=n,n=n.dispatch=f1.bind(null,Sr,n),[i.memoizedState,n]}function ds(n,i,l,p){return n={tag:n,create:i,destroy:l,deps:p,next:null},i=Sr.updateQueue,i===null?(i={lastEffect:null,stores:null},Sr.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(p=l.next,l.next=n,n.next=p,i.lastEffect=n)),n}function Oi(){return us().memoizedState}function Hs(n,i,l,p){var w=Ws();Sr.flags|=n,w.memoizedState=ds(1|i,l,void 0,p===void 0?null:p)}function Ka(n,i,l,p){var w=us();p=p===void 0?null:p;var S=void 0;if(Qr!==null){var D=Qr.memoizedState;if(S=D.destroy,p!==null&&nc(p,D.deps)){w.memoizedState=ds(i,l,S,p);return}}Sr.flags|=n,w.memoizedState=ds(1|i,l,S,p)}function ac(n,i){return Hs(8390656,8,n,i)}function oc(n,i){return Ka(2048,8,n,i)}function Gu(n,i){return Ka(4,2,n,i)}function lc(n,i){return Ka(4,4,n,i)}function cc(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function sp(n,i,l){return l=l!=null?l.concat([n]):null,Ka(4,4,cc.bind(null,i,n),l)}function rh(){}function ip(n,i){var l=us();i=i===void 0?null:i;var p=l.memoizedState;return p!==null&&i!==null&&nc(i,p[1])?p[0]:(l.memoizedState=[n,i],n)}function ap(n,i){var l=us();i=i===void 0?null:i;var p=l.memoizedState;return p!==null&&i!==null&&nc(i,p[1])?p[0]:(n=n(),l.memoizedState=[n,i],n)}function op(n,i,l){return(pi&21)===0?(n.baseState&&(n.baseState=!1,As=!0),n.memoizedState=l):(Lr(l,i)||(l=Go(),Sr.lanes|=l,ml|=l,n.baseState=!0),i)}function d1(n,i){var l=Jt;Jt=l!==0&&4>l?l:4,n(!0);var p=rc.transition;rc.transition={};try{n(!1),i()}finally{Jt=l,rc.transition=p}}function lp(){return us().memoizedState}function h1(n,i,l){var p=Oo(n);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},cp(n))up(i,l);else if(l=lr(n,i,l,p),l!==null){var w=fs();Bi(l,n,p,w),dp(l,i,p)}}function f1(n,i,l){var p=Oo(n),w={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(cp(n))up(i,w);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var D=i.lastRenderedState,oe=S(D,l);if(w.hasEagerState=!0,w.eagerState=oe,Lr(oe,D)){var pe=i.interleaved;pe===null?(w.next=w,En(i)):(w.next=pe.next,pe.next=w),i.interleaved=w;return}}catch{}finally{}l=lr(n,i,w,p),l!==null&&(w=fs(),Bi(l,n,p,w),dp(l,i,p))}}function cp(n){var i=n.alternate;return n===Sr||i!==null&&i===Sr}function up(n,i){Ii=Eo=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function dp(n,i,l){if((l&4194240)!==0){var p=i.lanes;p&=n.pendingLanes,l|=p,i.lanes=l,ao(n,l)}}var Ku={readContext:Ir,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},p1={readContext:Ir,useCallback:function(n,i){return Ws().memoizedState=[n,i===void 0?null:i],n},useContext:Ir,useEffect:ac,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,Hs(4194308,4,cc.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Hs(4194308,4,n,i)},useInsertionEffect:function(n,i){return Hs(4,2,n,i)},useMemo:function(n,i){var l=Ws();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var p=Ws();return i=l!==void 0?l(i):i,p.memoizedState=p.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},p.queue=n,n=n.dispatch=h1.bind(null,Sr,n),[p.memoizedState,n]},useRef:function(n){var i=Ws();return n={current:n},i.memoizedState=n},useState:gl,useDebugValue:rh,useDeferredValue:function(n){return Ws().memoizedState=n},useTransition:function(){var n=gl(!1),i=n[0];return n=d1.bind(null,n[1]),Ws().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var p=Sr,w=Ws();if(Oe){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Cn===null)throw Error(t(349));(pi&30)!==0||Hu(p,i,l)}w.memoizedState=l;var S={value:l,getSnapshot:i};return w.queue=S,ac(Vu.bind(null,p,S,n),[n]),p.flags|=2048,ds(9,ru.bind(null,p,S,l,i),void 0,null),l},useId:function(){var n=Ws(),i=Cn.identifierPrefix;if(Oe){var l=Z,p=Se;l=(p&~(1<<32-Vr(p)-1)).toString(32)+l,i=":"+i+"R"+l,l=Lo++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=th++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},g1={readContext:Ir,useCallback:ip,useContext:Ir,useEffect:oc,useImperativeHandle:sp,useInsertionEffect:Gu,useLayoutEffect:lc,useMemo:ap,useReducer:sc,useRef:Oi,useState:function(){return sc(pl)},useDebugValue:rh,useDeferredValue:function(n){var i=us();return op(i,Qr.memoizedState,n)},useTransition:function(){var n=sc(pl)[0],i=us().memoizedState;return[n,i]},useMutableSource:Wu,useSyncExternalStore:tu,useId:lp,unstable_isNewReconciler:!1},m1={readContext:Ir,useCallback:ip,useContext:Ir,useEffect:oc,useImperativeHandle:sp,useInsertionEffect:Gu,useLayoutEffect:lc,useMemo:ap,useReducer:da,useRef:Oi,useState:function(){return da(pl)},useDebugValue:rh,useDeferredValue:function(n){var i=us();return Qr===null?i.memoizedState=n:op(i,Qr.memoizedState,n)},useTransition:function(){var n=da(pl)[0],i=us().memoizedState;return[n,i]},useMutableSource:Wu,useSyncExternalStore:tu,useId:lp,unstable_isNewReconciler:!1};function Ri(n,i){if(n&&n.defaultProps){i=te({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function nh(n,i,l,p){i=n.memoizedState,l=l(p,i),l=l==null?i:te({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Ju={isMounted:function(n){return(n=n._reactInternals)?vn(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var p=fs(),w=Oo(n),S=Ur(p,w);S.payload=i,l!=null&&(S.callback=l),i=$r(n,S,w),i!==null&&(Bi(i,n,w,p),Ln(i,n,w))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var p=fs(),w=Oo(n),S=Ur(p,w);S.tag=1,S.payload=i,l!=null&&(S.callback=l),i=$r(n,S,w),i!==null&&(Bi(i,n,w,p),Ln(i,n,w))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=fs(),p=Oo(n),w=Ur(l,p);w.tag=2,i!=null&&(w.callback=i),i=$r(n,w,p),i!==null&&(Bi(i,n,p,l),Ln(i,n,p))}};function hp(n,i,l,p,w,S,D){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,S,D):i.prototype&&i.prototype.isPureReactComponent?!zn(l,p)||!zn(w,S):!0}function fp(n,i,l){var p=!1,w=ca,S=i.contextType;return typeof S=="object"&&S!==null?S=Ir(S):(w=Gn(i)?Va:wn.current,p=i.contextTypes,S=(p=p!=null)?jo(n,w):ca),i=new i(l,S),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ju,n.stateNode=i,i._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=w,n.__reactInternalMemoizedMaskedChildContext=S),i}function pp(n,i,l,p){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,p),i.state!==n&&Ju.enqueueReplaceState(i,i.state,null)}function sh(n,i,l,p){var w=n.stateNode;w.props=l,w.state=n.memoizedState,w.refs={},bn(n);var S=i.contextType;typeof S=="object"&&S!==null?w.context=Ir(S):(S=Gn(i)?Va:wn.current,w.context=jo(n,S)),w.state=n.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(nh(n,i,S,l),w.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(i=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),i!==w.state&&Ju.enqueueReplaceState(w,w.state,null),Pn(n,l,w,p),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308)}function uc(n,i){try{var l="",p=i;do l+=ie(p),p=p.return;while(p);var w=l}catch(S){w=`
Error generating stack: `+S.message+`
`+S.stack}return{value:n,source:i,stack:w,digest:null}}function ih(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function ah(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var v1=typeof WeakMap=="function"?WeakMap:Map;function gp(n,i,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var p=i.value;return l.callback=function(){rd||(rd=!0,bh=p),ah(n,i)},l}function mp(n,i,l){l=Ur(-1,l),l.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var w=i.value;l.payload=function(){return p(w)},l.callback=function(){ah(n,i)}}var S=n.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){ah(n,i),typeof p!="function"&&(To===null?To=new Set([this]):To.add(this));var D=i.stack;this.componentDidCatch(i.value,{componentStack:D!==null?D:""})}),l}function vp(n,i,l){var p=n.pingCache;if(p===null){p=n.pingCache=new v1;var w=new Set;p.set(i,w)}else w=p.get(i),w===void 0&&(w=new Set,p.set(i,w));w.has(l)||(w.add(l),n=C1.bind(null,n,i,l),i.then(n,n))}function yp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function xp(n,i,l,p,w){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Ur(-1,1),i.tag=2,$r(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=w,n)}var y1=j.ReactCurrentOwner,As=!1;function hs(n,i,l,p){i.child=n===null?Ar(i,null,l,p):Yr(i,n.child,l,p)}function wp(n,i,l,p,w){l=l.render;var S=i.ref;return Tr(i,w),p=fl(n,i,l,p,S,w),l=gi(),n!==null&&!As?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~w,Ja(n,i,w)):(Oe&&l&&Ce(i),i.flags|=1,hs(n,i,p,w),i.child)}function bp(n,i,l,p,w){if(n===null){var S=l.type;return typeof S=="function"&&!Eh(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=S,_p(n,i,S,p,w)):(n=ld(l.type,null,p,i,i.mode,w),n.ref=i.ref,n.return=i,i.child=n)}if(S=n.child,(n.lanes&w)===0){var D=S.memoizedProps;if(l=l.compare,l=l!==null?l:zn,l(D,p)&&n.ref===i.ref)return Ja(n,i,w)}return i.flags|=1,n=Do(S,p),n.ref=i.ref,n.return=i,i.child=n}function _p(n,i,l,p,w){if(n!==null){var S=n.memoizedProps;if(zn(S,p)&&n.ref===i.ref)if(As=!1,i.pendingProps=p=S,(n.lanes&w)!==0)(n.flags&131072)!==0&&(As=!0);else return i.lanes=n.lanes,Ja(n,i,w)}return oh(n,i,l,p,w)}function Np(n,i,l){var p=i.pendingProps,w=p.children,S=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(hc,Vs),Vs|=l;else{if((l&1073741824)===0)return n=S!==null?S.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,or(hc,Vs),Vs|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=S!==null?S.baseLanes:l,or(hc,Vs),Vs|=p}else S!==null?(p=S.baseLanes|l,i.memoizedState=null):p=l,or(hc,Vs),Vs|=p;return hs(n,i,w,l),i.child}function Sp(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function oh(n,i,l,p,w){var S=Gn(l)?Va:wn.current;return S=jo(i,S),Tr(i,w),l=fl(n,i,l,p,S,w),p=gi(),n!==null&&!As?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~w,Ja(n,i,w)):(Oe&&p&&Ce(i),i.flags|=1,hs(n,i,l,w),i.child)}function kp(n,i,l,p,w){if(Gn(l)){var S=!0;Ga(i)}else S=!1;if(Tr(i,w),i.stateNode===null)Xu(n,i),fp(i,l,p),sh(i,l,p,w),p=!0;else if(n===null){var D=i.stateNode,oe=i.memoizedProps;D.props=oe;var pe=D.context,Ee=l.contextType;typeof Ee=="object"&&Ee!==null?Ee=Ir(Ee):(Ee=Gn(l)?Va:wn.current,Ee=jo(i,Ee));var Ue=l.getDerivedStateFromProps,$e=typeof Ue=="function"||typeof D.getSnapshotBeforeUpdate=="function";$e||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(oe!==p||pe!==Ee)&&pp(i,D,p,Ee),Xr=!1;var Me=i.memoizedState;D.state=Me,Pn(i,p,D,w),pe=i.memoizedState,oe!==p||Me!==pe||Vn.current||Xr?(typeof Ue=="function"&&(nh(i,l,Ue,p),pe=i.memoizedState),(oe=Xr||hp(i,l,oe,p,Me,pe,Ee))?($e||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(i.flags|=4194308)):(typeof D.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=pe),D.props=p,D.state=pe,D.context=Ee,p=oe):(typeof D.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{D=i.stateNode,Kn(n,i),oe=i.memoizedProps,Ee=i.type===i.elementType?oe:Ri(i.type,oe),D.props=Ee,$e=i.pendingProps,Me=D.context,pe=l.contextType,typeof pe=="object"&&pe!==null?pe=Ir(pe):(pe=Gn(l)?Va:wn.current,pe=jo(i,pe));var Ke=l.getDerivedStateFromProps;(Ue=typeof Ke=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(oe!==$e||Me!==pe)&&pp(i,D,p,pe),Xr=!1,Me=i.memoizedState,D.state=Me,Pn(i,p,D,w);var tt=i.memoizedState;oe!==$e||Me!==tt||Vn.current||Xr?(typeof Ke=="function"&&(nh(i,l,Ke,p),tt=i.memoizedState),(Ee=Xr||hp(i,l,Ee,p,Me,tt,pe)||!1)?(Ue||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,tt,pe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,tt,pe)),typeof D.componentDidUpdate=="function"&&(i.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof D.componentDidUpdate!="function"||oe===n.memoizedProps&&Me===n.memoizedState||(i.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&Me===n.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=tt),D.props=p,D.state=tt,D.context=pe,p=Ee):(typeof D.componentDidUpdate!="function"||oe===n.memoizedProps&&Me===n.memoizedState||(i.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&Me===n.memoizedState||(i.flags|=1024),p=!1)}return lh(n,i,l,p,S,w)}function lh(n,i,l,p,w,S){Sp(n,i);var D=(i.flags&128)!==0;if(!p&&!D)return w&&qu(i,l,!1),Ja(n,i,S);p=i.stateNode,y1.current=i;var oe=D&&typeof l.getDerivedStateFromError!="function"?null:p.render();return i.flags|=1,n!==null&&D?(i.child=Yr(i,n.child,null,S),i.child=Yr(i,null,oe,S)):hs(n,i,oe,S),i.memoizedState=p.state,w&&qu(i,l,!0),i.child}function jp(n){var i=n.stateNode;i.pendingContext?$u(n,i.pendingContext,i.pendingContext!==i.context):i.context&&$u(n,i.context,!1),Ao(n,i.containerInfo)}function Ap(n,i,l,p,w){return Ye(),He(w),i.flags|=256,hs(n,i,l,p),i.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function uh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ep(n,i,l){var p=i.pendingProps,w=wr.current,S=!1,D=(i.flags&128)!==0,oe;if((oe=D)||(oe=n!==null&&n.memoizedState===null?!1:(w&2)!==0),oe?(S=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(w|=1),or(wr,w&1),n===null)return Ze(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(D=p.children,n=p.fallback,S?(p=i.mode,S=i.child,D={mode:"hidden",children:D},(p&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=D):S=cd(D,p,0,null),n=wl(n,p,l,null),S.return=i,n.return=i,S.sibling=n,i.child=S,i.child.memoizedState=uh(l),i.memoizedState=ch,n):dh(i,D));if(w=n.memoizedState,w!==null&&(oe=w.dehydrated,oe!==null))return x1(n,i,D,p,oe,w,l);if(S){S=p.fallback,D=i.mode,w=n.child,oe=w.sibling;var pe={mode:"hidden",children:p.children};return(D&1)===0&&i.child!==w?(p=i.child,p.childLanes=0,p.pendingProps=pe,i.deletions=null):(p=Do(w,pe),p.subtreeFlags=w.subtreeFlags&14680064),oe!==null?S=Do(oe,S):(S=wl(S,D,l,null),S.flags|=2),S.return=i,p.return=i,p.sibling=S,i.child=p,p=S,S=i.child,D=n.child.memoizedState,D=D===null?uh(l):{baseLanes:D.baseLanes|l,cachePool:null,transitions:D.transitions},S.memoizedState=D,S.childLanes=n.childLanes&~l,i.memoizedState=ch,p}return S=n.child,n=S.sibling,p=Do(S,{mode:"visible",children:p.children}),(i.mode&1)===0&&(p.lanes=l),p.return=i,p.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=p,i.memoizedState=null,p}function dh(n,i){return i=cd({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Yu(n,i,l,p){return p!==null&&He(p),Yr(i,n.child,null,l),n=dh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function x1(n,i,l,p,w,S,D){if(l)return i.flags&256?(i.flags&=-257,p=ih(Error(t(422))),Yu(n,i,D,p)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(S=p.fallback,w=i.mode,p=cd({mode:"visible",children:p.children},w,0,null),S=wl(S,w,D,null),S.flags|=2,p.return=i,S.return=i,p.sibling=S,i.child=p,(i.mode&1)!==0&&Yr(i,n.child,null,D),i.child.memoizedState=uh(D),i.memoizedState=ch,S);if((i.mode&1)===0)return Yu(n,i,D,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var oe=p.dgst;return p=oe,S=Error(t(419)),p=ih(S,p,void 0),Yu(n,i,D,p)}if(oe=(D&n.childLanes)!==0,As||oe){if(p=Cn,p!==null){switch(D&-D){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|D))!==0?0:w,w!==0&&w!==S.retryLane&&(S.retryLane=w,dr(n,w),Bi(p,n,w,-1))}return Ah(),p=ih(Error(t(421))),Yu(n,i,D,p)}return w.data==="$?"?(i.flags|=128,i.child=n.child,i=T1.bind(null,n),w._reactRetry=i,null):(n=S.treeContext,Pe=Rn(w.nextSibling),Le=i,Oe=!0,Re=null,n!==null&&(G[X++]=Se,G[X++]=Z,G[X++]=fe,Se=n.id,Z=n.overflow,fe=i),i=dh(i,p.children),i.flags|=4096,i)}function Lp(n,i,l){n.lanes|=i;var p=n.alternate;p!==null&&(p.lanes|=i),er(n.return,i,l)}function hh(n,i,l,p,w){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:w}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=p,S.tail=l,S.tailMode=w)}function Pp(n,i,l){var p=i.pendingProps,w=p.revealOrder,S=p.tail;if(hs(n,i,p.children,l),p=wr.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Lp(n,l,i);else if(n.tag===19)Lp(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(or(wr,p),(i.mode&1)===0)i.memoizedState=null;else switch(w){case"forwards":for(l=i.child,w=null;l!==null;)n=l.alternate,n!==null&&zs(n)===null&&(w=l),l=l.sibling;l=w,l===null?(w=i.child,i.child=null):(w=l.sibling,l.sibling=null),hh(i,!1,w,l,S);break;case"backwards":for(l=null,w=i.child,i.child=null;w!==null;){if(n=w.alternate,n!==null&&zs(n)===null){i.child=w;break}n=w.sibling,w.sibling=l,l=w,w=n}hh(i,!0,l,null,S);break;case"together":hh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ja(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),ml|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=Do(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Do(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function w1(n,i,l){switch(i.tag){case 3:jp(i),Ye();break;case 5:zu(i);break;case 1:Gn(i.type)&&Ga(i);break;case 4:Ao(i,i.stateNode.containerInfo);break;case 10:var p=i.type._context,w=i.memoizedProps.value;or(sn,p._currentValue),p._currentValue=w;break;case 13:if(p=i.memoizedState,p!==null)return p.dehydrated!==null?(or(wr,wr.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Ep(n,i,l):(or(wr,wr.current&1),n=Ja(n,i,l),n!==null?n.sibling:null);or(wr,wr.current&1);break;case 19:if(p=(l&i.childLanes)!==0,(n.flags&128)!==0){if(p)return Pp(n,i,l);i.flags|=128}if(w=i.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),or(wr,wr.current),p)break;return null;case 22:case 23:return i.lanes=0,Np(n,i,l)}return Ja(n,i,l)}var Cp,fh,Tp,Ip;Cp=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},fh=function(){},Tp=function(n,i,l,p){var w=n.memoizedProps;if(w!==p){n=i.stateNode,Ti(fn.current);var S=null;switch(l){case"input":w=it(n,w),p=it(n,p),S=[];break;case"select":w=te({},w,{value:void 0}),p=te({},p,{value:void 0}),S=[];break;case"textarea":w=gt(n,w),p=gt(n,p),S=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=No)}gr(l,p);var D;l=null;for(Ee in w)if(!p.hasOwnProperty(Ee)&&w.hasOwnProperty(Ee)&&w[Ee]!=null)if(Ee==="style"){var oe=w[Ee];for(D in oe)oe.hasOwnProperty(D)&&(l||(l={}),l[D]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(a.hasOwnProperty(Ee)?S||(S=[]):(S=S||[]).push(Ee,null));for(Ee in p){var pe=p[Ee];if(oe=w!=null?w[Ee]:void 0,p.hasOwnProperty(Ee)&&pe!==oe&&(pe!=null||oe!=null))if(Ee==="style")if(oe){for(D in oe)!oe.hasOwnProperty(D)||pe&&pe.hasOwnProperty(D)||(l||(l={}),l[D]="");for(D in pe)pe.hasOwnProperty(D)&&oe[D]!==pe[D]&&(l||(l={}),l[D]=pe[D])}else l||(S||(S=[]),S.push(Ee,l)),l=pe;else Ee==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,oe=oe?oe.__html:void 0,pe!=null&&oe!==pe&&(S=S||[]).push(Ee,pe)):Ee==="children"?typeof pe!="string"&&typeof pe!="number"||(S=S||[]).push(Ee,""+pe):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ee)?(pe!=null&&Ee==="onScroll"&&cr("scroll",n),S||oe===pe||(S=[])):(S=S||[]).push(Ee,pe))}l&&(S=S||[]).push("style",l);var Ee=S;(i.updateQueue=Ee)&&(i.flags|=4)}},Ip=function(n,i,l,p){l!==p&&(i.flags|=4)};function nu(n,i){if(!Oe)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Jn(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,p=0;if(i)for(var w=n.child;w!==null;)l|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=n,w=w.sibling;else for(w=n.child;w!==null;)l|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=n,w=w.sibling;return n.subtreeFlags|=p,n.childLanes=l,i}function b1(n,i,l){var p=i.pendingProps;switch(je(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(i),null;case 1:return Gn(i.type)&&ec(),Jn(i),null;case 3:return p=i.stateNode,fi(),sr(Vn),sr(wn),eu(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Cr(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Re!==null&&(Sh(Re),Re=null))),fh(n,i),Jn(i),null;case 5:Qc(i);var w=Ti(ua.current);if(l=i.type,n!==null&&i.stateNode!=null)Tp(n,i,l,p,w),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(i.stateNode===null)throw Error(t(166));return Jn(i),null}if(n=Ti(fn.current),Cr(i)){p=i.stateNode,l=i.type;var S=i.memoizedProps;switch(p[hi]=i,p[So]=S,n=(i.mode&1)!==0,l){case"dialog":cr("cancel",p),cr("close",p);break;case"iframe":case"object":case"embed":cr("load",p);break;case"video":case"audio":for(w=0;w<oa.length;w++)cr(oa[w],p);break;case"source":cr("error",p);break;case"img":case"image":case"link":cr("error",p),cr("load",p);break;case"details":cr("toggle",p);break;case"input":Q(p,S),cr("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!S.multiple},cr("invalid",p);break;case"textarea":ft(p,S),cr("invalid",p)}gr(l,S),w=null;for(var D in S)if(S.hasOwnProperty(D)){var oe=S[D];D==="children"?typeof oe=="string"?p.textContent!==oe&&(S.suppressHydrationWarning!==!0&&Zl(p.textContent,oe,n),w=["children",oe]):typeof oe=="number"&&p.textContent!==""+oe&&(S.suppressHydrationWarning!==!0&&Zl(p.textContent,oe,n),w=["children",""+oe]):a.hasOwnProperty(D)&&oe!=null&&D==="onScroll"&&cr("scroll",p)}switch(l){case"input":De(p),mt(p,S,!0);break;case"textarea":De(p),$t(p);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(p.onclick=No)}p=w,i.updateQueue=p,p!==null&&(i.flags|=4)}else{D=w.nodeType===9?w:w.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ct(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=D.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=D.createElement(l,{is:p.is}):(n=D.createElement(l),l==="select"&&(D=n,p.multiple?D.multiple=!0:p.size&&(D.size=p.size))):n=D.createElementNS(n,l),n[hi]=i,n[So]=p,Cp(n,i,!1,!1),i.stateNode=n;e:{switch(D=pt(l,p),l){case"dialog":cr("cancel",n),cr("close",n),w=p;break;case"iframe":case"object":case"embed":cr("load",n),w=p;break;case"video":case"audio":for(w=0;w<oa.length;w++)cr(oa[w],n);w=p;break;case"source":cr("error",n),w=p;break;case"img":case"image":case"link":cr("error",n),cr("load",n),w=p;break;case"details":cr("toggle",n),w=p;break;case"input":Q(n,p),w=it(n,p),cr("invalid",n);break;case"option":w=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},w=te({},p,{value:void 0}),cr("invalid",n);break;case"textarea":ft(n,p),w=gt(n,p),cr("invalid",n);break;default:w=p}gr(l,w),oe=w;for(S in oe)if(oe.hasOwnProperty(S)){var pe=oe[S];S==="style"?Bt(n,pe):S==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,pe!=null&&at(n,pe)):S==="children"?typeof pe=="string"?(l!=="textarea"||pe!=="")&&jt(n,pe):typeof pe=="number"&&jt(n,""+pe):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(a.hasOwnProperty(S)?pe!=null&&S==="onScroll"&&cr("scroll",n):pe!=null&&C(n,S,pe,D))}switch(l){case"input":De(n),mt(n,p,!1);break;case"textarea":De(n),$t(n);break;case"option":p.value!=null&&n.setAttribute("value",""+he(p.value));break;case"select":n.multiple=!!p.multiple,S=p.value,S!=null?Ge(n,!!p.multiple,S,!1):p.defaultValue!=null&&Ge(n,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(n.onclick=No)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Jn(i),null;case 6:if(n&&i.stateNode!=null)Ip(n,i,n.memoizedProps,p);else{if(typeof p!="string"&&i.stateNode===null)throw Error(t(166));if(l=Ti(ua.current),Ti(fn.current),Cr(i)){if(p=i.stateNode,l=i.memoizedProps,p[hi]=i,(S=p.nodeValue!==l)&&(n=Le,n!==null))switch(n.tag){case 3:Zl(p.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Zl(p.nodeValue,l,(n.mode&1)!==0)}S&&(i.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[hi]=i,i.stateNode=p}return Jn(i),null;case 13:if(sr(wr),p=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Oe&&Pe!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Dt(),Ye(),i.flags|=98560,S=!1;else if(S=Cr(i),p!==null&&p.dehydrated!==null){if(n===null){if(!S)throw Error(t(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[hi]=i}else Ye(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Jn(i),S=!1}else Re!==null&&(Sh(Re),Re=null),S=!0;if(!S)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(wr.current&1)!==0?_n===0&&(_n=3):Ah())),i.updateQueue!==null&&(i.flags|=4),Jn(i),null);case 4:return fi(),fh(n,i),n===null&&qa(i.stateNode.containerInfo),Jn(i),null;case 10:return Nr(i.type._context),Jn(i),null;case 17:return Gn(i.type)&&ec(),Jn(i),null;case 19:if(sr(wr),S=i.memoizedState,S===null)return Jn(i),null;if(p=(i.flags&128)!==0,D=S.rendering,D===null)if(p)nu(S,!1);else{if(_n!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(D=zs(n),D!==null){for(i.flags|=128,nu(S,!1),p=D.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),i.subtreeFlags=0,p=l,l=i.child;l!==null;)S=l,n=p,S.flags&=14680066,D=S.alternate,D===null?(S.childLanes=0,S.lanes=n,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=D.childLanes,S.lanes=D.lanes,S.child=D.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=D.memoizedProps,S.memoizedState=D.memoizedState,S.updateQueue=D.updateQueue,S.type=D.type,n=D.dependencies,S.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return or(wr,wr.current&1|2),i.child}n=n.sibling}S.tail!==null&&xr()>fc&&(i.flags|=128,p=!0,nu(S,!1),i.lanes=4194304)}else{if(!p)if(n=zs(D),n!==null){if(i.flags|=128,p=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),nu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!D.alternate&&!Oe)return Jn(i),null}else 2*xr()-S.renderingStartTime>fc&&l!==1073741824&&(i.flags|=128,p=!0,nu(S,!1),i.lanes=4194304);S.isBackwards?(D.sibling=i.child,i.child=D):(l=S.last,l!==null?l.sibling=D:i.child=D,S.last=D)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=xr(),i.sibling=null,l=wr.current,or(wr,p?l&1|2:l&1),i):(Jn(i),null);case 22:case 23:return jh(),p=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(i.flags|=8192),p&&(i.mode&1)!==0?(Vs&1073741824)!==0&&(Jn(i),i.subtreeFlags&6&&(i.flags|=8192)):Jn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function _1(n,i){switch(je(i),i.tag){case 1:return Gn(i.type)&&ec(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return fi(),sr(Vn),sr(wn),eu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Qc(i),null;case 13:if(sr(wr),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ye()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return sr(wr),null;case 4:return fi(),null;case 10:return Nr(i.type._context),null;case 22:case 23:return jh(),null;case 24:return null;default:return null}}var Qu=!1,Yn=!1,N1=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function dc(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){Zr(n,i,p)}else l.current=null}function ph(n,i,l){try{l()}catch(p){Zr(n,i,p)}}var Op=!1;function S1(n,i){if(ul=uo,n=Jr(),Us(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var w=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var D=0,oe=-1,pe=-1,Ee=0,Ue=0,$e=n,Me=null;t:for(;;){for(var Ke;$e!==l||w!==0&&$e.nodeType!==3||(oe=D+w),$e!==S||p!==0&&$e.nodeType!==3||(pe=D+p),$e.nodeType===3&&(D+=$e.nodeValue.length),(Ke=$e.firstChild)!==null;)Me=$e,$e=Ke;for(;;){if($e===n)break t;if(Me===l&&++Ee===w&&(oe=D),Me===S&&++Ue===p&&(pe=D),(Ke=$e.nextSibling)!==null)break;$e=Me,Me=$e.parentNode}$e=Ke}l=oe===-1||pe===-1?null:{start:oe,end:pe}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wa={focusedElem:n,selectionRange:l},uo=!1,Xe=i;Xe!==null;)if(i=Xe,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Xe=n;else for(;Xe!==null;){i=Xe;try{var tt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var ot=tt.memoizedProps,on=tt.memoizedState,ke=i.stateNode,xe=ke.getSnapshotBeforeUpdate(i.elementType===i.type?ot:Ri(i.type,ot),on);ke.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:var Ae=i.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ze){Zr(i,i.return,ze)}if(n=i.sibling,n!==null){n.return=i.return,Xe=n;break}Xe=i.return}return tt=Op,Op=!1,tt}function su(n,i,l){var p=i.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&n)===n){var S=w.destroy;w.destroy=void 0,S!==void 0&&ph(i,l,S)}w=w.next}while(w!==p)}}function Zu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var p=l.create;l.destroy=p()}l=l.next}while(l!==i)}}function gh(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function Rp(n){var i=n.alternate;i!==null&&(n.alternate=null,Rp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[hi],delete i[So],delete i[Hn],delete i[Zd],delete i[eh])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Dp(n){return n.tag===5||n.tag===3||n.tag===4}function Fp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mh(n,i,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=No));else if(p!==4&&(n=n.child,n!==null))for(mh(n,i,l),n=n.sibling;n!==null;)mh(n,i,l),n=n.sibling}function vh(n,i,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(vh(n,i,l),n=n.sibling;n!==null;)vh(n,i,l),n=n.sibling}var Dn=null,Di=!1;function Co(n,i,l){for(l=l.child;l!==null;)Bp(n,i,l),l=l.sibling}function Bp(n,i,l){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(wa,l)}catch{}switch(l.tag){case 5:Yn||dc(l,i);case 6:var p=Dn,w=Di;Dn=null,Co(n,i,l),Dn=p,Di=w,Dn!==null&&(Di?(n=Dn,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Dn.removeChild(l.stateNode));break;case 18:Dn!==null&&(Di?(n=Dn,l=l.stateNode,n.nodeType===8?Jc(n.parentNode,l):n.nodeType===1&&Jc(n,l),Aa(n)):Jc(Dn,l.stateNode));break;case 4:p=Dn,w=Di,Dn=l.stateNode.containerInfo,Di=!0,Co(n,i,l),Dn=p,Di=w;break;case 0:case 11:case 14:case 15:if(!Yn&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var S=w,D=S.destroy;S=S.tag,D!==void 0&&((S&2)!==0||(S&4)!==0)&&ph(l,i,D),w=w.next}while(w!==p)}Co(n,i,l);break;case 1:if(!Yn&&(dc(l,i),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(oe){Zr(l,i,oe)}Co(n,i,l);break;case 21:Co(n,i,l);break;case 22:l.mode&1?(Yn=(p=Yn)||l.memoizedState!==null,Co(n,i,l),Yn=p):Co(n,i,l);break;default:Co(n,i,l)}}function Mp(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new N1),i.forEach(function(p){var w=I1.bind(null,n,p);l.has(p)||(l.add(p),p.then(w,w))})}}function Fi(n,i){var l=i.deletions;if(l!==null)for(var p=0;p<l.length;p++){var w=l[p];try{var S=n,D=i,oe=D;e:for(;oe!==null;){switch(oe.tag){case 5:Dn=oe.stateNode,Di=!1;break e;case 3:Dn=oe.stateNode.containerInfo,Di=!0;break e;case 4:Dn=oe.stateNode.containerInfo,Di=!0;break e}oe=oe.return}if(Dn===null)throw Error(t(160));Bp(S,D,w),Dn=null,Di=!1;var pe=w.alternate;pe!==null&&(pe.return=null),w.return=null}catch(Ee){Zr(w,i,Ee)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Up(i,n),i=i.sibling}function Up(n,i){var l=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fi(i,n),ha(n),p&4){try{su(3,n,n.return),Zu(3,n)}catch(ot){Zr(n,n.return,ot)}try{su(5,n,n.return)}catch(ot){Zr(n,n.return,ot)}}break;case 1:Fi(i,n),ha(n),p&512&&l!==null&&dc(l,l.return);break;case 5:if(Fi(i,n),ha(n),p&512&&l!==null&&dc(l,l.return),n.flags&32){var w=n.stateNode;try{jt(w,"")}catch(ot){Zr(n,n.return,ot)}}if(p&4&&(w=n.stateNode,w!=null)){var S=n.memoizedProps,D=l!==null?l.memoizedProps:S,oe=n.type,pe=n.updateQueue;if(n.updateQueue=null,pe!==null)try{oe==="input"&&S.type==="radio"&&S.name!=null&&Ve(w,S),pt(oe,D);var Ee=pt(oe,S);for(D=0;D<pe.length;D+=2){var Ue=pe[D],$e=pe[D+1];Ue==="style"?Bt(w,$e):Ue==="dangerouslySetInnerHTML"?at(w,$e):Ue==="children"?jt(w,$e):C(w,Ue,$e,Ee)}switch(oe){case"input":Rt(w,S);break;case"textarea":Yt(w,S);break;case"select":var Me=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!S.multiple;var Ke=S.value;Ke!=null?Ge(w,!!S.multiple,Ke,!1):Me!==!!S.multiple&&(S.defaultValue!=null?Ge(w,!!S.multiple,S.defaultValue,!0):Ge(w,!!S.multiple,S.multiple?[]:"",!1))}w[So]=S}catch(ot){Zr(n,n.return,ot)}}break;case 6:if(Fi(i,n),ha(n),p&4){if(n.stateNode===null)throw Error(t(162));w=n.stateNode,S=n.memoizedProps;try{w.nodeValue=S}catch(ot){Zr(n,n.return,ot)}}break;case 3:if(Fi(i,n),ha(n),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Aa(i.containerInfo)}catch(ot){Zr(n,n.return,ot)}break;case 4:Fi(i,n),ha(n);break;case 13:Fi(i,n),ha(n),w=n.child,w.flags&8192&&(S=w.memoizedState!==null,w.stateNode.isHidden=S,!S||w.alternate!==null&&w.alternate.memoizedState!==null||(wh=xr())),p&4&&Mp(n);break;case 22:if(Ue=l!==null&&l.memoizedState!==null,n.mode&1?(Yn=(Ee=Yn)||Ue,Fi(i,n),Yn=Ee):Fi(i,n),ha(n),p&8192){if(Ee=n.memoizedState!==null,(n.stateNode.isHidden=Ee)&&!Ue&&(n.mode&1)!==0)for(Xe=n,Ue=n.child;Ue!==null;){for($e=Xe=Ue;Xe!==null;){switch(Me=Xe,Ke=Me.child,Me.tag){case 0:case 11:case 14:case 15:su(4,Me,Me.return);break;case 1:dc(Me,Me.return);var tt=Me.stateNode;if(typeof tt.componentWillUnmount=="function"){p=Me,l=Me.return;try{i=p,tt.props=i.memoizedProps,tt.state=i.memoizedState,tt.componentWillUnmount()}catch(ot){Zr(p,l,ot)}}break;case 5:dc(Me,Me.return);break;case 22:if(Me.memoizedState!==null){zp($e);continue}}Ke!==null?(Ke.return=Me,Xe=Ke):zp($e)}Ue=Ue.sibling}e:for(Ue=null,$e=n;;){if($e.tag===5){if(Ue===null){Ue=$e;try{w=$e.stateNode,Ee?(S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(oe=$e.stateNode,pe=$e.memoizedProps.style,D=pe!=null&&pe.hasOwnProperty("display")?pe.display:null,oe.style.display=Gt("display",D))}catch(ot){Zr(n,n.return,ot)}}}else if($e.tag===6){if(Ue===null)try{$e.stateNode.nodeValue=Ee?"":$e.memoizedProps}catch(ot){Zr(n,n.return,ot)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===n)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===n)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===n)break e;Ue===$e&&(Ue=null),$e=$e.return}Ue===$e&&(Ue=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:Fi(i,n),ha(n),p&4&&Mp(n);break;case 21:break;default:Fi(i,n),ha(n)}}function ha(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(Dp(l)){var p=l;break e}l=l.return}throw Error(t(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(jt(w,""),p.flags&=-33);var S=Fp(n);vh(n,S,w);break;case 3:case 4:var D=p.stateNode.containerInfo,oe=Fp(n);mh(n,oe,D);break;default:throw Error(t(161))}}catch(pe){Zr(n,n.return,pe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function k1(n,i,l){Xe=n,$p(n)}function $p(n,i,l){for(var p=(n.mode&1)!==0;Xe!==null;){var w=Xe,S=w.child;if(w.tag===22&&p){var D=w.memoizedState!==null||Qu;if(!D){var oe=w.alternate,pe=oe!==null&&oe.memoizedState!==null||Yn;oe=Qu;var Ee=Yn;if(Qu=D,(Yn=pe)&&!Ee)for(Xe=w;Xe!==null;)D=Xe,pe=D.child,D.tag===22&&D.memoizedState!==null?Wp(w):pe!==null?(pe.return=D,Xe=pe):Wp(w);for(;S!==null;)Xe=S,$p(S),S=S.sibling;Xe=w,Qu=oe,Yn=Ee}qp(n)}else(w.subtreeFlags&8772)!==0&&S!==null?(S.return=w,Xe=S):qp(n)}}function qp(n){for(;Xe!==null;){var i=Xe;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Yn||Zu(5,i);break;case 1:var p=i.stateNode;if(i.flags&4&&!Yn)if(l===null)p.componentDidMount();else{var w=i.elementType===i.type?l.memoizedProps:Ri(i.type,l.memoizedProps);p.componentDidUpdate(w,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&js(i,S,p);break;case 3:var D=i.updateQueue;if(D!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}js(i,D,l)}break;case 5:var oe=i.stateNode;if(l===null&&i.flags&4){l=oe;var pe=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":pe.autoFocus&&l.focus();break;case"img":pe.src&&(l.src=pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Ee=i.alternate;if(Ee!==null){var Ue=Ee.memoizedState;if(Ue!==null){var $e=Ue.dehydrated;$e!==null&&Aa($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yn||i.flags&512&&gh(i)}catch(Me){Zr(i,i.return,Me)}}if(i===n){Xe=null;break}if(l=i.sibling,l!==null){l.return=i.return,Xe=l;break}Xe=i.return}}function zp(n){for(;Xe!==null;){var i=Xe;if(i===n){Xe=null;break}var l=i.sibling;if(l!==null){l.return=i.return,Xe=l;break}Xe=i.return}}function Wp(n){for(;Xe!==null;){var i=Xe;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Zu(4,i)}catch(pe){Zr(i,l,pe)}break;case 1:var p=i.stateNode;if(typeof p.componentDidMount=="function"){var w=i.return;try{p.componentDidMount()}catch(pe){Zr(i,w,pe)}}var S=i.return;try{gh(i)}catch(pe){Zr(i,S,pe)}break;case 5:var D=i.return;try{gh(i)}catch(pe){Zr(i,D,pe)}}}catch(pe){Zr(i,i.return,pe)}if(i===n){Xe=null;break}var oe=i.sibling;if(oe!==null){oe.return=i.return,Xe=oe;break}Xe=i.return}}var j1=Math.ceil,ed=j.ReactCurrentDispatcher,yh=j.ReactCurrentOwner,mi=j.ReactCurrentBatchConfig,tr=0,Cn=null,pn=null,Fn=0,Vs=0,hc=$s(0),_n=0,iu=null,ml=0,td=0,xh=0,au=null,Es=null,wh=0,fc=1/0,Ya=null,rd=!1,bh=null,To=null,nd=!1,Io=null,sd=0,ou=0,_h=null,id=-1,ad=0;function fs(){return(tr&6)!==0?xr():id!==-1?id:id=xr()}function Oo(n){return(n.mode&1)===0?1:(tr&2)!==0&&Fn!==0?Fn&-Fn:Mr.transition!==null?(ad===0&&(ad=Go()),ad):(n=Jt,n!==0||(n=window.event,n=n===void 0?16:La(n.type)),n)}function Bi(n,i,l,p){if(50<ou)throw ou=0,_h=null,Error(t(185));Na(n,l,p),((tr&2)===0||n!==Cn)&&(n===Cn&&((tr&2)===0&&(td|=l),_n===4&&Ro(n,Fn)),Ls(n,p),l===1&&tr===0&&(i.mode&1)===0&&(fc=xr()+500,hl&&k()))}function Ls(n,i){var l=n.callbackNode;rn(n,i);var p=_a(n,n===Cn?Fn:0);if(p===0)l!==null&&xa(l),n.callbackNode=null,n.callbackPriority=0;else if(i=p&-p,n.callbackPriority!==i){if(l!=null&&xa(l),i===1)n.tag===0?_(Vp.bind(null,n)):m(Vp.bind(null,n)),Xd(function(){(tr&6)===0&&k()}),l=null;else{switch(Sa(p)){case 1:l=no;break;case 4:l=ns;break;case 16:l=Yi;break;case 536870912:l=so;break;default:l=Yi}l=e0(l,Hp.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Hp(n,i){if(id=-1,ad=0,(tr&6)!==0)throw Error(t(327));var l=n.callbackNode;if(pc()&&n.callbackNode!==l)return null;var p=_a(n,n===Cn?Fn:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||i)i=od(n,p);else{i=p;var w=tr;tr|=2;var S=Kp();(Cn!==n||Fn!==i)&&(Ya=null,fc=xr()+500,yl(n,i));do try{L1();break}catch(oe){Gp(n,oe)}while(!0);Zt(),ed.current=S,tr=w,pn!==null?i=0:(Cn=null,Fn=0,i=_n)}if(i!==0){if(i===2&&(w=Rs(n),w!==0&&(p=w,i=Nh(n,w))),i===1)throw l=iu,yl(n,0),Ro(n,p),Ls(n,xr()),l;if(i===6)Ro(n,p);else{if(w=n.current.alternate,(p&30)===0&&!A1(w)&&(i=od(n,p),i===2&&(S=Rs(n),S!==0&&(p=S,i=Nh(n,S))),i===1))throw l=iu,yl(n,0),Ro(n,p),Ls(n,xr()),l;switch(n.finishedWork=w,n.finishedLanes=p,i){case 0:case 1:throw Error(t(345));case 2:xl(n,Es,Ya);break;case 3:if(Ro(n,p),(p&130023424)===p&&(i=wh+500-xr(),10<i)){if(_a(n,0)!==0)break;if(w=n.suspendedLanes,(w&p)!==p){fs(),n.pingedLanes|=n.suspendedLanes&w;break}n.timeoutHandle=Kc(xl.bind(null,n,Es,Ya),i);break}xl(n,Es,Ya);break;case 4:if(Ro(n,p),(p&4194240)===p)break;for(i=n.eventTimes,w=-1;0<p;){var D=31-Vr(p);S=1<<D,D=i[D],D>w&&(w=D),p&=~S}if(p=w,p=xr()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*j1(p/1960))-p,10<p){n.timeoutHandle=Kc(xl.bind(null,n,Es,Ya),p);break}xl(n,Es,Ya);break;case 5:xl(n,Es,Ya);break;default:throw Error(t(329))}}}return Ls(n,xr()),n.callbackNode===l?Hp.bind(null,n):null}function Nh(n,i){var l=au;return n.current.memoizedState.isDehydrated&&(yl(n,i).flags|=256),n=od(n,i),n!==2&&(i=Es,Es=l,i!==null&&Sh(i)),n}function Sh(n){Es===null?Es=n:Es.push.apply(Es,n)}function A1(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var w=l[p],S=w.getSnapshot;w=w.value;try{if(!Lr(S(),w))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ro(n,i){for(i&=~xh,i&=~td,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Vr(i),p=1<<l;n[l]=-1,i&=~p}}function Vp(n){if((tr&6)!==0)throw Error(t(327));pc();var i=_a(n,0);if((i&1)===0)return Ls(n,xr()),null;var l=od(n,i);if(n.tag!==0&&l===2){var p=Rs(n);p!==0&&(i=p,l=Nh(n,p))}if(l===1)throw l=iu,yl(n,0),Ro(n,i),Ls(n,xr()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,xl(n,Es,Ya),Ls(n,xr()),null}function kh(n,i){var l=tr;tr|=1;try{return n(i)}finally{tr=l,tr===0&&(fc=xr()+500,hl&&k())}}function vl(n){Io!==null&&Io.tag===0&&(tr&6)===0&&pc();var i=tr;tr|=1;var l=mi.transition,p=Jt;try{if(mi.transition=null,Jt=1,n)return n()}finally{Jt=p,mi.transition=l,tr=i,(tr&6)===0&&k()}}function jh(){Vs=hc.current,sr(hc)}function yl(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,Mu(l)),pn!==null)for(l=pn.return;l!==null;){var p=l;switch(je(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ec();break;case 3:fi(),sr(Vn),sr(wn),eu();break;case 5:Qc(p);break;case 4:fi();break;case 13:sr(wr);break;case 19:sr(wr);break;case 10:Nr(p.type._context);break;case 22:case 23:jh()}l=l.return}if(Cn=n,pn=n=Do(n.current,null),Fn=Vs=i,_n=0,iu=null,xh=td=ml=0,Es=au=null,ur!==null){for(i=0;i<ur.length;i++)if(l=ur[i],p=l.interleaved,p!==null){l.interleaved=null;var w=p.next,S=l.pending;if(S!==null){var D=S.next;S.next=w,p.next=D}l.pending=p}ur=null}return n}function Gp(n,i){do{var l=pn;try{if(Zt(),tc.current=Ku,Eo){for(var p=Sr.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}Eo=!1}if(pi=0,zr=Qr=Sr=null,Ii=!1,Lo=0,yh.current=null,l===null||l.return===null){_n=1,iu=i,pn=null;break}e:{var S=n,D=l.return,oe=l,pe=i;if(i=Fn,oe.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ee=pe,Ue=oe,$e=Ue.tag;if((Ue.mode&1)===0&&($e===0||$e===11||$e===15)){var Me=Ue.alternate;Me?(Ue.updateQueue=Me.updateQueue,Ue.memoizedState=Me.memoizedState,Ue.lanes=Me.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var Ke=yp(D);if(Ke!==null){Ke.flags&=-257,xp(Ke,D,oe,S,i),Ke.mode&1&&vp(S,Ee,i),i=Ke,pe=Ee;var tt=i.updateQueue;if(tt===null){var ot=new Set;ot.add(pe),i.updateQueue=ot}else tt.add(pe);break e}else{if((i&1)===0){vp(S,Ee,i),Ah();break e}pe=Error(t(426))}}else if(Oe&&oe.mode&1){var on=yp(D);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),xp(on,D,oe,S,i),He(uc(pe,oe));break e}}S=pe=uc(pe,oe),_n!==4&&(_n=2),au===null?au=[S]:au.push(S),S=D;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var ke=gp(S,pe,i);hr(S,ke);break e;case 1:oe=pe;var xe=S.type,Ae=S.stateNode;if((S.flags&128)===0&&(typeof xe.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(To===null||!To.has(Ae)))){S.flags|=65536,i&=-i,S.lanes|=i;var ze=mp(S,oe,i);hr(S,ze);break e}}S=S.return}while(S!==null)}Yp(l)}catch(ut){i=ut,pn===l&&l!==null&&(pn=l=l.return);continue}break}while(!0)}function Kp(){var n=ed.current;return ed.current=Ku,n===null?Ku:n}function Ah(){(_n===0||_n===3||_n===2)&&(_n=4),Cn===null||(ml&268435455)===0&&(td&268435455)===0||Ro(Cn,Fn)}function od(n,i){var l=tr;tr|=2;var p=Kp();(Cn!==n||Fn!==i)&&(Ya=null,yl(n,i));do try{E1();break}catch(w){Gp(n,w)}while(!0);if(Zt(),tr=l,ed.current=p,pn!==null)throw Error(t(261));return Cn=null,Fn=0,_n}function E1(){for(;pn!==null;)Jp(pn)}function L1(){for(;pn!==null&&!ro();)Jp(pn)}function Jp(n){var i=Zp(n.alternate,n,Vs);n.memoizedProps=n.pendingProps,i===null?Yp(n):pn=i,yh.current=null}function Yp(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=b1(l,i,Vs),l!==null){pn=l;return}}else{if(l=_1(l,i),l!==null){l.flags&=32767,pn=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_n=6,pn=null;return}}if(i=i.sibling,i!==null){pn=i;return}pn=i=n}while(i!==null);_n===0&&(_n=5)}function xl(n,i,l){var p=Jt,w=mi.transition;try{mi.transition=null,Jt=1,P1(n,i,l,p)}finally{mi.transition=w,Jt=p}return null}function P1(n,i,l,p){do pc();while(Io!==null);if((tr&6)!==0)throw Error(t(327));l=n.finishedWork;var w=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var S=l.lanes|l.childLanes;if(ni(n,S),n===Cn&&(pn=Cn=null,Fn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||nd||(nd=!0,e0(Yi,function(){return pc(),null})),S=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||S){S=mi.transition,mi.transition=null;var D=Jt;Jt=1;var oe=tr;tr|=4,yh.current=null,S1(n,l),Up(l,n),rl(Wa),uo=!!ul,Wa=ul=null,n.current=l,k1(l),Dc(),tr=oe,Jt=D,mi.transition=S}else n.current=l;if(nd&&(nd=!1,Io=n,sd=w),S=n.pendingLanes,S===0&&(To=null),ql(l.stateNode),Ls(n,xr()),i!==null)for(p=n.onRecoverableError,l=0;l<i.length;l++)w=i[l],p(w.value,{componentStack:w.stack,digest:w.digest});if(rd)throw rd=!1,n=bh,bh=null,n;return(sd&1)!==0&&n.tag!==0&&pc(),S=n.pendingLanes,(S&1)!==0?n===_h?ou++:(ou=0,_h=n):ou=0,k(),null}function pc(){if(Io!==null){var n=Sa(sd),i=mi.transition,l=Jt;try{if(mi.transition=null,Jt=16>n?16:n,Io===null)var p=!1;else{if(n=Io,Io=null,sd=0,(tr&6)!==0)throw Error(t(331));var w=tr;for(tr|=4,Xe=n.current;Xe!==null;){var S=Xe,D=S.child;if((Xe.flags&16)!==0){var oe=S.deletions;if(oe!==null){for(var pe=0;pe<oe.length;pe++){var Ee=oe[pe];for(Xe=Ee;Xe!==null;){var Ue=Xe;switch(Ue.tag){case 0:case 11:case 15:su(8,Ue,S)}var $e=Ue.child;if($e!==null)$e.return=Ue,Xe=$e;else for(;Xe!==null;){Ue=Xe;var Me=Ue.sibling,Ke=Ue.return;if(Rp(Ue),Ue===Ee){Xe=null;break}if(Me!==null){Me.return=Ke,Xe=Me;break}Xe=Ke}}}var tt=S.alternate;if(tt!==null){var ot=tt.child;if(ot!==null){tt.child=null;do{var on=ot.sibling;ot.sibling=null,ot=on}while(ot!==null)}}Xe=S}}if((S.subtreeFlags&2064)!==0&&D!==null)D.return=S,Xe=D;else e:for(;Xe!==null;){if(S=Xe,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:su(9,S,S.return)}var ke=S.sibling;if(ke!==null){ke.return=S.return,Xe=ke;break e}Xe=S.return}}var xe=n.current;for(Xe=xe;Xe!==null;){D=Xe;var Ae=D.child;if((D.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=D,Xe=Ae;else e:for(D=xe;Xe!==null;){if(oe=Xe,(oe.flags&2048)!==0)try{switch(oe.tag){case 0:case 11:case 15:Zu(9,oe)}}catch(ut){Zr(oe,oe.return,ut)}if(oe===D){Xe=null;break e}var ze=oe.sibling;if(ze!==null){ze.return=oe.return,Xe=ze;break e}Xe=oe.return}}if(tr=w,k(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(wa,n)}catch{}p=!0}return p}finally{Jt=l,mi.transition=i}}return!1}function Xp(n,i,l){i=uc(l,i),i=gp(n,i,1),n=$r(n,i,1),i=fs(),n!==null&&(Na(n,1,i),Ls(n,i))}function Zr(n,i,l){if(n.tag===3)Xp(n,n,l);else for(;i!==null;){if(i.tag===3){Xp(i,n,l);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(To===null||!To.has(p))){n=uc(l,n),n=mp(i,n,1),i=$r(i,n,1),n=fs(),i!==null&&(Na(i,1,n),Ls(i,n));break}}i=i.return}}function C1(n,i,l){var p=n.pingCache;p!==null&&p.delete(i),i=fs(),n.pingedLanes|=n.suspendedLanes&l,Cn===n&&(Fn&l)===l&&(_n===4||_n===3&&(Fn&130023424)===Fn&&500>xr()-wh?yl(n,0):xh|=l),Ls(n,i)}function Qp(n,i){i===0&&((n.mode&1)===0?i=1:(i=is,is<<=1,(is&130023424)===0&&(is=4194304)));var l=fs();n=dr(n,i),n!==null&&(Na(n,i,l),Ls(n,l))}function T1(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Qp(n,l)}function I1(n,i){var l=0;switch(n.tag){case 13:var p=n.stateNode,w=n.memoizedState;w!==null&&(l=w.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(i),Qp(n,l)}var Zp;Zp=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||Vn.current)As=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return As=!1,w1(n,i,l);As=(n.flags&131072)!==0}else As=!1,Oe&&(i.flags&1048576)!==0&&_e(i,W,i.index);switch(i.lanes=0,i.tag){case 2:var p=i.type;Xu(n,i),n=i.pendingProps;var w=jo(i,wn.current);Tr(i,l),w=fl(null,i,p,n,w,l);var S=gi();return i.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Gn(p)?(S=!0,Ga(i)):S=!1,i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,bn(i),w.updater=Ju,i.stateNode=w,w._reactInternals=i,sh(i,p,n,l),i=lh(null,i,p,!0,S,l)):(i.tag=0,Oe&&S&&Ce(i),hs(null,i,w,l),i=i.child),i;case 16:p=i.elementType;e:{switch(Xu(n,i),n=i.pendingProps,w=p._init,p=w(p._payload),i.type=p,w=i.tag=R1(p),n=Ri(p,n),w){case 0:i=oh(null,i,p,n,l);break e;case 1:i=kp(null,i,p,n,l);break e;case 11:i=wp(null,i,p,n,l);break e;case 14:i=bp(null,i,p,Ri(p.type,n),l);break e}throw Error(t(306,p,""))}return i;case 0:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),oh(n,i,p,w,l);case 1:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),kp(n,i,p,w,l);case 3:e:{if(jp(i),n===null)throw Error(t(387));p=i.pendingProps,S=i.memoizedState,w=S.element,Kn(n,i),Pn(i,p,null,l);var D=i.memoizedState;if(p=D.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){w=uc(Error(t(423)),i),i=Ap(n,i,p,l,w);break e}else if(p!==w){w=uc(Error(t(424)),i),i=Ap(n,i,p,l,w);break e}else for(Pe=Rn(i.stateNode.containerInfo.firstChild),Le=i,Oe=!0,Re=null,l=Ar(i,null,p,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ye(),p===w){i=Ja(n,i,l);break e}hs(n,i,p,l)}i=i.child}return i;case 5:return zu(i),n===null&&Ze(i),p=i.type,w=i.pendingProps,S=n!==null?n.memoizedProps:null,D=w.children,Gc(p,w)?D=null:S!==null&&Gc(p,S)&&(i.flags|=32),Sp(n,i),hs(n,i,D,l),i.child;case 6:return n===null&&Ze(i),null;case 13:return Ep(n,i,l);case 4:return Ao(i,i.stateNode.containerInfo),p=i.pendingProps,n===null?i.child=Yr(i,null,p,l):hs(n,i,p,l),i.child;case 11:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),wp(n,i,p,w,l);case 7:return hs(n,i,i.pendingProps,l),i.child;case 8:return hs(n,i,i.pendingProps.children,l),i.child;case 12:return hs(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(p=i.type._context,w=i.pendingProps,S=i.memoizedProps,D=w.value,or(sn,p._currentValue),p._currentValue=D,S!==null)if(Lr(S.value,D)){if(S.children===w.children&&!Vn.current){i=Ja(n,i,l);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var oe=S.dependencies;if(oe!==null){D=S.child;for(var pe=oe.firstContext;pe!==null;){if(pe.context===p){if(S.tag===1){pe=Ur(-1,l&-l),pe.tag=2;var Ee=S.updateQueue;if(Ee!==null){Ee=Ee.shared;var Ue=Ee.pending;Ue===null?pe.next=pe:(pe.next=Ue.next,Ue.next=pe),Ee.pending=pe}}S.lanes|=l,pe=S.alternate,pe!==null&&(pe.lanes|=l),er(S.return,l,i),oe.lanes|=l;break}pe=pe.next}}else if(S.tag===10)D=S.type===i.type?null:S.child;else if(S.tag===18){if(D=S.return,D===null)throw Error(t(341));D.lanes|=l,oe=D.alternate,oe!==null&&(oe.lanes|=l),er(D,l,i),D=S.sibling}else D=S.child;if(D!==null)D.return=S;else for(D=S;D!==null;){if(D===i){D=null;break}if(S=D.sibling,S!==null){S.return=D.return,D=S;break}D=D.return}S=D}hs(n,i,w.children,l),i=i.child}return i;case 9:return w=i.type,p=i.pendingProps.children,Tr(i,l),w=Ir(w),p=p(w),i.flags|=1,hs(n,i,p,l),i.child;case 14:return p=i.type,w=Ri(p,i.pendingProps),w=Ri(p.type,w),bp(n,i,p,w,l);case 15:return _p(n,i,i.type,i.pendingProps,l);case 17:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),Xu(n,i),i.tag=1,Gn(p)?(n=!0,Ga(i)):n=!1,Tr(i,l),fp(i,p,w),sh(i,p,w,l),lh(null,i,p,!0,n,l);case 19:return Pp(n,i,l);case 22:return Np(n,i,l)}throw Error(t(156,i.tag))};function e0(n,i){return ya(n,i)}function O1(n,i,l,p){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(n,i,l,p){return new O1(n,i,l,p)}function Eh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function R1(n){if(typeof n=="function")return Eh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===z)return 11;if(n===ge)return 14}return 2}function Do(n,i){var l=n.alternate;return l===null?(l=vi(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ld(n,i,l,p,w,S){var D=2;if(p=n,typeof n=="function")Eh(n)&&(D=1);else if(typeof n=="string")D=5;else e:switch(n){case le:return wl(l.children,w,S,i);case se:D=8,w|=8;break;case Y:return n=vi(12,l,i,w|2),n.elementType=Y,n.lanes=S,n;case B:return n=vi(13,l,i,w),n.elementType=B,n.lanes=S,n;case K:return n=vi(19,l,i,w),n.elementType=K,n.lanes=S,n;case we:return cd(l,w,S,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case me:D=10;break e;case M:D=9;break e;case z:D=11;break e;case ge:D=14;break e;case ue:D=16,p=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=vi(D,l,i,w),i.elementType=n,i.type=p,i.lanes=S,i}function wl(n,i,l,p){return n=vi(7,n,p,i),n.lanes=l,n}function cd(n,i,l,p){return n=vi(22,n,p,i),n.elementType=we,n.lanes=l,n.stateNode={isHidden:!1},n}function Lh(n,i,l){return n=vi(6,n,null,i),n.lanes=l,n}function Ph(n,i,l){return i=vi(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function D1(n,i,l,p,w){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ko(0),this.expirationTimes=Ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Ch(n,i,l,p,w,S,D,oe,pe){return n=new D1(n,i,l,oe,pe),i===1?(i=1,S===!0&&(i|=8)):i=0,S=vi(3,null,null,i),n.current=S,S.stateNode=n,S.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},bn(S),n}function F1(n,i,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:p==null?null:""+p,children:n,containerInfo:i,implementation:l}}function t0(n){if(!n)return ca;n=n._reactInternals;e:{if(vn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Gn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(Gn(l))return Xc(n,l,i)}return i}function r0(n,i,l,p,w,S,D,oe,pe){return n=Ch(l,p,!0,n,w,S,D,oe,pe),n.context=t0(null),l=n.current,p=fs(),w=Oo(l),S=Ur(p,w),S.callback=i??null,$r(l,S,w),n.current.lanes=w,Na(n,w,p),Ls(n,p),n}function ud(n,i,l,p){var w=i.current,S=fs(),D=Oo(w);return l=t0(l),i.context===null?i.context=l:i.pendingContext=l,i=Ur(S,D),i.payload={element:n},p=p===void 0?null:p,p!==null&&(i.callback=p),n=$r(w,i,D),n!==null&&(Bi(n,w,D,S),Ln(n,w,D)),D}function dd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function n0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Th(n,i){n0(n,i),(n=n.alternate)&&n0(n,i)}function B1(){return null}var s0=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ih(n){this._internalRoot=n}hd.prototype.render=Ih.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));ud(n,i,null,null)},hd.prototype.unmount=Ih.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;vl(function(){ud(null,n,null,null)}),i[An]=null}};function hd(n){this._internalRoot=n}hd.prototype.unstable_scheduleHydration=function(n){if(n){var i=Wl();n={blockedOn:null,target:n,priority:i};for(var l=0;l<ii.length&&i!==0&&i<ii[l].priority;l++);ii.splice(l,0,n),l===0&&Vl(n)}};function Oh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function i0(){}function M1(n,i,l,p,w){if(w){if(typeof p=="function"){var S=p;p=function(){var Ee=dd(D);S.call(Ee)}}var D=r0(i,p,n,0,null,!1,!1,"",i0);return n._reactRootContainer=D,n[An]=D.current,qa(n.nodeType===8?n.parentNode:n),vl(),D}for(;w=n.lastChild;)n.removeChild(w);if(typeof p=="function"){var oe=p;p=function(){var Ee=dd(pe);oe.call(Ee)}}var pe=Ch(n,0,!1,null,null,!1,!1,"",i0);return n._reactRootContainer=pe,n[An]=pe.current,qa(n.nodeType===8?n.parentNode:n),vl(function(){ud(i,pe,l,p)}),pe}function pd(n,i,l,p,w){var S=l._reactRootContainer;if(S){var D=S;if(typeof w=="function"){var oe=w;w=function(){var pe=dd(D);oe.call(pe)}}ud(i,D,n,w)}else D=M1(l,i,n,w,p);return dd(D)}Xi=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=ri(i.pendingLanes);l!==0&&(ao(i,l|1),Ls(i,xr()),(tr&6)===0&&(fc=xr()+500,k()))}break;case 13:vl(function(){var p=dr(n,1);if(p!==null){var w=fs();Bi(p,n,1,w)}}),Th(n,1)}},Jo=function(n){if(n.tag===13){var i=dr(n,134217728);if(i!==null){var l=fs();Bi(i,n,134217728,l)}Th(n,134217728)}},zl=function(n){if(n.tag===13){var i=Oo(n),l=dr(n,i);if(l!==null){var p=fs();Bi(l,n,i,p)}Th(n,i)}},Wl=function(){return Jt},oo=function(n,i){var l=Jt;try{return Jt=n,i()}finally{Jt=l}},Et=function(n,i,l){switch(i){case"input":if(Rt(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var p=l[i];if(p!==n&&p.form===n.form){var w=dl(p);if(!w)throw Error(t(90));We(p),Rt(p,w)}}}break;case"textarea":Yt(n,l);break;case"select":i=l.value,i!=null&&Ge(n,!!l.multiple,i,!1)}},mn=kh,ei=vl;var U1={usingClientEntryPoint:!1,Events:[ko,Ha,dl,Xt,Gi,kh]},lu={findFiberByHostInstance:la,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$1={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Os(n),n===null?null:n.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||B1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{wa=gd.inject($1),ss=gd}catch{}}return Ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1,Ps.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oh(i))throw Error(t(200));return F1(n,i,null,l)},Ps.createRoot=function(n,i){if(!Oh(n))throw Error(t(299));var l=!1,p="",w=s0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=Ch(n,1,!1,null,null,l,!1,p,w),n[An]=i.current,qa(n.nodeType===8?n.parentNode:n),new Ih(i)},Ps.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Os(i),n=n===null?null:n.stateNode,n},Ps.flushSync=function(n){return vl(n)},Ps.hydrate=function(n,i,l){if(!fd(i))throw Error(t(200));return pd(null,n,i,!0,l)},Ps.hydrateRoot=function(n,i,l){if(!Oh(n))throw Error(t(405));var p=l!=null&&l.hydratedSources||null,w=!1,S="",D=s0;if(l!=null&&(l.unstable_strictMode===!0&&(w=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(D=l.onRecoverableError)),i=r0(i,null,n,1,l??null,w,!1,S,D),n[An]=i.current,qa(n),p)for(n=0;n<p.length;n++)l=p[n],w=l._getVersion,w=w(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,w]:i.mutableSourceEagerHydrationData.push(l,w);return new hd(i)},Ps.render=function(n,i,l){if(!fd(i))throw Error(t(200));return pd(null,n,i,!1,l)},Ps.unmountComponentAtNode=function(n){if(!fd(n))throw Error(t(40));return n._reactRootContainer?(vl(function(){pd(null,null,n,!1,function(){n._reactRootContainer=null,n[An]=null})}),!0):!1},Ps.unstable_batchedUpdates=kh,Ps.unstable_renderSubtreeIntoContainer=function(n,i,l,p){if(!fd(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return pd(n,i,l,!1,p)},Ps.version="18.3.1-next-f1338f8080-20240426",Ps}var f0;function Q1(){if(f0)return Fh.exports;f0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Fh.exports=X1(),Fh.exports}var p0;function Z1(){if(p0)return md;p0=1;var r=Q1();return md.createRoot=r.createRoot,md.hydrateRoot=r.hydrateRoot,md}var e2=Z1(),Te=Gf();const Al=H1(Te),t2="xiotthneuoyptfiwofnx",r2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhpb3R0aG5ldW95cHRmaXdvZm54Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMzQyODAsImV4cCI6MjA4MTkxMDI4MH0.d1m4i80EZgIkvgQgf_u3pTW83SkMiBZ6ZgkTpG-2Ki4";function qd(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function n2(r,e,t,s){function a(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function d(v){try{g(s.next(v))}catch(N){c(N)}}function h(v){try{g(s.throw(v))}catch(N){c(N)}}function g(v){v.done?o(v.value):a(v.value).then(d,h)}g((s=s.apply(r,e||[])).next())})}const s2=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Kf extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class i2 extends Kf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class g0 extends Kf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class m0 extends Kf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xf;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(xf||(xf={}));class a2{constructor(e,{headers:t={},customFetch:s,region:a=xf.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=s2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return n2(this,arguments,void 0,function*(t,s={}){var a;let o,c;try{const{headers:d,method:h,body:g,signal:v,timeout:N}=s;let b={},{region:y}=s;y||(y=this.region);const L=new URL(`${this.url}/${t}`);y&&y!=="any"&&(b["x-region"]=y,L.searchParams.set("forceFunctionRegion",y));let A;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",A=g):typeof g=="string"?(b["Content-Type"]="text/plain",A=g):typeof FormData<"u"&&g instanceof FormData?A=g:(b["Content-Type"]="application/json",A=JSON.stringify(g)):A=g;let P=v;N&&(c=new AbortController,o=setTimeout(()=>c.abort(),N),v?(P=c.signal,v.addEventListener("abort",()=>c.abort())):P=c.signal);const T=yield this.fetch(L.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:A,signal:P}).catch(J=>{throw new i2(J)}),R=T.headers.get("x-relay-error");if(R&&R==="true")throw new g0(T);if(!T.ok)throw new m0(T);let C=((a=T.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return C==="application/json"?j=yield T.json():C==="application/octet-stream"||C==="application/pdf"?j=yield T.blob():C==="text/event-stream"?j=T:C==="multipart/form-data"?j=yield T.formData():j=yield T.text(),{data:j,error:null,response:T}}catch(d){return{data:null,error:d,response:d instanceof m0||d instanceof g0?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var o2=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},l2=class{constructor(r){var e,t;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(t=r.isMaybeSingle)!==null&&t!==void 0?t:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,d=null,h=null,g=o.status,v=o.statusText;if(o.ok){var N,b;if(t.method!=="HEAD"){var y;const T=await o.text();T===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((y=t.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?d=T:d=JSON.parse(T))}const A=(N=t.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),P=(b=o.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");A&&P&&P.length>1&&(h=parseInt(P[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var L;const A=await o.text();try{c=JSON.parse(A),Array.isArray(c)&&o.status===404&&(d=[],c=null,g=200,v="OK")}catch{o.status===404&&A===""?(g=204,v="No Content"):c={message:A}}if(c&&t.isMaybeSingle&&(!(c==null||(L=c.details)===null||L===void 0)&&L.includes("0 rows"))&&(c=null,g=200,v="OK"),c&&t.shouldThrowOnError)throw new o2(c)}return{error:c,data:d,count:h,status:g,statusText:v}});return this.shouldThrowOnError||(a=a.catch(o=>{var c;let d="";const h=o==null?void 0:o.cause;if(h){var g,v,N,b;const L=(g=h==null?void 0:h.message)!==null&&g!==void 0?g:"",A=(v=h==null?void 0:h.code)!==null&&v!==void 0?v:"";d=`${(N=o==null?void 0:o.name)!==null&&N!==void 0?N:"FetchError"}: ${o==null?void 0:o.message}`,d+=`

Caused by: ${(b=h==null?void 0:h.name)!==null&&b!==void 0?b:"Error"}: ${L}`,A&&(d+=` (${A})`),h!=null&&h.stack&&(d+=`
${h.stack}`)}else{var y;d=(y=o==null?void 0:o.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(r,e)}returns(){return this}overrideTypes(){return this}},c2=class extends l2{select(r){let e=!1;const t=(r??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:t,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${r}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:t=e}={}){const s=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${r}`),this}range(r,e,{foreignTable:t,referencedTable:s=t}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${r}`),this.url.searchParams.set(o,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:t=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var c;const d=[r?"analyze":null,e?"verbose":null,t?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const v0=new RegExp("[,()]");var kc=class extends c2{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&v0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`in.(${t})`),this}notIn(r,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&v0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`not.in.(${t})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:t,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=t===void 0?"":`(${t})`;return this.url.searchParams.append(r,`${a}fts${o}.${e}`),this}match(r){return Object.entries(r).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(r,e,t){return this.url.searchParams.append(r,`not.${e}.${t}`),this}or(r,{foreignTable:e,referencedTable:t=e}={}){const s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${r})`),this}filter(r,e,t){return this.url.searchParams.append(r,`${e}.${t}`),this}},u2=class{constructor(r,{headers:e={},schema:t,fetch:s}){this.url=r,this.headers=new Headers(e),this.schema=t,this.fetch=s}select(r,e){const{head:t=!1,count:s}=e??{},a=t?"HEAD":"GET";let o=!1;const c=(r??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new kc({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:e,defaultToNull:t=!0}={}){var s;const a="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const o=r.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(o.length>0){const c=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new kc({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(r,{onConflict:e,ignoreDuplicates:t=!1,count:s,defaultToNull:a=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(d.length>0){const h=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new kc({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(r,{count:e}={}){var t;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new kc({method:s,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:r}={}){var e;const t="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new kc({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},d2=class em{constructor(e,{headers:t={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new u2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new em(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:a=!1,count:o}={}){var c;let d;const h=new URL(`${this.url}/rpc/${e}`);let g;s||a?(d=s?"HEAD":"GET",Object.entries(t).filter(([N,b])=>b!==void 0).map(([N,b])=>[N,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([N,b])=>{h.searchParams.append(N,b)})):(d="POST",g=t);const v=new Headers(this.headers);return o&&v.set("Prefer",`count=${o}`),new kc({method:d,url:h,headers:v,schema:this.schemaName,body:g,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class h2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const f2="2.89.0",p2=`realtime-js/${f2}`,tm="1.0.0",g2="2.0.0",y0=tm,wf=1e4,m2=1e3,v2=100;var $o;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})($o||($o={}));var Nn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Nn||(Nn={}));var qi;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(qi||(qi={}));var bf;(function(r){r.websocket="websocket"})(bf||(bf={}));var kl;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(kl||(kl={}));class y2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var a,o;const c=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",g=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},N=Object.keys(v).length===0?"":JSON.stringify(v);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+c.length+g.length+N.length,y=new ArrayBuffer(this.HEADER_LENGTH+b);let L=new DataView(y),A=0;L.setUint8(A++,this.KINDS.userBroadcastPush),L.setUint8(A++,h.length),L.setUint8(A++,d.length),L.setUint8(A++,c.length),L.setUint8(A++,g.length),L.setUint8(A++,N.length),L.setUint8(A++,t),Array.from(h,T=>L.setUint8(A++,T.charCodeAt(0))),Array.from(d,T=>L.setUint8(A++,T.charCodeAt(0))),Array.from(c,T=>L.setUint8(A++,T.charCodeAt(0))),Array.from(g,T=>L.setUint8(A++,T.charCodeAt(0))),Array.from(N,T=>L.setUint8(A++,T.charCodeAt(0)));var P=new Uint8Array(y.byteLength+s.byteLength);return P.set(new Uint8Array(y),0),P.set(new Uint8Array(s),y.byteLength),P.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,o,c,d,h]=s;return t({join_ref:a,ref:o,topic:c,event:d,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2),c=t.getUint8(3),d=t.getUint8(4);let h=this.HEADER_LENGTH+4;const g=s.decode(e.slice(h,h+a));h=h+a;const v=s.decode(e.slice(h,h+o));h=h+o;const N=s.decode(e.slice(h,h+c));h=h+c;const b=e.slice(h,e.byteLength),y=d===this.JSON_ENCODING?JSON.parse(s.decode(b)):b,L={type:this.BROADCAST_EVENT,event:v,payload:y};return c>0&&(L.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:L}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class rm{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kr;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(kr||(kr={}));const x0=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=x2(c,r,e,a),o),{}):{}},x2=(r,e,t,s)=>{const a=e.find(d=>d.name===r),o=a==null?void 0:a.type,c=t[r];return o&&!s.includes(o)?nm(o,c):_f(c)},nm=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return N2(e,t)}switch(r){case kr.bool:return w2(e);case kr.float4:case kr.float8:case kr.int2:case kr.int4:case kr.int8:case kr.numeric:case kr.oid:return b2(e);case kr.json:case kr.jsonb:return _2(e);case kr.timestamp:return S2(e);case kr.abstime:case kr.date:case kr.daterange:case kr.int4range:case kr.int8range:case kr.money:case kr.reltime:case kr.text:case kr.time:case kr.timestamptz:case kr.timetz:case kr.tsrange:case kr.tstzrange:return _f(e);default:return _f(e)}},_f=r=>r,w2=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},b2=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},_2=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},N2=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let o;const c=r.slice(1,t);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>nm(e,d))}return r},S2=r=>typeof r=="string"?r.replace(" ","T"):r,sm=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Uh{constructor(e,t,s={},a=wf){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var w0;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(w0||(w0={}));class gu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gu.syncState(this.state,a,o,c),this.pendingDiffs.forEach(h=>{this.state=gu.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=gu.syncDiff(this.state,a,o,c),d())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),c=this.transformState(t),d={},h={};return this.map(o,(g,v)=>{c[g]||(h[g]=v)}),this.map(c,(g,v)=>{const N=o[g];if(N){const b=v.map(P=>P.presence_ref),y=N.map(P=>P.presence_ref),L=v.filter(P=>y.indexOf(P.presence_ref)<0),A=N.filter(P=>b.indexOf(P.presence_ref)<0);L.length>0&&(d[g]=L),A.length>0&&(h[g]=A)}else d[g]=v}),this.syncDiff(o,{joins:d,leaves:h},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,h)=>{var g;const v=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(h),v.length>0){const N=e[d].map(y=>y.presence_ref),b=v.filter(y=>N.indexOf(y.presence_ref)<0);e[d].unshift(...b)}s(d,v,h)}),this.map(c,(d,h)=>{let g=e[d];if(!g)return;const v=h.map(N=>N.presence_ref);g=g.filter(N=>v.indexOf(N.presence_ref)<0),e[d]=g,a(d,g,h),g.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b0;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(b0||(b0={}));var mu;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(mu||(mu={}));var Za;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class Pc{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Uh(this,qi.join,this.params,this.timeout),this.rejoinTimer=new rm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nn.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qi.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new gu(this),this.broadcastEndpointURL=sm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Nn.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,g=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[mu.PRESENCE]&&this.bindings[mu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,N={},b={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Za.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Za.CLOSED)),this.updateJoinPayload(Object.assign({config:b},N)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var L;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(Za.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,P=(L=A==null?void 0:A.length)!==null&&L!==void 0?L:0,T=[];for(let R=0;R<P;R++){const C=A[R],{filter:{event:j,schema:J,table:$,filter:le}}=C,se=y&&y[R];if(se&&se.event===j&&Pc.isFilterValueEqual(se.schema,J)&&Pc.isFilterValueEqual(se.table,$)&&Pc.isFilterValueEqual(se.filter,le))T.push(Object.assign(Object.assign({},C),{id:se.id}));else{this.unsubscribe(),this.state=Nn.errored,e==null||e(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Za.SUBSCRIBED);return}}).receive("error",y=>{this.state=Nn.errored,e==null||e(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Nn.joined&&e===mu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;if(t==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const g=await d.json();h=g.error||g.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,h;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),g.receive("ok",()=>o("ok")),g.receive("error",()=>o("error")),g.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qi.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Uh(this,qi.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Uh(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>v2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const c=e.toLocaleLowerCase(),{close:d,error:h,leave:g,join:v}=qi;if(s&&[d,h,g,v].indexOf(c)>=0&&s!==this._joinRef())return;let b=this._onMessage(c,t,s);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var L,A,P;return((L=y.filter)===null||L===void 0?void 0:L.event)==="*"||((P=(A=y.filter)===null||A===void 0?void 0:A.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(y=>y.callback(b,s)):(o=this.bindings[c])===null||o===void 0||o.filter(y=>{var L,A,P,T,R,C;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in y){const j=y.id,J=(L=y.filter)===null||L===void 0?void 0:L.event;return j&&((A=t.ids)===null||A===void 0?void 0:A.includes(j))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const j=(R=(T=y==null?void 0:y.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return j==="*"||j===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===c}).map(y=>{if(typeof b=="object"&&"ids"in b){const L=b.data,{schema:A,table:P,commit_timestamp:T,type:R,errors:C}=L;b=Object.assign(Object.assign({},{schema:A,table:P,commit_timestamp:T,eventType:R,new:{},old:{},errors:C}),this._getPayloadRecords(L))}y.callback(b,s)})}_isClosed(){return this.state===Nn.closed}_isJoined(){return this.state===Nn.joined}_isJoining(){return this.state===Nn.joining}_isLeaving(){return this.state===Nn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Pc.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qi.close,{},e)}_onError(e){this._on(qi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=x0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=x0(e.columns,e.old_record)),t}}const $h=()=>{},vd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},k2=[1e3,2e3,5e3,1e4],j2=1e4,A2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wf,this.transport=null,this.heartbeatIntervalMs=vd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$h,this.ref=0,this.reconnectTimer=null,this.vsn=y0,this.logger=$h,this.conn=null,this.sendBuffer=[],this.serializer=new y2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${bf.websocket}`,this.httpEndpoint=sm(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $o.connecting:return kl.Connecting;case $o.open:return kl.Open;case $o.closing:return kl.Closing;default:return kl.Closed}}isConnected(){return this.connectionState()===kl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new Pc(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,c=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(m2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},vd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:c}=t,d=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${s} ${a} ${d}`.trim(),o),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(a,o,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===$o.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$o.open||this.conn.readyState===$o.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([A2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,s=!1;if(e)t=e,s=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const o={access_token:t,version:p2};t&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(qi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new rm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,c,d,h,g,v,N,b,y;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:wf,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:vd.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:$h,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:y0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(L=>k2[L-1]||j2),this.vsn){case tm:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((L,A)=>A(JSON.stringify(L))),this.decode=(N=e==null?void 0:e.decode)!==null&&N!==void 0?N:((L,A)=>A(JSON.parse(L)));break;case g2:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Su=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function L2(r,e,t){const s=new URL(e,r);if(t)for(const[a,o]of Object.entries(t))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function P2(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function C2(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:o,headers:c}){const d=L2(r.baseUrl,s,a),h=await P2(r.auth),g=await e(d,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...h,...c},body:o?JSON.stringify(o):void 0}),v=await g.text(),N=(g.headers.get("content-type")||"").includes("application/json"),b=N&&v?JSON.parse(v):v;if(!g.ok){const y=N?b:void 0,L=y==null?void 0:y.error;throw new Su((L==null?void 0:L.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:L==null?void 0:L.type,icebergCode:L==null?void 0:L.code,details:y})}return{status:g.status,headers:g.headers,data:b}}}}function yd(r){return r.join("")}var T2=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:yd(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${yd(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yd(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${yd(r.namespace)}`}),!0}catch(e){if(e instanceof Su&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof Su&&t.status===409)return;throw t}}};function gc(r){return r.join("")}var I2=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gc(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gc(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gc(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gc(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gc(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gc(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof Su&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof Su&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},O2=class{constructor(r){var s;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=C2({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(s=r.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new T2(this.client,e),this.tableOps=new I2(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},zd=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function Wr(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var R2=class extends zd{constructor(r,e,t){super(r),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Nf=class extends zd{constructor(r,e){super(r),this.name="StorageUnknownError",this.originalError=e}};const Jf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),D2=()=>Response,Sf=r=>{if(Array.isArray(r))return r.map(t=>Sf(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Sf(s)}),e},F2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},B2=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function ku(r){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(r)}function M2(r,e){if(ku(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(ku(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function U2(r){var e=M2(r,"string");return ku(e)=="symbol"?e:e+""}function $2(r,e,t){return(e=U2(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function St(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_0(Object(t),!0).forEach(function(s){$2(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_0(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}const qh=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},q2=async(r,e,t)=>{r instanceof await D2()&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{const a=r.status||500,o=(s==null?void 0:s.statusCode)||a+"";e(new R2(qh(s),a,o))}).catch(s=>{e(new Nf(qh(s),s))}):e(new Nf(qh(r),r))},z2=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(F2(s)?(a.headers=St({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),St(St({},a),t))};async function Ou(r,e,t,s,a,o){return new Promise((c,d)=>{r(t,z2(e,s,a,o)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>q2(h,d,s))})}async function ju(r,e,t,s){return Ou(r,"GET",e,t,s)}async function $i(r,e,t,s,a){return Ou(r,"POST",e,s,a,t)}async function kf(r,e,t,s,a){return Ou(r,"PUT",e,s,a,t)}async function W2(r,e,t,s){return Ou(r,"HEAD",e,St(St({},t),{},{noResolveJson:!0}),s)}async function Yf(r,e,t,s,a){return Ou(r,"DELETE",e,s,a,t)}var H2=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Wr(e))return{data:null,error:e};throw e}}};let im;im=Symbol.toStringTag;var V2=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[im]="BlobDownloadBuilder",this.promise=null}asStream(){return new H2(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Wr(e))return{data:null,error:e};throw e}}};const G2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},N0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var K2=class{constructor(r,e={},t,s){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.bucketId=t,this.fetch=Jf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,e,t,s){var a=this;try{let o;const c=St(St({},N0),s);let d=St(St({},a.headers),r==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&t instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",a.encodeMetadata(h)),o.append("",t)):typeof FormData<"u"&&t instanceof FormData?(o=t,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),h&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(h))):(o=t,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),s!=null&&s.headers&&(d=St(St({},d),s.headers));const g=a._removeEmptyFolders(e),v=a._getFinalPath(g),N=await(r=="PUT"?kf:$i)(a.fetch,`${a.url}/object/${v}`,o,St({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:N.Id,fullPath:N.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Wr(o))return{data:null,error:o};throw o}}async upload(r,e,t){return this.uploadOrUpdate("POST",r,e,t)}async uploadToSignedUrl(r,e,t,s){var a=this;const o=a._removeEmptyFolders(r),c=a._getFinalPath(o),d=new URL(a.url+`/object/upload/sign/${c}`);d.searchParams.set("token",e);try{let h;const g=St({upsert:N0.upsert},s),v=St(St({},a.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",g.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",g.cacheControl)):(h=t,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType),{data:{path:o,fullPath:(await kf(a.fetch,d.toString(),h,{headers:v})).Key},error:null}}catch(h){if(a.shouldThrowOnError)throw h;if(Wr(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(r,e){var t=this;try{let s=t._getFinalPath(r);const a=St({},t.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const o=await $i(t.fetch,`${t.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(t.url+o.url),d=c.searchParams.get("token");if(!d)throw new zd("No token returned by API");return{data:{signedUrl:c.toString(),path:r,token:d},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async update(r,e,t){return this.uploadOrUpdate("PUT",r,e,t)}async move(r,e,t){var s=this;try{return{data:await $i(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async copy(r,e,t){var s=this;try{return{data:{path:(await $i(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async createSignedUrl(r,e,t){var s=this;try{let a=s._getFinalPath(r),o=await $i(s.fetch,`${s.url}/object/sign/${a}`,St({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:s.headers});const c=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async createSignedUrls(r,e,t){var s=this;try{const a=await $i(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:r},{headers:s.headers}),o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:a.map(c=>St(St({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}download(r,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(r),c=()=>ju(this.fetch,`${this.url}/${t}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new V2(c,this.shouldThrowOnError)}async info(r){var e=this;const t=e._getFinalPath(r);try{return{data:Sf(await ju(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async exists(r){var e=this;const t=e._getFinalPath(r);try{return await W2(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Wr(s)&&s instanceof Nf){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(r,e){const t=this._getFinalPath(r),s=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${d}`)}}}async remove(r){var e=this;try{return{data:await Yf(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async list(r,e,t){var s=this;try{const a=St(St(St({},G2),e),{},{prefix:r||""});return{data:await $i(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},t),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async listV2(r,e){var t=this;try{const s=St({},r);return{data:await $i(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,s,{headers:t.headers},e),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const am="2.89.0",om={"X-Client-Info":`storage-js/${am}`};var J2=class{constructor(r,e={},t,s){this.shouldThrowOnError=!1;const a=new URL(r);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=St(St({},om),e),this.fetch=Jf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var e=this;try{const t=e.listBucketOptionsToQueryString(r);return{data:await ju(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await ju(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async createBucket(r,e={public:!1}){var t=this;try{return{data:await $i(t.fetch,`${t.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async updateBucket(r,e){var t=this;try{return{data:await kf(t.fetch,`${t.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async emptyBucket(r){var e=this;try{return{data:await $i(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Yf(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Y2=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=St(St({},om),e),this.fetch=Jf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await $i(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async listBuckets(r){var e=this;try{const t=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&t.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&t.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&t.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&t.set("sortOrder",r.sortOrder),r!=null&&r.search&&t.set("search",r.search);const s=t.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await ju(e.fetch,a,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Yf(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}from(r){var e=this;if(!B2(r))throw new zd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new O2({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(t,{get(a,o){const c=a[o];return typeof c!="function"?c:async(...d)=>{try{return{data:await c.apply(a,d),error:null}}catch(h){if(s)throw h;return{data:null,error:h}}}}})}};const Xf={"X-Client-Info":`storage-js/${am}`,"Content-Type":"application/json"};var lm=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Js(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var zh=class extends lm{constructor(r,e,t){super(r),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},X2=class extends lm{constructor(r,e){super(r),this.name="StorageVectorsUnknownError",this.originalError=e}};const Qf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Q2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},S0=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Z2=async(r,e,t)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const s=r.status||500,a=r;if(typeof a.json=="function")a.json().then(o=>{const c=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new zh(S0(o),s,c))}).catch(()=>{const o=s+"";e(new zh(a.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";e(new zh(a.statusText||`HTTP ${s} error`,s,o))}}else e(new X2(S0(r),r))},ev=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return s?(Q2(s)?(a.headers=St({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,St(St({},a),t)):a};async function tv(r,e,t,s,a,o){return new Promise((c,d)=>{r(t,ev(e,s,a,o)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const g=h.headers.get("content-type");return!g||!g.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>Z2(h,d,s))})}async function Ys(r,e,t,s,a){return tv(r,"POST",e,s,a,t)}var rv=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=St(St({},Xf),e),this.fetch=Qf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async getIndex(r,e){var t=this;try{return{data:await Ys(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Js(s))return{data:null,error:s};throw s}}async listIndexes(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async deleteIndex(r,e){var t=this;try{return{data:await Ys(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Js(s))return{data:null,error:s};throw s}}},nv=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=St(St({},Xf),e),this.fetch=Qf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var e=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ys(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async getVectors(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async listVectors(r){var e=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await Ys(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async queryVectors(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async deleteVectors(r){var e=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ys(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}},sv=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=St(St({},Xf),e),this.fetch=Qf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async listBuckets(r={}){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}},iv=class extends sv{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new av(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,t=this;return e().call(t,r)}async getBucket(r){var e=()=>super.getBucket,t=this;return e().call(t,r)}async listBuckets(r={}){var e=()=>super.listBuckets,t=this;return e().call(t,r)}async deleteBucket(r){var e=()=>super.deleteBucket,t=this;return e().call(t,r)}},av=class extends rv{constructor(r,e,t,s){super(r,e,s),this.vectorBucketName=t}async createIndex(r){var e=()=>super.createIndex,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,r)}index(r){return new ov(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},ov=class extends nv{constructor(r,e,t,s,a){super(r,e,a),this.vectorBucketName=t,this.indexName=s}async putVectors(r){var e=()=>super.putVectors,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(r){var e=()=>super.getVectors,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,t=this;return e().call(t,St(St({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},lv=class extends J2{constructor(r,e={},t,s){super(r,e,t,s)}from(r){return new K2(this.url,this.headers,r,this.fetch)}get vectors(){return new iv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Y2(this.url+"/iceberg",this.headers,this.fetch)}};const cm="2.89.0",jc=30*1e3,jf=3,Wh=jf*jc,cv="http://localhost:9999",uv="supabase.auth.token",dv={"X-Client-Info":`gotrue-js/${cm}`},Af="X-Supabase-Api-Version",um={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fv=600*1e3;class Au extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function dt(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class pv extends Au{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function gv(r){return dt(r)&&r.name==="AuthApiError"}class jl extends Au{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class to extends Au{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Ks extends to{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mv(r){return dt(r)&&r.name==="AuthSessionMissingError"}class mc extends to{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xd extends to{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wd extends to{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vv(r){return dt(r)&&r.name==="AuthImplicitGrantRedirectError"}class k0 extends to{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yv extends to{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ef extends to{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Hh(r){return dt(r)&&r.name==="AuthRetryableFetchError"}class j0 extends to{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Lf extends to{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Od="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A0=` 	
\r=`.split(""),xv=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<A0.length;e+=1)r[A0[e].charCodeAt(0)]=-2;for(let e=0;e<Od.length;e+=1)r[Od[e].charCodeAt(0)]=e;return r})();function E0(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Od[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Od[s]),e.queuedBits-=6}}function dm(r,e,t){const s=xv[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function L0(r){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{_v(c,s,t)};for(let c=0;c<r.length;c+=1)dm(r.charCodeAt(c),a,o);return e.join("")}function wv(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function bv(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}wv(s,e)}}function _v(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ic(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)dm(r.charCodeAt(a),t,s);return new Uint8Array(e)}function Nv(r){const e=[];return bv(r,t=>e.push(t)),new Uint8Array(e)}function El(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>E0(a,t,s)),E0(null,t,s),e.join("")}function Sv(r){return Math.round(Date.now()/1e3)+r}function kv(){return Symbol("auth-callback")}const Mn=()=>typeof window<"u"&&typeof document<"u",bl={tested:!1,writable:!1},hm=()=>{if(!Mn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bl.tested)return bl.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),bl.tested=!0,bl.writable=!0}catch{bl.tested=!0,bl.writable=!1}return bl.writable};function jv(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const fm=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Av=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ac=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},_l=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Bn=async(r,e)=>{await r.removeItem(e)};class Wd{constructor(){this.promise=new Wd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Wd.promiseConstructor=Promise;function Vh(r){const e=r.split(".");if(e.length!==3)throw new Lf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!hv.test(e[s]))throw new Lf("JWT not in base64url format");return{header:JSON.parse(L0(e[0])),payload:JSON.parse(L0(e[1])),signature:Ic(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ev(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Lv(r,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await r(o);if(!e(o,null,c)){s(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function Pv(r){return("0"+r.toString(16)).substr(-2)}function Cv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Pv).join("")}async function Tv(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function Iv(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Tv(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vc(r,e,t=!1){const s=Cv();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Ac(r,`${e}-code-verifier`,a);const o=await Iv(s);return[o,s===o?"plain":"s256"]}const Ov=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rv(r){const e=r.headers.get(Af);if(!e||!e.match(Ov))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dv(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Fv(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yc(r){if(!Bv.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gh(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mv(r,e){return new Proxy(r,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function P0(r){return JSON.parse(JSON.stringify(r))}const Nl=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Uv=[502,503,504];async function C0(r){var e;if(!Av(r))throw new Ef(Nl(r),0);if(Uv.includes(r.status))throw new Ef(Nl(r),r.status);let t;try{t=await r.json()}catch(o){throw new jl(Nl(o),o)}let s;const a=Rv(r);if(a&&a.getTime()>=um["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new j0(Nl(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ks}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new j0(Nl(t),r.status,t.weak_password.reasons);throw new pv(Nl(t),r.status||500,s)}const $v=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Nt(r,e,t,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[Af]||(o[Af]=um["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await qv(r,e,t+d,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function qv(r,e,t,s,a,o){const c=$v(e,s,a,o);let d;try{d=await r(t,Object.assign({},c))}catch(h){throw console.error(h),new Ef(Nl(h),0)}if(d.ok||await C0(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(h){await C0(h)}}function Ui(r){var e;let t=null;Hv(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Sv(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function T0(r){const e=Ui(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function qo(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function zv(r){return{data:r,error:null}}function Wv(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=r,c=qd(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function I0(r){return r}function Hv(r){return r.access_token&&r.refresh_token&&r.expires_in}const Kh=["global","local","others"];class Vv{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=fm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Kh[0]){if(Kh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kh.join(", ")}`);try{return await Nt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qo})}catch(s){if(dt(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=qd(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Wv,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(dt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qo})}catch(t){if(dt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,c,d,h;try{const g={nextPage:null,lastPage:0,total:0},v=await Nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:I0});if(v.error)throw v.error;const N=await v.json(),b=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(L=>{const A=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(L.split(";")[1].split("=")[1]);g[`${P}Page`]=A}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},N),g),error:null}}catch(g){if(dt(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){yc(e);try{return await Nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qo})}catch(t){if(dt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){yc(e);try{return await Nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qo})}catch(s){if(dt(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){yc(e);try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qo})}catch(s){if(dt(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){yc(e.userId);try{const{data:t,error:s}=await Nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){yc(e.userId),yc(e.id);try{return{data:await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,c,d,h;try{const g={nextPage:null,lastPage:0,total:0},v=await Nt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:I0});if(v.error)throw v.error;const N=await v.json(),b=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(L=>{const A=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(L.split(";")[1].split("=")[1]);g[`${P}Page`]=A}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},N),g),error:null}}catch(g){if(dt(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Nt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Nt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Nt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(dt(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Nt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(dt(t))return{data:null,error:t};throw t}}}function O0(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const xc={debug:!!(globalThis&&hm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Gv extends pm{}async function Kv(r,e,t){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),xc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Gv(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(xc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Jv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gm(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Yv(r){return parseInt(r,16)}function Xv(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Qv(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:h,resources:g,scheme:v,uri:N,version:b}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const y=gm(r.address),L=v?`${v}://${s}`:s,A=r.statement?`${r.statement}
`:"",P=`${L} wants you to sign in with your Ethereum account:
${y}

${A}`;let T=`URI: ${N}
Version: ${b}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(T+=`
Expiration Time: ${a.toISOString()}`),d&&(T+=`
Not Before: ${d.toISOString()}`),h&&(T+=`
Request ID: ${h}`),g){let R=`
Resources:`;for(const C of g){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);R+=`
- ${C}`}T+=R}return`${P}
${T}`}class gn extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Rd extends gn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Zv({error:r,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new gn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new gn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new gn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new gn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new gn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new gn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new gn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new gn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const c=window.location.hostname;if(mm(c)){if(o.rp.id!==c)return new gn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new gn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new gn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function ey({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new gn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new gn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(mm(s)){if(t.rpId!==s)return new gn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new gn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class ty{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ry=new ty;function ny(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=qd(r,["challenge","user","excludeCredentials"]),o=Ic(e).buffer,c=Object.assign(Object.assign({},t),{id:Ic(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:c});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const g=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},g),{id:Ic(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function sy(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=qd(r,["challenge","allowCredentials"]),a=Ic(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const d=t[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:Ic(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function iy(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:El(new Uint8Array(r.response.attestationObject)),clientDataJSON:El(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ay(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:El(new Uint8Array(a.authenticatorData)),clientDataJSON:El(new Uint8Array(a.clientDataJSON)),signature:El(new Uint8Array(a.signature)),userHandle:a.userHandle?El(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mm(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function R0(){var r,e;return!!(Mn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function oy(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Rd("Browser returned unexpected credential type",e)}:{data:null,error:new Rd("Empty credential response",e)}}catch(e){return{data:null,error:Zv({error:e,options:r})}}}async function ly(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Rd("Browser returned unexpected credential type",e)}:{data:null,error:new Rd("Empty credential response",e)}}catch(e){return{data:null,error:ey({error:e,options:r})}}}const cy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},uy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dd(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))s[o]=c;else if(t(c))s[o]=c;else if(e(c)){const d=s[o];e(d)?s[o]=Dd(d,c):s[o]=Dd(c)}else s[o]=c}return s}function dy(r,e){return Dd(cy,r,e||{})}function hy(r,e){return Dd(uy,r,e||{})}class fy{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:d};const h=a??ry.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=dy(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:v,error:N}=await oy({publicKey:g,signal:h});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:N}}case"request":{const g=hy(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:v,error:N}=await ly(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:h}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:N}}}}catch(c){return dt(c)?{data:null,error:c}:{data:null,error:new jl("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new Au("rpId is required for WebAuthn authentication")};try{if(!R0())return{data:null,error:new jl("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:s,credential_response:h.credential_response}})}catch(c){return dt(c)?{data:null,error:c}:{data:null,error:new jl("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new Au("rpId is required for WebAuthn registration")};try{if(!R0())return{data:null,error:new jl("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var N;return(N=v.data)===null||N===void 0?void 0:N.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:d};const{data:h,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:g}}catch(c){return dt(c)?{data:null,error:c}:{data:null,error:new jl("Unexpected error in register",c)}}}}Jv();const py={url:cv,storageKey:uv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function D0(r,e,t){return await t()}const wc={};class Eu{get jwks(){var e,t;return(t=(e=wc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){wc[this.storageKey]=Object.assign(Object.assign({},wc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=wc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wc[this.storageKey]=Object.assign(Object.assign({},wc[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},py),e);if(this.storageKey=o.storageKey,this.instanceID=(t=Eu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Eu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Mn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Vv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=fm(o.fetch),this.lock=o.lock||D0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Mn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Kv:this.lock=D0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:hm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=O0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=O0(this.memoryStorage)),Mn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(Mn()&&(t=jv(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),Mn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),vv(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return dt(t)?this._returnResult({error:t}):this._returnResult({error:new jl("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ui}),{data:c,error:d}=o;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const h=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(o){if(dt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:v,password:N,options:b}=e;let y=null,L=null;this.flowType==="pkce"&&([y,L]=await vc(this.storage,this.storageKey)),o=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:v,password:N,data:(t=b==null?void 0:b.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:y,code_challenge_method:L},xform:Ui})}else if("phone"in e){const{phone:v,password:N,options:b}=e;o=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:N,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Ui})}else throw new xd("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return await Bn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(o){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:c,options:d}=e;t=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:T0})}else if("phone"in e){const{phone:o,password:c,options:d}=e;t=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:T0})}else throw new xd("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new mc;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,c,d,h,g,v,N,b;let y,L;if("message"in e)y=e.message,L=e.signature;else{const{chain:A,wallet:P,statement:T,options:R}=e;let C;if(Mn())if(typeof P=="object")C=P;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")C=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=P}const j=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),J=await C.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!J||J.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=gm(J[0]);let le=(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!le){const Y=await C.request({method:"eth_chainId"});le=Yv(Y)}const se={domain:j.host,address:$,statement:T,uri:j.href,version:"1",chainId:le,nonce:(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=R==null?void 0:R.signInWithEthereum)===null||v===void 0?void 0:v.resources};y=Qv(se),L=await C.request({method:"personal_sign",params:[Xv(y),$]})}try{const{data:A,error:P}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:L},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ui});if(P)throw P;if(!A||!A.session||!A.user){const T=new mc;return this._returnResult({data:{user:null,session:null},error:T})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:P})}catch(A){if(dt(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var t,s,a,o,c,d,h,g,v,N,b,y;let L,A;if("message"in e)L=e.message,A=e.signature;else{const{chain:P,wallet:T,statement:R,options:C}=e;let j;if(Mn())if(typeof T=="object")j=T;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))j=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const J=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const $=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:J.host,uri:J.href}),R?{statement:R}:null));let le;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")le=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)le=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in le&&"signature"in le&&(typeof le.signedMessage=="string"||le.signedMessage instanceof Uint8Array)&&le.signature instanceof Uint8Array)L=typeof le.signedMessage=="string"?le.signedMessage:new TextDecoder().decode(le.signedMessage),A=le.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");L=[`${J.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${J.href}`,`Issued At: ${(a=(s=C==null?void 0:C.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((g=C==null?void 0:C.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((N=(v=C==null?void 0:C.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||N===void 0)&&N.length?["Resources",...C.signInWithSolana.resources.map(le=>`- ${le}`)]:[]].join(`
`);const $=await j.signMessage(new TextEncoder().encode(L),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=$}}try{const{data:P,error:T}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:L,signature:El(A)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ui});if(T)throw T;if(!P||!P.session||!P.user){const R=new mc;return this._returnResult({data:{user:null,session:null},error:R})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:T})}catch(P){if(dt(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const t=await _l(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{if(!s&&this.flowType==="pkce")throw new yv;const{data:o,error:c}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ui});if(await Bn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const d=new mc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:c}=e,d=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ui}),{data:h,error:g}=d;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h||!h.session||!h.user){const v=new mc;return this._returnResult({data:{user:null,session:null},error:v})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:g})}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,o,c;try{if("email"in e){const{email:d,options:h}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await vc(this.storage,this.storageKey));const{error:N}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in e){const{phone:d,options:h}=e,{data:g,error:v}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:v})}throw new xd("You must provide either an email or phone number.")}catch(d){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:d}=await Nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Ui});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,g=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(a){if(dt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,o,c;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await vc(this.storage,this.storageKey));const g=await Nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:zv});return!((o=g.data)===null||o===void 0)&&o.url&&Mn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(d){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ks;const{error:a}=await Nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(dt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:c}=await Nt(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:c,error:d}=await Nt(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new xd("You must provide either an email or phone number and a type")}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await _l(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Wh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await _l(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Gh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=Mv(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qo}):await this._useSession(async t=>{var s,a,o;const{data:c,error:d}=t;if(d)throw d;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ks}:await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:qo})})}catch(t){if(dt(t))return mv(t)&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Ks;const c=a.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await vc(this.storage,this.storageKey));const{data:g,error:v}=await Nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:qo});if(v)throw v;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ks;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:c}=Vh(e.access_token);if(c.exp&&(s=c.exp,a=s<=t),a){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(dt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:d}=t;if(d)throw d;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ks;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Mn())throw new wd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new k0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k0("No code detected.");const{data:R,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:d,expires_at:h,token_type:g}=e;if(!o||!d||!c||!g)throw new wd("No session defined in URL");const v=Math.round(Date.now()/1e3),N=parseInt(d);let b=v+N;h&&(b=parseInt(h));const y=b-v;y*1e3<=jc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${N}s`);const L=b-N;v-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,b,v):v-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,b,v);const{data:A,error:P}=await this._getUser(o);if(P)throw P;const T={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:N,expires_at:b,refresh_token:c,token_type:g,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(s){if(dt(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await _l(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({error:o});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(gv(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=kv(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await vc(this.storage,this.storageKey,!0));try{return await Nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var c,d,h,g,v;const{data:N,error:b}=o;if(b)throw b;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Nt(this.fetch,"GET",y,{headers:this.headers,jwt:(v=(g=N.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return Mn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(dt(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:c,provider:d,token:h,access_token:g,nonce:v}=e,N=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ui}),{data:b,error:y}=N;return y?this._returnResult({data:{user:null,session:null},error:y}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new mc}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:y}))}catch(a){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),dt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:c}=t;if(c)throw c;return await Nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Lv(async a=>(a>0&&await Ev(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ui})),(a,o)=>{const c=200*Math.pow(2,a);return o&&Hh(o)&&Date.now()+c-s<jc})}catch(s){if(this._debug(t,"error",s),dt(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Mn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await _l(this.storage,this.storageKey);if(a&&this.userStorage){let c=await _l(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Ac(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Gh()}else if(a&&!a.user&&!a.user){const c=await _l(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Bn(this.storage,this.storageKey+"-user"),await Ac(this.storage,this.storageKey,a)):a.user=Gh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wh;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Wh}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Hh(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ks;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Wd;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Ks;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),dt(o)){const c={data:null,error:o};return Hh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bn(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Ac(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=P0(a);await Ac(this.storage,this.storageKey,o)}else{const a=P0(t);await Ac(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bn(this.storage,this.storageKey),await Bn(this.storage,this.storageKey+"-code-verifier"),await Bn(this.storage,this.storageKey+"-user"),this.userStorage&&await Bn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/jc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${jc}ms, refresh threshold is ${jf} ticks`),a<=jf&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,c]=await vc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?this._returnResult({data:null,error:o}):await Nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:c}=t;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:g}=await Nt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?iy(e.webauthn.credential_response):ay(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const c=await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:ny(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:sy(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Vh(s.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const g=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await Nt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ks})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ks});const c=await Nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Mn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(dt(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ks});const c=await Nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Mn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(dt(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await Nt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ks})})}catch(e){if(dt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await Nt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ks})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+fv>a)return s;const{data:o,error:c}=await Nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:y,error:L}=await this.getSession();if(L||!y.session)return this._returnResult({data:null,error:L});s=y.session.access_token}const{header:a,payload:o,signature:c,raw:{header:d,payload:h}}=Vh(s);t!=null&&t.allowExpired||Dv(o.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!g){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:o,header:a,signature:c},error:null}}const v=Fv(a.alg),N=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,N,c,Nv(`${d}.${h}`)))throw new Lf("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(s){if(dt(s))return this._returnResult({data:null,error:s});throw s}}}Eu.nextInstanceID={};const gy=Eu,my="2.89.0";let hu="";typeof Deno<"u"?hu="deno":typeof document<"u"?hu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hu="react-native":hu="node";const vy={"X-Client-Info":`supabase-js-${hu}/${my}`},yy={headers:vy},xy={schema:"public"},wy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},by={};function Lu(r){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(r)}function _y(r,e){if(Lu(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(Lu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ny(r){var e=_y(r,"string");return Lu(e)=="symbol"?e:e+""}function Sy(r,e,t){return(e=Ny(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function F0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function tn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F0(Object(t),!0).forEach(function(s){Sy(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):F0(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}const ky=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),jy=()=>Headers,Ay=(r,e,t)=>{const s=ky(t),a=jy();return async(o,c)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:r;let g=new a(c==null?void 0:c.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${h}`),s(o,tn(tn({},c),{},{headers:g}))}};function Ey(r){return r.endsWith("/")?r:r+"/"}function Ly(r,e){var t,s;const{db:a,auth:o,realtime:c,global:d}=r,{db:h,auth:g,realtime:v,global:N}=e,b={db:tn(tn({},h),a),auth:tn(tn({},g),o),realtime:tn(tn({},v),c),storage:{},global:tn(tn(tn({},N),d),{},{headers:tn(tn({},(t=N==null?void 0:N.headers)!==null&&t!==void 0?t:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}function Py(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ey(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Cy=class extends gy{constructor(r){super(r)}},Ty=class{constructor(r,e,t){var s,a;this.supabaseUrl=r,this.supabaseKey=e;const o=Py(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:xy,realtime:by,auth:tn(tn({},wy),{},{storageKey:c}),global:yy},h=Ly(t??{},d);if(this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(v,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=h.auth)!==null&&g!==void 0?g:{},this.headers,h.global.fetch)}this.fetch=Ay(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(tn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new d2(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new lv(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new a2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,t;if(r.accessToken)return await r.accessToken();const{data:s}=await r.auth.getSession();return(e=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:a,storageKey:o,flowType:c,lock:d,debug:h,throwOnError:g},v,N){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cy({url:this.authUrl.href,headers:tn(tn({},b),v),storageKey:o,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:a,flowType:c,lock:d,debug:h,throwOnError:g,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new E2(this.realtimeUrl.href,tn(tn({},r),{},{params:tn(tn({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(r,e,t){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Iy=(r,e,t)=>new Ty(r,e,t);function Oy(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Oy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const st=Iy(`https://${t2}.supabase.co`,r2),vm={async signUp(r,e,t,s,a){const{data:o,error:c}=await st.auth.signUp({email:r,password:e});if(c)throw c;if(o.user){const{error:d}=await st.from("profiles").insert({id:o.user.id,email:r,full_name:t,role:s,assigned_depot_id:a||null,password:e});d&&console.error("Error creating profile:",d)}return o},async signIn(r,e){const{data:t,error:s}=await st.auth.signInWithPassword({email:r,password:e});if(!s&&t.session){const c=await this.getUserProfile(r);return{...t,user:{...t.user,role:(c==null?void 0:c.role)||"owner",assigned_depot_id:(c==null?void 0:c.assigned_depot_id)||null}}}const{data:a,error:o}=await st.from("profiles").select("*").eq("email",r).eq("password",e).single();if(o||!a)throw new Error("Invalid login credentials");return{user:{id:a.id,email:a.email,role:a.role,assigned_depot_id:a.assigned_depot_id||null},session:{access_token:"mock-token",user:a}}},async signOut(){await st.auth.signOut()},async getSession(){const{data:r}=await st.auth.getSession();return r.session},async getUserProfile(r){const{data:e,error:t}=await st.from("profiles").select("*").eq("email",r).single();return t?null:e}},Xs={async getAll(){const{data:r,error:e}=await st.from("bookings_complete").select("*").order("created_at",{ascending:!1});if(e)throw e;return{bookings:r}},async getById(r){const{data:e,error:t}=await st.from("bookings").select("*").eq("id",r).single();if(t)throw t;return{booking:e}},async create(r){var e,t,s;try{const a=await this.createAtomic(r);if(a)return console.log("[BookingsAPI] Booking created atomically"),a}catch(a){a.code==="PGRST202"||a.code==="42883"||((e=a.message)==null?void 0:e.includes("404"))||((t=a.message)==null?void 0:t.includes("not found"))||((s=a.message)==null?void 0:s.includes("does not exist"))||console.warn("[BookingsAPI] Atomic creation failed, using fallback:",a.message)}return this.createSequential(r)},async createAtomic(r){const{data:e,error:t}=await st.rpc("create_booking_atomic",{p_booking:{origin_depot_id:r.origin_depot_id,destination_depot_id:r.destination_depot_id,payment_method:r.payment_method,delivery_type:r.delivery_type,delivery_charges:r.delivery_charges||0,sender_name:r.sender_name,sender_phone:r.sender_phone,subtotal:r.subtotal||0,total_amount:r.total_amount||0,status:r.current_status||"booked",custom_instructions:r.special_instructions},p_receivers:(r.receivers||[]).map((s,a)=>({name:s.name,phone:s.phone,address:s.address||null,order:a+1,packages:(s.packages||[]).map(o=>({packageId:o.packageId,size:o.size,quantity:o.quantity,price:o.price,description:o.description}))}))});if(t)throw t;return{booking:{id:e.id,receipt_number:e.receipt_number}}},async createSequential(r){try{const{data:e,error:t}=await st.from("bookings").insert({origin_depot_id:r.origin_depot_id,destination_depot_id:r.destination_depot_id,payment_method:r.payment_method,delivery_type:r.delivery_type,delivery_charges:r.delivery_charges,sender_name:r.sender_name,sender_phone:r.sender_phone,subtotal:r.subtotal,total_amount:r.total_amount,status:r.current_status||"booked",custom_instructions:r.special_instructions}).select().single();if(t)throw t;const s=r.receivers||[];for(let a=0;a<s.length;a++){const o=s[a],{data:c,error:d}=await st.from("booking_receivers").insert({booking_id:e.id,receiver_name:o.name,receiver_phone:o.phone,delivery_address:o.address||null,receiver_order:a+1}).select().single();if(d)throw d;const h=o.packages||[];for(const g of h){let v=null;g.packageId&&g.packageId!=="custom"&&g.packageId.length>10&&(v=g.packageId);const N={receiver_id:c.id,package_id:v,package_size:g.size||"Custom",quantity:parseInt(String(g.quantity))||1,price_per_unit:parseFloat(String(g.price))||0,description:g.description||null};console.log("Inserting package:",N);const{error:b}=await st.from("receiver_packages").insert(N);if(b)throw console.error("Package insert error:",b,"Data:",N),b}}return{booking:e}}catch(e){throw console.error("Error creating booking:",e),e}},async update(r,e){const{data:t,error:s}=await st.from("bookings").update(e).eq("id",r).select().single();if(s)throw s;return{booking:t}},async updateStatus(r,e){const t={status:e};e==="delivered"&&(t.delivered_at=new Date().toISOString());const{data:s,error:a}=await st.from("bookings").update(t).eq("id",r).select().single();if(a)throw a;return{booking:s}}},Rl={async getAll(){const{data:r,error:e}=await st.from("trips").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Trips getAll error:",e.code,e.message,e.details,e.hint),e;return{trips:r||[]}},async create(r,e){const s={id:`TR-${Date.now().toString().slice(-8)}`,driver_name:r.driver,vehicle_number:r.vehicle,status:"in_transit"};r.driverPhone&&(s.driver_phone=r.driverPhone),r.tripCost&&(s.trip_cost=r.tripCost),r.originId&&(s.origin_depot_id=r.originId),r.destinationId&&(s.destination_depot_id=r.destinationId),r.departure&&(s.departure_time=r.departure),r.eta&&(s.arrival_time=r.eta);const{data:a,error:o}=await st.from("trips").insert(s).select().single();if(o)throw console.error("Trip creation error - Code:",o.code),console.error("Trip creation error - Message:",o.message),console.error("Trip creation error - Details:",o.details),console.error("Trip creation error - Hint:",o.hint),console.error("Trip creation error - Insert data:",JSON.stringify(s,null,2)),o;if(e&&e.length>0){const c=r.isForwarding?"in_transit_forwarding":"in_transit",{error:d}=await st.from("bookings").update({trip_id:a.id,status:c,current_location_depot_id:r.destinationId||null}).in("id",e);d&&console.error("Error linking bookings to trip:",d);const h=e.map(v=>({trip_id:a.id,booking_id:v})),{error:g}=await st.from("trip_bookings").insert(h);g&&console.error("Error inserting trip_bookings:",g)}return{trip:a}},async update(r,e){const{data:t,error:s}=await st.from("trips").update(e).eq("id",r).select().single();if(s)throw s;return{trip:t}},async getAllWithProgress(){const{data:r,error:e}=await st.from("trips").select("*").order("created_at",{ascending:!1});if(e)throw e;if(!r||r.length===0)return{trips:[]};const{data:t,error:s}=await st.from("bookings").select("trip_id, status").not("trip_id","is",null);if(s)return console.error("Error fetching booking counts:",s),{trips:r.map(c=>({...c,total_bookings:0,delivered_bookings:0}))};const a={};return(t||[]).forEach(c=>{a[c.trip_id]||(a[c.trip_id]={total:0,delivered:0}),a[c.trip_id].total++,c.status==="delivered"&&a[c.trip_id].delivered++}),{trips:r.map(c=>{var d,h;return{...c,total_bookings:((d=a[c.id])==null?void 0:d.total)||0,delivered_bookings:((h=a[c.id])==null?void 0:h.delivered)||0}})}},async getBookingsForTrip(r){const{data:e,error:t}=await st.from("bookings_complete").select("*").eq("trip_id",r).order("created_at",{ascending:!1});if(t)throw t;return{bookings:e||[]}}},fu={async getAll(){const{data:r,error:e}=await st.from("profiles").select("*");if(e)throw e;return{users:r.map(s=>({id:s.id,name:s.full_name,email:s.email,role:s.role,assignedDepot:s.assigned_depot_id,status:s.status}))}},async create(r){const{data:e,error:t}=await st.from("profiles").insert({email:r.email,full_name:r.name,role:r.role,password:r.password,assigned_depot_id:r.assignedDepotId}).select().single();if(t)throw t;return{user:e}},async update(r,e){const t={};e.name&&(t.full_name=e.name),e.role&&(t.role=e.role),e.email&&(t.email=e.email),e.assignedDepot&&(t.assigned_depot_id=e.assignedDepot);const{data:s,error:a}=await st.from("profiles").update(t).eq("id",r).select();if(a)throw a;return{user:s}},async delete(r){const{error:e}=await st.from("profiles").delete().eq("id",r);if(e)throw e;return{success:!0}}},yi={async getAll(){const{data:r,error:e}=await st.from("depots").select("*").order("number");if(e)throw e;return{depots:r}},async getById(r){try{const e=r.trim(),{depots:t}=await this.getAll();if(!t)return null;const s=t.find(a=>String(a.id)===e||String(a.number)===e);return console.log("Depot found for ID",e,":",s),s||null}catch(e){throw console.error("Error in getById:",e),e}},async create(r){const{data:e,error:t}=await st.from("depots").insert({name:r.name,type:r.type,location:r.address,contact_person:r.contactPerson,contact_phone:r.contactPhone}).select().single();if(t)throw t;return{depot:e}},async update(r,e){const{data:t,error:s}=await st.from("depots").update({name:e.name,type:e.type,location:e.address,contact_person:e.contactPerson,contact_phone:e.contactPhone}).eq("id",r).select();if(s)throw s;return{depot:t}},async delete(r){const{error:e}=await st.from("depots").delete().eq("id",r);if(e)throw e;return{success:!0}}},Cc={async getAll(){const{data:r,error:e}=await st.from("packages").select("*");if(e)throw e;return{packages:r.map(s=>({id:s.id,name:s.name,basePrice:s.base_price}))}},async create(r){const{data:e,error:t}=await st.from("packages").insert({name:r.name,base_price:r.basePrice}).select().single();if(t)throw t;return{package:e}},async update(r,e){const{data:t,error:s}=await st.from("packages").update({name:e.name,base_price:e.basePrice}).eq("id",r).select();if(s)throw s;return{success:!0}},async delete(r){const{error:e}=await st.from("packages").delete().eq("id",r);if(e)throw e;return{success:!0}}},Tc={async getAll(){const{data:r,error:e}=await st.from("depot_routes").select(`
      *,
      origin_depot: origin_depot_id(name),
        forwarding_depot: forwarding_depot_id(name)
          `);if(e)throw e;const t=new Map;return r.forEach(s=>{var a;t.has(s.origin_depot_id)||t.set(s.origin_depot_id,{id:s.origin_depot_id,originDepotId:s.origin_depot_id,originDepotName:(a=s.origin_depot)==null?void 0:a.name,forwardingDepotIds:[]}),t.get(s.origin_depot_id).forwardingDepotIds.push(s.forwarding_depot_id)}),{routes:Array.from(t.values())}},async getByDepotId(r){const{data:e,error:t}=await st.from("depot_routes").select(`
          *,
          origin_depot: origin_depot_id(name),
            forwarding_depot: forwarding_depot_id(name)
      `).eq("origin_depot_id",r);if(t)throw t;const s=e.map(a=>a.forwarding_depot_id);return{depotId:r,forwardingDepotIds:s,routes:e}},async create(r){const e=r.forwardingDepotIds.map(t=>({origin_depot_id:r.originDepotId,forwarding_depot_id:t}));if(e.length>0){const{error:t}=await st.from("depot_routes").insert(e);if(t)throw t}return{success:!0}},async update(r,e){await st.from("depot_routes").delete().eq("origin_depot_id",r);const t=e.forwardingDepotIds.map(s=>({origin_depot_id:r,forwarding_depot_id:s}));if(t.length>0){const{error:s}=await st.from("depot_routes").insert(t);if(s)throw s}return{success:!0}},async delete(r){const{error:e}=await st.from("depot_routes").delete().eq("origin_depot_id",r);if(e)throw e;return{success:!0}}},Fd={async getAll(){const{data:r,error:e}=await st.from("depot_package_prices").select("*");return e?(console.warn("depot_package_prices fetch failed",e),{pricing:[]}):{pricing:r.map(s=>({id:s.id,depotId:s.depot_id,packageId:s.package_id,price:s.price}))}},async update(r,e,t){const{error:s}=await st.from("depot_package_prices").upsert({package_id:r,depot_id:e,price:t},{onConflict:"depot_id, package_id"});if(s)throw s}},Pu={async get(){const{data:r}=await st.from("season_settings").select("*").limit(1).maybeSingle();return{season:r?{startDate:r.start_date,endDate:r.end_date,year:2025}:null}},async update(r){const{data:e}=await st.from("season_settings").select("id").limit(1).maybeSingle();e?await st.from("season_settings").update({start_date:r.startDate,end_date:r.endDate}).eq("id",e.id):await st.from("season_settings").insert({start_date:r.startDate,end_date:r.endDate})}};({...Xs});const Pf={async getCreditBookings(r){let e=st.from("bookings_complete").select("*").in("payment_method",["credit","to_pay"]).order("created_at",{ascending:!1});r&&(e=e.or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`));const{data:t,error:s}=await e;if(s)throw s;return{bookings:t||[]}},async getPayments(r,e){let t=st.from("credit_payments").select("*").order("payment_date",{ascending:!1});r&&e&&(t=t.eq("customer_name",r).eq("customer_phone",e));const{data:s,error:a}=await t;if(a)throw a;return{payments:s||[]}},async recordPayment(r){const{data:e,error:t}=await st.from("credit_payments").insert({customer_name:r.customer_name,customer_phone:r.customer_phone,amount:r.amount,payment_method:r.payment_method||"cash",notes:r.notes||""}).select().single();if(t)throw t;return{payment:e}},async getCreditSummary(r){let e=st.from("bookings_complete").select("*").in("payment_method",["credit","to_pay"]).order("created_at",{ascending:!1});r&&(e=e.or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`));const{data:t,error:s}=await e;if(s)throw s;const{data:a,error:o}=await st.from("credit_payments").select("*").order("payment_date",{ascending:!1}),c=o?[]:a||[],d=t||[],h=new Map;d.forEach(b=>{const y=(b.sender_name||"Unknown").trim(),L=y.toLowerCase();h.has(L)||h.set(L,{id:L,customer:y,phone:b.sender_phone||"N/A",totalCredit:0,advancePaid:0,netOutstanding:0,lastPayment:null,bookings:[],payments:[],bookingCount:0});const A=h.get(L),P=Number(b.total_amount)||0;A.phone==="N/A"&&b.sender_phone&&(A.phone=b.sender_phone),A.totalCredit+=P,A.bookingCount+=1,A.bookings.push({id:b.id||b.receipt_number,receiptNumber:b.receipt_number,amount:P,date:b.created_at,status:b.status,destination:b.destination_depot_name||"N/A"})}),c.forEach(b=>{const L=(b.customer_name||"Unknown").trim().toLowerCase();if(h.has(L)){const A=h.get(L),P=Number(b.amount)||0;A.phone==="N/A"&&b.customer_phone&&(A.phone=b.customer_phone),A.advancePaid+=P,A.payments.push({id:b.id,receiptNumber:b.receipt_number,amount:P,date:b.payment_date,method:b.payment_method,notes:b.notes}),(!A.lastPayment||new Date(b.payment_date)>new Date(A.lastPayment))&&(A.lastPayment=b.payment_date)}}),h.forEach(b=>{b.netOutstanding=Math.max(0,b.totalCredit-b.advancePaid)});const g=d.reduce((b,y)=>b+(Number(y.total_amount)||0),0),v=c.reduce((b,y)=>b+(Number(y.amount)||0),0),N=Math.max(0,g-v);return{accounts:Array.from(h.values()),totalCredit:g,totalAdvancePaid:v,totalNetOutstanding:N}}},Cf={async create(){alert("Database usage active. Contact admin for SQL Dumps.")},async restore(){alert("Database usage active. Contact admin for SQL Restores.")}},Bd={async search(r,e=10){if(!r||r.length<2)return{contacts:[]};const{data:t,error:s}=await st.from("contacts").select("*").or(`name.ilike.%${r}%,phone.ilike.%${r}%`).order("usage_count",{ascending:!1}).order("last_used_at",{ascending:!1}).limit(e);return s?(console.error("Error searching contacts:",s),{contacts:[]}):{contacts:t||[]}},async getAll(r=50){const{data:e,error:t}=await st.from("contacts").select("*").order("usage_count",{ascending:!1}).order("last_used_at",{ascending:!1}).limit(r);return t?(console.error("Error fetching contacts:",t),{contacts:[]}):{contacts:e||[]}},async upsert(r,e){if(!r||!e)return null;const{data:t,error:s}=await st.rpc("upsert_contact",{p_name:r,p_phone:e});if(s){console.error("Error upserting contact:",s);const{data:a,error:o}=await st.from("contacts").upsert({name:r,phone:e,usage_count:1,last_used_at:new Date().toISOString()},{onConflict:"phone"}).select().single();return o?(console.error("Fallback upsert failed:",o),null):a}return t}},pu={async getBookingSummary(r,e,t){let s=st.from("bookings_complete").select("*");r&&(s=s.gte("created_at",r)),e&&(s=s.lte("created_at",e+"T23:59:59")),t&&(s=s.or(`origin_depot_id.eq.${t},destination_depot_id.eq.${t}`));const{data:a,error:o}=await s;if(o)throw o;const c=a||[],d=c.length,h=c.filter(A=>A.status==="booked").length,g=c.filter(A=>["in_transit","in_transit_origin","in_transit_forwarding"].includes(A.status)).length,v=c.filter(A=>A.status==="delivered").length,N=h+g,b=c.reduce((A,P)=>A+(Number(P.total_amount)||0),0),y=c.reduce((A,P)=>Array.isArray(P.package_details)?A+P.package_details.reduce((T,R)=>T+(Number(R.quantity)||0),0):A,0),L={cash:c.filter(A=>A.payment_method==="cash").reduce((A,P)=>A+(Number(P.total_amount)||0),0),online:c.filter(A=>A.payment_method==="online").reduce((A,P)=>A+(Number(P.total_amount)||0),0),to_pay:c.filter(A=>A.payment_method==="to_pay").reduce((A,P)=>A+(Number(P.total_amount)||0),0),credit:c.filter(A=>A.payment_method==="credit").reduce((A,P)=>A+(Number(P.total_amount)||0),0)};return{totalBookings:d,bookedCount:h,inTransitCount:g,deliveredCount:v,pendingCount:N,totalRevenue:b,totalPackages:y,revenueByMethod:L}},async getTripSummary(r,e,t){let s=st.from("trips").select("*");r&&(s=s.gte("created_at",r)),e&&(s=s.lte("created_at",e+"T23:59:59")),t&&(s=s.or(`origin_depot_id.eq.${t},destination_depot_id.eq.${t}`));const{data:a,error:o}=await s;if(o)throw o;const c=a||[],d=c.length,h=c.filter(N=>N.status==="completed").length,g=c.filter(N=>N.status==="active"||N.status==="in_transit").length,v=c.reduce((N,b)=>N+(Number(b.trip_cost)||0),0);return{totalTrips:d,completedTrips:h,activeTrips:g,pendingTrips:d-h-g,totalTripCost:v}},async getTopCustomers(r=5,e,t,s){let a=st.from("bookings_complete").select("sender_name, sender_phone, total_amount");e&&(a=a.gte("created_at",e)),t&&(a=a.lte("created_at",t+"T23:59:59")),s&&(a=a.or(`origin_depot_id.eq.${s},destination_depot_id.eq.${s}`));const{data:o,error:c}=await a;if(c)throw c;const d=o||[],h=new Map;return d.forEach(v=>{const N=(v.sender_name||"Unknown").toLowerCase().trim();h.has(N)||h.set(N,{name:v.sender_name||"Unknown",phone:v.sender_phone||"N/A",bookings:0,revenue:0});const b=h.get(N);b.bookings+=1,b.revenue+=Number(v.total_amount)||0}),{customers:Array.from(h.values()).sort((v,N)=>N.revenue-v.revenue).slice(0,r)}},async getTopRoutes(r=5,e,t,s){let a=st.from("bookings_complete").select("origin_depot_name, destination_depot_name, total_amount");e&&(a=a.gte("created_at",e)),t&&(a=a.lte("created_at",t+"T23:59:59")),s&&(a=a.or(`origin_depot_id.eq.${s},destination_depot_id.eq.${s}`));const{data:o,error:c}=await a;if(c)throw c;const d=o||[],h=new Map;return d.forEach(v=>{const N=v.origin_depot_name||"Unknown",b=v.destination_depot_name||"Unknown",y=`${N}  ${b} `;h.has(y)||h.set(y,{route:y,trips:0,revenue:0});const L=h.get(y);L.trips+=1,L.revenue+=Number(v.total_amount)||0}),{routes:Array.from(h.values()).sort((v,N)=>N.revenue-v.revenue).slice(0,r)}}},Tf={async getPaymentReport(r,e,t){const{data:s,error:a}=await st.from("bookings_complete").select("*").eq("payment_method","to_pay").or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`).order("created_at",{ascending:!1});if(a)throw a;let o=(s||[]).filter(h=>h.to_pay_collected_at!=null||h.status==="delivered");if(e&&(o=o.filter(h=>(h.to_pay_collected_at||h.updated_at)>=e)),t){const h=t+"T23:59:59";o=o.filter(g=>(g.to_pay_collected_at||g.updated_at)<=h)}o.sort((h,g)=>{const v=new Date(h.to_pay_collected_at||h.updated_at).getTime();return new Date(g.to_pay_collected_at||g.updated_at).getTime()-v});const c=o.filter(h=>h.to_pay_collected_method==="cash").reduce((h,g)=>h+(Number(g.total_amount)||0),0),d=o.filter(h=>h.to_pay_collected_method==="online").reduce((h,g)=>h+(Number(g.total_amount)||0),0);return{payments:o.map(h=>({date:h.to_pay_collected_at||h.updated_at,receipt_number:h.receipt_number,customer_name:h.sender_name,amount:Number(h.total_amount)||0,payment_method:h.to_pay_collected_method||"cash",destination:h.destination_depot_name})),summary:{total:c+d,cash:c,online:d,count:o.length}}},async getDeliveryReport(r,e,t){let s=st.from("bookings_complete").select("*").or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`).neq("status","booked");e&&(s=s.gte("created_at",e)),t&&(s=s.lte("created_at",t+"T23:59:59"));const{data:a,error:o}=await s.order("created_at",{ascending:!1});if(o)throw o;const c=a||[],d=c.filter(v=>v.status==="delivered"),h=c.filter(v=>v.status!=="delivered"),g=c.reduce((v,N)=>Array.isArray(N.package_details)?v+N.package_details.reduce((b,y)=>b+(Number(y.quantity)||0),0):v,0);return{deliveries:c.map(v=>({date:v.created_at,receipt_number:v.receipt_number,customer_name:v.sender_name,destination:v.destination_depot_name,packages:Array.isArray(v.package_details)?v.package_details.reduce((N,b)=>N+(Number(b.quantity)||0),0):0,status:v.status,delivery_instructions:v.delivery_instructions||"Pickup",delivered_at:v.status==="delivered"?v.updated_at:null})),summary:{total:c.length,delivered:d.length,pending:h.length,totalPackages:g}}}},Ry=Object.freeze(Object.defineProperty({__proto__:null,authApi:vm,backupApi:Cf,bookingsApi:Xs,contactsApi:Bd,creditApi:Pf,depotPricingApi:Fd,depotReportsApi:Tf,depotRoutesApi:Tc,depotsApi:yi,packagesApi:Cc,reportsApi:pu,seasonApi:Pu,supabase:st,tripsApi:Rl,usersApi:fu},Symbol.toStringTag,{value:"Module"}));function Dy({onLogin:r}){const[e,t]=Te.useState(""),[s,a]=Te.useState(""),[o,c]=Te.useState(!1),[d,h]=Te.useState(""),g=async v=>{var N,b,y;if(v.preventDefault(),!(!e||!s)){c(!0),h("");try{const L=await vm.signIn(e,s),A=((N=L.user)==null?void 0:N.role)||"owner",P=((b=L.user)==null?void 0:b.id)||"",T=((y=L.user)==null?void 0:y.assigned_depot_id)||null;console.log("Login successful:",{userRole:A,userId:P,depotId:T}),r(A,P,T)}catch(L){console.error("Login error:",L),h(L.message||"Invalid email or password. Please try again.")}finally{c(!1)}}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 to-yellow-100 flex items-center justify-center p-4",children:u.jsx("div",{className:"w-full max-w-md",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4 overflow-hidden",children:u.jsx("img",{src:"/logo.webp",alt:"Mango Express Logo",className:"w-full h-full object-contain p-2"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mango Express"}),u.jsx("p",{className:"text-gray-600",children:"Seasonal Transport Management"})]}),u.jsxs("form",{onSubmit:g,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),u.jsx("input",{id:"email",type:"email",value:e,onChange:v=>t(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),u.jsx("input",{id:"password",type:"password",value:s,onChange:v=>a(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),u.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",disabled:o,children:o?"Logging in...":"Login"})]}),d&&u.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:d}),u.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:u.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Need help? Contact your system administrator."})})]})})})}function Fy({userRole:r,assignedDepotId:e}){const[t,s]=Te.useState([{label:"Today's Bookings",value:"0",icon:""},{label:"Today's Revenue",value:"0",icon:""},{label:"Total Revenue",value:"0",icon:""},{label:"Total Trips",value:"0",icon:""}]),[a,o]=Te.useState([]),[c,d]=Te.useState([]),[h,g]=Te.useState(!0);Te.useEffect(()=>{v()},[]);const v=async()=>{try{const[N,b]=await Promise.all([Xs.getAll(),Rl.getAll()]),y=N.bookings||[],L=b.trips||[],A=r==="depot_manager"&&e?y.filter(ne=>(ne.destination_depot_id===e||ne.origin_depot_id===e)&&ne.status!=="booked"):y,P=r==="depot_manager"&&e?L.filter(ne=>ne.origin_depot_id===e||ne.destination_depot_id===e):L,T=new Date;T.setHours(0,0,0,0);const R=T.getTime(),C=A.filter(ne=>{const te=new Date(ne.created_at);return te.setHours(0,0,0,0),te.getTime()===R}),j=C.length,J=P.length,$=P.filter(ne=>ne.status==="in_transit"||ne.status==="loading").length,le=A.filter(ne=>ne.status!=="delivered").length,se=C.reduce((ne,te)=>ne+(Number(te.total_amount)||0),0),Y=se>1e5?`${(se/1e5).toFixed(1)}L`:`${se.toLocaleString("en-IN")}`,me=A.reduce((ne,te)=>ne+(Number(te.total_amount)||0),0),M=me>1e5?`${(me/1e5).toFixed(1)}L`:`${me.toLocaleString("en-IN")}`,B=A.filter(ne=>ne.payment_method==="to_pay"&&ne.status!=="delivered").reduce((ne,te)=>ne+(Number(te.total_amount)||0),0),ge=C.filter(ne=>ne.payment_method==="to_pay"&&ne.status!=="delivered").reduce((ne,te)=>ne+(Number(te.total_amount)||0),0),ue=A.filter(ne=>ne.payment_method==="to_pay"&&ne.status==="delivered").reduce((ne,te)=>ne+(Number(te.total_amount)||0),0),we=A.filter(ne=>{if(ne.payment_method!=="to_pay"||!ne.to_pay_collected_at)return!1;const te=new Date(ne.to_pay_collected_at);return te.setHours(0,0,0,0),te.getTime()===R}).reduce((ne,te)=>ne+(Number(te.total_amount)||0),0),ae=C.reduce((ne,te)=>{var H;return ne+(((H=te.receivers)==null?void 0:H.reduce((E,V)=>{var q;return E+(((q=V.packages)==null?void 0:q.reduce((ie,ce)=>ie+(ce.quantity||0),0))||0)},0))||0)},0);s(r==="booking_clerk"?[{label:"Today's Bookings",value:String(j),icon:""},{label:"Active Trips",value:String($),icon:""},{label:"Pending Deliveries",value:String(le),icon:""},{label:"Total Trips",value:String(J),icon:""}]:r==="depot_manager"?[{label:"Today's Packages",value:String(ae),icon:""},{label:"Pending To-Pay",value:`Today: ${ge.toLocaleString("en-IN")}
Total: ${B.toLocaleString("en-IN")}`,icon:""},{label:"To-Pay Collected",value:`Today: ${we.toLocaleString("en-IN")}
Total: ${ue.toLocaleString("en-IN")}`,icon:""},{label:"Pending Deliveries",value:String(le),icon:""}]:[{label:"Today's Bookings",value:String(j),icon:""},{label:"Today's Revenue",value:Y,icon:""},{label:"Total Revenue",value:M,icon:""},{label:"Total Trips",value:String(J),icon:""}]),o(A.slice(0,5).map(ne=>{var H;const te=((H=ne.receivers)==null?void 0:H.reduce((E,V)=>{var q;return E+(((q=V.packages)==null?void 0:q.reduce((ie,ce)=>ie+(ce.quantity||0),0))||0)},0))||0;return{id:ne.id||ne.receipt_number,customer:ne.sender_name||ne.customer_name||"N/A",origin:ne.origin_depot_name||ne.origin_location||"N/A",destination:ne.destination_depot_name||ne.destination_location||"N/A",quantity:te>0?`${te} pkg`:ne.quantity||"0",status:ne.status,total:ne.total_amount||0}})),d(L.filter(ne=>ne.status!=="completed"&&ne.status!=="cancelled").slice(0,5).map(ne=>{var te,H;return{id:ne.id,route:`${((te=ne.origin_depot)==null?void 0:te.name)||"Origin"}  ${((H=ne.destination_depot)==null?void 0:H.name)||"Dest"}`,driver:ne.driver_name,vehicle:ne.vehicle_number,status:ne.status,bookings:0}}))}catch(N){console.error("Error loading dashboard data:",N)}finally{g(!1)}};return h?u.jsx("div",{className:"p-8",children:"Loading dashboard..."}):u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),u.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your logistics overview."})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.map((N,b)=>u.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsx("span",{className:"text-2xl",children:N.icon})}),u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:N.label}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 whitespace-pre-line",children:N.value})]},b))}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Recent Bookings"})}),u.jsx("div",{className:"divide-y divide-gray-200",children:a.length===0?u.jsx("div",{className:"p-6 text-gray-500 text-center",children:"No bookings found."}):a.map(N=>{var b;return u.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:N.customer}),u.jsx("p",{className:"text-sm text-gray-600",children:N.id})]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N.status==="booked"?"bg-blue-100 text-blue-700":N.status==="delivered"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:(b=N.status)==null?void 0:b.replace("_"," ")})]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[N.origin,"  ",N.destination,"  ",N.quantity]})]},N.id)})})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Active Trips"})}),u.jsx("div",{className:"divide-y divide-gray-200",children:c.length===0?u.jsx("div",{className:"p-6 text-gray-500 text-center",children:"No active trips."}):c.map(N=>{var b;return u.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:N.route}),u.jsx("p",{className:"text-sm text-gray-600",children:N.id})]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${N.status==="in_transit"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:(b=N.status)==null?void 0:b.replace("_"," ")})]}),u.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Driver: ",N.driver]}),u.jsx("p",{className:"text-sm text-gray-600",children:N.vehicle})]},N.id)})})]})]})]})}const By="modulepreload",My=function(r){return"/"+r},B0={},vu=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let c=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=c(t.map(g=>{if(g=My(g),g in B0)return;B0[g]=!0;const v=g.endsWith(".css"),N=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${N}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":By,v||(b.as="script"),b.crossOrigin="",b.href=g,h&&b.setAttribute("nonce",h),document.head.appendChild(b),v)return new Promise((y,L)=>{b.addEventListener("load",y),b.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function ym({nameValue:r,phoneValue:e,onNameChange:t,onPhoneChange:s,onContactSelect:a,nameLabel:o="Name",phoneLabel:c="Phone",namePlaceholder:d="Enter name",phonePlaceholder:h="10-digit number",required:g=!1}){const[v,N]=Te.useState([]),[b,y]=Te.useState(!1),[L,A]=Te.useState(null),[P,T]=Te.useState(!1),R=Te.useRef(null);Te.useEffect(()=>{const J=L==="name"?r:e;if(!J||J.length<2){N([]),y(!1);return}const $=setTimeout(async()=>{T(!0);const{contacts:le}=await Bd.search(J);N(le),y(le.length>0),T(!1)},300);return()=>clearTimeout($)},[r,e,L]),Te.useEffect(()=>{const J=$=>{R.current&&!R.current.contains($.target)&&y(!1)};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[]);const C=J=>{t(J.name),s(J.phone),y(!1),a&&a(J)},j=J=>/^[6-9]\d{9}$/.test(J);return u.jsxs("div",{className:"relative",ref:R,children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o," ",g&&"*"]}),u.jsx("input",{type:"text",value:r,onChange:J=>t(J.target.value),onFocus:()=>A("name"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:d,autoComplete:"off",required:g})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[c," ",g&&"*"]}),u.jsx("input",{type:"tel",value:e,onChange:J=>s(J.target.value),onFocus:()=>A("phone"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:h,maxLength:10,autoComplete:"off",required:g}),e&&!j(e)&&u.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Must be 10 digits starting with 9, 8, 7, or 6"})]})]}),b&&u.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:P?u.jsx("div",{className:"p-3 text-gray-500 text-center",children:"Searching..."}):v.map(J=>u.jsx("button",{type:"button",onClick:()=>C(J),className:"w-full text-left px-4 py-3 hover:bg-orange-50 border-b border-gray-100 last:border-0 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-gray-900",children:J.name}),u.jsx("div",{className:"text-sm text-gray-600",children:J.phone})]}),u.jsxs("div",{className:"text-xs text-gray-400",children:["Used ",J.usage_count,"x"]})]})},J.id))})]})}const M0=r=>{let e;const t=new Set,s=(g,v)=>{const N=typeof g=="function"?g(e):g;if(!Object.is(N,e)){const b=e;e=v??(typeof N!="object"||N===null)?N:Object.assign({},e,N),t.forEach(y=>y(e,b))}},a=()=>e,d={setState:s,getState:a,getInitialState:()=>h,subscribe:g=>(t.add(g),()=>t.delete(g))},h=e=r(s,a,d);return d},Uy=(r=>r?M0(r):M0),$y=r=>r;function qy(r,e=$y){const t=Al.useSyncExternalStore(r.subscribe,Al.useCallback(()=>e(r.getState()),[r,e]),Al.useCallback(()=>e(r.getInitialState()),[r,e]));return Al.useDebugValue(t),t}const zy=r=>{const e=Uy(r),t=s=>qy(e,s);return Object.assign(t,e),t},Hd=(r=>zy);function Wy(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var o;const c=h=>h===null?null:JSON.parse(h,void 0),d=(o=t.getItem(a))!=null?o:null;return d instanceof Promise?d.then(c):c(d)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const If=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return If(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return If(s)(t)}}}},Hy=(r,e)=>(t,s,a)=>{let o={storage:Wy(()=>localStorage),partialize:A=>A,version:0,merge:(A,P)=>({...P,...A}),...e},c=!1;const d=new Set,h=new Set;let g=o.storage;if(!g)return r((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},s,a);const v=()=>{const A=o.partialize({...s()});return g.setItem(o.name,{state:A,version:o.version})},N=a.setState;a.setState=(A,P)=>(N(A,P),v());const b=r((...A)=>(t(...A),v()),s,a);a.getInitialState=()=>b;let y;const L=()=>{var A,P;if(!g)return;c=!1,d.forEach(R=>{var C;return R((C=s())!=null?C:b)});const T=((P=o.onRehydrateStorage)==null?void 0:P.call(o,(A=s())!=null?A:b))||void 0;return If(g.getItem.bind(g))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const C=o.migrate(R.state,R.version);return C instanceof Promise?C.then(j=>[!0,j]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var C;const[j,J]=R;if(y=o.merge(J,(C=s())!=null?C:b),t(y,!0),j)return v()}).then(()=>{T==null||T(y,void 0),y=s(),c=!0,h.forEach(R=>R(y))}).catch(R=>{T==null||T(void 0,R)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(g=A.storage)},clearStorage:()=>{g==null||g.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>L(),hasHydrated:()=>c,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||L(),y||b},Vd=Hy,zi=Hd()(Vd((r,e)=>({isOnline:typeof navigator<"u"?navigator.onLine:!0,lastOnlineAt:null,setOnline:t=>{const s=e();s.isOnline!==t&&r({isOnline:t,lastOnlineAt:t?new Date().toISOString():s.lastOnlineAt})}}),{name:"mango-online-status",partialize:r=>({lastOnlineAt:r.lastOnlineAt})}));function Vy(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const Zs=Hd()(Vd((r,e)=>({pendingOperations:[],conflicts:[],isSyncing:!1,lastSyncAt:null,syncError:null,addOperation:({type:t,payload:s,optimisticData:a,entityType:o,entityId:c,maxRetries:d=5})=>{const h=Vy(),g={id:h,type:t,payload:s,status:"pending",retryCount:0,maxRetries:d,createdAt:new Date().toISOString(),lastAttemptAt:null,error:null,optimisticData:a,entityType:o,entityId:c};return r(v=>({pendingOperations:[...v.pendingOperations,g]})),console.log(`[SyncStore] Added operation: ${t} (${h})`),h},updateOperation:(t,s)=>{r(a=>({pendingOperations:a.pendingOperations.map(o=>o.id===t?{...o,...s}:o)}))},removeOperation:t=>{r(s=>({pendingOperations:s.pendingOperations.filter(a=>a.id!==t),conflicts:s.conflicts.filter(a=>a.operationId!==t)})),console.log(`[SyncStore] Removed operation: ${t}`)},clearCompleted:()=>{r(t=>({pendingOperations:t.pendingOperations.filter(s=>s.status!=="completed")}))},addConflict:t=>{r(s=>{const a=s.pendingOperations.map(c=>c.id===t.operationId?{...c,status:"conflict"}:c);return s.conflicts.find(c=>c.operationId===t.operationId)?{pendingOperations:a}:{pendingOperations:a,conflicts:[...s.conflicts,t]}}),console.log(`[SyncStore] Added conflict for operation: ${t.operationId}`)},resolveConflict:(t,s)=>{const{pendingOperations:a,conflicts:o}=e(),c=o.find(h=>h.operationId===t),d=a.find(h=>h.id===t);if(!c||!d){console.warn(`[SyncStore] Conflict or operation not found: ${t}`);return}s==="keep_local"?(r(h=>({pendingOperations:h.pendingOperations.map(g=>g.id===t?{...g,status:"pending",retryCount:0,payload:{...g.payload,_forceOverwrite:!0,_serverVersion:c.serverVersion}}:g),conflicts:h.conflicts.filter(g=>g.operationId!==t)})),console.log(`[SyncStore] Resolved conflict (keep local): ${t}`)):s==="keep_server"?(r(h=>({pendingOperations:h.pendingOperations.filter(g=>g.id!==t),conflicts:h.conflicts.filter(g=>g.operationId!==t)})),console.log(`[SyncStore] Resolved conflict (keep server): ${t}`)):(r(h=>({pendingOperations:h.pendingOperations.filter(g=>g.id!==t),conflicts:h.conflicts.filter(g=>g.operationId!==t)})),console.log(`[SyncStore] Resolved conflict (cancelled): ${t}`))},getConflicts:()=>e().conflicts,hasConflicts:()=>e().conflicts.length>0,setSyncing:t=>{r({isSyncing:t})},setSyncError:t=>{r({syncError:t})},markSyncComplete:()=>{r({lastSyncAt:new Date().toISOString(),isSyncing:!1,syncError:null})},getPendingCount:()=>e().pendingOperations.filter(t=>t.status==="pending"||t.status==="syncing").length,getFailedCount:()=>e().pendingOperations.filter(t=>t.status==="failed").length,getOperationsByType:t=>e().pendingOperations.filter(s=>s.type===t),getOperationById:t=>e().pendingOperations.find(s=>s.id===t),hasPendingOperationsForEntity:(t,s)=>e().pendingOperations.some(a=>a.entityType===t&&a.entityId===s&&(a.status==="pending"||a.status==="syncing"))}),{name:"mango-sync-queue",partialize:r=>({pendingOperations:r.pendingOperations,conflicts:r.conflicts,lastSyncAt:r.lastSyncAt})})),Jh={originDepotId:"",destinationDepotId:"",paymentMethod:"cash",deliveryType:"pickup",deliveryCharge:0,customInstructions:"",senderName:"",senderPhone:"",receivers:[{name:"",phone:"",address:"",packages:[]}]},Gy=Hd()(Vd((r,e)=>({draft:Jh,currentStep:1,hasDraft:!1,lastSavedAt:null,pendingBookingId:null,saveDraft:t=>{const a={...e().draft,...t},o=a.senderName.trim()!==""||a.senderPhone.trim()!==""||a.originDepotId!==""||a.destinationDepotId!==""||a.receivers.some(c=>c.name.trim()!==""||c.phone.trim()!=="");r({draft:a,hasDraft:o,lastSavedAt:new Date().toISOString()})},setDraft:t=>{r({draft:t,hasDraft:!0,lastSavedAt:new Date().toISOString()})},clearDraft:()=>{r({draft:Jh,currentStep:1,hasDraft:!1,lastSavedAt:null,pendingBookingId:null})},setStep:t=>{r({currentStep:t})},restoreDraft:()=>{const t=e();return t.hasDraft?t.draft:null},dismissDraft:()=>{r({draft:Jh,currentStep:1,hasDraft:!1,lastSavedAt:null})},setPendingBookingId:t=>{r({pendingBookingId:t})}}),{name:"mango-booking-draft",partialize:r=>({draft:r.draft,currentStep:r.currentStep,hasDraft:r.hasDraft,lastSavedAt:r.lastSavedAt,pendingBookingId:r.pendingBookingId})})),Yh={driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""},Ky=Hd()(Vd((r,e)=>({draft:Yh,selectedBookings:[],hasDraft:!1,lastSavedAt:null,pendingTripId:null,saveDraft:t=>{const a={...e().draft,...t},o=a.driverName.trim()!==""||a.driverPhone.trim()!==""||a.vehicleNumber.trim()!==""||e().selectedBookings.length>0;r({draft:a,hasDraft:o,lastSavedAt:new Date().toISOString()})},setDraft:t=>{r({draft:t,hasDraft:!0,lastSavedAt:new Date().toISOString()})},clearDraft:()=>{r({draft:Yh,selectedBookings:[],hasDraft:!1,lastSavedAt:null,pendingTripId:null})},setSelectedBookings:t=>{r({selectedBookings:t,hasDraft:t.length>0||e().draft.driverName.trim()!=="",lastSavedAt:new Date().toISOString()})},toggleBooking:t=>{const s=e().selectedBookings,a=s.includes(t)?s.filter(o=>o!==t):[...s,t];r({selectedBookings:a,hasDraft:a.length>0||e().draft.driverName.trim()!=="",lastSavedAt:new Date().toISOString()})},clearSelectedBookings:()=>{r({selectedBookings:[]})},restoreDraft:()=>{const t=e();return t.hasDraft?{formData:t.draft,selectedBookings:t.selectedBookings}:null},dismissDraft:()=>{r({draft:Yh,selectedBookings:[],hasDraft:!1,lastSavedAt:null})},setPendingTripId:t=>{r({pendingTripId:t})}}),{name:"mango-trip-draft",partialize:r=>({draft:r.draft,selectedBookings:r.selectedBookings,hasDraft:r.hasDraft,lastSavedAt:r.lastSavedAt,pendingTripId:r.pendingTripId})})),Of={BASE_DELAY_MS:1e3,MAX_DELAY_MS:3e4,SYNC_INTERVAL_MS:5e3};function Jy(r){const e=Of.BASE_DELAY_MS*Math.pow(2,r);return Math.min(e,Of.MAX_DELAY_MS)}function xm(r){return r.status===409?!0:r.message?["version mismatch","modified by another","optimistic lock","concurrent update","conflict"].some(t=>r.message.toLowerCase().includes(t.toLowerCase())):!1}function Yy(r){if(xm(r))return!1;if(r instanceof TypeError||r.name==="AbortError")return!0;if(r.status)return r.status===408||r.status===429||r.status>=500;if(r.message){const e=r.message.toLowerCase();return["network","timeout","connection","econnrefused","enotfound","socket hang up","err_name_not_resolved","err_internet_disconnected","err_connection","err_network","net::","failed to fetch","abort"].some(s=>e.includes(s))}return typeof navigator<"u"&&!navigator.onLine}async function Xy(r){try{switch(r.type){case"CREATE_BOOKING":return{success:!0,result:await Xs.create(r.payload)};case"CREATE_TRIP":{const{tripData:e,bookingIds:t}=r.payload;return{success:!0,result:await Rl.create(e,t)}}case"MARK_DELIVERED":{const{bookingId:e,paymentMethod:t,updates:s}=r.payload;return s?await Xs.update(e,s):await Xs.updateStatus(e,"delivered"),{success:!0}}case"UPDATE_TRIP_STATUS":{const{tripId:e,status:t}=r.payload;return await Rl.update(e,{status:t}),{success:!0}}case"UPDATE_BOOKING":{const{id:e,updates:t}=r.payload;return await Xs.update(e,t),{success:!0}}default:return{success:!1,error:`Unknown operation type: ${r.type}`}}}catch(e){return console.error(`[SyncEngine] Operation ${r.id} failed:`,e),xm(e)?{success:!1,error:e.message||"Conflict detected",isConflict:!0,serverData:e.serverData||null}:{success:!1,error:e.message||"Unknown error"}}}async function Qy(r){var c;const{updateOperation:e,removeOperation:t,addConflict:s}=Zs.getState();e(r.id,{status:"syncing",lastAttemptAt:new Date().toISOString()});const a=await Xy(r);if(a.success)return console.log(`[SyncEngine] Operation ${r.id} completed successfully`),t(r.id),!0;if(a.isConflict){console.log(`[SyncEngine] Conflict detected for operation ${r.id}`);const d={operationId:r.id,entityType:r.entityType||"booking",entityId:r.entityId||r.payload.id||"unknown",localData:r.optimisticData||r.payload,serverData:a.serverData,localVersion:r.payload._localVersion||0,serverVersion:((c=a.serverData)==null?void 0:c.version)||0,conflictedAt:new Date().toISOString()};return s(d),!1}const o=r.retryCount+1;if(Yy({message:a.error})&&o<r.maxRetries){const d=Jy(o);return console.log(`[SyncEngine] Operation ${r.id} failed, will retry in ${d}ms (attempt ${o}/${r.maxRetries})`),e(r.id,{status:"pending",retryCount:o,error:a.error||null}),await new Promise(h=>setTimeout(h,d)),!1}return console.error(`[SyncEngine] Operation ${r.id} permanently failed after ${o} attempts`),e(r.id,{status:"failed",retryCount:o,error:a.error||"Max retries exceeded"}),!1}async function Oc(){const{pendingOperations:r,isSyncing:e,setSyncing:t,markSyncComplete:s}=Zs.getState(),{isOnline:a}=zi.getState();if(!a||e)return;const o=r.filter(c=>c.status==="pending");if(o.length!==0){console.log(`[SyncEngine] Processing ${o.length} pending operations`),t(!0);try{for(const c of o){if(!zi.getState().isOnline){console.log("[SyncEngine] Went offline, stopping queue processing");break}await Qy(c)}}finally{s()}}}async function Zy(){const{pendingOperations:r,updateOperation:e}=Zs.getState(),t=r.filter(s=>s.status==="failed");for(const s of t)e(s.id,{status:"pending",retryCount:0,error:null});console.log(`[SyncEngine] Reset ${t.length} failed operations for retry`),await Oc()}let Pd=null,Cd=null;function e5(){console.log("[SyncEngine] Starting sync engine"),Oc(),Pd=setInterval(()=>{const{isOnline:r}=zi.getState(),{getPendingCount:e}=Zs.getState();r&&e()>0&&Oc()},Of.SYNC_INTERVAL_MS),Cd=zi.subscribe((r,e)=>{r.isOnline&&!e.isOnline&&(console.log("[SyncEngine] Back online, processing queue"),setTimeout(Oc,1e3))})}function t5(){console.log("[SyncEngine] Stopping sync engine"),Pd&&(clearInterval(Pd),Pd=null),Cd&&(Cd(),Cd=null)}function Pl(r,e,t){const{addOperation:s}=Zs.getState(),{isOnline:a}=zi.getState(),o=s({type:r,payload:e,...t});return a&&setTimeout(Oc,100),o}function r5({onNavigate:r}){const[e,t]=Te.useState(1),[s,a]=Te.useState(null),[o,c]=Te.useState(!0),[d,h]=Te.useState([]),[g,v]=Te.useState([]),[N,b]=Te.useState([]),[y,L]=Te.useState(!1),[A,P]=Te.useState(""),[T,R]=Te.useState(!1),{draft:C,hasDraft:j,saveDraft:J,clearDraft:$,lastSavedAt:le,pendingBookingId:se,setPendingBookingId:Y}=Gy(),me=zi(q=>q.isOnline),M=Zs(q=>q.pendingOperations),[z,B]=Te.useState({originDepotId:"",destinationDepotId:"",paymentMethod:"cash",deliveryType:"pickup",deliveryCharge:0,customInstructions:"",senderName:"",senderPhone:"",receivers:[{name:"",phone:"",address:"",packages:[]}]});Te.useEffect(()=>{j&&C&&le&&((Date.now()-new Date(le).getTime())/36e5<24?R(!0):$())},[]),Te.useEffect(()=>{const q=setTimeout(()=>{(z.senderName||z.senderPhone||z.originDepotId)&&J(z)},1e3);return()=>clearTimeout(q)},[z,J]),Te.useEffect(()=>{K()},[]);const K=async()=>{try{const[q,ie,ce,re]=await Promise.all([yi.getAll(),Cc.getAll(),Fd.getAll(),Pu.get()]),he=q.depots||[];h(he),v(ie.packages||[]),b(ce.pricing||[]);const ve=he.find(Ne=>{var De;return((De=Ne.name)==null?void 0:De.toLowerCase())==="devgad"&&Ne.type==="origin"});if(ve&&B(Ne=>({...Ne,originDepotId:ve.id})),re.season){a(re.season);const Ne=new Date,De=new Date(re.season.startDate),We=new Date(re.season.endDate),qe=Ne>=De&&Ne<=We;c(qe)}}catch(q){console.error("Error loading data:",q)}},ge=()=>{let q=0;return z.receivers.forEach(ie=>{ie.packages.forEach(ce=>{q+=ce.quantity*ce.price})}),q+(z.deliveryCharge||0)},ue=async()=>{var q,ie,ce;L(!0),console.log("[NewBooking] handleSubmit called"),console.log("[NewBooking] isOnline from store:",me),console.log("[NewBooking] navigator.onLine:",navigator.onLine);try{const re={origin_depot_id:z.originDepotId,destination_depot_id:z.destinationDepotId,payment_method:z.paymentMethod,delivery_type:z.deliveryType,delivery_charges:z.deliveryCharge,sender_name:z.senderName,sender_phone:z.senderPhone,receivers:z.receivers,subtotal:ge()-(z.deliveryCharge||0),total_amount:ge(),current_status:"booked",special_instructions:z.customInstructions};if(me)try{const he=await Xs.create(re),ve=((q=he.booking)==null?void 0:q.receipt_number)||((ie=he.booking)==null?void 0:ie.id)||"Unknown";P(ve),z.senderName&&z.senderPhone&&await Bd.upsert(z.senderName,z.senderPhone).catch(console.error);for(const Ne of z.receivers)Ne.name&&Ne.phone&&await Bd.upsert(Ne.name,Ne.phone).catch(console.error);$(),t(5)}catch(he){console.error("Error creating booking:",he);const ve=((ce=he.message)==null?void 0:ce.toLowerCase())||"";if(ve.includes("fetch")||ve.includes("network")||ve.includes("failed to fetch")||ve.includes("err_name_not_resolved")||ve.includes("err_internet_disconnected")||ve.includes("err_connection")||ve.includes("err_network")||ve.includes("net::")||ve.includes("timeout")||ve.includes("abort")||he.name==="TypeError"||he.code==="ECONNREFUSED"||!navigator.onLine){console.log("[NewBooking] Network error detected, queuing operation");const De=Pl("CREATE_BOOKING",re,{entityType:"booking",optimisticData:{formData:z,createdAt:new Date().toISOString()}});Y(De),P("PENDING-"+De.slice(-8).toUpperCase()),$(),t(5)}else alert("Failed to create booking. Please try again.")}else{const he=Pl("CREATE_BOOKING",re,{entityType:"booking",optimisticData:{formData:z,createdAt:new Date().toISOString()}});Y(he),P("PENDING-"+he.slice(-8).toUpperCase()),$(),t(5)}}catch(re){console.error("Error creating booking:",re),alert("Failed to create booking. Please try again.")}finally{L(!1)}},we=()=>t(q=>Math.min(q+1,5)),ae=()=>t(q=>Math.max(q-1,1)),ne=q=>t(q),te=()=>{const q=d.find(ie=>{var ce;return((ce=ie.name)==null?void 0:ce.toLowerCase())==="devgad"&&ie.type==="origin"});B({originDepotId:(q==null?void 0:q.id)||"",destinationDepotId:"",paymentMethod:"cash",deliveryType:"pickup",deliveryCharge:0,customInstructions:"",senderName:"",senderPhone:"",receivers:[{name:"",phone:"",address:"",packages:[]}]}),P(""),t(1),$(),Y(null)},H=()=>{C&&B(C),R(!1)},E=()=>{$(),R(!1)};if(!o)return u.jsxs("div",{className:"p-8 text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mango Season is Currently Closed"}),u.jsx("p",{className:"text-gray-600",children:"Please check back during the mango season."})]});const V=["Depot & Payment","Sender Details","Receivers & Packages","Summary"];return se&&M.find(q=>q.id===se&&q.status==="completed"),u.jsxs("div",{className:"p-8",children:[T&&u.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-blue-900",children:"Resume Previous Booking?"}),u.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["You have an unsaved booking from ",le?new Date(le).toLocaleString():"earlier",". Would you like to continue where you left off?"]}),u.jsxs("div",{className:"flex gap-3 mt-3",children:[u.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Resume Booking"}),u.jsx("button",{onClick:E,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium",children:"Start Fresh"})]})]})]})}),!me&&e<5&&u.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xl",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-amber-800",children:"You're currently offline. "}),u.jsx("span",{className:"text-amber-700",children:"Your booking will be saved and submitted when you're back online."})]})]})}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"New Booking"}),u.jsx("p",{className:"text-gray-600",children:"Create a new mango transport booking"})]}),e<=4&&u.jsx("div",{className:"mb-8 flex items-center justify-center gap-2",children:V.map((q,ie)=>u.jsxs(Al.Fragment,{children:[u.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium ${e===ie+1?"bg-orange-500 text-white":e>ie+1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[u.jsx("span",{children:ie+1}),u.jsx("span",{className:"hidden md:inline",children:q})]}),ie<3&&u.jsx("div",{className:"w-8 h-0.5 bg-gray-200"})]},ie))}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 max-w-4xl mx-auto",children:[e===1&&u.jsx(n5,{formData:z,setFormData:B,depots:d,onNext:we}),e===2&&u.jsx(s5,{formData:z,setFormData:B,onNext:we,onPrev:ae}),e===3&&u.jsx(i5,{formData:z,setFormData:B,packages:g,pricing:N,onNext:we,onPrev:ae}),e===4&&u.jsx(a5,{formData:z,depots:d,onSubmit:ue,onPrev:ae,goToStep:ne,isSubmitting:y}),e===5&&u.jsx(o5,{receiptNumber:A,formData:z,depots:d,onNewBooking:te,onNavigate:r})]})]})}function n5({formData:r,setFormData:e,depots:t,onNext:s}){const a=t.filter(h=>h.type==="origin"),c=t.filter(h=>h.type!=="origin").sort((h,g)=>{var y,L;const v=["bhusari colony","sadashiv peth","akurdi"],N=v.indexOf((y=h.name)==null?void 0:y.toLowerCase()),b=v.indexOf((L=g.name)==null?void 0:L.toLowerCase());return N!==-1&&b!==-1?N-b:N!==-1?-1:b!==-1?1:(h.name||"").localeCompare(g.name||"")}),d=r.originDepotId&&r.destinationDepotId&&r.paymentMethod;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 1: Route & Payment"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin Depot *"}),u.jsxs("select",{value:r.originDepotId,onChange:h=>e({...r,originDepotId:h.target.value,destinationDepotId:""}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:[u.jsx("option",{value:"",children:"Select Origin"}),a.map(h=>u.jsx("option",{value:h.id,children:h.name},h.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination Depot *"}),u.jsxs("select",{value:r.destinationDepotId,onChange:h=>e({...r,destinationDepotId:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",disabled:!r.originDepotId,children:[u.jsx("option",{value:"",children:"Select Destination"}),c.map(h=>u.jsx("option",{value:h.id,children:h.name},h.id))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method *"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"cash",label:" Cash"},{value:"online",label:" Online"},{value:"to_pay",label:" To Pay"},{value:"credit",label:" Credit"}].map(h=>u.jsx("button",{type:"button",onClick:()=>e({...r,paymentMethod:h.value}),className:`px-4 py-3 rounded-lg border-2 text-sm font-medium transition-all ${r.paymentMethod===h.value?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-orange-300"}`,children:h.label},h.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Delivery Type *"}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"pickup",label:" Depot Pickup",desc:"Receiver picks up from depot"},{value:"home_sender",label:" Home Delivery (Paid)",desc:"Delivery paid by sender"},{value:"home_topay",label:" Home Delivery (To Pay)",desc:"Delivery paid by receiver"},{value:"home_drt",label:" DRT Delivery",desc:"Special DRT delivery"}].map(h=>u.jsxs("button",{type:"button",onClick:()=>e({...r,deliveryType:h.value,deliveryCharge:0}),className:`p-4 rounded-lg border-2 text-left transition-all ${r.deliveryType===h.value?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"}`,children:[u.jsx("div",{className:"font-medium",children:h.label}),u.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h.desc})]},h.value))})]}),r.deliveryType!=="pickup"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Charge ()"}),u.jsx("input",{type:"number",min:"0",value:r.deliveryCharge,onChange:h=>e({...r,deliveryCharge:Number(h.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"Enter delivery charge"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions (Optional)"}),u.jsx("textarea",{value:r.customInstructions,onChange:h=>e({...r,customInstructions:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",rows:2,placeholder:"Any special handling instructions..."})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:s,disabled:!d,className:"px-8 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 font-medium",children:"Next Step "})})]})}function s5({formData:r,setFormData:e,onNext:t,onPrev:s}){const a=c=>/^[6-9]\d{9}$/.test(c),o=r.senderName&&a(r.senderPhone);return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 2: Sender Details"}),u.jsx("p",{className:"text-gray-600",children:"Start typing to see suggestions from past bookings"}),u.jsx(ym,{nameValue:r.senderName,phoneValue:r.senderPhone,onNameChange:c=>e({...r,senderName:c}),onPhoneChange:c=>e({...r,senderPhone:c}),onContactSelect:c=>e({...r,senderName:c.name,senderPhone:c.phone}),nameLabel:"Sender Name",phoneLabel:"Sender Phone",namePlaceholder:"Start typing name...",phonePlaceholder:"10-digit number",required:!0}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("button",{onClick:s,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Previous"}),u.jsx("button",{onClick:t,disabled:!o,className:"px-8 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 font-medium",children:"Next Step "})]})]})}function i5({formData:r,setFormData:e,packages:t,pricing:s,onNext:a,onPrev:o}){const c=j=>/^[6-9]\d{9}$/.test(j),d=["home_sender","home_topay","home_drt"].includes(r.deliveryType),h=j=>{var $;const J=s.find(le=>le.packageId===j&&le.depotId===r.destinationDepotId);return(J==null?void 0:J.price)||(($=t.find(le=>le.id===j))==null?void 0:$.basePrice)||0},g=[...t].sort((j,J)=>{var M,z;const $=["1 dz","1dz","2 dz","2dz","3 dz","3dz","5 dz","5dz"],le=((M=j.name)==null?void 0:M.toLowerCase())||"",se=((z=J.name)==null?void 0:z.toLowerCase())||"",Y=$.findIndex(B=>le.includes(B)),me=$.findIndex(B=>se.includes(B));return Y!==-1&&me!==-1?Y-me:Y!==-1?-1:me!==-1?1:le.localeCompare(se)}),v=(j,J,$)=>{const le=[...r.receivers];le[j]={...le[j],[J]:$},e({...r,receivers:le})},N=(j,J,$)=>{const le=[...r.receivers],se=le[j],Y=t.find(z=>z.id===J),me=h(J),M=se.packages.findIndex(z=>z.packageId===J);if($>0){const z={packageId:J,size:(Y==null?void 0:Y.name)||"Custom",quantity:$,price:me};M>=0?se.packages[M]=z:se.packages.push(z)}else M>=0&&se.packages.splice(M,1);e({...r,receivers:le})},b=(j,J,$)=>{const le=[...r.receivers],se=le[j],Y=se.packages.findIndex(me=>me.packageId===J);Y>=0&&(se.packages[Y].description=$,e({...r,receivers:le}))},y=(j,J)=>{var le,se;const $=(se=(le=r.receivers[j])==null?void 0:le.packages)==null?void 0:se.find(Y=>Y.packageId===J);return($==null?void 0:$.description)||""},L=j=>(j==null?void 0:j.toLowerCase())==="other",A=(j,J)=>{var le,se;const $=(se=(le=r.receivers[j])==null?void 0:le.packages)==null?void 0:se.find(Y=>Y.packageId===J);return($==null?void 0:$.quantity)||0},P=()=>{e({...r,receivers:[...r.receivers,{name:"",phone:"",address:"",packages:[]}]})},T=j=>{if(r.receivers.length>1){const J=r.receivers.filter(($,le)=>le!==j);e({...r,receivers:J})}},R=j=>j.packages.reduce((J,$)=>J+$.quantity*$.price,0),C=r.receivers.every(j=>j.name&&c(j.phone)&&j.packages.length>0&&(!d||j.address));return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 3: Receivers & Packages"}),u.jsx("p",{className:"text-gray-600",children:"Add receiver details and select packages for each receiver"}),r.receivers.map((j,J)=>u.jsxs("div",{className:"p-6 border-2 border-gray-200 rounded-lg space-y-4 bg-gray-50",children:[u.jsxs("div",{className:"flex justify-between items-center pb-2 border-b",children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Receiver ",J+1]}),r.receivers.length>1&&u.jsx("button",{onClick:()=>T(J),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]}),u.jsx(ym,{nameValue:j.name,phoneValue:j.phone,onNameChange:$=>v(J,"name",$),onPhoneChange:$=>v(J,"phone",$),onContactSelect:$=>{const le=[...r.receivers];le[J]={...le[J],name:$.name,phone:$.phone},e({...r,receivers:le})},nameLabel:"Receiver Name",phoneLabel:"Receiver Phone",namePlaceholder:"Start typing name...",phonePlaceholder:"10-digit number",required:!0}),d&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Address *"}),u.jsx("textarea",{value:j.address,onChange:$=>v(J,"address",$.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",rows:2,placeholder:"Enter full delivery address",required:!0})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Select Packages"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:g.map($=>{const le=h($.id),se=A(J,$.id),Y=L($.name),me=y(J,$.id);return u.jsxs("div",{className:`p-3 bg-white border rounded-lg hover:border-orange-300 transition-colors ${Y&&se>0?"border-yellow-400 col-span-full":"border-gray-200"}`,children:[u.jsx("div",{className:"font-medium text-gray-900 text-sm",children:$.name}),u.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["",le,"/unit"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",min:"0",value:se>0?se:"",placeholder:"0",onChange:M=>N(J,$.id,Number(M.target.value)||0),className:`w-16 px-2 py-1 text-center border rounded focus:ring-2 focus:ring-orange-500 ${se>0?"border-orange-400 bg-orange-50":"border-gray-300 text-gray-400"}`}),se>0&&u.jsxs("span",{className:"text-xs font-medium text-green-600",children:["",(se*le).toFixed(0)]})]}),Y&&se>0&&u.jsx("div",{className:"mt-2",children:u.jsx("input",{type:"text",value:me,onChange:M=>b(J,$.id,M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm",placeholder:"Enter description (e.g., Special box, Custom crate...)"})})]},$.id)})})]}),u.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("span",{className:"font-medium",children:["Subtotal for ",j.name||`Receiver ${J+1}`,":"]}),u.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["",R(j).toFixed(2)]})]})})]},J)),u.jsx("button",{onClick:P,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-orange-500 hover:text-orange-500 font-medium transition-colors",children:"+ Add Another Receiver"}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("button",{onClick:o,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Previous"}),u.jsx("button",{onClick:a,disabled:!C,className:"px-8 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 font-medium",children:"Review Summary "})]})]})}function a5({formData:r,depots:e,onSubmit:t,onPrev:s,goToStep:a,isSubmitting:o}){var v,N;const c=e.find(b=>b.id===r.originDepotId),d=e.find(b=>b.id===r.destinationDepotId),h=r.receivers.reduce((b,y)=>b+y.packages.reduce((L,A)=>L+A.quantity*A.price,0),0),g=h+(r.deliveryCharge||0);return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 4: Review & Confirm"}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:" Route"}),u.jsx("button",{onClick:()=>a(1),className:"text-orange-600 text-sm hover:underline",children:"Edit"})]}),u.jsxs("p",{children:[c==null?void 0:c.name,"  ",d==null?void 0:d.name]}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",(v=r.paymentMethod)==null?void 0:v.toUpperCase()," | Delivery: ",(N=r.deliveryType)==null?void 0:N.replace("_"," ")]})]}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:" Sender"}),u.jsx("button",{onClick:()=>a(2),className:"text-orange-600 text-sm hover:underline",children:"Edit"})]}),u.jsxs("p",{children:[r.senderName," (",r.senderPhone,")"]})]}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:" Receivers & Packages"}),u.jsx("button",{onClick:()=>a(3),className:"text-orange-600 text-sm hover:underline",children:"Edit"})]}),r.receivers.map((b,y)=>u.jsxs("div",{className:"border-l-4 border-orange-300 pl-4 mb-4",children:[u.jsxs("p",{className:"font-medium",children:[b.name," (",b.phone,")"]}),b.address&&u.jsx("p",{className:"text-sm text-gray-600",children:b.address}),u.jsx("div",{className:"mt-2 space-y-1",children:b.packages.map((L,A)=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsxs("span",{children:[L.size,"  ",L.quantity]}),u.jsxs("span",{children:["",(L.quantity*L.price).toFixed(0)]})]},A))})]},y))]}),u.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{children:"Packages Subtotal"}),u.jsxs("span",{children:["",h.toFixed(2)]})]}),r.deliveryCharge>0&&u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{children:"Delivery Charge"}),u.jsxs("span",{children:["",r.deliveryCharge.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between font-bold text-lg mt-2 pt-2 border-t border-orange-300",children:[u.jsx("span",{children:"Total Amount"}),u.jsxs("span",{className:"text-orange-600",children:["",g.toFixed(2)]})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("button",{onClick:s,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Previous"}),u.jsx("button",{onClick:t,disabled:o,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:o?"Creating...":" Confirm Booking"})]})]})}function o5({receiptNumber:r,formData:e,depots:t,onNewBooking:s,onNavigate:a}){const o=t==null?void 0:t.find(R=>R.id===(e==null?void 0:e.originDepotId)),c=t==null?void 0:t.find(R=>R.id===(e==null?void 0:e.destinationDepotId)),d=r==null?void 0:r.startsWith("PENDING-"),h=Zs(R=>R.pendingOperations),g=zi(R=>R.isOnline),v=d?r.replace("PENDING-","").toLowerCase():null,N=v?h.find(R=>R.id.toLowerCase().endsWith(v)):null,b=()=>e!=null&&e.receivers?e.receivers.reduce((R,C)=>R+(C.packages||[]).reduce((j,J)=>j+J.quantity*J.price,0),0)+(e.deliveryCharge||0):0,y=()=>{var C;const R=[" DRT MANGO TRANSPORT","",`Receipt: ${r}`,`Date: ${new Date().toLocaleDateString("en-IN")}`,""," DESTINATION",`${(c==null?void 0:c.name)||"N/A"}`,""," SENDER",`*${(e==null?void 0:e.senderName)||"N/A"}* (${(e==null?void 0:e.senderPhone)||"N/A"})`,""," RECEIVERS & PACKAGES"];return(C=e==null?void 0:e.receivers)==null||C.forEach((j,J)=>{var $;R.push(`
${J+1}. ${j.name} (${j.phone})`),($=j.packages)==null||$.forEach(le=>{R.push(`    ${le.size}  ${le.quantity} = ${(le.quantity*le.price).toFixed(0)}`)})}),R.push(`
`),R.push(` TOTAL: ${b().toFixed(2)}`),R.push(`
Thank you for choosing DRT Mango Transport! `),R.join(`
`)},L=()=>{const R=encodeURIComponent(y());window.open(`https://wa.me/?text=${R}`,"_blank")},A=async()=>{var z,B,K;const{jsPDF:R}=await vu(async()=>{const{jsPDF:ge}=await Promise.resolve().then(()=>Xw);return{jsPDF:ge}},void 0),C=new R({format:"a5",unit:"mm",orientation:"landscape"}),j=C.internal.pageSize.getWidth();C.internal.pageSize.getHeight();const J=15;let $=15;C.setFontSize(16),C.setFont("helvetica","bold"),C.setTextColor(0,0,0),C.text("DRT MANGO TRANSPORT",j/2,$,{align:"center"}),$+=6,C.setFontSize(8),C.setFont("helvetica","normal"),C.text("AT POST JAMSANDE, TAL.DEVGAD, DIST. SINDHUDURG MOB: 9422584166, 9422435348",j/2,$,{align:"center"}),$+=8,C.setFontSize(10),C.setFont("helvetica","normal"),C.text("Receipt Number",j/2,$,{align:"center"}),$+=5,C.setFontSize(12),C.setFont("helvetica","bold"),C.text(r,j/2,$,{align:"center"}),$+=10,C.setFontSize(10),C.setFont("helvetica","normal"),C.text(`Destination: ${(c==null?void 0:c.name)||"N/A"}`,J,$),C.text(`Date: ${new Date().toLocaleDateString("en-IN")}`,j-J,$,{align:"right"}),$+=8,C.setFontSize(10),C.setFont("helvetica","normal"),C.text(`Sender: ${(e==null?void 0:e.senderName)||"N/A"} (${(e==null?void 0:e.senderPhone)||"N/A"})`,j/2,$,{align:"center"}),$+=10,C.setFontSize(10),C.setFont("helvetica","bold"),C.text("RECEIVERS & PACKAGES",J,$),$+=10,C.setFont("helvetica","normal"),C.setFontSize(10);const le=J+30,se=j-J-10;(z=e==null?void 0:e.receivers)==null||z.forEach((ge,ue)=>{var ne,te;const we=`${ue+1}. ${((ne=ge.name)==null?void 0:ne.toUpperCase())||"N/A"} (${ge.phone||"N/A"})`;C.text(we,le,$);const ae=((te=ge.packages)==null?void 0:te.map(H=>`${H.size}  ${H.quantity} = ${(H.quantity*H.price).toFixed(0)}`).join(", "))||"";ae&&C.text(ae,se,$,{align:"right"}),$+=8,ge.address&&(C.setFontSize(8),C.setTextColor(100,100,100),C.text(`Address: ${ge.address}`,le+10,$),C.setTextColor(0,0,0),C.setFontSize(10),$+=6)}),$+=5,C.setFontSize(11),C.setFont("helvetica","bold"),C.text(`TOTAL: ${b().toFixed(2)}`,j-J,$,{align:"right"}),$+=6,C.setFontSize(9),C.setFont("helvetica","normal");const Y=((K=(B=e==null?void 0:e.paymentMethod)==null?void 0:B.replace("_"," "))==null?void 0:K.toUpperCase())||"CASH";C.text(`(${Y})`,j-J,$,{align:"right"}),$+=12,C.setFontSize(10),C.setFont("helvetica","bold"),C.text("THANK YOU FOR USING OUR SERVICES",j/2,$,{align:"center"}),$+=15;const me=40,M=j-J-me;C.setLineWidth(.5),C.line(M,$,M+me,$),$+=4,C.setFontSize(8),C.setFont("helvetica","normal"),C.text("SIGN",M+me/2,$,{align:"center"}),C.save(`${r}.pdf`)},P=()=>{navigator.clipboard.writeText(r),alert("Receipt number copied!")},T=()=>{a?a("dashboard"):window.location.reload()};return u.jsxs("div",{className:"text-center space-y-6 py-8",children:[d?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-6xl",children:(N==null?void 0:N.status)==="syncing"?"":(N==null?void 0:N.status)==="failed"?"":""}),u.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:(N==null?void 0:N.status)==="syncing"?"Syncing Booking...":(N==null?void 0:N.status)==="failed"?"Sync Failed":"Booking Saved Locally"}),u.jsx("p",{className:"text-gray-600",children:g?(N==null?void 0:N.status)==="failed"?"Failed to sync. Will retry automatically or you can retry from the status bar.":"Your booking will be synced shortly...":"Your booking is saved and will be submitted when you're back online."}),u.jsxs("div",{className:`border rounded-lg p-6 max-w-md mx-auto ${(N==null?void 0:N.status)==="failed"?"bg-red-50 border-red-200":"bg-amber-50 border-amber-200"}`,children:[u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Temporary Reference"}),u.jsx("p",{className:`text-2xl font-bold ${(N==null?void 0:N.status)==="failed"?"text-red-700":"text-amber-700"}`,children:r}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[(N==null?void 0:N.status)==="syncing"&&" Syncing now...",(N==null?void 0:N.status)==="pending"&&g&&" Waiting to sync...",(N==null?void 0:N.status)==="pending"&&!g&&" Will sync when online",(N==null?void 0:N.status)==="failed"&&` ${N.error||"Sync failed"}`]})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-6xl",children:""}),u.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Booking Created Successfully!"}),u.jsx("p",{className:"text-gray-600",children:"Your mango transport booking has been confirmed"}),u.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 max-w-md mx-auto",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Receipt Number"}),u.jsx("p",{className:"text-3xl font-bold text-green-700",children:r}),u.jsx("button",{onClick:P,className:"mt-2 text-sm text-green-600 hover:underline",children:" Copy"})]})]}),u.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 max-w-md mx-auto text-left",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{children:"Route:"}),u.jsxs("span",{className:"font-medium",children:[o==null?void 0:o.name,"  ",c==null?void 0:c.name]})]}),u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{children:"Sender:"}),u.jsx("span",{className:"font-medium",children:e==null?void 0:e.senderName})]}),u.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t mt-2",children:[u.jsx("span",{children:"Total:"}),u.jsxs("span",{className:d?"text-amber-700":"text-green-700",children:["",b().toFixed(2)]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3 max-w-md mx-auto pt-4",children:[!d&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:L,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium",children:" WhatsApp"}),u.jsx("button",{onClick:A,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium",children:" Download PDF"})]}),d&&u.jsx("div",{className:"p-3 bg-gray-100 rounded-lg text-sm text-gray-600",children:" Share and PDF options will be available after sync completes"}),u.jsx("button",{onClick:s,className:"py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 font-medium",children:" Create New Booking"}),u.jsx("button",{onClick:T,className:"py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Go to Dashboard"})]})]})}function Rf(r){var s;if(typeof navigator<"u"&&!navigator.onLine||r instanceof TypeError)return!0;const e=((s=r==null?void 0:r.message)==null?void 0:s.toLowerCase())||"";return["fetch","network","failed to fetch","err_name_not_resolved","err_internet_disconnected","err_connection","err_network","net::","timeout","abort","econnrefused","enotfound","socket hang up","load failed"].some(a=>e.includes(a))}function l5({userRole:r,assignedDepotId:e}){const{draft:t,hasDraft:s,saveDraft:a,clearDraft:o,lastSavedAt:c,selectedBookings:d,setSelectedBookings:h,pendingTripId:g,setPendingTripId:v}=Ky(),N=zi(re=>re.isOnline);Zs(re=>re.pendingOperations);const[b,y]=Te.useState({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),[L,A]=Te.useState([]),[P,T]=Te.useState([]),[R,C]=Te.useState([]),[j,J]=Te.useState(null),[$,le]=Te.useState(!0),[se,Y]=Te.useState(!0),[me,M]=Te.useState(!1),[z,B]=Te.useState([]),[K,ge]=Te.useState(!1);Te.useEffect(()=>{s&&t&&c&&((Date.now()-new Date(c).getTime())/36e5<24?ge(!0):o())},[]),Te.useEffect(()=>{const re=setTimeout(()=>{(b.driverName||b.vehicleNumber||L.length>0)&&(a(b),h(L))},1e3);return()=>clearTimeout(re)},[b,L,a,h]),Te.useEffect(()=>{ue()},[]);const ue=async()=>{Y(!0);try{const[re,he,ve]=await Promise.all([Pu.get(),Xs.getAll(),yi.getAll()]);if(re.season&&re.season.startDate&&re.season.endDate){J(re.season);const Ne=new Date,De=new Date(re.season.startDate),We=new Date(re.season.endDate);le(Ne>=De&&Ne<=We)}if(r==="depot_manager"&&e){const De=(await Tc.getByDepotId(e)).forwardingDepotIds||[];B(De),console.log("Forwarding destinations for depot:",e,De);const We=(he.bookings||[]).filter(qe=>["in_transit","reached_depot"].includes(qe.status)&&De.includes(qe.destination_depot_id));T(We)}else{const Ne=(he.bookings||[]).filter(De=>De.status==="booked");T(Ne)}C(ve.depots||[])}catch(re){console.error("Error loading data:",re)}finally{Y(!1)}},we=async re=>{var he,ve;if(re.preventDefault(),!$){alert("Cannot create trips outside of the season dates. Please contact admin to update season settings.");return}if(L.length===0){alert("Please select at least one booking for this trip.");return}if(!b.driverName||!b.driverPhone||!b.vehicleNumber){alert("Please fill in all required fields.");return}M(!0);try{const Ne=P.find(qe=>L.includes(qe.id)),De=r==="depot_manager"&&e,We={driver:b.driverName,driverPhone:b.driverPhone,vehicle:b.vehicleNumber,tripCost:parseFloat(b.tripCost)||0,originId:De?e:(Ne==null?void 0:Ne.origin_depot_id)||null,destinationId:(Ne==null?void 0:Ne.destination_depot_id)||null,departure:new Date().toISOString(),eta:new Date(Date.now()+1440*60*1e3).toISOString(),isForwarding:De};if(N)try{const qe=await Rl.create(We,L);alert(`Trip created successfully! Trip Number: ${((he=qe.trip)==null?void 0:he.trip_number)||((ve=qe.trip)==null?void 0:ve.id)||"Created"}`),o(),y({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),A([]),ue()}catch(qe){if(console.error("Error creating trip:",qe),Rf(qe)){console.log("[TripCreation] Network error detected, queuing operation");const it=Pl("CREATE_TRIP",{tripData:We,bookingIds:L},{entityType:"trip",optimisticData:{formData:b,selectedBookings:L,createdAt:new Date().toISOString()}});v(it),alert(`Trip saved offline! Reference: TRIP-${it.slice(-8).toUpperCase()}. It will be synced when you're back online.`),o(),y({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),A([])}else alert("Error creating trip. Please try again.")}else{const qe=Pl("CREATE_TRIP",{tripData:We,bookingIds:L},{entityType:"trip",optimisticData:{formData:b,selectedBookings:L,createdAt:new Date().toISOString()}});v(qe),alert(`Trip saved offline! Reference: TRIP-${qe.slice(-8).toUpperCase()}. It will be synced when you're back online.`),o(),y({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),A([])}}catch(Ne){console.error("Error creating trip:",Ne),alert("Error creating trip. Please try again.")}finally{M(!1)}},ae=re=>{y({...b,[re.target.name]:re.target.value})},ne=re=>{A(he=>he.includes(re)?he.filter(ve=>ve!==re):[...he,re])},te=()=>{L.length===P.length?A([]):A(P.map(re=>re.id))},H=re=>{const he=[];return Array.isArray(re.receivers)&&re.receivers.forEach(ve=>{Array.isArray(ve.packages)&&ve.packages.forEach(Ne=>{he.push({size:Ne.size||"Other",quantity:Number(Ne.quantity)||0})})}),he},E=P.filter(re=>L.includes(re.id)),V=E.reduce((re,he)=>re+H(he).reduce((ve,Ne)=>ve+Ne.quantity,0),0),q=E.reduce((re,he)=>re+(Number(he.total_amount)||0),0),ie=P.reduce((re,he)=>(H(he).forEach(ve=>{re[ve.size]=(re[ve.size]||0)+ve.quantity}),re),{}),ce=P.reduce((re,he)=>{const ve=he.destination_depot_name||"Unknown";return re[ve]||(re[ve]={bookings:[],packages:{}}),re[ve].bookings.push(he),H(he).forEach(Ne=>{re[ve].packages[Ne.size]=(re[ve].packages[Ne.size]||0)+Ne.quantity}),re},{});return se?u.jsx("div",{className:"p-8",children:u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading trip data..."})]})}):u.jsxs("div",{className:"p-8 max-w-full overflow-x-hidden",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Trip Creation"}),u.jsx("p",{className:"text-gray-600",children:"Create a new transport trip and assign bookings"})]}),!$&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-red-800 mb-1",children:"Season Inactive"}),u.jsxs("p",{className:"text-sm text-red-700",children:["Trips cannot be created outside the season dates",j&&` (${new Date(j.startDate).toLocaleDateString("en-IN")} - ${new Date(j.endDate).toLocaleDateString("en-IN")})`,". Please contact the administrator to update season settings."]})]})]})}),K&&u.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-blue-900",children:"Resume Previous Trip?"}),u.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["You have an unsaved trip draft from ",c?new Date(c).toLocaleString():"earlier","."]}),u.jsxs("div",{className:"flex gap-3 mt-3",children:[u.jsx("button",{onClick:()=>{t&&y(t),d.length>0&&A(d),ge(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Resume Trip"}),u.jsx("button",{onClick:()=>{o(),ge(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium",children:"Start Fresh"})]})]})]})}),!N&&u.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xl",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-amber-800",children:"You're currently offline. "}),u.jsx("span",{className:"text-amber-700",children:"Your trip will be saved and submitted when you're back online."})]})]})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"System Inventory - Pending Bookings"}),u.jsx("div",{className:"w-[calc(100vw-320px)] max-w-full overflow-hidden",children:u.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-3",children:[P.length>0&&u.jsxs("div",{className:"bg-orange-50 rounded-lg border-2 border-orange-300 p-4 min-w-[180px] max-w-[200px] flex-shrink-0",children:[u.jsx("p",{className:"text-sm font-bold text-orange-700 mb-2",children:" Total Inventory"}),u.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[P.length," total bookings"]}),u.jsx("div",{className:"space-y-1 max-h-[140px] overflow-y-auto",children:Object.entries(ie).map(([re,he])=>u.jsxs("div",{className:"flex justify-between text-xs",children:[u.jsx("span",{className:"text-gray-700",children:re}),u.jsx("span",{className:"font-bold text-orange-700 ml-2",children:he})]},re))})]}),Object.entries(ce).map(([re,he])=>u.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 min-w-[180px] max-w-[200px] flex-shrink-0",children:[u.jsx("p",{className:"text-sm font-bold text-gray-900 truncate mb-2",children:re}),u.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[he.bookings.length," bookings"]}),u.jsxs("div",{className:"space-y-1 max-h-[140px] overflow-y-auto",children:[Object.entries(he.packages).map(([ve,Ne])=>u.jsxs("div",{className:"flex justify-between text-xs",children:[u.jsx("span",{className:"text-gray-600 truncate",children:ve}),u.jsx("span",{className:"font-bold text-orange-600 ml-2",children:Ne})]},ve)),Object.keys(he.packages).length===0&&u.jsx("p",{className:"text-xs text-gray-400",children:"No packages"})]})]},re)),Object.keys(ce).length===0&&u.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg p-6 text-center text-gray-500",children:"No pending bookings available"})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 sticky top-8",children:[u.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"Trip Details"}),u.jsxs("form",{onSubmit:we,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"driverName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver Name *"}),u.jsx("input",{id:"driverName",name:"driverName",type:"text",value:b.driverName,onChange:ae,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter driver name",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"driverPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver Phone *"}),u.jsx("input",{id:"driverPhone",name:"driverPhone",type:"tel",value:b.driverPhone,onChange:ae,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"10-digit number",maxLength:10,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"vehicleNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Number *"}),u.jsx("input",{id:"vehicleNumber",name:"vehicleNumber",type:"text",value:b.vehicleNumber,onChange:ae,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., MH-12-AB-1234",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"tripCost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Trip Cost ()"}),u.jsx("input",{id:"tripCost",name:"tripCost",type:"number",value:b.tripCost,onChange:ae,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Optional"})]}),u.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Bookings"}),u.jsx("span",{className:"font-bold text-orange-600",children:L.length})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Packages"}),u.jsx("span",{className:"font-bold text-gray-900",children:V})]}),u.jsxs("div",{className:"flex justify-between items-center border-t border-orange-200 pt-2",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Value"}),u.jsxs("span",{className:"font-bold text-green-600",children:["",q.toLocaleString("en-IN")]})]})]}),u.jsx("button",{type:"submit",disabled:me||L.length===0||!$,className:"w-full px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:me?"Creating Trip...":"Create Trip"})]})]})}),u.jsx("div",{className:"lg:col-span-2",children:u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Select Bookings"}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[P.length," bookings available for assignment"]})]}),u.jsx("button",{type:"button",onClick:te,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:L.length===P.length?"Deselect All":"Select All"})]}),u.jsx("div",{className:"max-h-[600px] overflow-y-auto divide-y divide-gray-200",children:P.length>0?P.map(re=>u.jsxs("label",{className:`flex items-start gap-4 p-4 cursor-pointer hover:bg-gray-50 transition-colors ${L.includes(re.id)?"bg-orange-50":""}`,children:[u.jsx("input",{type:"checkbox",checked:L.includes(re.id),onChange:()=>ne(re.id),className:"mt-1 w-5 h-5 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:re.sender_name}),u.jsx("p",{className:"text-sm text-gray-600",children:re.sender_phone})]}),u.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded",children:re.receipt_number})]}),u.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-gray-600",children:[" ",re.origin_depot_name||"Origin","  ",re.destination_depot_name||"Destination"]}),u.jsxs("span",{className:"font-medium text-green-600",children:["",(Number(re.total_amount)||0).toLocaleString("en-IN")]})]}),re.package_details&&Array.isArray(re.package_details)&&u.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:re.package_details.map((he,ve)=>u.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:[he.name||he.packageName,": ",he.quantity]},ve))})]})]},re.id)):u.jsxs("div",{className:"p-8 text-center text-gray-500",children:[u.jsx("p",{className:"text-lg mb-2",children:"No pending bookings"}),u.jsx("p",{className:"text-sm",children:"All bookings have been assigned to trips or delivered."})]})})]})})]})]})}function pr(r){"@babel/helpers - typeof";return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(r)}var Wi=Uint8Array,Qs=Uint16Array,Zf=Int32Array,ep=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tp=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),U0=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wm=function(r,e){for(var t=new Qs(31),s=0;s<31;++s)t[s]=e+=1<<r[s-1];for(var a=new Zf(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},bm=wm(ep,2),c5=bm.b,Df=bm.r;c5[28]=258,Df[258]=28;var u5=wm(tp,0),$0=u5.r,Ff=new Qs(32768);for(var Er=0;Er<32768;++Er){var Bo=(Er&43690)>>1|(Er&21845)<<1;Bo=(Bo&52428)>>2|(Bo&13107)<<2,Bo=(Bo&61680)>>4|(Bo&3855)<<4,Ff[Er]=((Bo&65280)>>8|(Bo&255)<<8)>>1}var yu=(function(r,e,t){for(var s=r.length,a=0,o=new Qs(e);a<s;++a)r[a]&&++o[r[a]-1];var c=new Qs(e);for(a=1;a<e;++a)c[a]=c[a-1]+o[a-1]<<1;var d;if(t){d=new Qs(1<<e);var h=15-e;for(a=0;a<s;++a)if(r[a])for(var g=a<<4|r[a],v=e-r[a],N=c[r[a]-1]++<<v,b=N|(1<<v)-1;N<=b;++N)d[Ff[N]>>h]=g}else for(d=new Qs(s),a=0;a<s;++a)r[a]&&(d[a]=Ff[c[r[a]-1]++]>>15-r[a]);return d}),Dl=new Wi(288);for(var Er=0;Er<144;++Er)Dl[Er]=8;for(var Er=144;Er<256;++Er)Dl[Er]=9;for(var Er=256;Er<280;++Er)Dl[Er]=7;for(var Er=280;Er<288;++Er)Dl[Er]=8;var Md=new Wi(32);for(var Er=0;Er<32;++Er)Md[Er]=5;var d5=yu(Dl,9,0),h5=yu(Md,5,0),_m=function(r){return(r+7)/8|0},f5=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Wi(r.subarray(e,t))},Xa=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8},uu=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8,r[s+2]|=t>>16},Xh=function(r,e){for(var t=[],s=0;s<r.length;++s)r[s]&&t.push({s,f:r[s]});var a=t.length,o=t.slice();if(!a)return{t:Sm,l:0};if(a==1){var c=new Wi(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(J,$){return J.f-$.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],g=0,v=1,N=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};v!=a-1;)d=t[t[g].f<t[N].f?g++:N++],h=t[g!=v&&t[g].f<t[N].f?g++:N++],t[v++]={s:-1,f:d.f+h.f,l:d,r:h};for(var b=o[0].s,s=1;s<a;++s)o[s].s>b&&(b=o[s].s);var y=new Qs(b+1),L=Bf(t[v-1],y,0);if(L>e){var s=0,A=0,P=L-e,T=1<<P;for(o.sort(function($,le){return y[le.s]-y[$.s]||$.f-le.f});s<a;++s){var R=o[s].s;if(y[R]>e)A+=T-(1<<L-y[R]),y[R]=e;else break}for(A>>=P;A>0;){var C=o[s].s;y[C]<e?A-=1<<e-y[C]++-1:++s}for(;s>=0&&A;--s){var j=o[s].s;y[j]==e&&(--y[j],++A)}L=e}return{t:new Wi(y),l:L}},Bf=function(r,e,t){return r.s==-1?Math.max(Bf(r.l,e,t+1),Bf(r.r,e,t+1)):e[r.s]=t},q0=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Qs(++e),s=0,a=r[0],o=1,c=function(h){t[s++]=h},d=1;d<=e;++d)if(r[d]==a&&d!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(a),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(a);o=1,a=r[d]}return{c:t.subarray(0,s),n:e}},du=function(r,e){for(var t=0,s=0;s<e.length;++s)t+=r[s]*e[s];return t},Nm=function(r,e,t){var s=t.length,a=_m(e+2);r[a]=s&255,r[a+1]=s>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var o=0;o<s;++o)r[a+o+4]=t[o];return(a+4+s)*8},z0=function(r,e,t,s,a,o,c,d,h,g,v){Xa(e,v++,t),++a[256];for(var N=Xh(a,15),b=N.t,y=N.l,L=Xh(o,15),A=L.t,P=L.l,T=q0(b),R=T.c,C=T.n,j=q0(A),J=j.c,$=j.n,le=new Qs(19),se=0;se<R.length;++se)++le[R[se]&31];for(var se=0;se<J.length;++se)++le[J[se]&31];for(var Y=Xh(le,7),me=Y.t,M=Y.l,z=19;z>4&&!me[U0[z-1]];--z);var B=g+5<<3,K=du(a,Dl)+du(o,Md)+c,ge=du(a,b)+du(o,A)+c+14+3*z+du(le,me)+2*le[16]+3*le[17]+7*le[18];if(h>=0&&B<=K&&B<=ge)return Nm(e,v,r.subarray(h,h+g));var ue,we,ae,ne;if(Xa(e,v,1+(ge<K)),v+=2,ge<K){ue=yu(b,y,0),we=b,ae=yu(A,P,0),ne=A;var te=yu(me,M,0);Xa(e,v,C-257),Xa(e,v+5,$-1),Xa(e,v+10,z-4),v+=14;for(var se=0;se<z;++se)Xa(e,v+3*se,me[U0[se]]);v+=3*z;for(var H=[R,J],E=0;E<2;++E)for(var V=H[E],se=0;se<V.length;++se){var q=V[se]&31;Xa(e,v,te[q]),v+=me[q],q>15&&(Xa(e,v,V[se]>>5&127),v+=V[se]>>12)}}else ue=d5,we=Dl,ae=h5,ne=Md;for(var se=0;se<d;++se){var ie=s[se];if(ie>255){var q=ie>>18&31;uu(e,v,ue[q+257]),v+=we[q+257],q>7&&(Xa(e,v,ie>>23&31),v+=ep[q]);var ce=ie&31;uu(e,v,ae[ce]),v+=ne[ce],ce>3&&(uu(e,v,ie>>5&8191),v+=tp[ce])}else uu(e,v,ue[ie]),v+=we[ie]}return uu(e,v,ue[256]),v+we[256]},p5=new Zf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sm=new Wi(0),g5=function(r,e,t,s,a,o){var c=o.z||r.length,d=new Wi(s+c+5*(1+Math.ceil(c/7e3))+a),h=d.subarray(s,d.length-a),g=o.l,v=(o.r||0)&7;if(e){v&&(h[0]=o.r>>3);for(var N=p5[e-1],b=N>>13,y=N&8191,L=(1<<t)-1,A=o.p||new Qs(32768),P=o.h||new Qs(L+1),T=Math.ceil(t/3),R=2*T,C=function(it){return(r[it]^r[it+1]<<T^r[it+2]<<R)&L},j=new Zf(25e3),J=new Qs(288),$=new Qs(32),le=0,se=0,Y=o.i||0,me=0,M=o.w||0,z=0;Y+2<c;++Y){var B=C(Y),K=Y&32767,ge=P[B];if(A[K]=ge,P[B]=K,M<=Y){var ue=c-Y;if((le>7e3||me>24576)&&(ue>423||!g)){v=z0(r,h,0,j,J,$,se,me,z,Y-z,v),me=le=se=0,z=Y;for(var we=0;we<286;++we)J[we]=0;for(var we=0;we<30;++we)$[we]=0}var ae=2,ne=0,te=y,H=K-ge&32767;if(ue>2&&B==C(Y-H))for(var E=Math.min(b,ue)-1,V=Math.min(32767,Y),q=Math.min(258,ue);H<=V&&--te&&K!=ge;){if(r[Y+ae]==r[Y+ae-H]){for(var ie=0;ie<q&&r[Y+ie]==r[Y+ie-H];++ie);if(ie>ae){if(ae=ie,ne=H,ie>E)break;for(var ce=Math.min(H,ie-2),re=0,we=0;we<ce;++we){var he=Y-H+we&32767,ve=A[he],Ne=he-ve&32767;Ne>re&&(re=Ne,ge=he)}}}K=ge,ge=A[K],H+=K-ge&32767}if(ne){j[me++]=268435456|Df[ae]<<18|$0[ne];var De=Df[ae]&31,We=$0[ne]&31;se+=ep[De]+tp[We],++J[257+De],++$[We],M=Y+ae,++le}else j[me++]=r[Y],++J[r[Y]]}}for(Y=Math.max(Y,M);Y<c;++Y)j[me++]=r[Y],++J[r[Y]];v=z0(r,h,g,j,J,$,se,me,z,Y-z,v),g||(o.r=v&7|h[v/8|0]<<3,v-=7,o.h=P,o.p=A,o.i=Y,o.w=M)}else{for(var Y=o.w||0;Y<c+g;Y+=65535){var qe=Y+65535;qe>=c&&(h[v/8|0]=g,qe=c),v=Nm(h,v+1,r.subarray(Y,qe))}o.i=c}return f5(d,0,s+_m(v)+a)},km=function(){var r=1,e=0;return{p:function(t){for(var s=r,a=e,o=t.length|0,c=0;c!=o;){for(var d=Math.min(c+2655,o);c<d;++c)a+=s+=t[c];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}r=s,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},m5=function(r,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),c=new Wi(o.length+r.length);c.set(o),c.set(r,o.length),r=c,a.w=o.length}return g5(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,s,a)},jm=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},v5=function(r,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=s<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=km();a.p(e.dictionary),jm(r,2,a.d())}};function Mf(r,e){e||(e={});var t=km();t.p(r);var s=m5(r,e,e.dictionary?6:2,4);return v5(s,e),jm(s,s.length-4,t.d()),s}var y5=typeof TextDecoder<"u"&&new TextDecoder,x5=0;try{y5.decode(Sm,{stream:!0}),x5=1}catch{}function w5(r){if(Array.isArray(r))return r}function b5(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,a,o,c,d=[],h=!0,g=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(h=(s=o.call(t)).done)&&(d.push(s.value),d.length!==e);h=!0);}catch(v){g=!0,a=v}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(g)throw a}}return d}}function W0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function _5(r,e){if(r){if(typeof r=="string")return W0(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W0(r,e):void 0}}function N5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0(r,e){return w5(r)||b5(r,e)||_5(r,e)||N5()}function V0(r,e="utf8"){return new TextDecoder(e).decode(r)}const S5=new TextEncoder;function k5(r){return S5.encode(r)}const j5=1024*8,A5=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Qh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class rp{constructor(e=j5,t={}){fr(this,"buffer");fr(this,"byteLength");fr(this,"byteOffset");fr(this,"length");fr(this,"offset");fr(this,"lastWrittenByte");fr(this,"littleEndian");fr(this,"_data");fr(this,"_mark");fr(this,"_marks");let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let c=a;(ArrayBuffer.isView(e)||e instanceof rp)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Qh[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===A5&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+s));d.reverse();const h=new Qh[t](d.buffer);return this.offset+=s,h.reverse(),h}const c=new Qh[t](o);return this.offset+=s,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return V0(this.readBytes(e))}decodeText(e=1,t="utf8"){return V0(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(k5(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Rc(r){let e=r.length;for(;--e>=0;)r[e]=0}const E5=3,L5=258,Am=29,P5=256,C5=P5+1+Am,Em=30,T5=512,I5=new Array((C5+2)*2);Rc(I5);const O5=new Array(Em*2);Rc(O5);const R5=new Array(T5);Rc(R5);const D5=new Array(L5-E5+1);Rc(D5);const F5=new Array(Am);Rc(F5);const B5=new Array(Em);Rc(B5);const M5=(r,e,t,s)=>{let a=r&65535|0,o=r>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do a=a+e[s++]|0,o=o+a|0;while(--c);a%=65521,o%=65521}return a|o<<16|0};var Uf=M5;const U5=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},$5=new Uint32Array(U5()),q5=(r,e,t,s)=>{const a=$5,o=s+t;r^=-1;for(let c=s;c<o;c++)r=r>>>8^a[(r^e[c])&255];return r^-1};var fa=q5,$f={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Lm={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const z5=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var W5=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)z5(t,s)&&(r[s]=t[s])}}return r},H5=r=>{let e=0;for(let s=0,a=r.length;s<a;s++)e+=r[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=r.length;s<o;s++){let c=r[s];t.set(c,a),a+=c.length}return t},Pm={assign:W5,flattenChunks:H5};let Cm=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Cm=!1}const Cu=new Uint8Array(256);for(let r=0;r<256;r++)Cu[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Cu[254]=Cu[254]=1;var V5=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,s,a,o,c=r.length,d=0;for(a=0;a<c;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<c&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,a=0;o<d;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<c&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const G5=(r,e)=>{if(e<65534&&r.subarray&&Cm)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(r[s]);return t};var K5=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let c=r[s++];if(c<128){o[a++]=c;continue}let d=Cu[c];if(d>4){o[a++]=65533,s+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&s<t;)c=c<<6|r[s++]&63,d--;if(d>1){o[a++]=65533;continue}c<65536?o[a++]=c:(c-=65536,o[a++]=55296|c>>10&1023,o[a++]=56320|c&1023)}return G5(o,a)},J5=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Cu[r[t]]>e?t:e},qf={string2buf:V5,buf2string:K5,utf8border:J5};function Y5(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var X5=Y5;const bd=16209,Q5=16191;var Z5=function(e,t){let s,a,o,c,d,h,g,v,N,b,y,L,A,P,T,R,C,j,J,$,le,se,Y,me;const M=e.state;s=e.next_in,Y=e.input,a=s+(e.avail_in-5),o=e.next_out,me=e.output,c=o-(t-e.avail_out),d=o+(e.avail_out-257),h=M.dmax,g=M.wsize,v=M.whave,N=M.wnext,b=M.window,y=M.hold,L=M.bits,A=M.lencode,P=M.distcode,T=(1<<M.lenbits)-1,R=(1<<M.distbits)-1;e:do{L<15&&(y+=Y[s++]<<L,L+=8,y+=Y[s++]<<L,L+=8),C=A[y&T];t:for(;;){if(j=C>>>24,y>>>=j,L-=j,j=C>>>16&255,j===0)me[o++]=C&65535;else if(j&16){J=C&65535,j&=15,j&&(L<j&&(y+=Y[s++]<<L,L+=8),J+=y&(1<<j)-1,y>>>=j,L-=j),L<15&&(y+=Y[s++]<<L,L+=8,y+=Y[s++]<<L,L+=8),C=P[y&R];r:for(;;){if(j=C>>>24,y>>>=j,L-=j,j=C>>>16&255,j&16){if($=C&65535,j&=15,L<j&&(y+=Y[s++]<<L,L+=8,L<j&&(y+=Y[s++]<<L,L+=8)),$+=y&(1<<j)-1,$>h){e.msg="invalid distance too far back",M.mode=bd;break e}if(y>>>=j,L-=j,j=o-c,$>j){if(j=$-j,j>v&&M.sane){e.msg="invalid distance too far back",M.mode=bd;break e}if(le=0,se=b,N===0){if(le+=g-j,j<J){J-=j;do me[o++]=b[le++];while(--j);le=o-$,se=me}}else if(N<j){if(le+=g+N-j,j-=N,j<J){J-=j;do me[o++]=b[le++];while(--j);if(le=0,N<J){j=N,J-=j;do me[o++]=b[le++];while(--j);le=o-$,se=me}}}else if(le+=N-j,j<J){J-=j;do me[o++]=b[le++];while(--j);le=o-$,se=me}for(;J>2;)me[o++]=se[le++],me[o++]=se[le++],me[o++]=se[le++],J-=3;J&&(me[o++]=se[le++],J>1&&(me[o++]=se[le++]))}else{le=o-$;do me[o++]=me[le++],me[o++]=me[le++],me[o++]=me[le++],J-=3;while(J>2);J&&(me[o++]=me[le++],J>1&&(me[o++]=me[le++]))}}else if((j&64)===0){C=P[(C&65535)+(y&(1<<j)-1)];continue r}else{e.msg="invalid distance code",M.mode=bd;break e}break}}else if((j&64)===0){C=A[(C&65535)+(y&(1<<j)-1)];continue t}else if(j&32){M.mode=Q5;break e}else{e.msg="invalid literal/length code",M.mode=bd;break e}break}}while(s<a&&o<d);J=L>>3,s-=J,L-=J<<3,y&=(1<<L)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<d?257+(d-o):257-(o-d),M.hold=y,M.bits=L};const bc=15,G0=852,K0=592,J0=0,Zh=1,Y0=2,ex=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tx=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),rx=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),nx=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),sx=(r,e,t,s,a,o,c,d)=>{const h=d.bits;let g=0,v=0,N=0,b=0,y=0,L=0,A=0,P=0,T=0,R=0,C,j,J,$,le,se=null,Y;const me=new Uint16Array(bc+1),M=new Uint16Array(bc+1);let z=null,B,K,ge;for(g=0;g<=bc;g++)me[g]=0;for(v=0;v<s;v++)me[e[t+v]]++;for(y=h,b=bc;b>=1&&me[b]===0;b--);if(y>b&&(y=b),b===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(N=1;N<b&&me[N]===0;N++);for(y<N&&(y=N),P=1,g=1;g<=bc;g++)if(P<<=1,P-=me[g],P<0)return-1;if(P>0&&(r===J0||b!==1))return-1;for(M[1]=0,g=1;g<bc;g++)M[g+1]=M[g]+me[g];for(v=0;v<s;v++)e[t+v]!==0&&(c[M[e[t+v]]++]=v);if(r===J0?(se=z=c,Y=20):r===Zh?(se=ex,z=tx,Y=257):(se=rx,z=nx,Y=0),R=0,v=0,g=N,le=o,L=y,A=0,J=-1,T=1<<y,$=T-1,r===Zh&&T>G0||r===Y0&&T>K0)return 1;for(;;){B=g-A,c[v]+1<Y?(K=0,ge=c[v]):c[v]>=Y?(K=z[c[v]-Y],ge=se[c[v]-Y]):(K=96,ge=0),C=1<<g-A,j=1<<L,N=j;do j-=C,a[le+(R>>A)+j]=B<<24|K<<16|ge|0;while(j!==0);for(C=1<<g-1;R&C;)C>>=1;if(C!==0?(R&=C-1,R+=C):R=0,v++,--me[g]===0){if(g===b)break;g=e[t+c[v]]}if(g>y&&(R&$)!==J){for(A===0&&(A=y),le+=N,L=g-A,P=1<<L;L+A<b&&(P-=me[L+A],!(P<=0));)L++,P<<=1;if(T+=1<<L,r===Zh&&T>G0||r===Y0&&T>K0)return 1;J=R&$,a[J]=y<<24|L<<16|le-o|0}}return R!==0&&(a[le+R]=g-A<<24|64<<16|0),d.bits=y,0};var xu=sx;const ix=0,Tm=1,Im=2,{Z_FINISH:X0,Z_BLOCK:ax,Z_TREES:_d,Z_OK:Fl,Z_STREAM_END:ox,Z_NEED_DICT:lx,Z_STREAM_ERROR:xi,Z_DATA_ERROR:Om,Z_MEM_ERROR:Rm,Z_BUF_ERROR:cx,Z_DEFLATED:Q0}=Lm,Gd=16180,Z0=16181,eg=16182,tg=16183,rg=16184,ng=16185,sg=16186,ig=16187,ag=16188,og=16189,Ud=16190,Qa=16191,ef=16192,lg=16193,tf=16194,cg=16195,ug=16196,dg=16197,hg=16198,Nd=16199,Sd=16200,fg=16201,pg=16202,gg=16203,mg=16204,vg=16205,rf=16206,yg=16207,xg=16208,Or=16209,Dm=16210,Fm=16211,ux=852,dx=592,hx=15,fx=hx,wg=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function px(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bl=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Gd||e.mode>Fm?1:0},Bm=r=>{if(Bl(r))return xi;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Gd,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ux),e.distcode=e.distdyn=new Int32Array(dx),e.sane=1,e.back=-1,Fl},Mm=r=>{if(Bl(r))return xi;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Bm(r)},Um=(r,e)=>{let t;if(Bl(r))return xi;const s=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?xi:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Mm(r))},$m=(r,e)=>{if(!r)return xi;const t=new px;r.state=t,t.strm=r,t.window=null,t.mode=Gd;const s=Um(r,e);return s!==Fl&&(r.state=null),s},gx=r=>$m(r,fx);let bg=!0,nf,sf;const mx=r=>{if(bg){nf=new Int32Array(512),sf=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(xu(Tm,r.lens,0,288,nf,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;xu(Im,r.lens,0,32,sf,0,r.work,{bits:5}),bg=!1}r.lencode=nf,r.lenbits=9,r.distcode=sf,r.distbits=5},qm=(r,e,t,s)=>{let a;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},vx=(r,e)=>{let t,s,a,o,c,d,h,g,v,N,b,y,L,A,P=0,T,R,C,j,J,$,le,se;const Y=new Uint8Array(4);let me,M;const z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bl(r)||!r.output||!r.input&&r.avail_in!==0)return xi;t=r.state,t.mode===Qa&&(t.mode=ef),c=r.next_out,a=r.output,h=r.avail_out,o=r.next_in,s=r.input,d=r.avail_in,g=t.hold,v=t.bits,N=d,b=h,se=Fl;e:for(;;)switch(t.mode){case Gd:if(t.wrap===0){t.mode=ef;break}for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.wrap&2&&g===35615){t.wbits===0&&(t.wbits=15),t.check=0,Y[0]=g&255,Y[1]=g>>>8&255,t.check=fa(t.check,Y,2,0),g=0,v=0,t.mode=Z0;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((g&255)<<8)+(g>>8))%31){r.msg="incorrect header check",t.mode=Or;break}if((g&15)!==Q0){r.msg="unknown compression method",t.mode=Or;break}if(g>>>=4,v-=4,le=(g&15)+8,t.wbits===0&&(t.wbits=le),le>15||le>t.wbits){r.msg="invalid window size",t.mode=Or;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=g&512?og:Qa,g=0,v=0;break;case Z0:for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.flags=g,(t.flags&255)!==Q0){r.msg="unknown compression method",t.mode=Or;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Or;break}t.head&&(t.head.text=g>>8&1),t.flags&512&&t.wrap&4&&(Y[0]=g&255,Y[1]=g>>>8&255,t.check=fa(t.check,Y,2,0)),g=0,v=0,t.mode=eg;case eg:for(;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.head&&(t.head.time=g),t.flags&512&&t.wrap&4&&(Y[0]=g&255,Y[1]=g>>>8&255,Y[2]=g>>>16&255,Y[3]=g>>>24&255,t.check=fa(t.check,Y,4,0)),g=0,v=0,t.mode=tg;case tg:for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.head&&(t.head.xflags=g&255,t.head.os=g>>8),t.flags&512&&t.wrap&4&&(Y[0]=g&255,Y[1]=g>>>8&255,t.check=fa(t.check,Y,2,0)),g=0,v=0,t.mode=rg;case rg:if(t.flags&1024){for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.length=g,t.head&&(t.head.extra_len=g),t.flags&512&&t.wrap&4&&(Y[0]=g&255,Y[1]=g>>>8&255,t.check=fa(t.check,Y,2,0)),g=0,v=0}else t.head&&(t.head.extra=null);t.mode=ng;case ng:if(t.flags&1024&&(y=t.length,y>d&&(y=d),y&&(t.head&&(le=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+y),le)),t.flags&512&&t.wrap&4&&(t.check=fa(t.check,s,y,o)),d-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=sg;case sg:if(t.flags&2048){if(d===0)break e;y=0;do le=s[o+y++],t.head&&le&&t.length<65536&&(t.head.name+=String.fromCharCode(le));while(le&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=fa(t.check,s,y,o)),d-=y,o+=y,le)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ig;case ig:if(t.flags&4096){if(d===0)break e;y=0;do le=s[o+y++],t.head&&le&&t.length<65536&&(t.head.comment+=String.fromCharCode(le));while(le&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=fa(t.check,s,y,o)),d-=y,o+=y,le)break e}else t.head&&(t.head.comment=null);t.mode=ag;case ag:if(t.flags&512){for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.wrap&4&&g!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Or;break}g=0,v=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=Qa;break;case og:for(;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}r.adler=t.check=wg(g),g=0,v=0,t.mode=Ud;case Ud:if(t.havedict===0)return r.next_out=c,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=g,t.bits=v,lx;r.adler=t.check=1,t.mode=Qa;case Qa:if(e===ax||e===_d)break e;case ef:if(t.last){g>>>=v&7,v-=v&7,t.mode=rf;break}for(;v<3;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}switch(t.last=g&1,g>>>=1,v-=1,g&3){case 0:t.mode=lg;break;case 1:if(mx(t),t.mode=Nd,e===_d){g>>>=2,v-=2;break e}break;case 2:t.mode=ug;break;case 3:r.msg="invalid block type",t.mode=Or}g>>>=2,v-=2;break;case lg:for(g>>>=v&7,v-=v&7;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if((g&65535)!==(g>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Or;break}if(t.length=g&65535,g=0,v=0,t.mode=tf,e===_d)break e;case tf:t.mode=cg;case cg:if(y=t.length,y){if(y>d&&(y=d),y>h&&(y=h),y===0)break e;a.set(s.subarray(o,o+y),c),d-=y,o+=y,h-=y,c+=y,t.length-=y;break}t.mode=Qa;break;case ug:for(;v<14;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.nlen=(g&31)+257,g>>>=5,v-=5,t.ndist=(g&31)+1,g>>>=5,v-=5,t.ncode=(g&15)+4,g>>>=4,v-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Or;break}t.have=0,t.mode=dg;case dg:for(;t.have<t.ncode;){for(;v<3;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.lens[z[t.have++]]=g&7,g>>>=3,v-=3}for(;t.have<19;)t.lens[z[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,me={bits:t.lenbits},se=xu(ix,t.lens,0,19,t.lencode,0,t.work,me),t.lenbits=me.bits,se){r.msg="invalid code lengths set",t.mode=Or;break}t.have=0,t.mode=hg;case hg:for(;t.have<t.nlen+t.ndist;){for(;P=t.lencode[g&(1<<t.lenbits)-1],T=P>>>24,R=P>>>16&255,C=P&65535,!(T<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(C<16)g>>>=T,v-=T,t.lens[t.have++]=C;else{if(C===16){for(M=T+2;v<M;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(g>>>=T,v-=T,t.have===0){r.msg="invalid bit length repeat",t.mode=Or;break}le=t.lens[t.have-1],y=3+(g&3),g>>>=2,v-=2}else if(C===17){for(M=T+3;v<M;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=T,v-=T,le=0,y=3+(g&7),g>>>=3,v-=3}else{for(M=T+7;v<M;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=T,v-=T,le=0,y=11+(g&127),g>>>=7,v-=7}if(t.have+y>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Or;break}for(;y--;)t.lens[t.have++]=le}}if(t.mode===Or)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Or;break}if(t.lenbits=9,me={bits:t.lenbits},se=xu(Tm,t.lens,0,t.nlen,t.lencode,0,t.work,me),t.lenbits=me.bits,se){r.msg="invalid literal/lengths set",t.mode=Or;break}if(t.distbits=6,t.distcode=t.distdyn,me={bits:t.distbits},se=xu(Im,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,me),t.distbits=me.bits,se){r.msg="invalid distances set",t.mode=Or;break}if(t.mode=Nd,e===_d)break e;case Nd:t.mode=Sd;case Sd:if(d>=6&&h>=258){r.next_out=c,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=g,t.bits=v,Z5(r,b),c=r.next_out,a=r.output,h=r.avail_out,o=r.next_in,s=r.input,d=r.avail_in,g=t.hold,v=t.bits,t.mode===Qa&&(t.back=-1);break}for(t.back=0;P=t.lencode[g&(1<<t.lenbits)-1],T=P>>>24,R=P>>>16&255,C=P&65535,!(T<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(R&&(R&240)===0){for(j=T,J=R,$=C;P=t.lencode[$+((g&(1<<j+J)-1)>>j)],T=P>>>24,R=P>>>16&255,C=P&65535,!(j+T<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=j,v-=j,t.back+=j}if(g>>>=T,v-=T,t.back+=T,t.length=C,R===0){t.mode=vg;break}if(R&32){t.back=-1,t.mode=Qa;break}if(R&64){r.msg="invalid literal/length code",t.mode=Or;break}t.extra=R&15,t.mode=fg;case fg:if(t.extra){for(M=t.extra;v<M;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.length+=g&(1<<t.extra)-1,g>>>=t.extra,v-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=pg;case pg:for(;P=t.distcode[g&(1<<t.distbits)-1],T=P>>>24,R=P>>>16&255,C=P&65535,!(T<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if((R&240)===0){for(j=T,J=R,$=C;P=t.distcode[$+((g&(1<<j+J)-1)>>j)],T=P>>>24,R=P>>>16&255,C=P&65535,!(j+T<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=j,v-=j,t.back+=j}if(g>>>=T,v-=T,t.back+=T,R&64){r.msg="invalid distance code",t.mode=Or;break}t.offset=C,t.extra=R&15,t.mode=gg;case gg:if(t.extra){for(M=t.extra;v<M;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.offset+=g&(1<<t.extra)-1,g>>>=t.extra,v-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Or;break}t.mode=mg;case mg:if(h===0)break e;if(y=b-h,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Or;break}y>t.wnext?(y-=t.wnext,L=t.wsize-y):L=t.wnext-y,y>t.length&&(y=t.length),A=t.window}else A=a,L=c-t.offset,y=t.length;y>h&&(y=h),h-=y,t.length-=y;do a[c++]=A[L++];while(--y);t.length===0&&(t.mode=Sd);break;case vg:if(h===0)break e;a[c++]=t.length,h--,t.mode=Sd;break;case rf:if(t.wrap){for(;v<32;){if(d===0)break e;d--,g|=s[o++]<<v,v+=8}if(b-=h,r.total_out+=b,t.total+=b,t.wrap&4&&b&&(r.adler=t.check=t.flags?fa(t.check,a,b,c-b):Uf(t.check,a,b,c-b)),b=h,t.wrap&4&&(t.flags?g:wg(g))!==t.check){r.msg="incorrect data check",t.mode=Or;break}g=0,v=0}t.mode=yg;case yg:if(t.wrap&&t.flags){for(;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.wrap&4&&g!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Or;break}g=0,v=0}t.mode=xg;case xg:se=ox;break e;case Or:se=Om;break e;case Dm:return Rm;case Fm:default:return xi}return r.next_out=c,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=g,t.bits=v,(t.wsize||b!==r.avail_out&&t.mode<Or&&(t.mode<rf||e!==X0))&&qm(r,r.output,r.next_out,b-r.avail_out),N-=r.avail_in,b-=r.avail_out,r.total_in+=N,r.total_out+=b,t.total+=b,t.wrap&4&&b&&(r.adler=t.check=t.flags?fa(t.check,a,b,r.next_out-b):Uf(t.check,a,b,r.next_out-b)),r.data_type=t.bits+(t.last?64:0)+(t.mode===Qa?128:0)+(t.mode===Nd||t.mode===tf?256:0),(N===0&&b===0||e===X0)&&se===Fl&&(se=cx),se},yx=r=>{if(Bl(r))return xi;let e=r.state;return e.window&&(e.window=null),r.state=null,Fl},xx=(r,e)=>{if(Bl(r))return xi;const t=r.state;return(t.wrap&2)===0?xi:(t.head=e,e.done=!1,Fl)},wx=(r,e)=>{const t=e.length;let s,a,o;return Bl(r)||(s=r.state,s.wrap!==0&&s.mode!==Ud)?xi:s.mode===Ud&&(a=1,a=Uf(a,e,t,0),a!==s.check)?Om:(o=qm(r,e,t,t),o?(s.mode=Dm,Rm):(s.havedict=1,Fl))};var bx=Mm,_x=Um,Nx=Bm,Sx=gx,kx=$m,jx=vx,Ax=yx,Ex=xx,Lx=wx,Px="pako inflate (from Nodeca project)",eo={inflateReset:bx,inflateReset2:_x,inflateResetKeep:Nx,inflateInit:Sx,inflateInit2:kx,inflate:jx,inflateEnd:Ax,inflateGetHeader:Ex,inflateSetDictionary:Lx,inflateInfo:Px};function Cx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Tx=Cx;const zm=Object.prototype.toString,{Z_NO_FLUSH:Ix,Z_FINISH:Ox,Z_OK:Tu,Z_STREAM_END:af,Z_NEED_DICT:of,Z_STREAM_ERROR:Rx,Z_DATA_ERROR:_g,Z_MEM_ERROR:Dx}=Lm;function Ru(r){this.options=Pm.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new X5,this.strm.avail_out=0;let t=eo.inflateInit2(this.strm,e.windowBits);if(t!==Tu)throw new Error($f[t]);if(this.header=new Tx,eo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=qf.string2buf(e.dictionary):zm.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=eo.inflateSetDictionary(this.strm,e.dictionary),t!==Tu)))throw new Error($f[t])}Ru.prototype.push=function(r,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,c,d;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?Ox:Ix,zm.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=eo.inflate(t,c),o===of&&a&&(o=eo.inflateSetDictionary(t,a),o===Tu?o=eo.inflate(t,c):o===_g&&(o=of));t.avail_in>0&&o===af&&t.state.wrap>0&&r[t.next_in]!==0;)eo.inflateReset(t),o=eo.inflate(t,c);switch(o){case Rx:case _g:case of:case Dx:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===af))if(this.options.to==="string"){let h=qf.utf8border(t.output,t.next_out),g=t.next_out-h,v=qf.buf2string(t.output,h);t.next_out=g,t.avail_out=s-g,g&&t.output.set(t.output.subarray(h,h+g),0),this.onData(v)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Tu&&d===0)){if(o===af)return o=eo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Ru.prototype.onData=function(r){this.chunks.push(r)};Ru.prototype.onEnd=function(r){r===Tu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pm.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Fx(r,e){const t=new Ru(e);if(t.push(r),t.err)throw t.msg||$f[t.err];return t.result}var Bx=Ru,Mx=Fx,Ux={Inflate:Bx,inflate:Mx};const{Inflate:$x,inflate:qx}=Ux;var Ng=$x,zx=qx;const Wm=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Wm[r]=e}const Sg=4294967295;function Wx(r,e,t){let s=r;for(let a=0;a<t;a++)s=Wm[(s^e[a])&255]^s>>>8;return s}function Hx(r,e){return(Wx(Sg,r,e)^Sg)>>>0}function kg(r,e,t){const s=r.readUint32(),a=Hx(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Hm(r,e,t){for(let s=0;s<t;s++)e[s]=r[s]}function Vm(r,e,t,s){let a=0;for(;a<s;a++)e[a]=r[a];for(;a<t;a++)e[a]=r[a]+e[a-s]&255}function Gm(r,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=r[a];else for(;a<s;a++)e[a]=r[a]+t[a]&255}function Km(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=r[o]+(e[o-a]+t[o]>>1)&255}}function Jm(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=r[o]+t[o]&255;for(;o<s;o++)e[o]=r[o]+Vx(e[o-a],t[o],t[o-a])&255}}function Vx(r,e,t){const s=r+e-t,a=Math.abs(s-r),o=Math.abs(s-e),c=Math.abs(s-t);return a<=o&&a<=c?r:o<=c?e:t}function Gx(r,e,t,s,a,o){switch(r){case 0:Hm(e,t,a);break;case 1:Vm(e,t,a,o);break;case 2:Gm(e,t,s,a);break;case 3:Km(e,t,s,a,o);break;case 4:Jm(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const Kx=new Uint16Array([255]),Jx=new Uint8Array(Kx.buffer),Yx=Jx[0]===255;function Xx(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*a,h=new Uint8Array(s*t*d);let g=0;for(let v=0;v<7;v++){const N=c[v],b=Math.ceil((t-N.x)/N.xStep),y=Math.ceil((s-N.y)/N.yStep);if(b<=0||y<=0)continue;const L=b*d,A=new Uint8Array(L);for(let P=0;P<y;P++){const T=e[g++],R=e.subarray(g,g+L);g+=L;const C=new Uint8Array(L);Gx(T,R,C,A,L,d),A.set(C);for(let j=0;j<b;j++){const J=N.x+j*N.xStep,$=N.y+P*N.yStep;if(!(J>=t||$>=s))for(let le=0;le<d;le++)h[($*t+J)*d+le]=C[j*d+le]}}}if(o===16){const v=new Uint16Array(h.buffer);if(Yx)for(let N=0;N<v.length;N++)v[N]=Qx(v[N]);return v}else return h}function Qx(r){return(r&255)<<8|r>>8&255}const Zx=new Uint16Array([255]),ew=new Uint8Array(Zx.buffer),tw=ew[0]===255,rw=new Uint8Array(0);function jg(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,c=Math.ceil(o/8)*a,d=Math.ceil(o/8*a*t),h=new Uint8Array(s*d);let g=rw,v=0,N,b;for(let y=0;y<s;y++){switch(N=e.subarray(v+1,v+1+d),b=h.subarray(y*d,(y+1)*d),e[v]){case 0:Hm(N,b,d);break;case 1:Vm(N,b,d,c);break;case 2:Gm(N,b,g,d);break;case 3:Km(N,b,g,d,c);break;case 4:Jm(N,b,g,d,c);break;default:throw new Error(`Unsupported filter: ${e[v]}`)}g=b,v+=d+1}if(o===16){const y=new Uint16Array(h.buffer);if(tw)for(let L=0;L<y.length;L++)y[L]=nw(y[L]);return y}else return h}function nw(r){return(r&255)<<8|r>>8&255}const Td=Uint8Array.of(137,80,78,71,13,10,26,10);function Ag(r){if(!sw(r.readBytes(Td.length)))throw new Error("wrong PNG signature")}function sw(r){if(r.length<Td.length)return!1;for(let e=0;e<Td.length;e++)if(r[e]!==Td[e])return!1;return!0}const iw="tEXt",aw=0,Ym=new TextDecoder("latin1");function ow(r){if(cw(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const lw=/^[\u0000-\u00FF]*$/;function cw(r){if(!lw.test(r))throw new Error("invalid latin1 text")}function uw(r,e,t){const s=Xm(e);r[s]=dw(e,t-s.length-1)}function Xm(r){for(r.mark();r.readByte()!==aw;);const e=r.offset;r.reset();const t=Ym.decode(r.readBytes(e-r.offset-1));return r.skip(1),ow(t),t}function dw(r,e){return Ym.decode(r.readBytes(e))}const Gs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},lf={UNKNOWN:-1,DEFLATE:0},Eg={UNKNOWN:-1,ADAPTIVE:0},cf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},kd={NONE:0,BACKGROUND:1,PREVIOUS:2},uf={SOURCE:0,OVER:1};class hw extends rp{constructor(t,s={}){super(t);fr(this,"_checkCrc");fr(this,"_inflator");fr(this,"_png");fr(this,"_apng");fr(this,"_end");fr(this,"_hasPalette");fr(this,"_palette");fr(this,"_hasTransparency");fr(this,"_transparency");fr(this,"_compressionMethod");fr(this,"_filterMethod");fr(this,"_interlaceMethod");fr(this,"_colorType");fr(this,"_isAnimated");fr(this,"_numberOfFrames");fr(this,"_numberOfPlays");fr(this,"_frames");fr(this,"_writingDataChunks");const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new Ng,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=lf.UNKNOWN,this._filterMethod=Eg.UNKNOWN,this._interlaceMethod=cf.UNKNOWN,this._colorType=Gs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Ag(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeChunk(t,s)}return this.decodeImage(),this._png}decodeApng(){for(Ag(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(t,s)}return this.decodeApngImage(),this._apng}decodeChunk(t,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case iw:uw(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?kg(this,t+4,s):this.skip(4)}decodeApngChunk(t,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,s),this.offset=a+t;break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?kg(this,t+4,s):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=fw(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case Gs.GREYSCALE:a=1;break;case Gs.TRUECOLOUR:a=3;break;case Gs.INDEXED_COLOUR:a=1;break;case Gs.GREYSCALE_ALPHA:a=2;break;case Gs.TRUECOLOUR_ALPHA:a=4;break;case Gs.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==lf.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const s=t/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<s;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const s=t,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let s=t,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Gs.GREYSCALE:case Gs.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let s=0;s<t/2;s++)this._transparency[s]=this.readUint16();break}case Gs.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let s=0;for(;s<t;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case Gs.UNKNOWN:case Gs.GREYSCALE_ALPHA:case Gs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const s=Xm(this),a=this.readUint8();if(a!==lf.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(t-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:zx(o)}}decodepHYs(){const t=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:t,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const s={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(t);if(a){if(a.data=jg({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const o=this._apng.frames.at(t-1);this.disposeFrame(a,o,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(t,s,a){switch(t.disposeOp){case kd.NONE:break;case kd.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let c=0;c<this._png.width;c++){const d=(o*t.width+c)*this._png.channels;for(let h=0;h<this._png.channels;h++)a.data[d+h]=0}break;case kd.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,s){const a=1<<this._png.depth,o=(c,d)=>{const h=((c+s.yOffset)*this._png.width+s.xOffset+d)*this._png.channels,g=(c*s.width+d)*this._png.channels;return{index:h,frameIndex:g}};switch(s.blendOp){case uf.SOURCE:for(let c=0;c<s.height;c++)for(let d=0;d<s.width;d++){const{index:h,frameIndex:g}=o(c,d);for(let v=0;v<this._png.channels;v++)t.data[h+v]=s.data[g+v]}break;case uf.OVER:for(let c=0;c<s.height;c++)for(let d=0;d<s.width;d++){const{index:h,frameIndex:g}=o(c,d);for(let v=0;v<this._png.channels;v++){const N=s.data[g+this._png.channels-1]/a,b=v%(this._png.channels-1)===0?1:s.data[g+v],y=Math.floor(N*b+(1-N)*t.data[h+v]);t.data[h+v]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var s;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((s=this._frames)==null?void 0:s.at(0)).data:this._inflator.result;if(this._filterMethod!==Eg.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===cf.NO_INTERLACE)this._png.data=jg({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===cf.ADAM7)this._png.data=Xx({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,s=this._frames.at(-1);s?s.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:kd.NONE,blendOp:uf.SOURCE,data:t}),this._inflator=new Ng,this._writingDataChunks=!1}}function fw(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Lg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Lg||(Lg={}));function pw(r,e){return new hw(r,e).decode()}var Pt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function df(){Pt.console&&typeof Pt.console.log=="function"&&Pt.console.log.apply(Pt.console,arguments)}var br={log:df,warn:function(r){Pt.console&&(typeof Pt.console.warn=="function"?Pt.console.warn.apply(Pt.console,arguments):df.call(null,arguments))},error:function(r){Pt.console&&(typeof Pt.console.error=="function"?Pt.console.error.apply(Pt.console,arguments):df(r))}};function hf(r,e,t){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){Sl(s.response,e,t)},s.onerror=function(){br.error("could not download file")},s.send()}function Pg(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function jd(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Sl=Pt.saveAs||((typeof window>"u"?"undefined":pr(window))!=="object"||window!==Pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var s=Pt.URL||Pt.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?Pg(a.href)?hf(r,e,t):jd(a,a.target="_blank"):jd(a)):(a.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){jd(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Pg(r))hf(r,e,t);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){jd(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:pr(o)!=="object"&&(br.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,t),e)}:function(r,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof r=="string")return hf(r,e,t);var a=r.type==="application/octet-stream",o=/constructor/i.test(Pt.HTMLElement)||Pt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&o)&&(typeof FileReader>"u"?"undefined":pr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var v=d.result;v=c?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=v:location=v,s=null},d.readAsDataURL(r)}else{var h=Pt.URL||Pt.webkitURL,g=h.createObjectURL(r);s?s.location=g:location.href=g,s=null,setTimeout(function(){h.revokeObjectURL(g)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Qm(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,c=a.exec(r);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),g=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),g.length==1&&(g="0"+g),"#"+d+h+g}}var Id=Pt.atob.bind(Pt),Cg=Pt.btoa.bind(Pt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ff(r,e){var t=r[0],s=r[1],a=r[2],o=r[3];t=Xn(t,s,a,o,e[0],7,-680876936),o=Xn(o,t,s,a,e[1],12,-389564586),a=Xn(a,o,t,s,e[2],17,606105819),s=Xn(s,a,o,t,e[3],22,-1044525330),t=Xn(t,s,a,o,e[4],7,-176418897),o=Xn(o,t,s,a,e[5],12,1200080426),a=Xn(a,o,t,s,e[6],17,-1473231341),s=Xn(s,a,o,t,e[7],22,-45705983),t=Xn(t,s,a,o,e[8],7,1770035416),o=Xn(o,t,s,a,e[9],12,-1958414417),a=Xn(a,o,t,s,e[10],17,-42063),s=Xn(s,a,o,t,e[11],22,-1990404162),t=Xn(t,s,a,o,e[12],7,1804603682),o=Xn(o,t,s,a,e[13],12,-40341101),a=Xn(a,o,t,s,e[14],17,-1502002290),t=Qn(t,s=Xn(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Qn(o,t,s,a,e[6],9,-1069501632),a=Qn(a,o,t,s,e[11],14,643717713),s=Qn(s,a,o,t,e[0],20,-373897302),t=Qn(t,s,a,o,e[5],5,-701558691),o=Qn(o,t,s,a,e[10],9,38016083),a=Qn(a,o,t,s,e[15],14,-660478335),s=Qn(s,a,o,t,e[4],20,-405537848),t=Qn(t,s,a,o,e[9],5,568446438),o=Qn(o,t,s,a,e[14],9,-1019803690),a=Qn(a,o,t,s,e[3],14,-187363961),s=Qn(s,a,o,t,e[8],20,1163531501),t=Qn(t,s,a,o,e[13],5,-1444681467),o=Qn(o,t,s,a,e[2],9,-51403784),a=Qn(a,o,t,s,e[7],14,1735328473),t=Zn(t,s=Qn(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=Zn(o,t,s,a,e[8],11,-2022574463),a=Zn(a,o,t,s,e[11],16,1839030562),s=Zn(s,a,o,t,e[14],23,-35309556),t=Zn(t,s,a,o,e[1],4,-1530992060),o=Zn(o,t,s,a,e[4],11,1272893353),a=Zn(a,o,t,s,e[7],16,-155497632),s=Zn(s,a,o,t,e[10],23,-1094730640),t=Zn(t,s,a,o,e[13],4,681279174),o=Zn(o,t,s,a,e[0],11,-358537222),a=Zn(a,o,t,s,e[3],16,-722521979),s=Zn(s,a,o,t,e[6],23,76029189),t=Zn(t,s,a,o,e[9],4,-640364487),o=Zn(o,t,s,a,e[12],11,-421815835),a=Zn(a,o,t,s,e[15],16,530742520),t=es(t,s=Zn(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=es(o,t,s,a,e[7],10,1126891415),a=es(a,o,t,s,e[14],15,-1416354905),s=es(s,a,o,t,e[5],21,-57434055),t=es(t,s,a,o,e[12],6,1700485571),o=es(o,t,s,a,e[3],10,-1894986606),a=es(a,o,t,s,e[10],15,-1051523),s=es(s,a,o,t,e[1],21,-2054922799),t=es(t,s,a,o,e[8],6,1873313359),o=es(o,t,s,a,e[15],10,-30611744),a=es(a,o,t,s,e[6],15,-1560198380),s=es(s,a,o,t,e[13],21,1309151649),t=es(t,s,a,o,e[4],6,-145523070),o=es(o,t,s,a,e[11],10,-1120210379),a=es(a,o,t,s,e[2],15,718787259),s=es(s,a,o,t,e[9],21,-343485551),r[0]=Wo(t,r[0]),r[1]=Wo(s,r[1]),r[2]=Wo(a,r[2]),r[3]=Wo(o,r[3])}function Kd(r,e,t,s,a,o){return e=Wo(Wo(e,r),Wo(s,o)),Wo(e<<a|e>>>32-a,t)}function Xn(r,e,t,s,a,o,c){return Kd(e&t|~e&s,r,e,a,o,c)}function Qn(r,e,t,s,a,o,c){return Kd(e&s|t&~s,r,e,a,o,c)}function Zn(r,e,t,s,a,o,c){return Kd(e^t^s,r,e,a,o,c)}function es(r,e,t,s,a,o,c){return Kd(t^(e|~s),r,e,a,o,c)}function Zm(r){var e,t=r.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)ff(s,gw(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(ff(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,ff(s,a),s}function gw(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var Tg="0123456789abcdef".split("");function mw(r){for(var e="",t=0;t<4;t++)e+=Tg[r>>8*t+4&15]+Tg[r>>8*t&15];return e}function vw(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function zf(r){return Zm(r).map(vw).join("")}var yw=(function(r){for(var e=0;e<r.length;e++)r[e]=mw(r[e]);return r.join("")})(Zm("hello"))!="5d41402abc4b2a76b9719d911017c592";function Wo(r,e){if(yw){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Wf(r,e){var t,s,a,o;if(r!==t){for(var c=(a=r,o=1+(256/r.length|0),new Array(o+1).join(a)),d=[],h=0;h<256;h++)d[h]=h;var g=0;for(h=0;h<256;h++){var v=d[h];g=(g+v+c.charCodeAt(h))%256,d[h]=d[g],d[g]=v}t=r,s=d}else d=s;var N=e.length,b=0,y=0,L="";for(h=0;h<N;h++)y=(y+(v=d[b=(b+1)%256]))%256,d[b]=d[y],d[y]=v,c=d[(d[b]+d[y])%256],L+=String.fromCharCode(e.charCodeAt(h)^c);return L}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ig={print:4,modify:8,copy:16,"annot-forms":32};function Ec(r,e,t,s){this.v=1,this.r=2;var a=192;r.forEach(function(d){if(Ig.perm!==void 0)throw new Error("Invalid permission: "+d);a+=Ig[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^a)),this.encryptionKey=zf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Wf(this.encryptionKey,this.padding)}function Lc(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,s=0;s<t;s++){var a=r.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[s]}return e}function Og(r){if(pr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var c=e[t][o];try{c[0].apply(r,s)}catch(d){Pt.console&&br.error("jsPDF PubSub Error",d.message,d)}c[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Iu(r){if(!(this instanceof Iu))return new Iu(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function e1(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function zo(r,e,t,s,a){if(!(this instanceof zo))return new zo(r,e,t,s,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,e1.call(this,s,a)}function Ll(r,e,t,s,a){if(!(this instanceof Ll))return new Ll(r,e,t,s,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,e1.call(this,s,a)}function nt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],c=[],d=1,h=16,g="S",v=null;pr(r=r||{})==="object"&&(t=r.orientation,s=r.unit||s,a=r.format||a,o=r.compress||r.compressPdf||o,(v=r.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),d=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),g=r.defaultPathOperation||"S"),c=r.filters||(o===!0?["FlateEncode"]:c),s=s||"mm",t=(""+(t||"P")).toLowerCase();var N=r.putOnlyUsedFonts||!1,b={},y={internal:{},__private__:{}};y.__private__.PubSub=Og;var L="1.3",A=y.__private__.getPdfVersion=function(){return L};y.__private__.setPdfVersion=function(x){L=x};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return P};var T=y.__private__.getPageFormat=function(x){return P[x]};a=a||"a4";var R="compat",C="advanced",j=R;function J(){this.saveGraphicsState(),Q(new xt(jt,0,0,-jt,0,_s()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),g="n",j=C}function $(){this.restoreGraphicsState(),g="S",j=R}var le=y.__private__.combineFontStyleAndFontWeight=function(x,O){if(x=="bold"&&O=="normal"||x=="bold"&&O==400||x=="normal"&&O=="italic"||x=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(x=O==400||O==="normal"?x==="italic"?"italic":"normal":O!=700&&O!=="bold"||x!=="normal"?(O==700?"bold":O)+""+x:"bold"),x};y.advancedAPI=function(x){var O=j===R;return O&&J.call(this),typeof x!="function"||(x(this),O&&$.call(this)),this},y.compatAPI=function(x){var O=j===C;return O&&$.call(this),typeof x!="function"||(x(this),O&&J.call(this)),this},y.isAdvancedAPI=function(){return j===C};var se,Y=function(x){if(j!==C)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},me=y.roundToPrecision=y.__private__.roundToPrecision=function(x,O){var ee=e||O;if(isNaN(x)||isNaN(ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ee).replace(/0+$/,"")};se=y.hpf=y.__private__.hpf=typeof h=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return me(x,h)}:h==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return me(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return me(x,16)};var M=y.f2=y.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return me(x,2)},z=y.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return me(x,3)},B=y.scale=y.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return j===R?x*jt:j===C?x:void 0},K=function(x){return B((function(O){return j===R?_s()-O:j===C?O:void 0})(x))};y.__private__.setPrecision=y.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ge,ue="00000000000000000000000000000000",we=y.__private__.getFileId=function(){return ue},ae=y.__private__.setFileId=function(x){return ue=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(rn=new Ec(v.userPermissions,v.userPassword,v.ownerPassword,ue)),ue};y.setFileId=function(x){return ae(x),this},y.getFileId=function(){return we()};var ne=y.__private__.convertDateToPDFDate=function(x){var O=x.getTimezoneOffset(),ee=O<0?"+":"-",de=Math.floor(Math.abs(O/60)),be=Math.abs(O%60),Ie=[ee,q(de),"'",q(be),"'"].join("");return["D:",x.getFullYear(),q(x.getMonth()+1),q(x.getDate()),q(x.getHours()),q(x.getMinutes()),q(x.getSeconds()),Ie].join("")},te=y.__private__.convertPDFDateToDate=function(x){var O=parseInt(x.substr(2,4),10),ee=parseInt(x.substr(6,2),10)-1,de=parseInt(x.substr(8,2),10),be=parseInt(x.substr(10,2),10),Ie=parseInt(x.substr(12,2),10),Fe=parseInt(x.substr(14,2),10);return new Date(O,ee,de,be,Ie,Fe,0)},H=y.__private__.setCreationDate=function(x){var O;if(x===void 0&&(x=new Date),x instanceof Date)O=ne(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=x}return ge=O},E=y.__private__.getCreationDate=function(x){var O=ge;return x==="jsDate"&&(O=te(ge)),O};y.setCreationDate=function(x){return H(x),this},y.getCreationDate=function(x){return E(x)};var V,q=y.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},ie=y.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ce=0,re=[],he=[],ve=0,Ne=[],De=[],We=!1,qe=he;y.__private__.setCustomOutputDestination=function(x){We=!0,qe=x};var it=function(x){We||(qe=x)};y.__private__.resetCustomOutputDestination=function(){We=!1,qe=he};var Q=y.__private__.out=function(x){return x=x.toString(),ve+=x.length+1,qe.push(x),qe},Ve=y.__private__.write=function(x){return Q(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Rt=y.__private__.getArrayBuffer=function(x){for(var O=x.length,ee=new ArrayBuffer(O),de=new Uint8Array(ee);O--;)de[O]=x.charCodeAt(O);return ee},mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return mt};var Be=r.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(x){return Be=j===C?x/jt:x,this};var ht,Ge=y.__private__.getFontSize=y.getFontSize=function(){return j===R?Be:Be*jt},gt=r.R2L||!1;y.__private__.setR2L=y.setR2L=function(x){return gt=x,this},y.__private__.getR2L=y.getR2L=function(){return gt};var ft,Yt=y.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))ht=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');ht=x}else ht=parseInt(x,10)};y.__private__.getZoomMode=function(){return ht};var $t,Ct=y.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');ft=x};y.__private__.getPageMode=function(){return ft};var qt=y.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');$t=x};y.__private__.getLayoutMode=function(){return $t},y.__private__.setDisplayMode=y.setDisplayMode=function(x,O,ee){return Yt(x),qt(O),Ct(ee),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(x){if(Object.keys(Mt).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[x]},y.__private__.getDocumentProperties=function(){return Mt},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(x){for(var O in Mt)Mt.hasOwnProperty(O)&&x[O]&&(Mt[O]=x[O]);return this},y.__private__.setDocumentProperty=function(x,O){if(Object.keys(Mt).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[x]=O};var at,jt,rt,Rr,Gt,Bt={},Ut={},gr=[],pt={},ir={},vt={},Et={},nr=null,It=0,yt=[],Xt=new Og(y),Gi=r.hotfixes||[],mn={},ei={},ps=[],xt=function x(O,ee,de,be,Ie,Fe){if(!(this instanceof x))return new x(O,ee,de,be,Ie,Fe);isNaN(O)&&(O=1),isNaN(ee)&&(ee=0),isNaN(de)&&(de=0),isNaN(be)&&(be=1),isNaN(Ie)&&(Ie=0),isNaN(Fe)&&(Fe=0),this._matrix=[O,ee,de,be,Ie,Fe]};Object.defineProperty(xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(se).join(x)},xt.prototype.multiply=function(x){var O=x.sx*this.sx+x.shy*this.shx,ee=x.sx*this.shy+x.shy*this.sy,de=x.shx*this.sx+x.sy*this.shx,be=x.shx*this.shy+x.sy*this.sy,Ie=x.tx*this.sx+x.ty*this.shx+this.tx,Fe=x.tx*this.shy+x.ty*this.sy+this.ty;return new xt(O,ee,de,be,Ie,Fe)},xt.prototype.decompose=function(){var x=this.sx,O=this.shy,ee=this.shx,de=this.sy,be=this.tx,Ie=this.ty,Fe=Math.sqrt(x*x+O*O),Qe=(x/=Fe)*ee+(O/=Fe)*de;ee-=x*Qe,de-=O*Qe;var lt=Math.sqrt(ee*ee+de*de);return Qe/=lt,x*(de/=lt)<O*(ee/=lt)&&(x=-x,O=-O,Qe=-Qe,Fe=-Fe),{scale:new xt(Fe,0,0,lt,0,0),translate:new xt(1,0,0,1,be,Ie),rotate:new xt(x,O,-O,x,0,0),skew:new xt(1,0,Qe,1,0,0)}},xt.prototype.toString=function(x){return this.join(" ")},xt.prototype.inversed=function(){var x=this.sx,O=this.shy,ee=this.shx,de=this.sy,be=this.tx,Ie=this.ty,Fe=1/(x*de-O*ee),Qe=de*Fe,lt=-O*Fe,At=-ee*Fe,Tt=x*Fe;return new xt(Qe,lt,At,Tt,-Qe*be-At*Ie,-lt*be-Tt*Ie)},xt.prototype.applyToPoint=function(x){var O=x.x*this.sx+x.y*this.shx+this.tx,ee=x.x*this.shy+x.y*this.sy+this.ty;return new xs(O,ee)},xt.prototype.applyToRectangle=function(x){var O=this.applyToPoint(x),ee=this.applyToPoint(new xs(x.x+x.w,x.y+x.h));return new Ea(O.x,O.y,ee.x-O.x,ee.y-O.y)},xt.prototype.clone=function(){var x=this.sx,O=this.shy,ee=this.shx,de=this.sy,be=this.tx,Ie=this.ty;return new xt(x,O,ee,de,be,Ie)},y.Matrix=xt;var ts=y.matrixMult=function(x,O){return O.multiply(x)},Ts=new xt(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Ts;var kn=function(x,O){if(!ir[x]){var ee=(O instanceof zo?"Sh":"P")+(Object.keys(pt).length+1).toString(10);O.id=ee,ir[x]=ee,pt[ee]=O,Xt.publish("addPattern",O)}};y.ShadingPattern=zo,y.TilingPattern=Ll,y.addShadingPattern=function(x,O){return Y("addShadingPattern()"),kn(x,O),this},y.beginTilingPattern=function(x){Y("beginTilingPattern()"),ws(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},y.endTilingPattern=function(x,O){Y("endTilingPattern()"),O.stream=De[V].join(`
`),kn(x,O),Xt.publish("endTilingPattern",O),ps.pop().restore()};var gs,mr=y.__private__.newObject=function(){var x=Dr();return Hr(x,!0),x},Dr=y.__private__.newObjectDeferred=function(){return ce++,re[ce]=function(){return ve},ce},Hr=function(x,O){return O=typeof O=="boolean"&&O,re[x]=ve,O&&Q(x+" 0 obj"),x},wi=y.__private__.newAdditionalObject=function(){var x={objId:Dr(),content:""};return Ne.push(x),x},Ki=Dr(),Is=Dr(),ti=y.__private__.decodeColorString=function(x){var O=x.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var ee=parseFloat(O[0]);O=[ee,ee,ee,"r"]}for(var de="#",be=0;be<3;be++)de+=("0"+Math.floor(255*parseFloat(O[be])).toString(16)).slice(-2);return de},vn=y.__private__.encodeColorString=function(x){var O;typeof x=="string"&&(x={ch1:x});var ee=x.ch1,de=x.ch2,be=x.ch3,Ie=x.ch4,Fe=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ee=="string"&&ee.charAt(0)!=="#"){var Qe=new Qm(ee);if(Qe.ok)ee=Qe.toHex();else if(!/^\d*\.?\d*$/.test(ee))throw new Error('Invalid color "'+ee+'" passed to jsPDF.encodeColorString.')}if(typeof ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ee)&&(ee="#"+ee[1]+ee[1]+ee[2]+ee[2]+ee[3]+ee[3]),typeof ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ee)){var lt=parseInt(ee.substr(1),16);ee=lt>>16&255,de=lt>>8&255,be=255&lt}if(de===void 0||Ie===void 0&&ee===de&&de===be)O=typeof ee=="string"?ee+" "+Fe[0]:x.precision===2?M(ee/255)+" "+Fe[0]:z(ee/255)+" "+Fe[0];else if(Ie===void 0||pr(Ie)==="object"){if(Ie&&!isNaN(Ie.a)&&Ie.a===0)return["1.","1.","1.",Fe[1]].join(" ");O=typeof ee=="string"?[ee,de,be,Fe[1]].join(" "):x.precision===2?[M(ee/255),M(de/255),M(be/255),Fe[1]].join(" "):[z(ee/255),z(de/255),z(be/255),Fe[1]].join(" ")}else O=typeof ee=="string"?[ee,de,be,Ie,Fe[2]].join(" "):x.precision===2?[M(ee),M(de),M(be),M(Ie),Fe[2]].join(" "):[z(ee),z(de),z(be),z(Ie),Fe[2]].join(" ");return O},ms=y.__private__.getFilters=function(){return c},rs=y.__private__.putStream=function(x){var O=(x=x||{}).data||"",ee=x.filters||ms(),de=x.alreadyAppliedFilters||[],be=x.addLength1||!1,Ie=O.length,Fe=x.objectId,Qe=function(nn){return nn};if(v!==null&&Fe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(Qe=rn.encryptor(Fe,0));var lt={};ee===!0&&(ee=["FlateEncode"]);var At=x.additionalKeyValues||[],Tt=(lt=nt.API.processDataByFilters!==void 0?nt.API.processDataByFilters(O,ee):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(lt.data.length!==0&&(At.push({key:"Length",value:lt.data.length}),be===!0&&At.push({key:"Length1",value:Ie})),Tt.length!=0)if(Tt.split("/").length-1==1)At.push({key:"Filter",value:Tt});else{At.push({key:"Filter",value:"["+Tt+"]"});for(var Kt=0;Kt<At.length;Kt+=1)if(At[Kt].key==="DecodeParms"){for(var jr=[],Kr=0;Kr<lt.reverseChain.split("/").length-1;Kr+=1)jr.push("null");jr.push(At[Kt].value),At[Kt].value="["+jr.join(" ")+"]"}}Q("<<");for(var vr=0;vr<At.length;vr++)Q("/"+At[vr].key+" "+At[vr].value);Q(">>"),lt.data.length!==0&&(Q("stream"),Q(Qe(lt.data)),Q("endstream"))},va=y.__private__.putPage=function(x){var O=x.number,ee=x.data,de=x.objId,be=x.contentsObjId;Hr(de,!0),Q("<</Type /Page"),Q("/Parent "+x.rootDictionaryObjId+" 0 R"),Q("/Resources "+x.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(se(x.mediaBox.bottomLeftX))+" "+parseFloat(se(x.mediaBox.bottomLeftY))+" "+se(x.mediaBox.topRightX)+" "+se(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&Q("/CropBox ["+se(x.cropBox.bottomLeftX)+" "+se(x.cropBox.bottomLeftY)+" "+se(x.cropBox.topRightX)+" "+se(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&Q("/BleedBox ["+se(x.bleedBox.bottomLeftX)+" "+se(x.bleedBox.bottomLeftY)+" "+se(x.bleedBox.topRightX)+" "+se(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&Q("/TrimBox ["+se(x.trimBox.bottomLeftX)+" "+se(x.trimBox.bottomLeftY)+" "+se(x.trimBox.topRightX)+" "+se(x.trimBox.topRightY)+"]"),x.artBox!==null&&Q("/ArtBox ["+se(x.artBox.bottomLeftX)+" "+se(x.artBox.bottomLeftY)+" "+se(x.artBox.topRightX)+" "+se(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&Q("/UserUnit "+x.userUnit),Xt.publish("putPage",{objId:de,pageContext:yt[O],pageNumber:O,page:ee}),Q("/Contents "+be+" 0 R"),Q(">>"),Q("endobj");var Ie=ee.join(`
`);return j===C&&(Ie+=`
Q`),Hr(be,!0),rs({data:Ie,filters:ms(),objectId:be}),Q("endobj"),de},Os=y.__private__.putPages=function(){var x,O,ee=[];for(x=1;x<=It;x++)yt[x].objId=Dr(),yt[x].contentsObjId=Dr();for(x=1;x<=It;x++)ee.push(va({number:x,data:De[x],objId:yt[x].objId,contentsObjId:yt[x].contentsObjId,mediaBox:yt[x].mediaBox,cropBox:yt[x].cropBox,bleedBox:yt[x].bleedBox,trimBox:yt[x].trimBox,artBox:yt[x].artBox,userUnit:yt[x].userUnit,rootDictionaryObjId:Ki,resourceDictionaryObjId:Is}));Hr(Ki,!0),Q("<</Type /Pages");var de="/Kids [";for(O=0;O<It;O++)de+=ee[O]+" 0 R ";Q(de+"]"),Q("/Count "+It),Q(">>"),Q("endobj"),Xt.publish("postPutPages")},Ji=function(x){Xt.publish("putFont",{font:x,out:Q,newObject:mr,putStream:rs}),x.isAlreadyPutted!==!0&&(x.objectNumber=mr(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Lc(x.postScriptName)),Q("/Subtype /Type1"),typeof x.encoding=="string"&&Q("/Encoding /"+x.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},ya=function(x){x.objectNumber=mr();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[se(x.x),se(x.y),se(x.x+x.width),se(x.y+x.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ee=x.pages[1].join(`
`);rs({data:ee,additionalKeyValues:O,objectId:x.objectNumber}),Q("endobj")},xa=function(x,O){O||(O=21);var ee=mr(),de=(function(Fe,Qe){var lt,At=[],Tt=1/(Qe-1);for(lt=0;lt<1;lt+=Tt)At.push(lt);if(At.push(1),Fe[0].offset!=0){var Kt={offset:0,color:Fe[0].color};Fe.unshift(Kt)}if(Fe[Fe.length-1].offset!=1){var jr={offset:1,color:Fe[Fe.length-1].color};Fe.push(jr)}for(var Kr="",vr=0,nn=0;nn<At.length;nn++){for(lt=At[nn];lt>Fe[vr+1].offset;)vr++;var Fr=Fe[vr].offset,yn=(lt-Fr)/(Fe[vr+1].offset-Fr),Ni=Fe[vr].color,Fs=Fe[vr+1].color;Kr+=ie(Math.round((1-yn)*Ni[0]+yn*Fs[0]).toString(16))+ie(Math.round((1-yn)*Ni[1]+yn*Fs[1]).toString(16))+ie(Math.round((1-yn)*Ni[2]+yn*Fs[2]).toString(16))}return Kr.trim()})(x.colors,O),be=[];be.push({key:"FunctionType",value:"0"}),be.push({key:"Domain",value:"[0.0 1.0]"}),be.push({key:"Size",value:"["+O+"]"}),be.push({key:"BitsPerSample",value:"8"}),be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rs({data:de,additionalKeyValues:be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ee}),Q("endobj"),x.objectNumber=mr(),Q("<< /ShadingType "+x.type),Q("/ColorSpace /DeviceRGB");var Ie="/Coords ["+se(parseFloat(x.coords[0]))+" "+se(parseFloat(x.coords[1]))+" ";x.type===2?Ie+=se(parseFloat(x.coords[2]))+" "+se(parseFloat(x.coords[3])):Ie+=se(parseFloat(x.coords[2]))+" "+se(parseFloat(x.coords[3]))+" "+se(parseFloat(x.coords[4]))+" "+se(parseFloat(x.coords[5])),Q(Ie+="]"),x.matrix&&Q("/Matrix ["+x.matrix.toString()+"]"),Q("/Function "+ee+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},ro=function(x,O){var ee=Dr(),de=mr();O.push({resourcesOid:ee,objectOid:de}),x.objectNumber=de;var be=[];be.push({key:"Type",value:"/Pattern"}),be.push({key:"PatternType",value:"1"}),be.push({key:"PaintType",value:"1"}),be.push({key:"TilingType",value:"1"}),be.push({key:"BBox",value:"["+x.boundingBox.map(se).join(" ")+"]"}),be.push({key:"XStep",value:se(x.xStep)}),be.push({key:"YStep",value:se(x.yStep)}),be.push({key:"Resources",value:ee+" 0 R"}),x.matrix&&be.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),rs({data:x.stream,additionalKeyValues:be,objectId:x.objectNumber}),Q("endobj")},Dc=function(x){for(var O in x.objectNumber=mr(),Q("<<"),x)switch(O){case"opacity":Q("/ca "+M(x[O]));break;case"stroke-opacity":Q("/CA "+M(x[O]))}Q(">>"),Q("endobj")},xr=function(x){Hr(x.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var O in Q("/Font <<"),Bt)Bt.hasOwnProperty(O)&&(N===!1||N===!0&&b.hasOwnProperty(O))&&Q("/"+O+" "+Bt[O].objectNumber+" 0 R");Q(">>")})(),(function(){if(Object.keys(pt).length>0){for(var O in Q("/Shading <<"),pt)pt.hasOwnProperty(O)&&pt[O]instanceof zo&&pt[O].objectNumber>=0&&Q("/"+O+" "+pt[O].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),Q(">>")}})(),(function(O){if(Object.keys(pt).length>0){for(var ee in Q("/Pattern <<"),pt)pt.hasOwnProperty(ee)&&pt[ee]instanceof y.TilingPattern&&pt[ee].objectNumber>=0&&pt[ee].objectNumber<O&&Q("/"+ee+" "+pt[ee].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),Q(">>")}})(x.objectOid),(function(){if(Object.keys(vt).length>0){var O;for(O in Q("/ExtGState <<"),vt)vt.hasOwnProperty(O)&&vt[O].objectNumber>=0&&Q("/"+O+" "+vt[O].objectNumber+" 0 R");Xt.publish("putGStateDict"),Q(">>")}})(),(function(){for(var O in Q("/XObject <<"),mn)mn.hasOwnProperty(O)&&mn[O].objectNumber>=0&&Q("/"+O+" "+mn[O].objectNumber+" 0 R");Xt.publish("putXobjectDict"),Q(">>")})(),Q(">>"),Q("endobj")},Ul=function(x){Ut[x.fontName]=Ut[x.fontName]||{},Ut[x.fontName][x.fontStyle]=x.id},no=function(x,O,ee,de,be){var Ie={id:"F"+(Object.keys(Bt).length+1).toString(10),postScriptName:x,fontName:O,fontStyle:ee,encoding:de,isStandardFont:be||!1,metadata:{}};return Xt.publish("addFont",{font:Ie,instance:this}),Bt[Ie.id]=Ie,Ul(Ie),Ie.id},ns=y.__private__.pdfEscape=y.pdfEscape=function(x,O){return(function(ee,de){var be,Ie,Fe,Qe,lt,At,Tt,Kt,jr;if(Fe=(de=de||{}).sourceEncoding||"Unicode",lt=de.outputEncoding,(de.autoencode||lt)&&Bt[at].metadata&&Bt[at].metadata[Fe]&&Bt[at].metadata[Fe].encoding&&(Qe=Bt[at].metadata[Fe].encoding,!lt&&Bt[at].encoding&&(lt=Bt[at].encoding),!lt&&Qe.codePages&&(lt=Qe.codePages[0]),typeof lt=="string"&&(lt=Qe[lt]),lt)){for(Tt=!1,At=[],be=0,Ie=ee.length;be<Ie;be++)(Kt=lt[ee.charCodeAt(be)])?At.push(String.fromCharCode(Kt)):At.push(ee[be]),At[be].charCodeAt(0)>>8&&(Tt=!0);ee=At.join("")}for(be=ee.length;Tt===void 0&&be!==0;)ee.charCodeAt(be-1)>>8&&(Tt=!0),be--;if(!Tt)return ee;for(At=de.noBOM?[]:[254,255],be=0,Ie=ee.length;be<Ie;be++){if((jr=(Kt=ee.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(jr),At.push(Kt-(jr<<8))}return String.fromCharCode.apply(void 0,At)})(x,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yi=y.__private__.beginPage=function(x){De[++It]=[],yt[It]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},wa(It),it(De[V])},$l=function(x,O){var ee,de,be;switch(t=O||t,typeof x=="string"&&(ee=T(x.toLowerCase()),Array.isArray(ee)&&(de=ee[0],be=ee[1])),Array.isArray(x)&&(de=x[0]*jt,be=x[1]*jt),isNaN(de)&&(de=a[0],be=a[1]),(de>14400||be>14400)&&(br.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),be=Math.min(14400,be)),a=[de,be],t.substr(0,1)){case"l":be>de&&(a=[be,de]);break;case"p":de>be&&(a=[be,de])}Yi(a),_t(ys),Q(ja),Xo!==0&&Q(Xo+" J"),Qo!==0&&Q(Qo+" j"),Xt.publish("addPage",{pageNumber:It})},so=function(x){x>0&&x<=It&&(De.splice(x,1),yt.splice(x,1),It--,V>It&&(V=It),this.setPage(V))},wa=function(x){x>0&&x<=It&&(V=x)},ss=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return De.length-1},ql=function(x,O,ee){var de,be=void 0;return ee=ee||{},x=x!==void 0?x:Bt[at].fontName,O=O!==void 0?O:Bt[at].fontStyle,de=x.toLowerCase(),Ut[de]!==void 0&&Ut[de][O]!==void 0?be=Ut[de][O]:Ut[x]!==void 0&&Ut[x][O]!==void 0?be=Ut[x][O]:ee.disableWarning===!1&&br.warn("Unable to look up font label for font '"+x+"', '"+O+"'. Refer to getFontList() for available fonts."),be||ee.noFallback||(be=Ut.times[O])==null&&(be=Ut.times.normal),be},Vr=y.__private__.putInfo=function(){var x=mr(),O=function(de){return de};for(var ee in v!==null&&(O=rn.encryptor(x,0)),Q("<<"),Q("/Producer ("+ns(O("jsPDF "+nt.version))+")"),Mt)Mt.hasOwnProperty(ee)&&Mt[ee]&&Q("/"+ee.substr(0,1).toUpperCase()+ee.substr(1)+" ("+ns(O(Mt[ee]))+")");Q("/CreationDate ("+ns(O(ge))+")"),Q(">>"),Q("endobj")},io=y.__private__.putCatalog=function(x){var O=(x=x||{}).rootDictionaryObjId||Ki;switch(mr(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+O+" 0 R"),ht||(ht="fullwidth"),ht){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ee=""+ht;ee.substr(ee.length-1)==="%"&&(ht=parseInt(ht)/100),typeof ht=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+M(ht)+"]")}switch($t||($t="continuous"),$t){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ft&&Q("/PageMode /"+ft),Xt.publish("putCatalog"),Q(">>"),Q("endobj")},Fc=y.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(ce+1)),Q("/Root "+ce+" 0 R"),Q("/Info "+(ce-1)+" 0 R"),v!==null&&Q("/Encrypt "+rn.oid+" 0 R"),Q("/ID [ <"+ue+"> <"+ue+"> ]"),Q(">>")},Gr=y.__private__.putHeader=function(){Q("%PDF-"+L),Q("%")},ba=y.__private__.putXRef=function(){var x="0000000000";Q("xref"),Q("0 "+(ce+1)),Q("0000000000 65535 f ");for(var O=1;O<=ce;O++)typeof re[O]=="function"?Q((x+re[O]()).slice(-10)+" 00000 n "):re[O]!==void 0?Q((x+re[O]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},is=y.__private__.buildDocument=function(){var x;ce=0,ve=0,he=[],re=[],Ne=[],Ki=Dr(),Is=Dr(),it(he),Xt.publish("buildDocument"),Gr(),Os(),(function(){Xt.publish("putAdditionalObjects");for(var ee=0;ee<Ne.length;ee++){var de=Ne[ee];Hr(de.objId,!0),Q(de.content),Q("endobj")}Xt.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var ee in Bt)Bt.hasOwnProperty(ee)&&(N===!1||N===!0&&b.hasOwnProperty(ee))&&Ji(Bt[ee])})(),(function(){var ee;for(ee in vt)vt.hasOwnProperty(ee)&&Dc(vt[ee])})(),(function(){for(var ee in mn)mn.hasOwnProperty(ee)&&ya(mn[ee])})(),(function(ee){var de;for(de in pt)pt.hasOwnProperty(de)&&(pt[de]instanceof zo?xa(pt[de]):pt[de]instanceof Ll&&ro(pt[de],ee))})(x),Xt.publish("putResources"),x.forEach(xr),xr({resourcesOid:Is,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources"),v!==null&&(rn.oid=mr(),Q("<<"),Q("/Filter /Standard"),Q("/V "+rn.v),Q("/R "+rn.r),Q("/U <"+rn.toHexString(rn.U)+">"),Q("/O <"+rn.toHexString(rn.O)+">"),Q("/P "+rn.P),Q(">>"),Q("endobj")),Vr(),io();var O=ve;return ba(),Fc(),Q("startxref"),Q(""+O),Q("%%EOF"),it(De[V]),he.join(`
`)},ri=y.__private__.getBlob=function(x){return new Blob([Rt(x)],{type:"application/pdf"})},_a=y.output=y.__private__.output=(gs=function(x,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",x){case void 0:return is();case"save":y.save(O.filename);break;case"arraybuffer":return Rt(is());case"blob":return ri(is());case"bloburi":case"bloburl":if(Pt.URL!==void 0&&typeof Pt.URL.createObjectURL=="function")return Pt.URL&&Pt.URL.createObjectURL(ri(is()))||void 0;br.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ee="",de=is();try{ee=Cg(de)}catch{ee=Cg(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+O.filename+";base64,"+ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pt)==="[object Window]"){var be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ie=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(be=O.pdfObjectUrl,Ie="");var Fe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+be+'"'+Ie+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",Qe=Pt.open();return Qe!==null&&Qe.document.write(Fe),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pt)==="[object Window]"){var lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',At=Pt.open();if(At!==null){At.document.write(lt);var Tt=this;At.document.documentElement.querySelector("#pdfViewer").onload=function(){At.document.title=O.filename,At.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Tt.output("bloburl"))}}return At}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',jr=Pt.open();if(jr!==null&&(jr.document.write(Kt),jr.document.title=O.filename),jr||typeof safari>"u")return jr;break;case"datauri":case"dataurl":return Pt.document.location.href=this.output("datauristring",O);default:return null}},gs.foo=function(){try{return gs.apply(this,arguments)}catch(ee){var x=ee.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var O="Error in function "+x.split(`
`)[0].split("<")[0]+": "+ee.message;if(!Pt.console)throw new Error(O);Pt.console.error(O,ee),Pt.alert&&alert(O)}},gs.foo.bar=gs,gs.foo),vs=function(x){return Array.isArray(Gi)===!0&&Gi.indexOf(x)>-1};switch(s){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=vs("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);jt=s}var rn=null;H(),ae();var Rs=y.__private__.getPageInfo=y.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yt[x].objId,pageNumber:x,pageContext:yt[x]}},Go=y.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in yt)if(yt[O].objId===x)break;return Rs(O)},Ko=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:yt[V].objId,pageNumber:V,pageContext:yt[V]}};y.addPage=function(){return $l.apply(this,arguments),this},y.setPage=function(){return wa.apply(this,arguments),it.call(this,De[V]),this},y.insertPage=function(x){return this.addPage(),this.movePage(V,x),this},y.movePage=function(x,O){var ee,de;if(x>O){ee=De[x],de=yt[x];for(var be=x;be>O;be--)De[be]=De[be-1],yt[be]=yt[be-1];De[O]=ee,yt[O]=de,this.setPage(O)}else if(x<O){ee=De[x],de=yt[x];for(var Ie=x;Ie<O;Ie++)De[Ie]=De[Ie+1],yt[Ie]=yt[Ie+1];De[O]=ee,yt[O]=de,this.setPage(O)}return this},y.deletePage=function(){return so.apply(this,arguments),this},y.__private__.text=y.text=function(x,O,ee,de,be){var Ie,Fe,Qe,lt,At,Tt,Kt,jr,Kr,vr=(de=de||{}).scope||this;if(typeof x=="number"&&typeof O=="number"&&(typeof ee=="string"||Array.isArray(ee))){var nn=ee;ee=O,O=x,x=nn}if(arguments[3]instanceof xt==0?(Qe=arguments[4],lt=arguments[5],pr(Kt=arguments[3])==="object"&&Kt!==null||(typeof Qe=="string"&&(lt=Qe,Qe=null),typeof Kt=="string"&&(lt=Kt,Kt=null),typeof Kt=="number"&&(Qe=Kt,Kt=null),de={flags:Kt,angle:Qe,align:lt})):(Y("The transform parameter of text() with a Matrix value"),Kr=be),isNaN(O)||isNaN(ee)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return vr;var Fr,yn="",Ni=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:$n,Fs=vr.internal.scaleFactor;function Si(Qt){return Qt=Qt.split("	").join(Array(de.TabLen||9).join(" ")),ns(Qt,Kt)}function Ca(Qt){for(var ar,Pr=Qt.concat(),Jr=[],Us=Pr.length;Us--;)typeof(ar=Pr.shift())=="string"?Jr.push(ar):Array.isArray(Qt)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?Jr.push(ar[0]):Jr.push([ar[0],ar[1],ar[2]]);return Jr}function po(Qt,ar){var Pr;if(typeof Qt=="string")Pr=ar(Qt)[0];else if(Array.isArray(Qt)){for(var Jr,Us,rl=Qt.concat(),xo=[],Li=rl.length;Li--;)typeof(Jr=rl.shift())=="string"?xo.push(ar(Jr)[0]):Array.isArray(Jr)&&typeof Jr[0]=="string"&&(Us=ar(Jr[0],Jr[1],Jr[2]),xo.push([Us[0],Us[1],Us[2]]));Pr=xo}return Pr}var Zi=!1,Ta=!0;if(typeof x=="string")Zi=!0;else if(Array.isArray(x)){var ea=x.concat();Fe=[];for(var ta,xn=ea.length;xn--;)(typeof(ta=ea.shift())!="string"||Array.isArray(ta)&&typeof ta[0]!="string")&&(Ta=!1);Zi=Ta}if(Zi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Ia=Be/vr.internal.scaleFactor,Oa=Ia*(Ni-1);switch(de.baseline){case"bottom":ee-=Oa;break;case"top":ee+=Ia-Oa;break;case"hanging":ee+=Ia-2*Oa;break;case"middle":ee+=Ia/2-Oa}if((Tt=de.maxWidth||0)>0&&(typeof x=="string"?x=vr.splitTextToSize(x,Tt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Qt,ar){return Qt.concat(vr.splitTextToSize(ar,Tt))},[]))),Ie={text:x,x:O,y:ee,options:de,mutex:{pdfEscape:ns,activeFontKey:at,fonts:Bt,activeFontSize:Be}},Xt.publish("preProcessText",Ie),x=Ie.text,Qe=(de=Ie.options).angle,Kr instanceof xt==0&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,de.rotationDirection===0&&(Qe=-Qe),j===C&&(Qe=-Qe);var el=Math.cos(Qe),tl=Math.sin(Qe);Kr=new xt(el,tl,-tl,el,0,0)}else Qe&&Qe instanceof xt&&(Kr=Qe);j!==C||Kr||(Kr=Ts),(At=de.charSpace||qn)!==void 0&&(yn+=se(B(At))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(jr=de.horizontalScale)!==void 0&&(yn+=se(100*jr)+` Tz
`),de.lang;var In=-1,Bs=de.renderingMode!==void 0?de.renderingMode:de.stroke,oi=vr.internal.getCurrentPageInfo().pageContext;switch(Bs){case 0:case!1:case"fill":In=0;break;case 1:case!0:case"stroke":In=1;break;case 2:case"fillThenStroke":In=2;break;case 3:case"invisible":In=3;break;case 4:case"fillAndAddForClipping":In=4;break;case 5:case"strokeAndAddPathForClipping":In=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":In=6;break;case 7:case"addToPathForClipping":In=7}var Gl=oi.usedRenderingMode!==void 0?oi.usedRenderingMode:-1;In!==-1?yn+=In+` Tr
`:Gl!==-1&&(yn+=`0 Tr
`),In!==-1&&(oi.usedRenderingMode=In),lt=de.align||"left";var os,ra=Be*Ni,go=vr.internal.pageSize.getWidth(),mo=Bt[at];At=de.charSpace||qn,Tt=de.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},de.flags);var ki=[],Ns=function(Qt){return vr.getStringUnitWidth(Qt,{font:mo,charSpace:At,fontSize:Be,doKerning:!1})*Be/Fs};if(Object.prototype.toString.call(x)==="[object Array]"){var ls;Fe=Ca(x),lt!=="left"&&(os=Fe.map(Ns));var cs,na=0;if(lt==="right"){O-=os[0],x=[],xn=Fe.length;for(var li=0;li<xn;li++)li===0?(cs=as(O),ls=bi(ee)):(cs=B(na-os[li]),ls=-ra),x.push([Fe[li],cs,ls]),na=os[li]}else if(lt==="center"){O-=os[0]/2,x=[],xn=Fe.length;for(var ji=0;ji<xn;ji++)ji===0?(cs=as(O),ls=bi(ee)):(cs=B((na-os[ji])/2),ls=-ra),x.push([Fe[ji],cs,ls]),na=os[ji]}else if(lt==="left"){x=[],xn=Fe.length;for(var Ai=0;Ai<xn;Ai++)x.push(Fe[Ai])}else if(lt==="justify"&&mo.encoding==="Identity-H"){x=[],xn=Fe.length,Tt=Tt!==0?Tt:go;for(var ci=0,Br=0;Br<xn;Br++)if(ls=Br===0?bi(ee):-ra,cs=Br===0?as(O):ci,Br<xn-1){var Ra=B((Tt-os[Br])/(Fe[Br].split(" ").length-1)),ui=Fe[Br].split(" ");x.push([ui[0]+" ",cs,ls]),ci=0;for(var Ms=1;Ms<ui.length;Ms++){var Da=(Ns(ui[Ms-1]+" "+ui[Ms])-Ns(ui[Ms]))*Fs+Ra;Ms==ui.length-1?x.push([ui[Ms],Da,0]):x.push([ui[Ms]+" ",Da,0]),ci-=Da}}else x.push([Fe[Br],cs,ls]);x.push(["",ci,0])}else{if(lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],xn=Fe.length,Tt=Tt!==0?Tt:go,Br=0;Br<xn;Br++){ls=Br===0?bi(ee):-ra,cs=Br===0?as(O):0;var Fa=Fe[Br].split(" ").length-1,vo=Fa>0?(Tt-os[Br])/Fa:0;Br<xn-1?ki.push(se(B(vo))):ki.push(0),x.push([Fe[Br],cs,ls])}}}(typeof de.R2L=="boolean"?de.R2L:gt)===!0&&(x=po(x,function(Qt,ar,Pr){return[Qt.split("").reverse().join(""),ar,Pr]})),Ie={text:x,x:O,y:ee,options:de,mutex:{pdfEscape:ns,activeFontKey:at,fonts:Bt,activeFontSize:Be}},Xt.publish("postProcessText",Ie),x=Ie.text,Fr=Ie.mutex.isHex||!1;var yo=Bt[at].encoding;yo!=="WinAnsiEncoding"&&yo!=="StandardEncoding"||(x=po(x,function(Qt,ar,Pr){return[Si(Qt),ar,Pr]})),Fe=Ca(x),x=[];for(var Ei,sa,ia,Ba=Array.isArray(Fe[0])?1:0,aa="",Ma=function(Qt,ar,Pr){var Jr="";return Pr instanceof xt?(Pr=typeof de.angle=="number"?ts(Pr,new xt(1,0,0,1,Qt,ar)):ts(new xt(1,0,0,1,Qt,ar),Pr),j===C&&(Pr=ts(new xt(1,0,0,-1,0,0),Pr)),Jr=Pr.join(" ")+` Tm
`):Jr=se(Qt)+" "+se(ar)+` Td
`,Jr},Lr=0;Lr<Fe.length;Lr++){switch(aa="",Ba){case 1:ia=(Fr?"<":"(")+Fe[Lr][0]+(Fr?">":")"),Ei=parseFloat(Fe[Lr][1]),sa=parseFloat(Fe[Lr][2]);break;case 0:ia=(Fr?"<":"(")+Fe[Lr]+(Fr?">":")"),Ei=as(O),sa=bi(ee)}ki!==void 0&&ki[Lr]!==void 0&&(aa=ki[Lr]+` Tw
`),Lr===0?x.push(aa+Ma(Ei,sa,Kr)+ia):Ba===0?x.push(aa+ia):Ba===1&&x.push(aa+Ma(Ei,sa,Kr)+ia)}x=Ba===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var zn=`BT
/`;return zn+=at+" "+Be+` Tf
`,zn+=se(Be*Ni)+` TL
`,zn+=Ds+`
`,zn+=yn,zn+=x,Q(zn+="ET"),b[at]=!0,vr};var Na=y.__private__.clip=y.clip=function(x){return Q(x==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Na("evenodd")},y.__private__.discardPath=y.discardPath=function(){return Q("n"),this};var ni=y.__private__.isValidStyle=function(x){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(O=!0),O};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(x){return ni(x)&&(g=x),this};var ao=y.__private__.getStyle=y.getStyle=function(x){var O=g;switch(x){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=x}return O},Jt=y.close=function(){return Q("h"),this};y.stroke=function(){return Q("S"),this},y.fill=function(x){return Sa("f",x),this},y.fillEvenOdd=function(x){return Sa("f*",x),this},y.fillStroke=function(x){return Sa("B",x),this},y.fillStrokeEvenOdd=function(x){return Sa("B*",x),this};var Sa=function(x,O){pr(O)==="object"?zl(O,x):Q(x)},Xi=function(x){x===null||j===C&&x===void 0||(x=ao(x),Q(x))};function Jo(x,O,ee,de,be){var Ie=new Ll(O||this.boundingBox,ee||this.xStep,de||this.yStep,this.gState,be||this.matrix);Ie.stream=this.stream;var Fe=x+"$$"+this.cloneIndex+++"$$";return kn(Fe,Ie),Ie}var zl=function(x,O){var ee=ir[x.key],de=pt[ee];if(de instanceof zo)Q("q"),Q(Wl(O)),de.gState&&y.setGState(de.gState),Q(x.matrix.toString()+" cm"),Q("/"+ee+" sh"),Q("Q");else if(de instanceof Ll){var be=new xt(1,0,0,-1,0,_s());x.matrix&&(be=be.multiply(x.matrix||Ts),ee=Jo.call(de,x.key,x.boundingBox,x.xStep,x.yStep,be).id),Q("q"),Q("/Pattern cs"),Q("/"+ee+" scn"),de.gState&&y.setGState(de.gState),Q(O),Q("Q")}},Wl=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},oo=y.moveTo=function(x,O){return Q(se(B(x))+" "+se(K(O))+" m"),this},lo=y.lineTo=function(x,O){return Q(se(B(x))+" "+se(K(O))+" l"),this},Un=y.curveTo=function(x,O,ee,de,be,Ie){return Q([se(B(x)),se(K(O)),se(B(ee)),se(K(de)),se(B(be)),se(K(Ie)),"c"].join(" ")),this};y.__private__.line=y.line=function(x,O,ee,de,be){if(isNaN(x)||isNaN(O)||isNaN(ee)||isNaN(de)||!ni(be))throw new Error("Invalid arguments passed to jsPDF.line");return j===R?this.lines([[ee-x,de-O]],x,O,[1,1],be||"S"):this.lines([[ee-x,de-O]],x,O,[1,1]).stroke()},y.__private__.lines=y.lines=function(x,O,ee,de,be,Ie){var Fe,Qe,lt,At,Tt,Kt,jr,Kr,vr,nn,Fr,yn;if(typeof x=="number"&&(yn=ee,ee=O,O=x,x=yn),de=de||[1,1],Ie=Ie||!1,isNaN(O)||isNaN(ee)||!Array.isArray(x)||!Array.isArray(de)||!ni(be)||typeof Ie!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oo(O,ee),Fe=de[0],Qe=de[1],At=x.length,nn=O,Fr=ee,lt=0;lt<At;lt++)(Tt=x[lt]).length===2?(nn=Tt[0]*Fe+nn,Fr=Tt[1]*Qe+Fr,lo(nn,Fr)):(Kt=Tt[0]*Fe+nn,jr=Tt[1]*Qe+Fr,Kr=Tt[2]*Fe+nn,vr=Tt[3]*Qe+Fr,nn=Tt[4]*Fe+nn,Fr=Tt[5]*Qe+Fr,Un(Kt,jr,Kr,vr,nn,Fr));return Ie&&Jt(),Xi(be),this},y.path=function(x){for(var O=0;O<x.length;O++){var ee=x[O],de=ee.c;switch(ee.op){case"m":oo(de[0],de[1]);break;case"l":lo(de[0],de[1]);break;case"c":Un.apply(this,de);break;case"h":Jt()}}return this},y.__private__.rect=y.rect=function(x,O,ee,de,be){if(isNaN(x)||isNaN(O)||isNaN(ee)||isNaN(de)||!ni(be))throw new Error("Invalid arguments passed to jsPDF.rect");return j===R&&(de=-de),Q([se(B(x)),se(K(O)),se(B(ee)),se(B(de)),"re"].join(" ")),Xi(be),this},y.__private__.triangle=y.triangle=function(x,O,ee,de,be,Ie,Fe){if(isNaN(x)||isNaN(O)||isNaN(ee)||isNaN(de)||isNaN(be)||isNaN(Ie)||!ni(Fe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ee-x,de-O],[be-ee,Ie-de],[x-be,O-Ie]],x,O,[1,1],Fe,!0),this},y.__private__.roundedRect=y.roundedRect=function(x,O,ee,de,be,Ie,Fe){if(isNaN(x)||isNaN(O)||isNaN(ee)||isNaN(de)||isNaN(be)||isNaN(Ie)||!ni(Fe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return be=Math.min(be,.5*ee),Ie=Math.min(Ie,.5*de),this.lines([[ee-2*be,0],[be*Qe,0,be,Ie-Ie*Qe,be,Ie],[0,de-2*Ie],[0,Ie*Qe,-be*Qe,Ie,-be,Ie],[2*be-ee,0],[-be*Qe,0,-be,-Ie*Qe,-be,-Ie],[0,2*Ie-de],[0,-Ie*Qe,be*Qe,-Ie,be,-Ie]],x+be,O,[1,1],Fe,!0),this},y.__private__.ellipse=y.ellipse=function(x,O,ee,de,be){if(isNaN(x)||isNaN(O)||isNaN(ee)||isNaN(de)||!ni(be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ie=4/3*(Math.SQRT2-1)*ee,Fe=4/3*(Math.SQRT2-1)*de;return oo(x+ee,O),Un(x+ee,O-Fe,x+Ie,O-de,x,O-de),Un(x-Ie,O-de,x-ee,O-Fe,x-ee,O),Un(x-ee,O+Fe,x-Ie,O+de,x,O+de),Un(x+Ie,O+de,x+ee,O+Fe,x+ee,O),Xi(be),this},y.__private__.circle=y.circle=function(x,O,ee,de){if(isNaN(x)||isNaN(O)||isNaN(ee)||!ni(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,O,ee,ee,de)},y.setFont=function(x,O,ee){return ee&&(O=le(O,ee)),at=ql(x,O,{disableWarning:!1}),this};var si=y.__private__.getFont=y.getFont=function(){return Bt[ql.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var x,O,ee={};for(x in Ut)if(Ut.hasOwnProperty(x))for(O in ee[x]=[],Ut[x])Ut[x].hasOwnProperty(O)&&ee[x].push(O);return ee},y.addFont=function(x,O,ee,de,be){var Ie=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ie.indexOf(arguments[3])!==-1?be=arguments[3]:arguments[3]&&Ie.indexOf(arguments[3])==-1&&(ee=le(ee,de)),no.call(this,x,O,ee,be=be||"Identity-H")};var $n,ys=r.lineWidth||.200025,ka=y.__private__.getLineWidth=y.getLineWidth=function(){return ys},_t=y.__private__.setLineWidth=y.setLineWidth=function(x){return ys=x,Q(se(B(x))+" w"),this};y.__private__.setLineDash=nt.API.setLineDash=nt.API.setLineDashPattern=function(x,O){if(x=x||[],O=O||0,isNaN(O)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(ee){return se(B(ee))}).join(" "),O=se(B(O)),Q("["+x+"] "+O+" d"),this};var ii=y.__private__.getLineHeight=y.getLineHeight=function(){return Be*$n};y.__private__.getLineHeight=y.getLineHeight=function(){return Be*$n};var Bc=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&($n=x),this},Hl=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return $n};Bc(r.lineHeight);var as=y.__private__.getHorizontalCoordinate=function(x){return B(x)},bi=y.__private__.getVerticalCoordinate=function(x){return j===C?x:yt[V].mediaBox.topRightY-yt[V].mediaBox.bottomLeftY-B(x)},Vl=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(x){return se(as(x))},co=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(x){return se(bi(x))},ja=r.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return ti(ja)},y.__private__.setStrokeColor=y.setDrawColor=function(x,O,ee,de){return ja=vn({ch1:x,ch2:O,ch3:ee,ch4:de,pdfColorType:"draw",precision:2}),Q(ja),this};var Yo=r.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return ti(Yo)},y.__private__.setFillColor=y.setFillColor=function(x,O,ee,de){return Yo=vn({ch1:x,ch2:O,ch3:ee,ch4:de,pdfColorType:"fill",precision:2}),Q(Yo),this};var Ds=r.textColor||"0 g",Aa=y.__private__.getTextColor=y.getTextColor=function(){return ti(Ds)};y.__private__.setTextColor=y.setTextColor=function(x,O,ee,de){return Ds=vn({ch1:x,ch2:O,ch3:ee,ch4:de,pdfColorType:"text",precision:3}),this};var qn=r.charSpace,uo=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(qn||0)};y.__private__.setCharSpace=y.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qn=x,this};var Xo=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(x){var O=y.CapJoinStyles[x];if(O===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xo=O,Q(O+" J"),this};var Qo=0;y.__private__.setLineJoin=y.setLineJoin=function(x){var O=y.CapJoinStyles[x];if(O===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qo=O,Q(O+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(se(B(x))+" M"),this},y.GState=Iu,y.setGState=function(x){(x=typeof x=="string"?vt[Et[x]]:ho(null,x)).equals(nr)||(Q("/"+x.id+" gs"),nr=x)};var ho=function(x,O){if(!x||!Et[x]){var ee=!1;for(var de in vt)if(vt.hasOwnProperty(de)&&vt[de].equals(O)){ee=!0;break}if(ee)O=vt[de];else{var be="GS"+(Object.keys(vt).length+1).toString(10);vt[be]=O,O.id=be}return x&&(Et[x]=O.id),Xt.publish("addGState",O),O}};y.addGState=function(x,O){return ho(x,O),this},y.saveGraphicsState=function(){return Q("q"),gr.push({key:at,size:Be,color:Ds}),this},y.restoreGraphicsState=function(){Q("Q");var x=gr.pop();return at=x.key,Be=x.size,Ds=x.color,nr=null,this},y.setCurrentTransformationMatrix=function(x){return Q(x.toString()+" cm"),this},y.comment=function(x){return Q("#"+x),this};var xs=function(x,O){var ee=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ee},set:function(Ie){isNaN(Ie)||(ee=parseFloat(Ie))}});var de=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Ie){isNaN(Ie)||(de=parseFloat(Ie))}});var be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return be},set:function(Ie){be=Ie.toString()}}),this},Ea=function(x,O,ee,de){xs.call(this,x,O),this.type="rect";var be=ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return be},set:function(Fe){isNaN(Fe)||(be=parseFloat(Fe))}});var Ie=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ie},set:function(Fe){isNaN(Fe)||(Ie=parseFloat(Fe))}}),this},La=function(){this.page=It,this.currentPage=V,this.pages=De.slice(0),this.pagesContext=yt.slice(0),this.x=rt,this.y=Rr,this.matrix=Gt,this.width=Qi(V),this.height=Pa(V),this.outputDestination=qe,this.id="",this.objectNumber=-1};La.prototype.restore=function(){It=this.page,V=this.currentPage,yt=this.pagesContext,De=this.pages,rt=this.x,Rr=this.y,Gt=this.matrix,Zo(V,this.width),bs(V,this.height),qe=this.outputDestination};var ws=function(x,O,ee,de,be){ps.push(new La),It=V=0,De=[],rt=x,Rr=O,Gt=be,Yi([ee,de])};for(var _i in y.beginFormObject=function(x,O,ee,de,be){return ws(x,O,ee,de,be),this},y.endFormObject=function(x){return(function(O){if(ei[O])ps.pop().restore();else{var ee=new La,de="Xo"+(Object.keys(mn).length+1).toString(10);ee.id=de,ei[O]=de,mn[de]=ee,Xt.publish("addFormObject",ee),ps.pop().restore()}})(x),this},y.doFormObject=function(x,O){var ee=mn[ei[x]];return Q("q"),Q(O.toString()+" cm"),Q("/"+ee.id+" Do"),Q("Q"),this},y.getFormObject=function(x){var O=mn[ei[x]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},y.save=function(x,O){return x=x||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Sl(ri(is()),x),typeof Sl.unload=="function"&&Pt.setTimeout&&setTimeout(Sl.unload,911),this):new Promise(function(ee,de){try{var be=Sl(ri(is()),x);typeof Sl.unload=="function"&&Pt.setTimeout&&setTimeout(Sl.unload,911),ee(be)}catch(Ie){de(Ie.message)}})},nt.API)nt.API.hasOwnProperty(_i)&&(_i==="events"&&nt.API.events.length?(function(x,O){var ee,de,be;for(be=O.length-1;be!==-1;be--)ee=O[be][0],de=O[be][1],x.subscribe.apply(x,[ee].concat(typeof de=="function"?[de]:de))})(Xt,nt.API.events):y[_i]=nt.API[_i]);function Qi(x){return yt[x].mediaBox.topRightX-yt[x].mediaBox.bottomLeftX}function Zo(x,O){yt[x].mediaBox.topRightX=O+yt[x].mediaBox.bottomLeftX}function Pa(x){return yt[x].mediaBox.topRightY-yt[x].mediaBox.bottomLeftY}function bs(x,O){yt[x].mediaBox.topRightY=O+yt[x].mediaBox.bottomLeftY}var ai=y.getPageWidth=function(x){return Qi(x=x||V)/jt},jn=y.setPageWidth=function(x,O){Zo(x,O*jt)},_s=y.getPageHeight=function(x){return Pa(x=x||V)/jt},fo=y.setPageHeight=function(x,O){bs(x,O*jt)};return y.internal={pdfEscape:ns,getStyle:ao,getFont:si,getFontSize:Ge,getCharSpace:uo,getTextColor:Aa,getLineHeight:ii,getLineHeightFactor:Hl,getLineWidth:ka,write:Ve,getHorizontalCoordinate:as,getVerticalCoordinate:bi,getCoordinateString:Vl,getVerticalCoordinateString:co,collections:{},newObject:mr,newAdditionalObject:wi,newObjectDeferred:Dr,newObjectDeferredBegin:Hr,getFilters:ms,putStream:rs,events:Xt,scaleFactor:jt,pageSize:{getWidth:function(){return ai(V)},setWidth:function(x){jn(V,x)},getHeight:function(){return _s(V)},setHeight:function(x){fo(V,x)}},encryptionOptions:v,encryption:rn,getEncryptor:function(x){return v!==null?rn.encryptor(x,0):function(O){return O}},output:_a,getNumberOfPages:ss,get pages(){return De},out:Q,f2:M,f3:z,getPageInfo:Rs,getPageInfoByObjId:Go,getCurrentPageInfo:Ko,getPDFVersion:A,Point:xs,Rectangle:Ea,Matrix:xt,hasHotfix:vs},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return ai(V)},set:function(x){jn(V,x)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return _s(V)},set:function(x){fo(V,x)},enumerable:!0,configurable:!0}),(function(x){for(var O=0,ee=mt.length;O<ee;O++){var de=no.call(this,x[O][0],x[O][1],x[O][2],mt[O][3],!0);N===!1&&(b[de]=!0);var be=x[O][0].split("-");Ul({id:de,fontName:be[0],fontStyle:be[1]||""})}Xt.publish("addFonts",{fonts:Bt,dictionary:Ut})}).call(y,mt),at="F1",$l(a,t),Xt.publish("initialized"),y}Ec.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Ec.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ec.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Ec.prototype.processOwnerPassword=function(r,e){return Wf(zf(e).substr(0,5),r)},Ec.prototype.encryptor=function(r,e){var t=zf(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Wf(t,s)}},Iu.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||pr(r)!==pr(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;s++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},nt.API={events:[]},nt.version="3.0.4";var en=nt.API,np=1,Ml=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_c=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ft=function(r){return r.toFixed(2)},Mo=function(r){return r.toFixed(5)};en.__acroform__={};var Cs=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},Rg=function(r){return r*np},pa=function(r){var e=new r1,t=et.internal.getHeight(r)||0,s=et.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Ft(s)),Number(Ft(t))],e},xw=en.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},ww=en.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},bw=en.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},ln=en.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bw(r,e-1)},cn=en.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xw(r,e-1)},un=en.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ww(r,e-1)},_w=en.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=r[0],o=r[1],c=r[2],d=r[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=s(o+d)||0,h.upperRight_X=t(a+c)||0,h.upperRight_Y=s(o)||0,[Number(Ft(h.lowerLeft_X)),Number(Ft(h.lowerLeft_Y)),Number(Ft(h.upperRight_X)),Number(Ft(h.upperRight_Y))]},Nw=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,s=Hf(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+Ft(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=pa(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},Hf=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(M){return M.split(`
`)}):a.map(function(M){return[M]});var o=t,c=et.internal.getHeight(r)||0;c=c<0?-c:c;var d=et.internal.getWidth(r)||0;d=d<0?-d:d;var h=function(M,z,B){if(M+1<a.length){var K=z+" "+a[M+1][0];return Ad(K,r,B).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var g,v,N=Ad("3",r,o).height,b=r.multiline?c-o:(c-N)/2,y=b+=2,L=0,A=0,P=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ad(e,r,o=12).width+", FieldWidth:"+d+`
`;break}for(var T="",R=0,C=0;C<a.length;C++)if(a.hasOwnProperty(C)){var j=!1;if(a[C].length!==1&&P!==a[C].length-1){if((N+2)*(R+2)+2>c)continue e;T+=a[C][P],j=!0,A=C,C--}else{T=(T+=a[C][P]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var J=parseInt(C),$=h(J,T,o),le=C>=a.length-1;if($&&!le){T+=" ",P=0;continue}if($||le){if(le)A=J;else if(r.multiline&&(N+2)*(R+2)+2>c)continue e}else{if(!r.multiline||(N+2)*(R+2)+2>c)continue e;A=J}}for(var se="",Y=L;Y<=A;Y++){var me=a[Y];if(r.multiline){if(Y===A){se+=me[P]+" ",P=(P+1)%me.length;continue}if(Y===L){se+=me[me.length-1]+" ";continue}}se+=me[0]+" "}switch(se=se.substr(se.length-1)==" "?se.substr(0,se.length-1):se,v=Ad(se,r,o).width,r.textAlign){case"right":g=d-v-2;break;case"center":g=(d-v)/2;break;default:g=2}e+=Ft(g)+" "+Ft(y)+` Td
`,e+="("+Ml(se)+`) Tj
`,e+=-Ft(g)+` 0 Td
`,y=-(o+2),v=0,L=j?A:A+1,R++,T=""}break}return s.text=e,s.fontSize=o,s},Ad=function(r,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Sw={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kw=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},jw=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Hi.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(Sw)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");np=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new n1,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&kw(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var c in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(c)){var d=s[c],h=[],g=d.Rect;if(d.Rect&&(d.Rect=_w(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=et.createDefaultAppearanceStream(d),pr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=g,d.hasAppearanceStream&&!d.appearanceStreamContent){var v=Nw(d);h.push({key:"AP",value:"<</N "+v+">>"}),a.internal.acroformPlugin.xForms.push(v)}if(d.appearanceStreamContent){var N="";for(var b in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(b)){var y=d.appearanceStreamContent[b];if(N+="/"+b+" ",N+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var c in y)if(y.hasOwnProperty(c)){var L=y[c];typeof L=="function"&&(L=L.call(a,d)),N+="/"+c+" "+L+" ",a.internal.acroformPlugin.xForms.indexOf(L)>=0||a.internal.acroformPlugin.xForms.push(L)}}else typeof(L=y)=="function"&&(L=L.call(a,d)),N+="/"+c+" "+L,a.internal.acroformPlugin.xForms.indexOf(L)>=0||a.internal.acroformPlugin.xForms.push(L);N+=">>"}h.push({key:"AP",value:`<<
`+N+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:d.objId}),a.internal.out("endobj")}o&&(function(A,P){for(var T in A)if(A.hasOwnProperty(T)){var R=T,C=A[T];P.internal.newObjectDeferredBegin(C.objId,!0),pr(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete A[R]}})(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},t1=en.__acroform__.arrayToPdfArray=function(r,e,t){var s=function(c){return c};if(Array.isArray(r)){for(var a="[",o=0;o<r.length;o++)switch(o!==0&&(a+=" "),pr(r[o])){case"boolean":case"number":case"object":a+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Ml(s(r[o].toString()))+")"):a+=r[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},pf=function(r,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Ml(s(r))+")"},ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ga.prototype.toString=function(){return this.objId+" 0 R"},ga.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ga.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?r.push({key:s,value:t1(a,this.objId,this.scope)}):a instanceof ga?(a.scope=this.scope,r.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:s,value:a}))}return r};var r1=function(){ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Cs(r1,ga);var n1=function(){ga.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ml(t(r))+")"}},set:function(t){r=t}})};Cs(n1,ga);var Hi=function r(){ga.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ln(e,3)},set:function(T){T?this.F=cn(e,3):this.F=un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(T){s=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(T){s[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(T){s[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(T){s[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(T){s[3]=T}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof $d)return;o="FieldObject"+r.FieldNum++}var T=function(R){return R};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Ml(T(o))+")"},set:function(T){o=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(T){o=T}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(T){c=T}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(T){d=T}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(T){h=T}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/np:g},set:function(T){g=T}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(T){v=T}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof $d||this instanceof Ho))return pf(N,this.objId,this.scope)},set:function(T){T=T.toString(),N=T}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Sn==0?pf(b,this.objId,this.scope):b},set:function(T){T=T.toString(),b=this instanceof Sn==0?T.substr(0,1)==="("?_c(T.substr(1,T.length-2)):_c(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sn==1?_c(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof Sn==1?"/"+T:T}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Sn==0?pf(y,this.objId,this.scope):y},set:function(T){T=T.toString(),y=this instanceof Sn==0?T.substr(0,1)==="("?_c(T.substr(1,T.length-2)):_c(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sn==1?_c(y.substr(1,y.length-1)):y},set:function(T){T=T.toString(),y=this instanceof Sn==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(T){T=!!T,A=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(T){L=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,1)},set:function(T){T?this.Ff=cn(this.Ff,1):this.Ff=un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,2)},set:function(T){T?this.Ff=cn(this.Ff,2):this.Ff=un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,3)},set:function(T){T?this.Ff=cn(this.Ff,3):this.Ff=un(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');P=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(P){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:P=2;break;case"center":case 1:P=1;break;default:P=0}}})};Cs(Hi,ga);var Cl=function(){Hi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return t1(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,c,d){d||(d=1);for(var h,g=[];h=c.exec(o);)g.push(h[d]);return g})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,18)},set:function(t){t?this.Ff=cn(this.Ff,18):this.Ff=un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=cn(this.Ff,19):this.Ff=un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,20)},set:function(t){t?(this.Ff=cn(this.Ff,20),e.sort()):this.Ff=un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,22)},set:function(t){t?this.Ff=cn(this.Ff,22):this.Ff=un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(t){t?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,27)},set:function(t){t?this.Ff=cn(this.Ff,27):this.Ff=un(this.Ff,27)}}),this.hasAppearanceStream=!1};Cs(Cl,Hi);var Tl=function(){Cl.call(this),this.fontName="helvetica",this.combo=!1};Cs(Tl,Cl);var Il=function(){Tl.call(this),this.combo=!0};Cs(Il,Tl);var wu=function(){Il.call(this),this.edit=!0};Cs(wu,Il);var Sn=function(){Hi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,15)},set:function(t){t?this.Ff=cn(this.Ff,15):this.Ff=un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,16)},set:function(t){t?this.Ff=cn(this.Ff,16):this.Ff=un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,17)},set:function(t){t?this.Ff=cn(this.Ff,17):this.Ff=un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(t){t?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Ml(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){pr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Cs(Sn,Hi);var bu=function(){Sn.call(this),this.pushButton=!0};Cs(bu,Sn);var Ol=function(){Sn.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Cs(Ol,Sn);var $d=function(){var r,e;Hi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),s)c.push("/"+o+" ("+Ml(a(s[o]))+")");return c.push(">>"),c.join(`
`)},set:function(a){pr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Cs($d,Hi),Ol.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Ol.prototype.createOption=function(r){var e=new $d;return e.Parent=this,e.optionName=r,this.Kids.push(e),Aw.call(this.scope,e),e};var _u=function(){Sn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=et.CheckBox.createAppearanceStream()};Cs(_u,Sn);var Ho=function(){Hi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,13)},set:function(e){e?this.Ff=cn(this.Ff,13):this.Ff=un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,21)},set:function(e){e?this.Ff=cn(this.Ff,21):this.Ff=un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(e){e?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,24)},set:function(e){e?this.Ff=cn(this.Ff,24):this.Ff=un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,25)},set:function(e){e?this.Ff=cn(this.Ff,25):this.Ff=un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(e){e?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Cs(Ho,Hi);var Nu=function(){Ho.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,14)},set:function(r){r?this.Ff=cn(this.Ff,14):this.Ff=un(this.Ff,14)}}),this.password=!0};Cs(Nu,Ho);var et={CheckBox:{createAppearanceStream:function(){return{N:{On:et.CheckBox.YesNormal},D:{On:et.CheckBox.YesPushDown,Off:et.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),o=Hf(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Ft(et.internal.getWidth(r))+" "+Ft(et.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+Ft(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=pa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),a=[],o=et.internal.getHeight(r),c=et.internal.getWidth(r),d=Hf(r,r.caption);return a.push("1 g"),a.push("0 0 "+Ft(c)+" "+Ft(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ft(c-1)+" "+Ft(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+Ft(d.fontSize)+" Tf "+s),a.push(d.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ft(et.internal.getWidth(r))+" "+Ft(et.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:et.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=et.RadioButton.Circle.YesNormal,e.D[r]=et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=et.internal.getWidth(r)<=et.internal.getHeight(r)?et.internal.getWidth(r)/4:et.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=et.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Mo(et.internal.getWidth(r)/2)+" "+Mo(et.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=et.internal.getWidth(r)<=et.internal.getHeight(r)?et.internal.getWidth(r)/4:et.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*et.internal.Bezier_C).toFixed(5)),c=Number((s*et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Mo(et.internal.getWidth(r)/2)+" "+Mo(et.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Mo(et.internal.getWidth(r)/2)+" "+Mo(et.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),t.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),t.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),t.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=et.internal.getWidth(r)<=et.internal.getHeight(r)?et.internal.getWidth(r)/4:et.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Mo(et.internal.getWidth(r)/2)+" "+Mo(et.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:et.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=et.RadioButton.Cross.YesNormal,e.D[r]=et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=et.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Ft(et.internal.getWidth(r)-2)+" "+Ft(et.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Ft(s.x1.x)+" "+Ft(s.x1.y)+" m"),t.push(Ft(s.x2.x)+" "+Ft(s.x2.y)+" l"),t.push(Ft(s.x4.x)+" "+Ft(s.x4.y)+" m"),t.push(Ft(s.x3.x)+" "+Ft(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=et.internal.calculateCross(r),s=[];return s.push("0.749023 g"),s.push("0 0 "+Ft(et.internal.getWidth(r))+" "+Ft(et.internal.getHeight(r))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Ft(et.internal.getWidth(r)-2)+" "+Ft(et.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push(Ft(t.x1.x)+" "+Ft(t.x1.y)+" m"),s.push(Ft(t.x2.x)+" "+Ft(t.x2.y)+" l"),s.push(Ft(t.x4.x)+" "+Ft(t.x4.y)+" m"),s.push(Ft(t.x3.x)+" "+Ft(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ft(et.internal.getWidth(r))+" "+Ft(et.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};et.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=et.internal.getWidth(r),t=et.internal.getHeight(r),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},et.internal.getWidth=function(r){var e=0;return pr(r)==="object"&&(e=Rg(r.Rect[2])),e},et.internal.getHeight=function(r){var e=0;return pr(r)==="object"&&(e=Rg(r.Rect[3])),e};var Aw=en.addField=function(r){if(jw(this,r),!(r instanceof Hi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};en.AcroFormChoiceField=Cl,en.AcroFormListBox=Tl,en.AcroFormComboBox=Il,en.AcroFormEditBox=wu,en.AcroFormButton=Sn,en.AcroFormPushButton=bu,en.AcroFormRadioButton=Ol,en.AcroFormCheckBox=_u,en.AcroFormTextField=Ho,en.AcroFormPasswordField=Nu,en.AcroFormAppearance=et,en.AcroForm={ChoiceField:Cl,ListBox:Tl,ComboBox:Il,EditBox:wu,Button:Sn,PushButton:bu,RadioButton:Ol,CheckBox:_u,TextField:Ho,PasswordField:Nu,Appearance:et},nt.AcroForm={ChoiceField:Cl,ListBox:Tl,ComboBox:Il,EditBox:wu,Button:Sn,PushButton:bu,RadioButton:Ol,CheckBox:_u,TextField:Ho,PasswordField:Nu,Appearance:et};nt.AcroForm;function s1(r){return r.reduce(function(e,t,s){return e[t]=s,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(M,z){var B,K,ge,ue,we,ae=t;if((z=z||t)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if($(M))for(we in s)for(ge=s[we],B=0;B<ge.length;B+=1){for(ue=!0,K=0;K<ge[B].length;K+=1)if(ge[B][K]!==void 0&&ge[B][K]!==M[K]){ue=!1;break}if(ue===!0){ae=we;break}}else for(we in s)for(ge=s[we],B=0;B<ge.length;B+=1){for(ue=!0,K=0;K<ge[B].length;K+=1)if(ge[B][K]!==void 0&&ge[B][K]!==M.charCodeAt(K)){ue=!1;break}if(ue===!0){ae=we;break}}return ae===t&&z!==t&&(ae=z),ae},o=function M(z){for(var B=this.internal.write,K=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:z.width}),ue.push({key:"Height",value:z.height}),z.colorSpace===T.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===T.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)&&z.transparency.length>0){for(var we="",ae=0,ne=z.transparency.length;ae<ne;ae++)we+=z.transparency[ae]+" "+z.transparency[ae]+" ";ue.push({key:"Mask",value:"["+we+"]"})}z.sMask!==void 0&&ue.push({key:"SMask",value:z.objectId+1+" 0 R"});var te=z.filter!==void 0?["/"+z.filter]:void 0;if(K({data:z.data,additionalKeyValues:ue,alreadyAppliedFilters:te,objectId:z.objectId}),B("endobj"),"sMask"in z&&z.sMask!==void 0){var H,E=(H=z.sMaskBitsPerComponent)!==null&&H!==void 0?H:z.bitsPerComponent,V={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:z.sMask};"filter"in z&&(V.decodeParameters="/Predictor ".concat(z.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(z.width),V.filter=z.filter),M.call(this,V)}if(z.colorSpace===T.INDEXED){var q=this.internal.newObject();K({data:se(new Uint8Array(z.palette)),objectId:q}),B("endobj")}},c=function(){var M=this.internal.collections[e+"images"];for(var z in M)o.call(this,M[z])},d=function(){var M,z=this.internal.collections[e+"images"],B=this.internal.write;for(var K in z)B("/I"+(M=z[K]).index,M.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",d))},g=function(){var M=this.internal.collections[e+"images"];return h.call(this),M},v=function(){return Object.keys(this.internal.collections[e+"images"]).length},N=function(M){return typeof r["process"+M.toUpperCase()]=="function"},b=function(M){return pr(M)==="object"&&M.nodeType===1},y=function(M,z){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var B=""+M.getAttribute("src");if(B.indexOf("data:image/")===0)return Id(unescape(B).split("base64,").pop());var K=r.loadFile(B,!0);if(K!==void 0)return K}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var ge;switch(z){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return Id(M.toDataURL(ge,1).split("base64,").pop())}},L=function(M){var z=this.internal.collections[e+"images"];if(z){for(var B in z)if(M===z[B].alias)return z[B]}},A=function(M,z,B){return M||z||(M=-96,z=-96),M<0&&(M=-1*B.width*72/M/this.internal.scaleFactor),z<0&&(z=-1*B.height*72/z/this.internal.scaleFactor),M===0&&(M=z*B.width/B.height),z===0&&(z=M*B.height/B.width),[M,z]},P=function(M,z,B,K,ge,ue){var we=A.call(this,B,K,ge),ae=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,te=g.call(this);if(B=we[0],K=we[1],te[ge.index]=ge,ue){ue*=Math.PI/180;var H=Math.cos(ue),E=Math.sin(ue),V=function(ie){return ie.toFixed(4)},q=[V(H),V(E),V(-1*E),V(H),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,ae(M),ne(z+K),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([ae(B),"0","0",ae(K),"0","0","cm"].join(" "))):this.internal.write([ae(B),"0","0",ae(K),ae(M),ne(z+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},T=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=r.__addimage__.sHashCode=function(M){var z,B,K=0;if(typeof M=="string")for(B=M.length,z=0;z<B;z++)K=(K<<5)-K+M.charCodeAt(z),K|=0;else if($(M))for(B=M.byteLength/2,z=0;z<B;z++)K=(K<<5)-K+M[z],K|=0;return K},j=r.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var z=!0;return M.length===0&&(z=!1),M.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(z=!1),z},J=r.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var z=M.indexOf(",");return z<0?null:M.substring(0,z).trim().endsWith("base64")?M.substring(z+1):null};r.__addimage__.isArrayBuffer=function(M){return M instanceof ArrayBuffer};var $=r.__addimage__.isArrayBufferView=function(M){return M instanceof Int8Array||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array},le=r.__addimage__.binaryStringToUint8Array=function(M){for(var z=M.length,B=new Uint8Array(z),K=0;K<z;K++)B[K]=M.charCodeAt(K);return B},se=r.__addimage__.arrayBufferToBinaryString=function(M){for(var z="",B=$(M)?M:new Uint8Array(M),K=0;K<B.length;K+=8192)z+=String.fromCharCode.apply(null,B.subarray(K,K+8192));return z};r.addImage=function(){var M,z,B,K,ge,ue,we,ae,ne;if(typeof arguments[1]=="number"?(z=t,B=arguments[1],K=arguments[2],ge=arguments[3],ue=arguments[4],we=arguments[5],ae=arguments[6],ne=arguments[7]):(z=arguments[1],B=arguments[2],K=arguments[3],ge=arguments[4],ue=arguments[5],we=arguments[6],ae=arguments[7],ne=arguments[8]),pr(M=arguments[0])==="object"&&!b(M)&&"imageData"in M){var te=M;M=te.imageData,z=te.format||z||t,B=te.x||B||0,K=te.y||K||0,ge=te.w||te.width||ge,ue=te.h||te.height||ue,we=te.alias||we,ae=te.compression||ae,ne=te.rotation||te.angle||ne}var H=this.internal.getFilters();if(ae===void 0&&H.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(B)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var E=Y.call(this,M,z,we,ae);return P.call(this,B,K,ge,ue,E,ne),this};var Y=function(M,z,B,K){var ge,ue,we;if(typeof M=="string"&&a(M)===t){M=unescape(M);var ae=me(M,!1);(ae!==""||(ae=r.loadFile(M,!0))!==void 0)&&(M=ae)}if(b(M)&&(M=y(M,z)),z=a(M,z),!N(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((we=B)==null||we.length===0)&&(B=(function(ne){return typeof ne=="string"||$(ne)?C(ne):$(ne.data)?C(ne.data):null})(M)),(ge=L.call(this,B))||(M instanceof Uint8Array||z==="RGBA"||(ue=M,M=le(M)),ge=this["process"+z.toUpperCase()](M,v.call(this),B,(function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in r.image_compression?ne:R.NONE})(K),ue)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},me=r.__addimage__.convertBase64ToBinaryString=function(M,z){z=typeof z!="boolean"||z;var B,K="";if(typeof M=="string"){var ge;B=(ge=J(M))!==null&&ge!==void 0?ge:M;try{K=Id(B)}catch(ue){if(z)throw j(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};r.getImageProperties=function(M){var z,B,K="";if(b(M)&&(M=y(M)),typeof M=="string"&&a(M)===t&&((K=me(M,!1))===""&&(K=r.loadFile(M)||""),M=K),B=a(M),!N(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(M instanceof Uint8Array||(M=le(M)),!(z=this["process"+B.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=B,z}})(nt.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var s,a,o,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),g=t.pageContext.annotations,v=!1,N=0;N<g.length&&!v;N++)switch((s=g[N]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var b=0;b<g.length;b++){s=g[b];var y=this.internal.pdfEscape,L=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(A.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+c(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(T(s.contents))+")",o+=" /Popup "+P.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+y(T(R))+") >>",A.content=o;var C=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+c(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+C,s.open&&(o+=" /Open true"),o+=" >>",P.content=o,this.internal.write(A.objId,"0 R",P.objId,"0 R");break;case"freetext":a="/Rect ["+c(s.bounds.x)+" "+d(s.bounds.y)+" "+c(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var j=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(L(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var J=this.annotations._nameMap[s.options.name];s.options.pageNumber=J.page,s.options.top=J.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(L(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var $=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+$+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},r.link=function(t,s,a,o,c){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:g(s),w:h(t+a),h:g(s+o)},options:c,type:"link"})},r.textWithLink=function(t,s,a,o){var c,d,h=this.getTextWidth(t),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var v=this.splitTextToSize(t,d).length;c=Math.ceil(g*v)}else d=h,c=g;return this.text(t,s,a,o),a+=.2*g,o.align==="center"&&(s-=h/2),o.align==="right"&&(s-=h),this.link(s,a-g,d,c,o),h},r.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(nt.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},d=r.__arabicParser__.isArabicEndLetter=function(A){return c(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(A){return c(A)&&a.indexOf(A.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return c(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var g=r.__arabicParser__.arabicLetterHasFinalForm=function(A){return c(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(A){return c(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var v=r.__arabicParser__.arabicLetterHasMedialForm=function(A){return c(A)&&o(A)&&e[A.charCodeAt(0)].length==4},N=r.__arabicParser__.resolveLigatures=function(A){var P=0,T=t,R="",C=0;for(P=0;P<A.length;P+=1)T[A.charCodeAt(P)]!==void 0?(C++,typeof(T=T[A.charCodeAt(P)])=="number"&&(R+=String.fromCharCode(T),T=t,C=0),P===A.length-1&&(T=t,R+=A.charAt(P-(C-1)),P-=C-1,C=0)):(T=t,R+=A.charAt(P-C),P-=C,C=0);return R};r.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&s[A.charCodeAt(0)]!==void 0};var b=r.__arabicParser__.getCorrectForm=function(A,P,T){return c(A)?o(A)===!1?-1:!g(A)||!c(P)&&!c(T)||!c(T)&&d(P)||d(A)&&!c(P)||d(A)&&h(P)||d(A)&&d(P)?0:v(A)&&c(P)&&!d(P)&&c(T)&&g(T)?3:d(A)||!c(T)?1:2:-1},y=function(A){var P=0,T=0,R=0,C="",j="",J="",$=(A=A||"").split("\\s+"),le=[];for(P=0;P<$.length;P+=1){for(le.push(""),T=0;T<$[P].length;T+=1)C=$[P][T],j=$[P][T-1],J=$[P][T+1],c(C)?(R=b(C,j,J),le[P]+=R!==-1?String.fromCharCode(e[C.charCodeAt(0)][R]):C):le[P]+=C;le[P]=N(le[P])}return le.join(" ")},L=r.__arabicParser__.processArabic=r.processArabic=function(){var A,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(P)){var R=0;for(T=[],R=0;R<P.length;R+=1)Array.isArray(P[R])?T.push([y(P[R][0]),P[R][1],P[R][2]]):T.push([y(P[R])]);A=T}else A=y(P);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};r.events.push(["preProcessText",L])})(nt.API),nt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(nt.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(A){h=A}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function(A){N=A}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(A){b=A}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(A){L=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return s.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,g){s.call(this);var v=(g=g||{}).fontSize||this.getFontSize(),N=g.font||this.getFont(),b=g.scaleFactor||this.internal.scaleFactor,y=0,L=0,A=0,P=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var T=g.maxWidth;T>0?typeof h=="string"?h=this.splitTextToSize(h,T):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(C,j){return C.concat(P.splitTextToSize(j,T))},[])):h=Array.isArray(h)?h:[h];for(var R=0;R<h.length;R++)y<(A=this.getStringUnitWidth(h[R],{font:N})*v)&&(y=A);return y!==0&&(L=h.length),{w:y/=b,h:Math.max((L*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/b,0)}},r.cellAddPage=function(){s.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var g=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,N=this.internal.__cell__.margins||e,b=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===h.lineNumber?(h.x=(g.x||0)+(g.width||0),h.y=g.y||0):g.y+g.height+h.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=N.top,y&&b&&(this.printHeaderRow(h.lineNumber,!0),h.y+=b[0].height)):h.y=g.y+g.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};r.table=function(h,g,v,N,b){if(s.call(this),!v)throw new Error("No data for PDF table.");var y,L,A,P,T=[],R=[],C=[],j={},J={},$=[],le=[],se=(b=b||{}).autoSize||!1,Y=b.printHeaders!==!1,me=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,M=b.margins||Object.assign({width:this.getPageWidth()},e),z=typeof b.padding=="number"?b.padding:3,B=b.headerBackgroundColor||"#c8c8c8",K=b.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=me,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=K,this.setFontSize(me),N==null)R=T=Object.keys(v[0]),C=T.map(function(){return"left"});else if(Array.isArray(N)&&pr(N[0])==="object")for(T=N.map(function(te){return te.name}),R=N.map(function(te){return te.prompt||te.name||""}),C=N.map(function(te){return te.align||"left"}),y=0;y<N.length;y+=1)J[N[y].name]=.7499990551181103*N[y].width;else Array.isArray(N)&&typeof N[0]=="string"&&(R=T=N,C=T.map(function(){return"left"}));if(se||Array.isArray(N)&&typeof N[0]=="string")for(y=0;y<T.length;y+=1){for(j[P=T[y]]=v.map(function(te){return te[P]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(R[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=j[P],this.setFont(void 0,"normal"),A=0;A<L.length;A+=1)$.push(this.getTextDimensions(L[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[P]=Math.max.apply(null,$)+z+z,$=[]}if(Y){var ge={};for(y=0;y<T.length;y+=1)ge[T[y]]={},ge[T[y]].text=R[y],ge[T[y]].align=C[y];var ue=d.call(this,ge,J);le=T.map(function(te){return new o(h,g,J[te],ue,ge[te].text,void 0,ge[te].align)}),this.setTableHeaderRow(le),this.printHeaderRow(1,!1)}var we=N.reduce(function(te,H){return te[H.name]=H.align,te},{});for(y=0;y<v.length;y+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:y,data:v[y]},this);var ae=d.call(this,v[y],J);for(A=0;A<T.length;A+=1){var ne=v[y][T[A]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:y,col:A,data:ne},this),c.call(this,new o(h,g,J[T[A]],ae,ne,y+2,we[T[A]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=g,this};var d=function(h,g){var v=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(h).map(function(y){var L=h[y];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,g[y]-v-v)},this).map(function(y){return this.getLineHeightFactor()*y.length*N/b+v+v},this).reduce(function(y,L){return Math.max(y,L)},0)};r.setTableHeaderRow=function(h){s.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,g){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){v=this.internal.__cell__.tableHeaderRow[y].clone(),g&&(v.y=this.internal.__cell__.margins.top||0,b.push(v)),v.lineNumber=h;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,v),this.setTextColor(L)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),t=!1}})(nt.API);var i1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vf=s1(a1),o1=[100,200,300,400,500,600,700,800,900],Ew=s1(o1);function gf(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return i1[o=o||"normal"]?o:"normal"})(r.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),a=(function(o){return typeof Vf[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:s,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,s].join(" ")}}}function Dg(r,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(r[e[a]])return r[e[a]]}var Lw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Fg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Bg(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Mg(r){return r.trimLeft()}function Pw(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Cw(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Ed,Ug,$g,Nc,Ld,qg,zg,Wg,mf=["times"];function Hg(r,e,t,s,a){var o=4,c=Gg;switch(a){case nt.API.image_compression.FAST:o=1,c=Vg;break;case nt.API.image_compression.MEDIUM:o=6,c=Kg;break;case nt.API.image_compression.SLOW:o=9,c=Jg}r=(function(h,g,v,N){for(var b,y=h.length/g,L=new Uint8Array(h.length+y),A=[Tw,Vg,Gg,Kg,Jg],P=0;P<y;P+=1){var T=P*g,R=h.subarray(T,T+g);if(N)L.set(N(R,v,b),T+P);else{for(var C=A.length,j=[],J=0;J<C;J+=1)j[J]=A[J](R,v,b);var $=Ow(j.concat());L.set(j[$],T+P)}b=R}return L})(r,e,Math.ceil(t*s/8),c);var d=Mf(r,{level:o});return nt.API.__addimage__.arrayBufferToBinaryString(d)}function Tw(r){var e=Array.apply([],r);return e.unshift(0),e}function Vg(r,e){var t=r.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=r[a-e]||0;s[a+1]=r[a]-o+256&255}return s}function Gg(r,e,t){var s=r.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var c=t&&t[o]||0;a[o+1]=r[o]-c+256&255}return a}function Kg(r,e,t){var s=r.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var c=r[o-e]||0,d=t&&t[o]||0;a[o+1]=r[o]+256-(c+d>>>1)&255}return a}function Jg(r,e,t){var s=r.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var c=Iw(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=r[o]-c+256&255}return a}function Iw(r,e,t){if(r===e&&e===t)return r;var s=Math.abs(e-t),a=Math.abs(r-t),o=Math.abs(r+e-t-t);return s<=a&&s<=o?r:a<=o?e:t}function Ow(r){var e=r.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function vf(r,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),c=(1<<t)-1;return l1(r,a)>>o&c}function Yg(r,e,t,s){var a=t*s,o=Math.floor(a/8),c=16-(a-8*o+s),d=(1<<s)-1,h=(e&d)<<c;(function(g,v,N){if(v+1<g.byteLength)g.setUint16(v,N,!1);else{var b=N>>8&255;g.setUint8(v,b)}})(r,o,l1(r,o)&~(d<<c)&65535|h)}function l1(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function Rw(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,s=r[e++]|r[e++]<<8,a=r[e++],o=a>>7,c=1<<1+(7&a);r[e++],r[e++];var d=null,h=null;o&&(d=e,h=c,e+=3*c);var g=!0,v=[],N=0,b=null,y=0,L=null;for(this.width=t,this.height=s;g&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,L=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=r[e++];N=r[e++]|r[e++]<<8,b=r[e++],1&A||(b=null),y=A>>2&7,e++;break;case 254:for(;;){if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var P=r[e++]|r[e++]<<8,T=r[e++]|r[e++]<<8,R=r[e++]|r[e++]<<8,C=r[e++]|r[e++]<<8,j=r[e++],J=j>>6&1,$=1<<1+(7&j),le=d,se=h,Y=!1;j>>7&&(Y=!0,le=e,se=$,e+=3*$);var me=e;for(e++;;){var M;if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}v.push({x:P,y:T,width:R,height:C,has_local_palette:Y,palette_offset:le,palette_size:se,data_offset:me,data_length:e-me,transparent_index:b,interlaced:!!J,delay:N,disposal:y});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return L},this.frameInfo=function(z){if(z<0||z>=v.length)throw new Error("Frame index out of range.");return v[z]},this.decodeAndBlitFrameBGRA=function(z,B){var K=this.frameInfo(z),ge=K.width*K.height,ue=new Uint8Array(ge);Xg(r,K.data_offset,ue,ge);var we=K.palette_offset,ae=K.transparent_index;ae===null&&(ae=256);var ne=K.width,te=t-ne,H=ne,E=4*(K.y*t+K.x),V=4*((K.y+K.height)*t+K.x),q=E,ie=4*te;K.interlaced===!0&&(ie+=4*t*7);for(var ce=8,re=0,he=ue.length;re<he;++re){var ve=ue[re];if(H===0&&(H=ne,(q+=ie)>=V&&(ie=4*te+4*t*(ce-1),q=E+(ne+te)*(ce<<1),ce>>=1)),ve===ae)q+=4;else{var Ne=r[we+3*ve],De=r[we+3*ve+1],We=r[we+3*ve+2];B[q++]=We,B[q++]=De,B[q++]=Ne,B[q++]=255}--H}},this.decodeAndBlitFrameRGBA=function(z,B){var K=this.frameInfo(z),ge=K.width*K.height,ue=new Uint8Array(ge);Xg(r,K.data_offset,ue,ge);var we=K.palette_offset,ae=K.transparent_index;ae===null&&(ae=256);var ne=K.width,te=t-ne,H=ne,E=4*(K.y*t+K.x),V=4*((K.y+K.height)*t+K.x),q=E,ie=4*te;K.interlaced===!0&&(ie+=4*t*7);for(var ce=8,re=0,he=ue.length;re<he;++re){var ve=ue[re];if(H===0&&(H=ne,(q+=ie)>=V&&(ie=4*te+4*t*(ce-1),q=E+(ne+te)*(ce<<1),ce>>=1)),ve===ae)q+=4;else{var Ne=r[we+3*ve],De=r[we+3*ve+1],We=r[we+3*ve+2];B[q++]=Ne,B[q++]=De,B[q++]=We,B[q++]=255}--H}}}function Xg(r,e,t,s){for(var a=r[e++],o=1<<a,c=o+1,d=c+1,h=a+1,g=(1<<h)-1,v=0,N=0,b=0,y=r[e++],L=new Int32Array(4096),A=null;;){for(;v<16&&y!==0;)N|=r[e++]<<v,v+=8,y===1?y=r[e++]:--y;if(v<h)break;var P=N&g;if(N>>=h,v-=h,P!==o){if(P===c)break;for(var T=P<d?P:A,R=0,C=T;C>o;)C=L[C]>>8,++R;var j=C;if(b+R+(T!==P?1:0)>s)return void br.log("Warning, gif stream longer than expected.");t[b++]=j;var J=b+=R;for(T!==P&&(t[b++]=j),C=T;R--;)C=L[C],t[--J]=255&C,C>>=8;A!==null&&d<4096&&(L[d++]=A<<8|j,d>=g+1&&h<12&&(++h,g=g<<1|1)),A=P}else d=c+1,g=(1<<(h=a+1))-1,A=null}return b!==s&&br.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function yf(r){var e,t,s,a,o,c=Math.floor,d=new Array(64),h=new Array(64),g=new Array(64),v=new Array(64),N=new Array(65535),b=new Array(65535),y=new Array(64),L=new Array(64),A=[],P=0,T=7,R=new Array(64),C=new Array(64),j=new Array(64),J=new Array(256),$=new Array(2048),le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],se=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(E,V){for(var q=0,ie=0,ce=new Array,re=1;re<=16;re++){for(var he=1;he<=E[re];he++)ce[V[ie]]=[],ce[V[ie]][0]=q,ce[V[ie]][1]=re,ie++,q++;q*=2}return ce}function we(E){for(var V=E[0],q=E[1]-1;q>=0;)V&1<<q&&(P|=1<<T),q--,--T<0&&(P==255?(ae(255),ae(0)):ae(P),T=7,P=0)}function ae(E){A.push(E)}function ne(E){ae(E>>8&255),ae(255&E)}function te(E,V,q,ie,ce){for(var re,he=ce[0],ve=ce[240],Ne=(function(Be,ht){var Ge,gt,ft,Yt,$t,Ct,qt,Mt,at,jt,rt=0;for(at=0;at<8;++at){Ge=Be[rt],gt=Be[rt+1],ft=Be[rt+2],Yt=Be[rt+3],$t=Be[rt+4],Ct=Be[rt+5],qt=Be[rt+6];var Rr=Ge+(Mt=Be[rt+7]),Gt=Ge-Mt,Bt=gt+qt,Ut=gt-qt,gr=ft+Ct,pt=ft-Ct,ir=Yt+$t,vt=Yt-$t,Et=Rr+ir,nr=Rr-ir,It=Bt+gr,yt=Bt-gr;Be[rt]=Et+It,Be[rt+4]=Et-It;var Xt=.707106781*(yt+nr);Be[rt+2]=nr+Xt,Be[rt+6]=nr-Xt;var Gi=.382683433*((Et=vt+pt)-(yt=Ut+Gt)),mn=.5411961*Et+Gi,ei=1.306562965*yt+Gi,ps=.707106781*(It=pt+Ut),xt=Gt+ps,ts=Gt-ps;Be[rt+5]=ts+mn,Be[rt+3]=ts-mn,Be[rt+1]=xt+ei,Be[rt+7]=xt-ei,rt+=8}for(rt=0,at=0;at<8;++at){Ge=Be[rt],gt=Be[rt+8],ft=Be[rt+16],Yt=Be[rt+24],$t=Be[rt+32],Ct=Be[rt+40],qt=Be[rt+48];var Ts=Ge+(Mt=Be[rt+56]),kn=Ge-Mt,gs=gt+qt,mr=gt-qt,Dr=ft+Ct,Hr=ft-Ct,wi=Yt+$t,Ki=Yt-$t,Is=Ts+wi,ti=Ts-wi,vn=gs+Dr,ms=gs-Dr;Be[rt]=Is+vn,Be[rt+32]=Is-vn;var rs=.707106781*(ms+ti);Be[rt+16]=ti+rs,Be[rt+48]=ti-rs;var va=.382683433*((Is=Ki+Hr)-(ms=mr+kn)),Os=.5411961*Is+va,Ji=1.306562965*ms+va,ya=.707106781*(vn=Hr+mr),xa=kn+ya,ro=kn-ya;Be[rt+40]=ro+Os,Be[rt+24]=ro-Os,Be[rt+8]=xa+Ji,Be[rt+56]=xa-Ji,rt++}for(at=0;at<64;++at)jt=Be[at]*ht[at],y[at]=jt>0?jt+.5|0:jt-.5|0;return y})(E,V),De=0;De<64;++De)L[le[De]]=Ne[De];var We=L[0]-q;q=L[0],We==0?we(ie[0]):(we(ie[b[re=32767+We]]),we(N[re]));for(var qe=63;qe>0&&L[qe]==0;)qe--;if(qe==0)return we(he),q;for(var it,Q=1;Q<=qe;){for(var Ve=Q;L[Q]==0&&Q<=qe;)++Q;var Rt=Q-Ve;if(Rt>=16){it=Rt>>4;for(var mt=1;mt<=it;++mt)we(ve);Rt&=15}re=32767+L[Q],we(ce[(Rt<<4)+b[re]]),we(N[re]),Q++}return qe!=63&&we(he),q}function H(E){E=Math.min(Math.max(E,1),100),o!=E&&((function(V){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ce=c((q[ie]*V+50)/100);ce=Math.min(Math.max(ce,1),255),d[le[ie]]=ce}for(var re=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var ve=c((re[he]*V+50)/100);ve=Math.min(Math.max(ve,1),255),h[le[he]]=ve}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,We=0;We<8;We++)for(var qe=0;qe<8;qe++)g[De]=1/(d[le[De]]*Ne[We]*Ne[qe]*8),v[De]=1/(h[le[De]]*Ne[We]*Ne[qe]*8),De++})(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),o=E)}this.encode=function(E,V){V&&H(V),A=new Array,P=0,T=7,ne(65496),ne(65504),ne(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),ne(1),ne(1),ae(0),ae(0),(function(){ne(65499),ne(132),ae(0);for(var gt=0;gt<64;gt++)ae(d[gt]);ae(1);for(var ft=0;ft<64;ft++)ae(h[ft])})(),(function(gt,ft){ne(65472),ne(17),ae(8),ne(ft),ne(gt),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)})(E.width,E.height),(function(){ne(65476),ne(418),ae(0);for(var gt=0;gt<16;gt++)ae(se[gt+1]);for(var ft=0;ft<=11;ft++)ae(Y[ft]);ae(16);for(var Yt=0;Yt<16;Yt++)ae(me[Yt+1]);for(var $t=0;$t<=161;$t++)ae(M[$t]);ae(1);for(var Ct=0;Ct<16;Ct++)ae(z[Ct+1]);for(var qt=0;qt<=11;qt++)ae(B[qt]);ae(17);for(var Mt=0;Mt<16;Mt++)ae(K[Mt+1]);for(var at=0;at<=161;at++)ae(ge[at])})(),ne(65498),ne(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var q=0,ie=0,ce=0;P=0,T=7,this.encode.displayName="_encode_";for(var re,he,ve,Ne,De,We,qe,it,Q,Ve=E.data,Rt=E.width,mt=E.height,Be=4*Rt,ht=0;ht<mt;){for(re=0;re<Be;){for(De=Be*ht+re,qe=-1,it=0,Q=0;Q<64;Q++)We=De+(it=Q>>3)*Be+(qe=4*(7&Q)),ht+it>=mt&&(We-=Be*(ht+1+it-mt)),re+qe>=Be&&(We-=re+qe-Be+4),he=Ve[We++],ve=Ve[We++],Ne=Ve[We++],R[Q]=($[he]+$[ve+256|0]+$[Ne+512|0]>>16)-128,C[Q]=($[he+768|0]+$[ve+1024|0]+$[Ne+1280|0]>>16)-128,j[Q]=($[he+1280|0]+$[ve+1536|0]+$[Ne+1792|0]>>16)-128;q=te(R,g,q,e,s),ie=te(C,v,ie,t,a),ce=te(j,v,ce,t,a),re+=32}ht+=8}if(T>=0){var Ge=[];Ge[1]=T+1,Ge[0]=(1<<T+1)-1,we(Ge)}return ne(65497),new Uint8Array(A)},r=r||50,(function(){for(var E=String.fromCharCode,V=0;V<256;V++)J[V]=E(V)})(),e=ue(se,Y),t=ue(z,B),s=ue(me,M),a=ue(K,ge),(function(){for(var E=1,V=2,q=1;q<=15;q++){for(var ie=E;ie<V;ie++)b[32767+ie]=q,N[32767+ie]=[],N[32767+ie][1]=q,N[32767+ie][0]=ie;for(var ce=-(V-1);ce<=-E;ce++)b[32767+ce]=q,N[32767+ce]=[],N[32767+ce][1]=q,N[32767+ce][0]=V-1+ce;E<<=1,V<<=1}})(),(function(){for(var E=0;E<256;E++)$[E]=19595*E,$[E+256|0]=38470*E,$[E+512|0]=7471*E+32768,$[E+768|0]=-11059*E,$[E+1024|0]=-21709*E,$[E+1280|0]=32768*E+8421375,$[E+1536|0]=-27439*E,$[E+1792|0]=-5329*E})(),H(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Mi(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Qg(r){function e(Y){if(!Y)throw Error("assert :P")}function t(Y,me,M){for(var z=0;4>z;z++)if(Y[me+z]!=M.charCodeAt(z))return!0;return!1}function s(Y,me,M,z,B){for(var K=0;K<B;K++)Y[me+K]=M[z+K]}function a(Y,me,M,z){for(var B=0;B<z;B++)Y[me+B]=M}function o(Y){return new Int32Array(Y)}function c(Y,me){for(var M=[],z=0;z<Y;z++)M.push(new me);return M}function d(Y,me){var M=[];return(function z(B,K,ge){for(var ue=ge[K],we=0;we<ue&&(B.push(ge.length>K+1?[]:new me),!(ge.length<K+1));we++)z(B[we],K+1,ge)})(M,0,Y),M}var h=function(){var Y=this;function me(f,m){for(var _=1<<m-1>>>0;f&_;)_>>>=1;return _?(f&_-1)+_:f}function M(f,m,_,k,I){e(!(k%_));do f[m+(k-=_)]=I;while(0<k)}function z(f,m,_,k,I){if(e(2328>=I),512>=I)var F=o(512);else if((F=o(I))==null)return 0;return(function(U,W,G,X,fe,Se){var Z,ye,_e=W,Ce=1<<G,je=o(16),Le=o(16);for(e(fe!=0),e(X!=null),e(U!=null),e(0<G),ye=0;ye<fe;++ye){if(15<X[ye])return 0;++je[X[ye]]}if(je[0]==fe)return 0;for(Le[1]=0,Z=1;15>Z;++Z){if(je[Z]>1<<Z)return 0;Le[Z+1]=Le[Z]+je[Z]}for(ye=0;ye<fe;++ye)Z=X[ye],0<X[ye]&&(Se[Le[Z]++]=ye);if(Le[15]==1)return(X=new B).g=0,X.value=Se[0],M(U,_e,1,Ce,X),Ce;var Pe,Oe=-1,Re=Ce-1,ct=0,Je=1,Ot=1,Ze=1<<G;for(ye=0,Z=1,fe=2;Z<=G;++Z,fe<<=1){if(Je+=Ot<<=1,0>(Ot-=je[Z]))return 0;for(;0<je[Z];--je[Z])(X=new B).g=Z,X.value=Se[ye++],M(U,_e+ct,fe,Ze,X),ct=me(ct,Z)}for(Z=G+1,fe=2;15>=Z;++Z,fe<<=1){if(Je+=Ot<<=1,0>(Ot-=je[Z]))return 0;for(;0<je[Z];--je[Z]){if(X=new B,(ct&Re)!=Oe){for(_e+=Ze,Pe=1<<(Oe=Z)-G;15>Oe&&!(0>=(Pe-=je[Oe]));)++Oe,Pe<<=1;Ce+=Ze=1<<(Pe=Oe-G),U[W+(Oe=ct&Re)].g=Pe+G,U[W+Oe].value=_e-W-Oe}X.g=Z-G,X.value=Se[ye++],M(U,_e+(ct>>G),fe,Ze,X),ct=me(ct,Z)}}return Je!=2*Le[15]-1?0:Ce})(f,m,_,k,I,F)}function B(){this.value=this.g=0}function K(){this.value=this.g=0}function ge(){this.G=c(5,B),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ns,K)}function ue(f,m,_,k){e(f!=null),e(m!=null),e(2147483648>k),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=m,f.pa=_,f.Jd=m,f.Yc=_+k,f.Zc=4<=k?_+k-4+1:_,he(f)}function we(f,m){for(var _=0;0<m--;)_|=Ne(f,128)<<m;return _}function ae(f,m){var _=we(f,m);return ve(f)?-_:_}function ne(f,m,_,k){var I,F=0;for(e(f!=null),e(m!=null),e(4294967288>k),f.Sb=k,f.Ra=0,f.u=0,f.h=0,4<k&&(k=4),I=0;I<k;++I)F+=m[_+I]<<8*I;f.Ra=F,f.bb=k,f.oa=m,f.pa=_}function te(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<na-8>>>0,++f.bb,f.u-=8;ie(f)&&(f.h=1,f.u=0)}function H(f,m){if(e(0<=m),!f.h&&m<=cs){var _=q(f)&ls[m];return f.u+=m,te(f),_}return f.h=1,f.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(f){return f.Ra>>>(f.u&na-1)>>>0}function ie(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>na}function ce(f,m){f.u=m,f.h=ie(f)}function re(f){f.u>=li&&(e(f.u>=li),te(f))}function he(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function ve(f){return we(f,1)}function Ne(f,m){var _=f.Ca;0>f.b&&he(f);var k=f.b,I=_*m>>>8,F=(f.I>>>k>I)+0;for(F?(_-=I,f.I-=I+1<<k>>>0):_=I+1,k=_,I=0;256<=k;)I+=8,k>>=8;return k=7^I+ji[k],f.b-=k,f.Ca=(_<<k)-1,F}function De(f,m,_){f[m+0]=_>>24&255,f[m+1]=_>>16&255,f[m+2]=_>>8&255,f[m+3]=255&_}function We(f,m){return f[m+0]|f[m+1]<<8}function qe(f,m){return We(f,m)|f[m+2]<<16}function it(f,m){return We(f,m)|We(f,m+2)<<16}function Q(f,m){var _=1<<m;return e(f!=null),e(0<m),f.X=o(_),f.X==null?0:(f.Mb=32-m,f.Xa=m,1)}function Ve(f,m){e(f!=null),e(m!=null),e(f.Xa==m.Xa),s(m.X,0,f.X,0,1<<m.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function mt(f,m,_,k){e(_!=null),e(k!=null);var I=_[0],F=k[0];return I==0&&(I=(f*F+m/2)/m),F==0&&(F=(m*I+f/2)/f),0>=I||0>=F?0:(_[0]=I,k[0]=F,1)}function Be(f,m){return f+(1<<m)-1>>>m}function ht(f,m){return((4278255360&f)+(4278255360&m)>>>0&4278255360)+((16711935&f)+(16711935&m)>>>0&16711935)>>>0}function Ge(f,m){Y[m]=function(_,k,I,F,U,W,G){var X;for(X=0;X<U;++X){var fe=Y[f](W[G+X-1],I,F+X);W[G+X]=ht(_[k+X],fe)}}}function gt(){this.ud=this.hd=this.jd=0}function ft(f,m){return((4278124286&(f^m))>>>1)+(f&m)>>>0}function Yt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function $t(f,m){return Yt(f+(f-m+.5>>1))}function Ct(f,m,_){return Math.abs(m-_)-Math.abs(f-_)}function qt(f,m,_,k,I,F,U){for(k=F[U-1],_=0;_<I;++_)F[U+_]=k=ht(f[m+_],k)}function Mt(f,m,_,k,I){var F;for(F=0;F<_;++F){var U=f[m+F],W=U>>8&255,G=16711935&(G=(G=16711935&U)+((W<<16)+W));k[I+F]=(4278255360&U)+G>>>0}}function at(f,m){m.jd=255&f,m.hd=f>>8&255,m.ud=f>>16&255}function jt(f,m,_,k,I,F){var U;for(U=0;U<k;++U){var W=m[_+U],G=W>>>8,X=W,fe=255&(fe=(fe=W>>>16)+((f.jd<<24>>24)*(G<<24>>24)>>>5));X=255&(X=(X+=(f.hd<<24>>24)*(G<<24>>24)>>>5)+((f.ud<<24>>24)*(fe<<24>>24)>>>5)),I[F+U]=(4278255360&W)+(fe<<16)+X}}function rt(f,m,_,k,I){Y[m]=function(F,U,W,G,X,fe,Se,Z,ye){for(G=Se;G<Z;++G)for(Se=0;Se<ye;++Se)X[fe++]=I(W[k(F[U++])])},Y[f]=function(F,U,W,G,X,fe,Se){var Z=8>>F.b,ye=F.Ea,_e=F.K[0],Ce=F.w;if(8>Z)for(F=(1<<F.b)-1,Ce=(1<<Z)-1;U<W;++U){var je,Le=0;for(je=0;je<ye;++je)je&F||(Le=k(G[X++])),fe[Se++]=I(_e[Le&Ce]),Le>>=Z}else Y["VP8LMapColor"+_](G,X,_e,Ce,fe,Se,U,W,ye)}}function Rr(f,m,_,k,I){for(_=m+_;m<_;){var F=f[m++];k[I++]=F>>16&255,k[I++]=F>>8&255,k[I++]=255&F}}function Gt(f,m,_,k,I){for(_=m+_;m<_;){var F=f[m++];k[I++]=F>>16&255,k[I++]=F>>8&255,k[I++]=255&F,k[I++]=F>>24&255}}function Bt(f,m,_,k,I){for(_=m+_;m<_;){var F=(U=f[m++])>>16&240|U>>12&15,U=240&U|U>>28&15;k[I++]=F,k[I++]=U}}function Ut(f,m,_,k,I){for(_=m+_;m<_;){var F=(U=f[m++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;k[I++]=F,k[I++]=U}}function gr(f,m,_,k,I){for(_=m+_;m<_;){var F=f[m++];k[I++]=255&F,k[I++]=F>>8&255,k[I++]=F>>16&255}}function pt(f,m,_,k,I,F){if(F==0)for(_=m+_;m<_;)De(k,((F=f[m++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),I+=32;else s(k,I,f,m,_)}function ir(f,m){Y[m][0]=Y[f+"0"],Y[m][1]=Y[f+"1"],Y[m][2]=Y[f+"2"],Y[m][3]=Y[f+"3"],Y[m][4]=Y[f+"4"],Y[m][5]=Y[f+"5"],Y[m][6]=Y[f+"6"],Y[m][7]=Y[f+"7"],Y[m][8]=Y[f+"8"],Y[m][9]=Y[f+"9"],Y[m][10]=Y[f+"10"],Y[m][11]=Y[f+"11"],Y[m][12]=Y[f+"12"],Y[m][13]=Y[f+"13"],Y[m][14]=Y[f+"0"],Y[m][15]=Y[f+"0"]}function vt(f){return f==_o||f==qa||f==ol||f==ll}function Et(){this.eb=[],this.size=this.A=this.fb=0}function nr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function It(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Et,this.f.kb=new nr,this.sd=null}function yt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gi(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function mn(f,m){var _=f.T,k=m.ba.f.RGBA,I=k.eb,F=k.fb+f.ka*k.A,U=Hn[m.ba.S],W=f.y,G=f.O,X=f.f,fe=f.N,Se=f.ea,Z=f.W,ye=m.cc,_e=m.dc,Ce=m.Mc,je=m.Nc,Le=f.ka,Pe=f.ka+f.T,Oe=f.U,Re=Oe+1>>1;for(Le==0?U(W,G,null,null,X,fe,Se,Z,X,fe,Se,Z,I,F,null,null,Oe):(U(m.ec,m.fc,W,G,ye,_e,Ce,je,X,fe,Se,Z,I,F-k.A,I,F,Oe),++_);Le+2<Pe;Le+=2)ye=X,_e=fe,Ce=Se,je=Z,fe+=f.Rc,Z+=f.Rc,F+=2*k.A,U(W,(G+=2*f.fa)-f.fa,W,G,ye,_e,Ce,je,X,fe,Se,Z,I,F-k.A,I,F,Oe);return G+=f.fa,f.j+Pe<f.o?(s(m.ec,m.fc,W,G,Oe),s(m.cc,m.dc,X,fe,Re),s(m.Mc,m.Nc,Se,Z,Re),_--):1&Pe||U(W,G,null,null,X,fe,Se,Z,X,fe,Se,Z,I,F+k.A,null,null,Oe),_}function ei(f,m,_){var k=f.F,I=[f.J];if(k!=null){var F=f.U,U=m.ba.S,W=U==al||U==ol;m=m.ba.f.RGBA;var G=[0],X=f.ka;G[0]=f.T,f.Kb&&(X==0?--G[0]:(--X,I[0]-=f.width),f.j+f.ka+f.T==f.o&&(G[0]=f.o-f.j-X));var fe=m.eb;X=m.fb+X*m.A,f=sl(k,I[0],f.width,F,G,fe,X+(W?0:3),m.A),e(_==G),f&&vt(U)&&$a(fe,X,W,F,G,m.A)}return 0}function ps(f){var m=f.ma,_=m.ba.S,k=11>_,I=_==oa||_==il||_==al||_==cr||_==12||vt(_);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!go(m.Oa,f,I?11:12))return 0;if(I&&vt(_)&&Ca(),f.da)alert("todo:use_scaling");else{if(k){if(m.Ib=Gi,f.Kb){if(_=f.U+1>>1,m.memory=o(f.U+2*_),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+f.U,m.Mc=m.cc,m.Nc=m.dc+_,m.Ib=mn,Ca()}}else alert("todo:EmitYUV");I&&(m.Jb=ei,k&&Fs())}if(k&&!wn){for(f=0;256>f;++f)Vn[f]=89858*(f-128)+$s>>Pi,Gn[f]=-22014*(f-128)+$s,jo[f]=-45773*(f-128),Va[f]=113618*(f-128)+$s>>Pi;for(f=sr;f<or;++f)m=76283*(f-16)+$s>>Pi,ec[f-sr]=Vr(m,255),$u[f-sr]=Vr(m+8>>4,15);wn=1}return 1}function xt(f){var m=f.ma,_=f.U,k=f.T;return e(!(1&f.ka)),0>=_||0>=k?0:(_=m.Ib(f,m),m.Jb!=null&&m.Jb(f,m,_),m.Dc+=_,1)}function ts(f){f.ma.memory=null}function Ts(f,m,_,k){return H(f,8)!=47?0:(m[0]=H(f,14)+1,_[0]=H(f,14)+1,k[0]=H(f,1),H(f,3)!=0?0:!f.h)}function kn(f,m){if(4>f)return f+1;var _=f-2>>1;return(2+(1&f)<<_)+H(m,_)+1}function gs(f,m){return 120<m?m-120:1<=(_=((_=Yd[m-1])>>4)*f+(8-(15&_)))?_:1;var _}function mr(f,m,_){var k=q(_),I=f[m+=255&k].g-8;return 0<I&&(ce(_,_.u+8),k=q(_),m+=f[m].value,m+=k&(1<<I)-1),ce(_,_.u+f[m].g),f[m].value}function Dr(f,m,_){return _.g+=f.g,_.value+=f.value<<m>>>0,e(8>=_.g),f.g}function Hr(f,m,_){var k=f.xc;return e((m=k==0?0:f.vc[f.md*(_>>k)+(m>>k)])<f.Wb),f.Ya[m]}function wi(f,m,_,k){var I=f.ab,F=f.c*m,U=f.C;m=U+m;var W=_,G=k;for(k=f.Ta,_=f.Ua;0<I--;){var X=f.gc[I],fe=U,Se=m,Z=W,ye=G,_e=(G=k,W=_,X.Ea);switch(e(fe<Se),e(Se<=X.nc),X.hc){case 2:Br(Z,ye,(Se-fe)*_e,G,W);break;case 0:var Ce=fe,je=Se,Le=G,Pe=W,Oe=(Ze=X).Ea;Ce==0&&(Ai(Z,ye,null,null,1,Le,Pe),qt(Z,ye+1,0,0,Oe-1,Le,Pe+1),ye+=Oe,Pe+=Oe,++Ce);for(var Re=1<<Ze.b,ct=Re-1,Je=Be(Oe,Ze.b),Ot=Ze.K,Ze=Ze.w+(Ce>>Ze.b)*Je;Ce<je;){var Wt=Ot,Cr=Ze,Dt=1;for(ci(Z,ye,Le,Pe-Oe,1,Le,Pe);Dt<Oe;){var Ye=(Dt&~ct)+Re;Ye>Oe&&(Ye=Oe),(0,Fa[Wt[Cr++]>>8&15])(Z,ye+ +Dt,Le,Pe+Dt-Oe,Ye-Dt,Le,Pe+Dt),Dt=Ye}ye+=Oe,Pe+=Oe,++Ce&ct||(Ze+=Je)}Se!=X.nc&&s(G,W-_e,G,W+(Se-fe-1)*_e,_e);break;case 1:for(_e=Z,je=ye,Oe=(Z=X.Ea)-(Pe=Z&~(Le=(ye=1<<X.b)-1)),Ce=Be(Z,X.b),Re=X.K,X=X.w+(fe>>X.b)*Ce;fe<Se;){for(ct=Re,Je=X,Ot=new gt,Ze=je+Pe,Wt=je+Z;je<Ze;)at(ct[Je++],Ot),vo(Ot,_e,je,ye,G,W),je+=ye,W+=ye;je<Wt&&(at(ct[Je++],Ot),vo(Ot,_e,je,Oe,G,W),je+=Oe,W+=Oe),++fe&Le||(X+=Ce)}break;case 3:if(Z==G&&ye==W&&0<X.b){for(je=G,Z=_e=W+(Se-fe)*_e-(Pe=(Se-fe)*Be(X.Ea,X.b)),ye=G,Le=W,Ce=[],Pe=(Oe=Pe)-1;0<=Pe;--Pe)Ce[Pe]=ye[Le+Pe];for(Pe=Oe-1;0<=Pe;--Pe)je[Z+Pe]=Ce[Pe];Ra(X,fe,Se,G,_e,G,W)}else Ra(X,fe,Se,Z,ye,G,W)}W=k,G=_}G!=_&&s(k,_,W,G,F)}function Ki(f,m){var _=f.V,k=f.Ba+f.c*f.C,I=m-f.C;if(e(m<=f.l.o),e(16>=I),0<I){var F=f.l,U=f.Ta,W=f.Ua,G=F.width;if(wi(f,I,_,k),I=W=[W],e((_=f.C)<(k=m)),e(F.v<F.va),k>F.o&&(k=F.o),_<F.j){var X=F.j-_;_=F.j,I[0]+=X*G}if(_>=k?_=0:(I[0]+=4*F.v,F.ka=_-F.j,F.U=F.va-F.v,F.T=k-_,_=1),_){if(W=W[0],11>(_=f.ca).S){var fe=_.f.RGBA,Se=(k=_.S,I=F.U,F=F.T,X=fe.eb,fe.A),Z=F;for(fe=fe.fb+f.Ma*fe.A;0<Z--;){var ye=U,_e=W,Ce=I,je=X,Le=fe;switch(k){case Yl:yo(ye,_e,Ce,je,Le);break;case oa:Ei(ye,_e,Ce,je,Le);break;case _o:Ei(ye,_e,Ce,je,Le),$a(je,Le,0,Ce,1,0);break;case Du:Ba(ye,_e,Ce,je,Le);break;case il:pt(ye,_e,Ce,je,Le,1);break;case qa:pt(ye,_e,Ce,je,Le,1),$a(je,Le,0,Ce,1,0);break;case al:pt(ye,_e,Ce,je,Le,0);break;case ol:pt(ye,_e,Ce,je,Le,0),$a(je,Le,1,Ce,1,0);break;case cr:sa(ye,_e,Ce,je,Le);break;case ll:sa(ye,_e,Ce,je,Le),Uc(je,Le,Ce,1,0);break;case Xl:ia(ye,_e,Ce,je,Le);break;default:e(0)}W+=G,fe+=Se}f.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=_.height)}}f.C=m,e(f.C<=f.i)}function Is(f){var m;if(0<f.ua)return 0;for(m=0;m<f.Wb;++m){var _=f.Ya[m].G,k=f.Ya[m].H;if(0<_[1][k[1]+0].g||0<_[2][k[2]+0].g||0<_[3][k[3]+0].g)return 0}return 1}function ti(f,m,_,k,I,F){if(f.Z!=0){var U=f.qd,W=f.rd;for(e(An[f.Z]!=null);m<_;++m)An[f.Z](U,W,k,I,k,I,F),U=k,W=I,I+=F;f.qd=U,f.rd=W}}function vn(f,m){var _=f.l.ma,k=_.Z==0||_.Z==1?f.l.j:f.C;if(k=f.C<k?k:f.C,e(m<=f.l.o),m>k){var I=f.l.width,F=_.ca,U=_.tb+I*k,W=f.V,G=f.Ba+f.c*k,X=f.gc;e(f.ab==1),e(X[0].hc==3),Ms(X[0],k,m,W,G,F,U),ti(_,k,m,F,U,I)}f.C=f.Ma=m}function ms(f,m,_,k,I,F,U){var W=f.$/k,G=f.$%k,X=f.m,fe=f.s,Se=_+f.$,Z=Se;I=_+k*I;var ye=_+k*F,_e=280+fe.ua,Ce=f.Pb?W:16777216,je=0<fe.ua?fe.Wa:null,Le=fe.wc,Pe=Se<ye?Hr(fe,G,W):null;e(f.C<F),e(ye<=I);var Oe=!1;e:for(;;){for(;Oe||Se<ye;){var Re=0;if(W>=Ce){var ct=Se-_;e((Ce=f).Pb),Ce.wd=Ce.m,Ce.xd=ct,0<Ce.s.ua&&Ve(Ce.s.Wa,Ce.s.vb),Ce=W+Zl}if(G&Le||(Pe=Hr(fe,G,W)),e(Pe!=null),Pe.Qb&&(m[Se]=Pe.qb,Oe=!0),!Oe)if(re(X),Pe.jc){Re=X,ct=m;var Je=Se,Ot=Pe.pd[q(Re)&Ns-1];e(Pe.jc),256>Ot.g?(ce(Re,Re.u+Ot.g),ct[Je]=Ot.value,Re=0):(ce(Re,Re.u+Ot.g-256),e(256<=Ot.value),Re=Ot.value),Re==0&&(Oe=!0)}else Re=mr(Pe.G[0],Pe.H[0],X);if(X.h)break;if(Oe||256>Re){if(!Oe)if(Pe.nd)m[Se]=(Pe.qb|Re<<8)>>>0;else{if(re(X),Oe=mr(Pe.G[1],Pe.H[1],X),re(X),ct=mr(Pe.G[2],Pe.H[2],X),Je=mr(Pe.G[3],Pe.H[3],X),X.h)break;m[Se]=(Je<<24|Oe<<16|Re<<8|ct)>>>0}if(Oe=!1,++Se,++G>=k&&(G=0,++W,U!=null&&W<=F&&!(W%16)&&U(f,W),je!=null))for(;Z<Se;)Re=m[Z++],je.X[(506832829*Re&4294967295)>>>je.Mb]=Re}else if(280>Re){if(Re=kn(Re-256,X),ct=mr(Pe.G[4],Pe.H[4],X),re(X),ct=gs(k,ct=kn(ct,X)),X.h)break;if(Se-_<ct||I-Se<Re)break e;for(Je=0;Je<Re;++Je)m[Se+Je]=m[Se+Je-ct];for(Se+=Re,G+=Re;G>=k;)G-=k,++W,U!=null&&W<=F&&!(W%16)&&U(f,W);if(e(Se<=I),G&Le&&(Pe=Hr(fe,G,W)),je!=null)for(;Z<Se;)Re=m[Z++],je.X[(506832829*Re&4294967295)>>>je.Mb]=Re}else{if(!(Re<_e))break e;for(Oe=Re-280,e(je!=null);Z<Se;)Re=m[Z++],je.X[(506832829*Re&4294967295)>>>je.Mb]=Re;Re=Se,e(!(Oe>>>(ct=je).Xa)),m[Re]=ct.X[Oe],Oe=!0}Oe||e(X.h==ie(X))}if(f.Pb&&X.h&&Se<I)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Ve(f.s.vb,f.s.Wa);else{if(X.h)break e;U!=null&&U(f,W>F?F:W),f.a=0,f.$=Se-_}return 1}return f.a=3,0}function rs(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var m=f.Wa;m!=null&&(m.X=null),f.vb=null,e(f!=null)}function va(){var f=new At;return f==null?null:(f.a=0,f.xb=So,ir("Predictor","VP8LPredictors"),ir("Predictor","VP8LPredictors_C"),ir("PredictorAdd","VP8LPredictorsAdd"),ir("PredictorAdd","VP8LPredictorsAdd_C"),Br=Mt,vo=jt,yo=Rr,Ei=Gt,sa=Bt,ia=Ut,Ba=gr,Y.VP8LMapColor32b=ui,Y.VP8LMapColor8b=Da,f)}function Os(f,m,_,k,I){var F=1,U=[f],W=[m],G=k.m,X=k.s,fe=null,Se=0;e:for(;;){if(_)for(;F&&H(G,1);){var Z=U,ye=W,_e=k,Ce=1,je=_e.m,Le=_e.gc[_e.ab],Pe=H(je,2);if(_e.Oc&1<<Pe)F=0;else{switch(_e.Oc|=1<<Pe,Le.hc=Pe,Le.Ea=Z[0],Le.nc=ye[0],Le.K=[null],++_e.ab,e(4>=_e.ab),Pe){case 0:case 1:Le.b=H(je,3)+2,Ce=Os(Be(Le.Ea,Le.b),Be(Le.nc,Le.b),0,_e,Le.K),Le.K=Le.K[0];break;case 3:var Oe,Re=H(je,8)+1,ct=16<Re?0:4<Re?1:2<Re?2:3;if(Z[0]=Be(Le.Ea,ct),Le.b=ct,Oe=Ce=Os(Re,1,0,_e,Le.K)){var Je,Ot=Re,Ze=Le,Wt=1<<(8>>Ze.b),Cr=o(Wt);if(Cr==null)Oe=0;else{var Dt=Ze.K[0],Ye=Ze.w;for(Cr[0]=Ze.K[0][0],Je=1;Je<1*Ot;++Je)Cr[Je]=ht(Dt[Ye+Je],Cr[Je-1]);for(;Je<4*Wt;++Je)Cr[Je]=0;Ze.K[0]=null,Ze.K[0]=Cr,Oe=1}}Ce=Oe;break;case 2:break;default:e(0)}F=Ce}}if(U=U[0],W=W[0],F&&H(G,1)&&!(F=1<=(Se=H(G,4))&&11>=Se)){k.a=3;break e}var He;if(He=F)t:{var Mr,kt,zt,yr=k,dn=U,Yr=W,Ar=Se,sn=_,hn=yr.m,_r=yr.s,Vt=[null],Zt=1,Nr=0,er=Bu[Ar];r:for(;;){if(sn&&H(hn,1)){var Tr=H(hn,3)+2,Ir=Be(dn,Tr),ur=Be(Yr,Tr),En=Ir*ur;if(!Os(Ir,ur,0,yr,Vt))break r;for(Vt=Vt[0],_r.xc=Tr,Mr=0;Mr<En;++Mr){var lr=Vt[Mr]>>8&65535;Vt[Mr]=lr,lr>=Zt&&(Zt=lr+1)}}if(hn.h)break r;for(kt=0;5>kt;++kt){var dr=za[kt];!kt&&0<Ar&&(dr+=1<<Ar),Nr<dr&&(Nr=dr)}var Xr=c(Zt*er,B),bn=Zt,Kn=c(bn,ge);if(Kn==null)var Ur=null;else e(65536>=bn),Ur=Kn;var $r=o(Nr);if(Ur==null||$r==null||Xr==null){yr.a=1;break r}var Ln=Xr;for(Mr=zt=0;Mr<Zt;++Mr){var hr=Ur[Mr],Pn=hr.G,js=hr.H,qs=0,fn=1,qr=0;for(kt=0;5>kt;++kt){dr=za[kt],Pn[kt]=Ln,js[kt]=zt,!kt&&0<Ar&&(dr+=1<<Ar);s:{var ua,Ti=dr,Ao=yr,fi=$r,zu=Ln,Qc=zt,wr=0,zs=Ao.m,Zc=H(zs,1);if(a(fi,0,0,Ti),Zc){var eu=H(zs,1)+1,tc=H(zs,1),rc=H(zs,tc==0?1:8);fi[rc]=1,eu==2&&(fi[rc=H(zs,8)]=1);var pi=1}else{var Sr=o(19),Qr=H(zs,4)+4;if(19<Qr){Ao.a=3;var zr=0;break s}for(ua=0;ua<Qr;++ua)Sr[Jd[ua]]=H(zs,3);var Eo=void 0,Ii=void 0,Lo=Ao,th=Sr,an=Ti,nc=fi,fl=0,gi=Lo.m,Ws=8,us=c(128,B);n:for(;z(us,0,7,th,19);){if(H(gi,1)){var pl=2+2*H(gi,3);if((Eo=2+H(gi,pl))>an)break n}else Eo=an;for(Ii=0;Ii<an&&Eo--;){re(gi);var sc=us[0+(127&q(gi))];ce(gi,gi.u+sc.g);var da=sc.value;if(16>da)nc[Ii++]=da,da!=0&&(Ws=da);else{var Wu=da==16,tu=da-16,Hu=Ql[tu],ru=H(gi,cl[tu])+Hu;if(Ii+ru>an)break n;for(var Vu=Wu?Ws:0;0<ru--;)nc[Ii++]=Vu}}fl=1;break n}fl||(Lo.a=3),pi=fl}(pi=pi&&!zs.h)&&(wr=z(zu,Qc,8,fi,Ti)),pi&&wr!=0?zr=wr:(Ao.a=3,zr=0)}if(zr==0)break r;if(fn&&Fu[kt]==1&&(fn=Ln[zt].g==0),qs+=Ln[zt].g,zt+=zr,3>=kt){var Po,ic=$r[0];for(Po=1;Po<dr;++Po)$r[Po]>ic&&(ic=$r[Po]);qr+=ic}}if(hr.nd=fn,hr.Qb=0,fn&&(hr.qb=(Pn[3][js[3]+0].value<<24|Pn[1][js[1]+0].value<<16|Pn[2][js[2]+0].value)>>>0,qs==0&&256>Pn[0][js[0]+0].value&&(hr.Qb=1,hr.qb+=Pn[0][js[0]+0].value<<8)),hr.jc=!hr.Qb&&6>qr,hr.jc){var gl,ds=hr;for(gl=0;gl<Ns;++gl){var Oi=gl,Hs=ds.pd[Oi],Ka=ds.G[0][ds.H[0]+Oi];256<=Ka.value?(Hs.g=Ka.g+256,Hs.value=Ka.value):(Hs.g=0,Hs.value=0,Oi>>=Dr(Ka,8,Hs),Oi>>=Dr(ds.G[1][ds.H[1]+Oi],16,Hs),Oi>>=Dr(ds.G[2][ds.H[2]+Oi],0,Hs),Dr(ds.G[3][ds.H[3]+Oi],24,Hs))}}}_r.vc=Vt,_r.Wb=Zt,_r.Ya=Ur,_r.yc=Xr,He=1;break t}He=0}if(!(F=He)){k.a=3;break e}if(0<Se){if(X.ua=1<<Se,!Q(X.Wa,Se)){k.a=1,F=0;break e}}else X.ua=0;var ac=k,oc=U,Gu=W,lc=ac.s,cc=lc.xc;if(ac.c=oc,ac.i=Gu,lc.md=Be(oc,cc),lc.wc=cc==0?-1:(1<<cc)-1,_){k.xb=hi;break e}if((fe=o(U*W))==null){k.a=1,F=0;break e}F=(F=ms(k,fe,0,U,W,W,null))&&!G.h;break e}return F?(I!=null?I[0]=fe:(e(fe==null),e(_)),k.$=0,_||rs(X)):rs(X),F}function Ji(f,m){var _=f.c*f.i,k=_+m+16*m;return e(f.c<=m),f.V=o(k),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+_+m,1)}function ya(f,m){var _=f.C,k=m-_,I=f.V,F=f.Ba+f.c*_;for(e(m<=f.l.o);0<k;){var U=16<k?16:k,W=f.l.ma,G=f.l.width,X=G*U,fe=W.ca,Se=W.tb+G*_,Z=f.Ta,ye=f.Ua;wi(f,U,I,F),$c(Z,ye,fe,Se,X),ti(W,_,_+U,fe,Se,G),k-=U,I+=U*f.c,_+=U}e(_==m),f.C=f.Ma=m}function xa(){this.ub=this.yd=this.td=this.Rb=0}function ro(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dc(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function xr(){this.Yb=(function(){var f=[];return(function m(_,k,I){for(var F=I[k],U=0;U<F&&(_.push(I.length>k+1?[]:0),!(I.length<k+1));U++)m(_[U],k+1,I)})(f,0,[3,11]),f})()}function Ul(){this.jb=o(3),this.Wc=d([4,8],xr),this.Xc=d([4,17],xr)}function no(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ns(){this.ld=this.La=this.dd=this.tc=0}function Yi(){this.Na=this.la=0}function $l(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function so(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wa(){this.uc=this.M=this.Nb=0,this.wa=Array(new ns),this.Y=0,this.ya=Array(new so),this.aa=0,this.l=new io}function ss(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ql(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new xa,this.Kc=new ro,this.ed=new no,this.Qa=new Dc,this.Ic=this.$c=this.Aa=0,this.D=new wa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,E),this.ia=0,this.pb=c(4,$l),this.Pa=new Ul,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ss),this.Hd=0,this.rb=Array(new Yi),this.sb=0,this.wa=Array(new ns),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new so),this.L=this.aa=0,this.gd=d([4,2],ns),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vr(f,m){return 0>f?0:f>m?m:f}function io(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fc(){var f=new ql;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Wa||(Wa=ri)),f}function Gr(f,m,_){return f.a==0&&(f.a=m,f.sc=_,f.cb=0),0}function ba(f,m,_){return 3<=_&&f[m+0]==157&&f[m+1]==1&&f[m+2]==42}function is(f,m){if(f==null)return 0;if(f.a=0,f.sc="OK",m==null)return Gr(f,2,"null VP8Io passed to VP8GetHeaders()");var _=m.data,k=m.w,I=m.ha;if(4>I)return Gr(f,7,"Truncated header.");var F=_[k+0]|_[k+1]<<8|_[k+2]<<16,U=f.Od;if(U.Rb=!(1&F),U.td=F>>1&7,U.yd=F>>4&1,U.ub=F>>5,3<U.td)return Gr(f,3,"Incorrect keyframe parameters.");if(!U.yd)return Gr(f,4,"Frame not displayable.");k+=3,I-=3;var W=f.Kc;if(U.Rb){if(7>I)return Gr(f,7,"cannot parse picture header");if(!ba(_,k,I))return Gr(f,3,"Bad code word");W.c=16383&(_[k+4]<<8|_[k+3]),W.Td=_[k+4]>>6,W.i=16383&(_[k+6]<<8|_[k+5]),W.Ud=_[k+6]>>6,k+=7,I-=7,f.za=W.c+15>>4,f.Ub=W.i+15>>4,m.width=W.c,m.height=W.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,a((F=f.Pa).jb,0,255,F.jb.length),e((F=f.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,a(F.Zb,0,0,F.Zb.length),a(F.Lb,0,0,F.Lb)}if(U.ub>I)return Gr(f,7,"bad partition length");ue(F=f.m,_,k,U.ub),k+=U.ub,I-=U.ub,U.Rb&&(W.Ld=ve(F),W.Kd=ve(F)),W=f.Qa;var G,X=f.Pa;if(e(F!=null),e(W!=null),W.Cb=ve(F),W.Cb){if(W.Bb=ve(F),ve(F)){for(W.Fb=ve(F),G=0;4>G;++G)W.Zb[G]=ve(F)?ae(F,7):0;for(G=0;4>G;++G)W.Lb[G]=ve(F)?ae(F,6):0}if(W.Bb)for(G=0;3>G;++G)X.jb[G]=ve(F)?we(F,8):255}else W.Bb=0;if(F.Ka)return Gr(f,3,"cannot parse segment header");if((W=f.ed).zd=ve(F),W.Tb=we(F,6),W.wb=we(F,3),W.Pc=ve(F),W.Pc&&ve(F)){for(X=0;4>X;++X)ve(F)&&(W.vd[X]=ae(F,6));for(X=0;4>X;++X)ve(F)&&(W.od[X]=ae(F,6))}if(f.L=W.Tb==0?0:W.zd?1:2,F.Ka)return Gr(f,3,"cannot parse filter header");var fe=I;if(I=G=k,k=G+fe,W=fe,f.Xb=(1<<we(f.m,2))-1,fe<3*(X=f.Xb))_=7;else{for(G+=3*X,W-=3*X,fe=0;fe<X;++fe){var Se=_[I+0]|_[I+1]<<8|_[I+2]<<16;Se>W&&(Se=W),ue(f.Jc[+fe],_,G,Se),G+=Se,W-=Se,I+=3}ue(f.Jc[+X],_,G,W),_=G<k?0:5}if(_!=0)return Gr(f,_,"cannot parse partitions");for(_=we(G=f.m,7),I=ve(G)?ae(G,4):0,k=ve(G)?ae(G,4):0,W=ve(G)?ae(G,4):0,X=ve(G)?ae(G,4):0,G=ve(G)?ae(G,4):0,fe=f.Qa,Se=0;4>Se;++Se){if(fe.Cb){var Z=fe.Zb[Se];fe.Fb||(Z+=_)}else{if(0<Se){f.pb[Se]=f.pb[0];continue}Z=_}var ye=f.pb[Se];ye.Sc[0]=No[Vr(Z+I,127)],ye.Sc[1]=ul[Vr(Z+0,127)],ye.Eb[0]=2*No[Vr(Z+k,127)],ye.Eb[1]=101581*ul[Vr(Z+W,127)]>>16,8>ye.Eb[1]&&(ye.Eb[1]=8),ye.Qc[0]=No[Vr(Z+X,117)],ye.Qc[1]=ul[Vr(Z+G,127)],ye.lc=Z+G}if(!U.Rb)return Gr(f,4,"Not a key frame.");for(ve(F),U=f.Pa,_=0;4>_;++_){for(I=0;8>I;++I)for(k=0;3>k;++k)for(W=0;11>W;++W)X=Ne(F,Qd[_][I][k][W])?we(F,8):Uu[_][I][k][W],U.Wc[_][I].Yb[k][W]=X;for(I=0;17>I;++I)U.Xc[_][I]=U.Wc[_][Jc[I]]}return f.kc=ve(F),f.kc&&(f.Bd=we(F,8)),f.cb=1}function ri(f,m,_,k,I,F,U){var W=m[I].Yb[_];for(_=0;16>I;++I){if(!Ne(f,W[_+0]))return I;for(;!Ne(f,W[_+1]);)if(W=m[++I].Yb[0],_=0,I==16)return 16;var G=m[I+1].Yb;if(Ne(f,W[_+2])){var X=f,fe=0;if(Ne(X,(Z=W)[(Se=_)+3]))if(Ne(X,Z[Se+6])){for(W=0,Se=2*(fe=Ne(X,Z[Se+8]))+(Z=Ne(X,Z[Se+9+fe])),fe=0,Z=Gc[Se];Z[W];++W)fe+=fe+Ne(X,Z[W]);fe+=3+(8<<Se)}else Ne(X,Z[Se+7])?(fe=7+2*Ne(X,165),fe+=Ne(X,145)):fe=5+Ne(X,159);else fe=Ne(X,Z[Se+4])?3+Ne(X,Z[Se+5]):2;W=G[2]}else fe=1,W=G[1];G=U+Kc[I],0>(X=f).b&&he(X);var Se,Z=X.b,ye=(Se=X.Ca>>1)-(X.I>>Z)>>31;--X.b,X.Ca+=ye,X.Ca|=1,X.I-=(Se+1&ye)<<Z,F[G]=((fe^ye)-ye)*k[(0<I)+0]}return 16}function _a(f){var m=f.rb[f.sb-1];m.la=0,m.Na=0,a(f.zc,0,0,f.zc.length),f.ja=0}function vs(f,m,_,k,I){I=f[m+_+32*k]+(I>>3),f[m+_+32*k]=-256&I?0>I?0:255:I}function rn(f,m,_,k,I,F){vs(f,m,0,_,k+I),vs(f,m,1,_,k+F),vs(f,m,2,_,k-F),vs(f,m,3,_,k-I)}function Rs(f){return(20091*f>>16)+f}function Go(f,m,_,k){var I,F=0,U=o(16);for(I=0;4>I;++I){var W=f[m+0]+f[m+8],G=f[m+0]-f[m+8],X=(35468*f[m+4]>>16)-Rs(f[m+12]),fe=Rs(f[m+4])+(35468*f[m+12]>>16);U[F+0]=W+fe,U[F+1]=G+X,U[F+2]=G-X,U[F+3]=W-fe,F+=4,m++}for(I=F=0;4>I;++I)W=(f=U[F+0]+4)+U[F+8],G=f-U[F+8],X=(35468*U[F+4]>>16)-Rs(U[F+12]),vs(_,k,0,0,W+(fe=Rs(U[F+4])+(35468*U[F+12]>>16))),vs(_,k,1,0,G+X),vs(_,k,2,0,G-X),vs(_,k,3,0,W-fe),F++,k+=32}function Ko(f,m,_,k){var I=f[m+0]+4,F=35468*f[m+4]>>16,U=Rs(f[m+4]),W=35468*f[m+1]>>16;rn(_,k,0,I+U,f=Rs(f[m+1]),W),rn(_,k,1,I+F,f,W),rn(_,k,2,I-F,f,W),rn(_,k,3,I-U,f,W)}function Na(f,m,_,k,I){Go(f,m,_,k),I&&Go(f,m+16,_,k+4)}function ni(f,m,_,k){Ma(f,m+0,_,k,1),Ma(f,m+32,_,k+128,1)}function ao(f,m,_,k){var I;for(f=f[m+0]+4,I=0;4>I;++I)for(m=0;4>m;++m)vs(_,k,m,I,f)}function Jt(f,m,_,k){f[m+0]&&Qt(f,m+0,_,k),f[m+16]&&Qt(f,m+16,_,k+4),f[m+32]&&Qt(f,m+32,_,k+128),f[m+48]&&Qt(f,m+48,_,k+128+4)}function Sa(f,m,_,k){var I,F=o(16);for(I=0;4>I;++I){var U=f[m+0+I]+f[m+12+I],W=f[m+4+I]+f[m+8+I],G=f[m+4+I]-f[m+8+I],X=f[m+0+I]-f[m+12+I];F[0+I]=U+W,F[8+I]=U-W,F[4+I]=X+G,F[12+I]=X-G}for(I=0;4>I;++I)U=(f=F[0+4*I]+3)+F[3+4*I],W=F[1+4*I]+F[2+4*I],G=F[1+4*I]-F[2+4*I],X=f-F[3+4*I],_[k+0]=U+W>>3,_[k+16]=X+G>>3,_[k+32]=U-W>>3,_[k+48]=X-G>>3,k+=64}function Xi(f,m,_){var k,I=m-32,F=On,U=255-f[I-1];for(k=0;k<_;++k){var W,G=F,X=U+f[m-1];for(W=0;W<_;++W)f[m+W]=G[X+f[I+W]];m+=32}}function Jo(f,m){Xi(f,m,4)}function zl(f,m){Xi(f,m,8)}function Wl(f,m){Xi(f,m,16)}function oo(f,m){var _;for(_=0;16>_;++_)s(f,m+32*_,f,m-32,16)}function lo(f,m){var _;for(_=16;0<_;--_)a(f,m,f[m-1],16),m+=32}function Un(f,m,_){var k;for(k=0;16>k;++k)a(m,_+32*k,f,16)}function si(f,m){var _,k=16;for(_=0;16>_;++_)k+=f[m-1+32*_]+f[m+_-32];Un(k>>5,f,m)}function $n(f,m){var _,k=8;for(_=0;16>_;++_)k+=f[m-1+32*_];Un(k>>4,f,m)}function ys(f,m){var _,k=8;for(_=0;16>_;++_)k+=f[m+_-32];Un(k>>4,f,m)}function ka(f,m){Un(128,f,m)}function _t(f,m,_){return f+2*m+_+2>>2}function ii(f,m){var _,k=m-32;for(k=new Uint8Array([_t(f[k-1],f[k+0],f[k+1]),_t(f[k+0],f[k+1],f[k+2]),_t(f[k+1],f[k+2],f[k+3]),_t(f[k+2],f[k+3],f[k+4])]),_=0;4>_;++_)s(f,m+32*_,k,0,k.length)}function Bc(f,m){var _=f[m-1],k=f[m-1+32],I=f[m-1+64],F=f[m-1+96];De(f,m+0,16843009*_t(f[m-1-32],_,k)),De(f,m+32,16843009*_t(_,k,I)),De(f,m+64,16843009*_t(k,I,F)),De(f,m+96,16843009*_t(I,F,F))}function Hl(f,m){var _,k=4;for(_=0;4>_;++_)k+=f[m+_-32]+f[m-1+32*_];for(k>>=3,_=0;4>_;++_)a(f,m+32*_,k,4)}function as(f,m){var _=f[m-1+0],k=f[m-1+32],I=f[m-1+64],F=f[m-1-32],U=f[m+0-32],W=f[m+1-32],G=f[m+2-32],X=f[m+3-32];f[m+0+96]=_t(k,I,f[m-1+96]),f[m+1+96]=f[m+0+64]=_t(_,k,I),f[m+2+96]=f[m+1+64]=f[m+0+32]=_t(F,_,k),f[m+3+96]=f[m+2+64]=f[m+1+32]=f[m+0+0]=_t(U,F,_),f[m+3+64]=f[m+2+32]=f[m+1+0]=_t(W,U,F),f[m+3+32]=f[m+2+0]=_t(G,W,U),f[m+3+0]=_t(X,G,W)}function bi(f,m){var _=f[m+1-32],k=f[m+2-32],I=f[m+3-32],F=f[m+4-32],U=f[m+5-32],W=f[m+6-32],G=f[m+7-32];f[m+0+0]=_t(f[m+0-32],_,k),f[m+1+0]=f[m+0+32]=_t(_,k,I),f[m+2+0]=f[m+1+32]=f[m+0+64]=_t(k,I,F),f[m+3+0]=f[m+2+32]=f[m+1+64]=f[m+0+96]=_t(I,F,U),f[m+3+32]=f[m+2+64]=f[m+1+96]=_t(F,U,W),f[m+3+64]=f[m+2+96]=_t(U,W,G),f[m+3+96]=_t(W,G,G)}function Vl(f,m){var _=f[m-1+0],k=f[m-1+32],I=f[m-1+64],F=f[m-1-32],U=f[m+0-32],W=f[m+1-32],G=f[m+2-32],X=f[m+3-32];f[m+0+0]=f[m+1+64]=F+U+1>>1,f[m+1+0]=f[m+2+64]=U+W+1>>1,f[m+2+0]=f[m+3+64]=W+G+1>>1,f[m+3+0]=G+X+1>>1,f[m+0+96]=_t(I,k,_),f[m+0+64]=_t(k,_,F),f[m+0+32]=f[m+1+96]=_t(_,F,U),f[m+1+32]=f[m+2+96]=_t(F,U,W),f[m+2+32]=f[m+3+96]=_t(U,W,G),f[m+3+32]=_t(W,G,X)}function co(f,m){var _=f[m+0-32],k=f[m+1-32],I=f[m+2-32],F=f[m+3-32],U=f[m+4-32],W=f[m+5-32],G=f[m+6-32],X=f[m+7-32];f[m+0+0]=_+k+1>>1,f[m+1+0]=f[m+0+64]=k+I+1>>1,f[m+2+0]=f[m+1+64]=I+F+1>>1,f[m+3+0]=f[m+2+64]=F+U+1>>1,f[m+0+32]=_t(_,k,I),f[m+1+32]=f[m+0+96]=_t(k,I,F),f[m+2+32]=f[m+1+96]=_t(I,F,U),f[m+3+32]=f[m+2+96]=_t(F,U,W),f[m+3+64]=_t(U,W,G),f[m+3+96]=_t(W,G,X)}function ja(f,m){var _=f[m-1+0],k=f[m-1+32],I=f[m-1+64],F=f[m-1+96];f[m+0+0]=_+k+1>>1,f[m+2+0]=f[m+0+32]=k+I+1>>1,f[m+2+32]=f[m+0+64]=I+F+1>>1,f[m+1+0]=_t(_,k,I),f[m+3+0]=f[m+1+32]=_t(k,I,F),f[m+3+32]=f[m+1+64]=_t(I,F,F),f[m+3+64]=f[m+2+64]=f[m+0+96]=f[m+1+96]=f[m+2+96]=f[m+3+96]=F}function Yo(f,m){var _=f[m-1+0],k=f[m-1+32],I=f[m-1+64],F=f[m-1+96],U=f[m-1-32],W=f[m+0-32],G=f[m+1-32],X=f[m+2-32];f[m+0+0]=f[m+2+32]=_+U+1>>1,f[m+0+32]=f[m+2+64]=k+_+1>>1,f[m+0+64]=f[m+2+96]=I+k+1>>1,f[m+0+96]=F+I+1>>1,f[m+3+0]=_t(W,G,X),f[m+2+0]=_t(U,W,G),f[m+1+0]=f[m+3+32]=_t(_,U,W),f[m+1+32]=f[m+3+64]=_t(k,_,U),f[m+1+64]=f[m+3+96]=_t(I,k,_),f[m+1+96]=_t(F,I,k)}function Ds(f,m){var _;for(_=0;8>_;++_)s(f,m+32*_,f,m-32,8)}function Aa(f,m){var _;for(_=0;8>_;++_)a(f,m,f[m-1],8),m+=32}function qn(f,m,_){var k;for(k=0;8>k;++k)a(m,_+32*k,f,8)}function uo(f,m){var _,k=8;for(_=0;8>_;++_)k+=f[m+_-32]+f[m-1+32*_];qn(k>>4,f,m)}function Xo(f,m){var _,k=4;for(_=0;8>_;++_)k+=f[m+_-32];qn(k>>3,f,m)}function Qo(f,m){var _,k=4;for(_=0;8>_;++_)k+=f[m-1+32*_];qn(k>>3,f,m)}function ho(f,m){qn(128,f,m)}function xs(f,m,_){var k=f[m-_],I=f[m+0],F=3*(I-k)+di[1020+f[m-2*_]-f[m+_]],U=bo[112+(F+4>>3)];f[m-_]=On[255+k+bo[112+(F+3>>3)]],f[m+0]=On[255+I-U]}function Ea(f,m,_,k){var I=f[m+0],F=f[m+_];return Ss[255+f[m-2*_]-f[m-_]]>k||Ss[255+F-I]>k}function La(f,m,_,k){return 4*Ss[255+f[m-_]-f[m+0]]+Ss[255+f[m-2*_]-f[m+_]]<=k}function ws(f,m,_,k,I){var F=f[m-3*_],U=f[m-2*_],W=f[m-_],G=f[m+0],X=f[m+_],fe=f[m+2*_],Se=f[m+3*_];return 4*Ss[255+W-G]+Ss[255+U-X]>k?0:Ss[255+f[m-4*_]-F]<=I&&Ss[255+F-U]<=I&&Ss[255+U-W]<=I&&Ss[255+Se-fe]<=I&&Ss[255+fe-X]<=I&&Ss[255+X-G]<=I}function _i(f,m,_,k){var I=2*k+1;for(k=0;16>k;++k)La(f,m+k,_,I)&&xs(f,m+k,_)}function Qi(f,m,_,k){var I=2*k+1;for(k=0;16>k;++k)La(f,m+k*_,1,I)&&xs(f,m+k*_,1)}function Zo(f,m,_,k){var I;for(I=3;0<I;--I)_i(f,m+=4*_,_,k)}function Pa(f,m,_,k){var I;for(I=3;0<I;--I)Qi(f,m+=4,_,k)}function bs(f,m,_,k,I,F,U,W){for(F=2*F+1;0<I--;){if(ws(f,m,_,F,U))if(Ea(f,m,_,W))xs(f,m,_);else{var G=f,X=m,fe=_,Se=G[X-2*fe],Z=G[X-fe],ye=G[X+0],_e=G[X+fe],Ce=G[X+2*fe],je=27*(Pe=di[1020+3*(ye-Z)+di[1020+Se-_e]])+63>>7,Le=18*Pe+63>>7,Pe=9*Pe+63>>7;G[X-3*fe]=On[255+G[X-3*fe]+Pe],G[X-2*fe]=On[255+Se+Le],G[X-fe]=On[255+Z+je],G[X+0]=On[255+ye-je],G[X+fe]=On[255+_e-Le],G[X+2*fe]=On[255+Ce-Pe]}m+=k}}function ai(f,m,_,k,I,F,U,W){for(F=2*F+1;0<I--;){if(ws(f,m,_,F,U))if(Ea(f,m,_,W))xs(f,m,_);else{var G=f,X=m,fe=_,Se=G[X-fe],Z=G[X+0],ye=G[X+fe],_e=bo[112+(4+(Ce=3*(Z-Se))>>3)],Ce=bo[112+(Ce+3>>3)],je=_e+1>>1;G[X-2*fe]=On[255+G[X-2*fe]+je],G[X-fe]=On[255+Se+Ce],G[X+0]=On[255+Z-_e],G[X+fe]=On[255+ye-je]}m+=k}}function jn(f,m,_,k,I,F){bs(f,m,_,1,16,k,I,F)}function _s(f,m,_,k,I,F){bs(f,m,1,_,16,k,I,F)}function fo(f,m,_,k,I,F){var U;for(U=3;0<U;--U)ai(f,m+=4*_,_,1,16,k,I,F)}function x(f,m,_,k,I,F){var U;for(U=3;0<U;--U)ai(f,m+=4,1,_,16,k,I,F)}function O(f,m,_,k,I,F,U,W){bs(f,m,I,1,8,F,U,W),bs(_,k,I,1,8,F,U,W)}function ee(f,m,_,k,I,F,U,W){bs(f,m,1,I,8,F,U,W),bs(_,k,1,I,8,F,U,W)}function de(f,m,_,k,I,F,U,W){ai(f,m+4*I,I,1,8,F,U,W),ai(_,k+4*I,I,1,8,F,U,W)}function be(f,m,_,k,I,F,U,W){ai(f,m+4,1,I,8,F,U,W),ai(_,k+4,1,I,8,F,U,W)}function Ie(){this.ba=new It,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lt(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new B}function At(){this.xb=this.a=0,this.l=new io,this.ca=new It,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lt,this.ab=0,this.gc=c(4,Qe),this.Oc=0}function Tt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new io,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Kt(f,m,_,k,I,F,U){for(f=f==null?0:f[m+0],m=0;m<U;++m)I[F+m]=f+_[k+m]&255,f=I[F+m]}function jr(f,m,_,k,I,F,U){var W;if(f==null)Kt(null,null,_,k,I,F,U);else for(W=0;W<U;++W)I[F+W]=f[m+W]+_[k+W]&255}function Kr(f,m,_,k,I,F,U){if(f==null)Kt(null,null,_,k,I,F,U);else{var W,G=f[m+0],X=G,fe=G;for(W=0;W<U;++W)X=fe+(G=f[m+W])-X,fe=_[k+W]+(-256&X?0>X?0:255:X)&255,X=G,I[F+W]=fe}}function vr(f,m,_,k){var I=m.width,F=m.o;if(e(f!=null&&m!=null),0>_||0>=k||_+k>F)return null;if(!f.Cc){if(f.ga==null){var U;if(f.ga=new Tt,(U=f.ga==null)||(U=m.width*m.o,e(f.Gb.length==0),f.Gb=o(U),f.Uc=0,f.Gb==null?U=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,U=1),U=!U),!U){U=f.ga;var W=f.Fa,G=f.P,X=f.qc,fe=f.mb,Se=f.nb,Z=G+1,ye=X-1,_e=U.l;if(e(W!=null&&fe!=null&&m!=null),An[0]=null,An[1]=Kt,An[2]=jr,An[3]=Kr,U.ca=fe,U.tb=Se,U.c=m.width,U.i=m.height,e(0<U.c&&0<U.i),1>=X)m=0;else if(U.$a=3&W[G+0],U.Z=W[G+0]>>2&3,U.Lc=W[G+0]>>4&3,G=W[G+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||G)m=0;else if(_e.put=xt,_e.ac=ps,_e.bc=ts,_e.ma=U,_e.width=m.width,_e.height=m.height,_e.Da=m.Da,_e.v=m.v,_e.va=m.va,_e.j=m.j,_e.o=m.o,U.$a)e:{e(U.$a==1),m=va();t:for(;;){if(m==null){m=0;break e}if(e(U!=null),U.mc=m,m.c=U.c,m.i=U.i,m.l=U.l,m.l.ma=U,m.l.width=U.c,m.l.height=U.i,m.a=0,ne(m.m,W,Z,ye),!Os(U.c,U.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Is(m.s)?(U.ic=1,W=m.c*m.i,m.Ta=null,m.Ua=0,m.V=o(W),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(U.ic=0,m=Ji(m,U.c)),!m))break t;m=1;break e}U.mc=null,m=0}else m=ye>=U.c*U.i;U=!m}if(U)return null;f.ga.Lc!=1?f.Ga=0:k=F-_}e(f.ga!=null),e(_+k<=F);e:{if(m=(W=f.ga).c,F=W.l.o,W.$a==0){if(Z=f.rc,ye=f.Vc,_e=f.Fa,G=f.P+1+_*m,X=f.mb,fe=f.nb+_*m,e(G<=f.P+f.qc),W.Z!=0)for(e(An[W.Z]!=null),U=0;U<k;++U)An[W.Z](Z,ye,_e,G,X,fe,m),Z=X,ye=fe,fe+=m,G+=m;else for(U=0;U<k;++U)s(X,fe,_e,G,m),Z=X,ye=fe,fe+=m,G+=m;f.rc=Z,f.Vc=ye}else{if(e(W.mc!=null),m=_+k,e((U=W.mc)!=null),e(m<=U.i),U.C>=m)m=1;else if(W.ic||Fs(),W.ic){W=U.V,Z=U.Ba,ye=U.c;var Ce=U.i,je=(_e=1,G=U.$/ye,X=U.$%ye,fe=U.m,Se=U.s,U.$),Le=ye*Ce,Pe=ye*m,Oe=Se.wc,Re=je<Pe?Hr(Se,X,G):null;e(je<=Le),e(m<=Ce),e(Is(Se));t:for(;;){for(;!fe.h&&je<Pe;){if(X&Oe||(Re=Hr(Se,X,G)),e(Re!=null),re(fe),256>(Ce=mr(Re.G[0],Re.H[0],fe)))W[Z+je]=Ce,++je,++X>=ye&&(X=0,++G<=m&&!(G%16)&&vn(U,G));else{if(!(280>Ce)){_e=0;break t}Ce=kn(Ce-256,fe);var ct,Je=mr(Re.G[4],Re.H[4],fe);if(re(fe),!(je>=(Je=gs(ye,Je=kn(Je,fe)))&&Le-je>=Ce)){_e=0;break t}for(ct=0;ct<Ce;++ct)W[Z+je+ct]=W[Z+je+ct-Je];for(je+=Ce,X+=Ce;X>=ye;)X-=ye,++G<=m&&!(G%16)&&vn(U,G);je<Pe&&X&Oe&&(Re=Hr(Se,X,G))}e(fe.h==ie(fe))}vn(U,G>m?m:G);break t}!_e||fe.h&&je<Le?(_e=0,U.a=fe.h?5:3):U.$=je,m=_e}else m=ms(U,U.V,U.Ba,U.c,U.i,m,ya);if(!m){k=0;break e}}_+k>=F&&(f.Cc=1),k=1}if(!k)return null;if(f.Cc&&((k=f.ga)!=null&&(k.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+_*I}function nn(f,m,_,k,I,F){for(;0<I--;){var U,W=f,G=m+(_?1:0),X=f,fe=m+(_?0:3);for(U=0;U<k;++U){var Se=X[fe+4*U];Se!=255&&(Se*=32897,W[G+4*U+0]=W[G+4*U+0]*Se>>23,W[G+4*U+1]=W[G+4*U+1]*Se>>23,W[G+4*U+2]=W[G+4*U+2]*Se>>23)}m+=F}}function Fr(f,m,_,k,I){for(;0<k--;){var F;for(F=0;F<_;++F){var U=f[m+2*F+0],W=15&(X=f[m+2*F+1]),G=4369*W,X=(240&X|X>>4)*G>>16;f[m+2*F+0]=(240&U|U>>4)*G>>16&240|(15&U|U<<4)*G>>16>>4&15,f[m+2*F+1]=240&X|W}m+=I}}function yn(f,m,_,k,I,F,U,W){var G,X,fe=255;for(X=0;X<I;++X){for(G=0;G<k;++G){var Se=f[m+G];F[U+4*G]=Se,fe&=Se}m+=_,U+=W}return fe!=255}function Ni(f,m,_,k,I){var F;for(F=0;F<I;++F)_[k+F]=f[m+F]>>8}function Fs(){$a=nn,Uc=Fr,sl=yn,$c=Ni}function Si(f,m,_){Y[f]=function(k,I,F,U,W,G,X,fe,Se,Z,ye,_e,Ce,je,Le,Pe,Oe){var Re,ct=Oe-1>>1,Je=W[G+0]|X[fe+0]<<16,Ot=Se[Z+0]|ye[_e+0]<<16;e(k!=null);var Ze=3*Je+Ot+131074>>2;for(m(k[I+0],255&Ze,Ze>>16,Ce,je),F!=null&&(Ze=3*Ot+Je+131074>>2,m(F[U+0],255&Ze,Ze>>16,Le,Pe)),Re=1;Re<=ct;++Re){var Wt=W[G+Re]|X[fe+Re]<<16,Cr=Se[Z+Re]|ye[_e+Re]<<16,Dt=Je+Wt+Ot+Cr+524296,Ye=Dt+2*(Wt+Ot)>>3;Ze=Ye+Je>>1,Je=(Dt=Dt+2*(Je+Cr)>>3)+Wt>>1,m(k[I+2*Re-1],255&Ze,Ze>>16,Ce,je+(2*Re-1)*_),m(k[I+2*Re-0],255&Je,Je>>16,Ce,je+(2*Re-0)*_),F!=null&&(Ze=Dt+Ot>>1,Je=Ye+Cr>>1,m(F[U+2*Re-1],255&Ze,Ze>>16,Le,Pe+(2*Re-1)*_),m(F[U+2*Re+0],255&Je,Je>>16,Le,Pe+(2*Re+0)*_)),Je=Wt,Ot=Cr}1&Oe||(Ze=3*Je+Ot+131074>>2,m(k[I+Oe-1],255&Ze,Ze>>16,Ce,je+(Oe-1)*_),F!=null&&(Ze=3*Ot+Je+131074>>2,m(F[U+Oe-1],255&Ze,Ze>>16,Le,Pe+(Oe-1)*_)))}}function Ca(){Hn[Yl]=Zd,Hn[oa]=la,Hn[Du]=eh,Hn[il]=ko,Hn[al]=Ha,Hn[cr]=dl,Hn[Xl]=Yc,Hn[_o]=la,Hn[qa]=ko,Hn[ol]=Ha,Hn[ll]=dl}function po(f){return f&-16384?0>f?0:255:f>>ca}function Zi(f,m){return po((19077*f>>8)+(26149*m>>8)-14234)}function Ta(f,m,_){return po((19077*f>>8)-(6419*m>>8)-(13320*_>>8)+8708)}function ea(f,m){return po((19077*f>>8)+(33050*m>>8)-17685)}function ta(f,m,_,k,I){k[I+0]=Zi(f,_),k[I+1]=Ta(f,m,_),k[I+2]=ea(f,m)}function xn(f,m,_,k,I){k[I+0]=ea(f,m),k[I+1]=Ta(f,m,_),k[I+2]=Zi(f,_)}function Ia(f,m,_,k,I){var F=Ta(f,m,_);m=F<<3&224|ea(f,m)>>3,k[I+0]=248&Zi(f,_)|F>>5,k[I+1]=m}function Oa(f,m,_,k,I){var F=240&ea(f,m)|15;k[I+0]=240&Zi(f,_)|Ta(f,m,_)>>4,k[I+1]=F}function el(f,m,_,k,I){k[I+0]=255,ta(f,m,_,k,I+1)}function tl(f,m,_,k,I){xn(f,m,_,k,I),k[I+3]=255}function In(f,m,_,k,I){ta(f,m,_,k,I),k[I+3]=255}function Bs(f,m,_){Y[f]=function(k,I,F,U,W,G,X,fe,Se){for(var Z=fe+(-2&Se)*_;fe!=Z;)m(k[I+0],F[U+0],W[G+0],X,fe),m(k[I+1],F[U+0],W[G+0],X,fe+_),I+=2,++U,++G,fe+=2*_;1&Se&&m(k[I+0],F[U+0],W[G+0],X,fe)}}function oi(f,m,_){return _==0?f==0?m==0?6:5:m==0?4:0:_}function Gl(f,m,_,k,I){switch(f>>>30){case 3:Ma(m,_,k,I,0);break;case 2:Lr(m,_,k,I);break;case 1:Qt(m,_,k,I)}}function os(f,m){var _,k,I=m.M,F=m.Nb,U=f.oc,W=f.pc+40,G=f.oc,X=f.pc+584,fe=f.oc,Se=f.pc+600;for(_=0;16>_;++_)U[W+32*_-1]=129;for(_=0;8>_;++_)G[X+32*_-1]=129,fe[Se+32*_-1]=129;for(0<I?U[W-1-32]=G[X-1-32]=fe[Se-1-32]=129:(a(U,W-32-1,127,21),a(G,X-32-1,127,9),a(fe,Se-32-1,127,9)),k=0;k<f.za;++k){var Z=m.ya[m.aa+k];if(0<k){for(_=-1;16>_;++_)s(U,W+32*_-4,U,W+32*_+12,4);for(_=-1;8>_;++_)s(G,X+32*_-4,G,X+32*_+4,4),s(fe,Se+32*_-4,fe,Se+32*_+4,4)}var ye=f.Gd,_e=f.Hd+k,Ce=Z.ad,je=Z.Hc;if(0<I&&(s(U,W-32,ye[_e].y,0,16),s(G,X-32,ye[_e].f,0,8),s(fe,Se-32,ye[_e].ea,0,8)),Z.Za){var Le=U,Pe=W-32+16;for(0<I&&(k>=f.za-1?a(Le,Pe,ye[_e].y[15],4):s(Le,Pe,ye[_e+1].y,0,4)),_=0;4>_;_++)Le[Pe+128+_]=Le[Pe+256+_]=Le[Pe+384+_]=Le[Pe+0+_];for(_=0;16>_;++_,je<<=2)Le=U,Pe=W+Xc[_],ks[Z.Ob[_]](Le,Pe),Gl(je,Ce,16*+_,Le,Pe)}else if(Le=oi(k,I,Z.Ob[0]),Rn[Le](U,W),je!=0)for(_=0;16>_;++_,je<<=2)Gl(je,Ce,16*+_,U,W+Xc[_]);for(_=Z.Gc,Le=oi(k,I,Z.Dd),Wn[Le](G,X),Wn[Le](fe,Se),je=Ce,Le=G,Pe=X,255&(Z=0|_)&&(170&Z?zn(je,256,Le,Pe):ar(je,256,Le,Pe)),Z=fe,je=Se,255&(_>>=8)&&(170&_?zn(Ce,320,Z,je):ar(Ce,320,Z,je)),I<f.Ub-1&&(s(ye[_e].y,0,U,W+480,16),s(ye[_e].f,0,G,X+224,8),s(ye[_e].ea,0,fe,Se+224,8)),_=8*F*f.B,ye=f.sa,_e=f.ta+16*k+16*F*f.R,Ce=f.qa,Z=f.ra+8*k+_,je=f.Ha,Le=f.Ia+8*k+_,_=0;16>_;++_)s(ye,_e+_*f.R,U,W+32*_,16);for(_=0;8>_;++_)s(Ce,Z+_*f.B,G,X+32*_,8),s(je,Le+_*f.B,fe,Se+32*_,8)}}function ra(f,m,_,k,I,F,U,W,G){var X=[0],fe=[0],Se=0,Z=G!=null?G.kd:0,ye=G??new Fe;if(f==null||12>_)return 7;ye.data=f,ye.w=m,ye.ha=_,m=[m],_=[_],ye.gb=[ye.gb];e:{var _e=m,Ce=_,je=ye.gb;if(e(f!=null),e(Ce!=null),e(je!=null),je[0]=0,12<=Ce[0]&&!t(f,_e[0],"RIFF")){if(t(f,_e[0]+8,"WEBP")){je=3;break e}var Le=it(f,_e[0]+4);if(12>Le||4294967286<Le){je=3;break e}if(Z&&Le>Ce[0]-8){je=7;break e}je[0]=Le,_e[0]+=12,Ce[0]-=12}je=0}if(je!=0)return je;for(Le=0<ye.gb[0],_=_[0];;){e:{var Pe=f;Ce=m,je=_;var Oe=X,Re=fe,ct=_e=[0];if((Ze=Se=[Se])[0]=0,8>je[0])je=7;else{if(!t(Pe,Ce[0],"VP8X")){if(it(Pe,Ce[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var Je=it(Pe,Ce[0]+8),Ot=1+qe(Pe,Ce[0]+12);if(2147483648<=Ot*(Pe=1+qe(Pe,Ce[0]+15))){je=3;break e}ct!=null&&(ct[0]=Je),Oe!=null&&(Oe[0]=Ot),Re!=null&&(Re[0]=Pe),Ce[0]+=18,je[0]-=18,Ze[0]=1}je=0}}if(Se=Se[0],_e=_e[0],je!=0)return je;if(Ce=!!(2&_e),!Le&&Se)return 3;if(F!=null&&(F[0]=!!(16&_e)),U!=null&&(U[0]=Ce),W!=null&&(W[0]=0),U=X[0],_e=fe[0],Se&&Ce&&G==null){je=0;break}if(4>_){je=7;break}if(Le&&Se||!Le&&!Se&&!t(f,m[0],"ALPH")){_=[_],ye.na=[ye.na],ye.P=[ye.P],ye.Sa=[ye.Sa];e:{Je=f,je=m,Le=_;var Ze=ye.gb;Oe=ye.na,Re=ye.P,ct=ye.Sa,Ot=22,e(Je!=null),e(Le!=null),Pe=je[0];var Wt=Le[0];for(e(Oe!=null),e(ct!=null),Oe[0]=null,Re[0]=null,ct[0]=0;;){if(je[0]=Pe,Le[0]=Wt,8>Wt){je=7;break e}var Cr=it(Je,Pe+4);if(4294967286<Cr){je=3;break e}var Dt=8+Cr+1&-2;if(Ot+=Dt,0<Ze&&Ot>Ze){je=3;break e}if(!t(Je,Pe,"VP8 ")||!t(Je,Pe,"VP8L")){je=0;break e}if(Wt[0]<Dt){je=7;break e}t(Je,Pe,"ALPH")||(Oe[0]=Je,Re[0]=Pe+8,ct[0]=Cr),Pe+=Dt,Wt-=Dt}}if(_=_[0],ye.na=ye.na[0],ye.P=ye.P[0],ye.Sa=ye.Sa[0],je!=0)break}_=[_],ye.Ja=[ye.Ja],ye.xa=[ye.xa];e:if(Ze=f,je=m,Le=_,Oe=ye.gb[0],Re=ye.Ja,ct=ye.xa,Je=je[0],Pe=!t(Ze,Je,"VP8 "),Ot=!t(Ze,Je,"VP8L"),e(Ze!=null),e(Le!=null),e(Re!=null),e(ct!=null),8>Le[0])je=7;else{if(Pe||Ot){if(Ze=it(Ze,Je+4),12<=Oe&&Ze>Oe-12){je=3;break e}if(Z&&Ze>Le[0]-8){je=7;break e}Re[0]=Ze,je[0]+=8,Le[0]-=8,ct[0]=Ot}else ct[0]=5<=Le[0]&&Ze[Je+0]==47&&!(Ze[Je+4]>>5),Re[0]=Le[0];je=0}if(_=_[0],ye.Ja=ye.Ja[0],ye.xa=ye.xa[0],m=m[0],je!=0)break;if(4294967286<ye.Ja)return 3;if(W==null||Ce||(W[0]=ye.xa?2:1),U=[U],_e=[_e],ye.xa){if(5>_){je=7;break}W=U,Z=_e,Ce=F,f==null||5>_?f=0:5<=_&&f[m+0]==47&&!(f[m+4]>>5)?(Le=[0],Ze=[0],Oe=[0],ne(Re=new V,f,m,_),Ts(Re,Le,Ze,Oe)?(W!=null&&(W[0]=Le[0]),Z!=null&&(Z[0]=Ze[0]),Ce!=null&&(Ce[0]=Oe[0]),f=1):f=0):f=0}else{if(10>_){je=7;break}W=_e,f==null||10>_||!ba(f,m+3,_-3)?f=0:(Z=f[m+0]|f[m+1]<<8|f[m+2]<<16,Ce=16383&(f[m+7]<<8|f[m+6]),f=16383&(f[m+9]<<8|f[m+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=ye.Ja||!Ce||!f?f=0:(U&&(U[0]=Ce),W&&(W[0]=f),f=1))}if(!f||(U=U[0],_e=_e[0],Se&&(X[0]!=U||fe[0]!=_e)))return 3;G!=null&&(G[0]=ye,G.offset=m-G.w,e(4294967286>m-G.w),e(G.offset==G.ha-_));break}return je==0||je==7&&Se&&G==null?(F!=null&&(F[0]|=ye.na!=null&&0<ye.na.length),k!=null&&(k[0]=U),I!=null&&(I[0]=_e),0):je}function go(f,m,_){var k=m.width,I=m.height,F=0,U=0,W=k,G=I;if(m.Da=f!=null&&0<f.Da,m.Da&&(W=f.cd,G=f.bd,F=f.v,U=f.j,11>_||(F&=-2,U&=-2),0>F||0>U||0>=W||0>=G||F+W>k||U+G>I))return 0;if(m.v=F,m.j=U,m.va=F+W,m.o=U+G,m.U=W,m.T=G,m.da=f!=null&&0<f.da,m.da){if(!mt(W,G,_=[f.ib],F=[f.hb]))return 0;m.ib=_[0],m.hb=F[0]}return m.ob=f!=null&&f.ob,m.Kb=f==null||!f.Sd,m.da&&(m.ob=m.ib<3*k/4&&m.hb<3*I/4,m.Kb=0),1}function mo(f){if(f==null)return 2;if(11>f.S){var m=f.f.RGBA;m.fb+=(f.height-1)*m.A,m.A=-m.A}else m=f.f.kb,f=f.height,m.O+=(f-1)*m.fa,m.fa=-m.fa,m.N+=(f-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(f-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(f-1)*m.lb,m.lb=-m.lb);return 0}function ki(f,m,_,k){if(k==null||0>=f||0>=m)return 2;if(_!=null){if(_.Da){var I=_.cd,F=_.bd,U=-2&_.v,W=-2&_.j;if(0>U||0>W||0>=I||0>=F||U+I>f||W+F>m)return 2;f=I,m=F}if(_.da){if(!mt(f,m,I=[_.ib],F=[_.hb]))return 2;f=I[0],m=F[0]}}k.width=f,k.height=m;e:{var G=k.width,X=k.height;if(f=k.S,0>=G||0>=X||!(f>=Yl&&13>f))f=2;else{if(0>=k.Rd&&k.sd==null){U=F=I=m=0;var fe=(W=G*hl[f])*X;if(11>f||(F=(X+1)/2*(m=(G+1)/2),f==12&&(U=(I=G)*X)),(X=o(fe+2*F+U))==null){f=1;break e}k.sd=X,11>f?((G=k.f.RGBA).eb=X,G.fb=0,G.A=W,G.size=fe):((G=k.f.kb).y=X,G.O=0,G.fa=W,G.Fd=fe,G.f=X,G.N=0+fe,G.Ab=m,G.Cd=F,G.ea=X,G.W=0+fe+F,G.Db=m,G.Ed=F,f==12&&(G.F=X,G.J=0+fe+2*F),G.Tc=U,G.lb=I)}if(m=1,I=k.S,F=k.width,U=k.height,I>=Yl&&13>I)if(11>I)f=k.f.RGBA,m&=(W=Math.abs(f.A))*(U-1)+F<=f.size,m&=W>=F*hl[I],m&=f.eb!=null;else{f=k.f.kb,W=(F+1)/2,fe=(U+1)/2,G=Math.abs(f.fa),X=Math.abs(f.Ab);var Se=Math.abs(f.Db),Z=Math.abs(f.lb),ye=Z*(U-1)+F;m&=G*(U-1)+F<=f.Fd,m&=X*(fe-1)+W<=f.Cd,m=(m&=Se*(fe-1)+W<=f.Ed)&G>=F&X>=W&Se>=W,m&=f.y!=null,m&=f.f!=null,m&=f.ea!=null,I==12&&(m&=Z>=F,m&=ye<=f.Tc,m&=f.F!=null)}else m=0;f=m?0:2}}return f!=0||_!=null&&_.fd&&(f=mo(k)),f}var Ns=64,ls=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cs=24,na=32,li=8,ji=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ge("Predictor0","PredictorAdd0"),Y.Predictor0=function(){return 4278190080},Y.Predictor1=function(f){return f},Y.Predictor2=function(f,m,_){return m[_+0]},Y.Predictor3=function(f,m,_){return m[_+1]},Y.Predictor4=function(f,m,_){return m[_-1]},Y.Predictor5=function(f,m,_){return ft(ft(f,m[_+1]),m[_+0])},Y.Predictor6=function(f,m,_){return ft(f,m[_-1])},Y.Predictor7=function(f,m,_){return ft(f,m[_+0])},Y.Predictor8=function(f,m,_){return ft(m[_-1],m[_+0])},Y.Predictor9=function(f,m,_){return ft(m[_+0],m[_+1])},Y.Predictor10=function(f,m,_){return ft(ft(f,m[_-1]),ft(m[_+0],m[_+1]))},Y.Predictor11=function(f,m,_){var k=m[_+0];return 0>=Ct(k>>24&255,f>>24&255,(m=m[_-1])>>24&255)+Ct(k>>16&255,f>>16&255,m>>16&255)+Ct(k>>8&255,f>>8&255,m>>8&255)+Ct(255&k,255&f,255&m)?k:f},Y.Predictor12=function(f,m,_){var k=m[_+0];return(Yt((f>>24&255)+(k>>24&255)-((m=m[_-1])>>24&255))<<24|Yt((f>>16&255)+(k>>16&255)-(m>>16&255))<<16|Yt((f>>8&255)+(k>>8&255)-(m>>8&255))<<8|Yt((255&f)+(255&k)-(255&m)))>>>0},Y.Predictor13=function(f,m,_){var k=m[_-1];return($t((f=ft(f,m[_+0]))>>24&255,k>>24&255)<<24|$t(f>>16&255,k>>16&255)<<16|$t(f>>8&255,k>>8&255)<<8|$t(255&f,255&k))>>>0};var Ai=Y.PredictorAdd0;Y.PredictorAdd1=qt,Ge("Predictor2","PredictorAdd2"),Ge("Predictor3","PredictorAdd3"),Ge("Predictor4","PredictorAdd4"),Ge("Predictor5","PredictorAdd5"),Ge("Predictor6","PredictorAdd6"),Ge("Predictor7","PredictorAdd7"),Ge("Predictor8","PredictorAdd8"),Ge("Predictor9","PredictorAdd9"),Ge("Predictor10","PredictorAdd10"),Ge("Predictor11","PredictorAdd11"),Ge("Predictor12","PredictorAdd12"),Ge("Predictor13","PredictorAdd13");var ci=Y.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Br,Ra=Y.ColorIndexInverseTransform,ui=Y.MapARGB,Ms=Y.VP8LColorIndexInverseTransformAlpha,Da=Y.MapAlpha,Fa=Y.VP8LPredictorsAdd=[];Fa.length=16,(Y.VP8LPredictors=[]).length=16,(Y.VP8LPredictorsAdd_C=[]).length=16,(Y.VP8LPredictors_C=[]).length=16;var vo,yo,Ei,sa,ia,Ba,aa,Ma,Lr,zn,Qt,ar,Pr,Jr,Us,rl,xo,Li,Kl,wo,Jl,Mc,nl,Ua,$a,Uc,sl,$c,qc=o(511),zc=o(2041),Wc=o(225),Hc=o(767),Vc=0,di=zc,bo=Wc,On=Hc,Ss=qc,Yl=0,oa=1,Du=2,il=3,al=4,cr=5,Xl=6,_o=7,qa=8,ol=9,ll=10,cl=[2,3,7],Ql=[3,3,11],za=[280,256,256,256,40],Fu=[0,1,1,1,0],Jd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Bu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zl=8,No=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ul=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wa=null,Gc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Kc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Uu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Xd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Qd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Jc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Rn=[],ks=[],Wn=[],hi=1,So=2,An=[],Hn=[];Si("UpsampleRgbLinePair",ta,3),Si("UpsampleBgrLinePair",xn,3),Si("UpsampleRgbaLinePair",In,4),Si("UpsampleBgraLinePair",tl,4),Si("UpsampleArgbLinePair",el,4),Si("UpsampleRgba4444LinePair",Oa,2),Si("UpsampleRgb565LinePair",Ia,2);var Zd=Y.UpsampleRgbLinePair,eh=Y.UpsampleBgrLinePair,la=Y.UpsampleRgbaLinePair,ko=Y.UpsampleBgraLinePair,Ha=Y.UpsampleArgbLinePair,dl=Y.UpsampleRgba4444LinePair,Yc=Y.UpsampleRgb565LinePair,Pi=16,$s=1<<Pi-1,sr=-227,or=482,ca=6,wn=0,Vn=o(256),Va=o(256),jo=o(256),Gn=o(256),ec=o(or-sr),$u=o(or-sr);Bs("YuvToRgbRow",ta,3),Bs("YuvToBgrRow",xn,3),Bs("YuvToRgbaRow",In,4),Bs("YuvToBgraRow",tl,4),Bs("YuvToArgbRow",el,4),Bs("YuvToRgba4444Row",Oa,2),Bs("YuvToRgb565Row",Ia,2);var Xc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ga=[0,2,8],qu=[8,7,6,4,4,2,2,2,1,1,1,1],Ci=1;this.WebPDecodeRGBA=function(f,m,_,k,I){var F=oa,U=new Ie,W=new It;U.ba=W,W.S=F,W.width=[W.width],W.height=[W.height];var G=W.width,X=W.height,fe=new yt;if(fe==null||f==null)var Se=2;else e(fe!=null),Se=ra(f,m,_,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(Se!=0?G=0:(G!=null&&(G[0]=fe.width[0]),X!=null&&(X[0]=fe.height[0]),G=1),G){W.width=W.width[0],W.height=W.height[0],k!=null&&(k[0]=W.width),I!=null&&(I[0]=W.height);e:{if(k=new io,(I=new Fe).data=f,I.w=m,I.ha=_,I.kd=1,m=[0],e(I!=null),((f=ra(I.data,I.w,I.ha,null,null,null,m,null,I))==0||f==7)&&m[0]&&(f=4),(m=f)==0){if(e(U!=null),k.data=I.data,k.w=I.w+I.offset,k.ha=I.ha-I.offset,k.put=xt,k.ac=ps,k.bc=ts,k.ma=U,I.xa){if((f=va())==null){U=1;break e}if((function(Z,ye){var _e=[0],Ce=[0],je=[0];t:for(;;){if(Z==null)return 0;if(ye==null)return Z.a=2,0;if(Z.l=ye,Z.a=0,ne(Z.m,ye.data,ye.w,ye.ha),!Ts(Z.m,_e,Ce,je)){Z.a=3;break t}if(Z.xb=So,ye.width=_e[0],ye.height=Ce[0],!Os(_e[0],Ce[0],1,Z,null))break t;return 1}return e(Z.a!=0),0})(f,k)){if(k=(m=ki(k.width,k.height,U.Oa,U.ba))==0){t:{k=f;r:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((_=k.l)!=null),e((I=_.ma)!=null),k.xb!=0){if(k.ca=I.ba,k.tb=I.tb,e(k.ca!=null),!go(I.Oa,_,il)){k.a=2;break r}if(!Ji(k,_.width)||_.da)break r;if((_.da||vt(k.ca.S))&&Fs(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Fs()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Q(k.s.vb,k.s.Wa.Xa)){k.a=1;break r}k.xb=0}if(!ms(k,k.V,k.Ba,k.c,k.i,_.o,Ki))break r;I.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(m=f.a)}else m=f.a}else{if((f=new Fc)==null){U=1;break e}if(f.Fa=I.na,f.P=I.P,f.qc=I.Sa,is(f,k)){if((m=ki(k.width,k.height,U.Oa,U.ba))==0){if(f.Aa=0,_=U.Oa,e((I=f)!=null),_!=null){if(0<(G=0>(G=_.Md)?0:100<G?255:255*G/100)){for(X=fe=0;4>X;++X)12>(Se=I.pb[X]).lc&&(Se.ia=G*qu[0>Se.lc?0:Se.lc]>>3),fe|=Se.ia;fe&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=_.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function(Z,ye){if(Z==null)return 0;if(ye==null)return Gr(Z,2,"NULL VP8Io parameter in VP8Decode().");if(!Z.cb&&!is(Z,ye))return 0;if(e(Z.cb),ye.ac==null||ye.ac(ye)){ye.ob&&(Z.L=0);var _e=Ga[Z.L];if(Z.L==2?(Z.yb=0,Z.zb=0):(Z.yb=ye.v-_e>>4,Z.zb=ye.j-_e>>4,0>Z.yb&&(Z.yb=0),0>Z.zb&&(Z.zb=0)),Z.Va=ye.o+15+_e>>4,Z.Hb=ye.va+15+_e>>4,Z.Hb>Z.za&&(Z.Hb=Z.za),Z.Va>Z.Ub&&(Z.Va=Z.Ub),0<Z.L){var Ce=Z.ed;for(_e=0;4>_e;++_e){var je;if(Z.Qa.Cb){var Le=Z.Qa.Lb[_e];Z.Qa.Fb||(Le+=Ce.Tb)}else Le=Ce.Tb;for(je=0;1>=je;++je){var Pe=Z.gd[_e][je],Oe=Le;if(Ce.Pc&&(Oe+=Ce.vd[0],je&&(Oe+=Ce.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Re=Oe;0<Ce.wb&&(Re=4<Ce.wb?Re>>2:Re>>1)>9-Ce.wb&&(Re=9-Ce.wb),1>Re&&(Re=1),Pe.dd=Re,Pe.tc=2*Oe+Re,Pe.ld=40<=Oe?2:15<=Oe?1:0}else Pe.tc=0;Pe.La=je}}}_e=0}else Gr(Z,6,"Frame setup failed"),_e=Z.a;if(_e=_e==0){if(_e){Z.$c=0,0<Z.Aa||(Z.Ic=Ci);t:{_e=Z.Ic,Ce=4*(Re=Z.za);var ct=32*Re,Je=Re+1,Ot=0<Z.L?Re*(0<Z.Aa?2:1):0,Ze=(Z.Aa==2?2:1)*Re;if((Pe=Ce+832+(je=3*(16*_e+Ga[Z.L])/2*ct)+(Le=Z.Fa!=null&&0<Z.Fa.length?Z.Kc.c*Z.Kc.i:0))!=Pe)_e=0;else{if(Pe>Z.Vb){if(Z.Vb=0,Z.Ec=o(Pe),Z.Fc=0,Z.Ec==null){_e=Gr(Z,1,"no memory during frame initialization.");break t}Z.Vb=Pe}Pe=Z.Ec,Oe=Z.Fc,Z.Ac=Pe,Z.Bc=Oe,Oe+=Ce,Z.Gd=c(ct,ss),Z.Hd=0,Z.rb=c(Je+1,Yi),Z.sb=1,Z.wa=Ot?c(Ot,ns):null,Z.Y=0,Z.D.Nb=0,Z.D.wa=Z.wa,Z.D.Y=Z.Y,0<Z.Aa&&(Z.D.Y+=Re),e(!0),Z.oc=Pe,Z.pc=Oe,Oe+=832,Z.ya=c(Ze,so),Z.aa=0,Z.D.ya=Z.ya,Z.D.aa=Z.aa,Z.Aa==2&&(Z.D.aa+=Re),Z.R=16*Re,Z.B=8*Re,Re=(ct=Ga[Z.L])*Z.R,ct=ct/2*Z.B,Z.sa=Pe,Z.ta=Oe+Re,Z.qa=Z.sa,Z.ra=Z.ta+16*_e*Z.R+ct,Z.Ha=Z.qa,Z.Ia=Z.ra+8*_e*Z.B+ct,Z.$c=0,Oe+=je,Z.mb=Le?Pe:null,Z.nb=Le?Oe:null,e(Oe+Le<=Z.Fc+Z.Vb),_a(Z),a(Z.Ac,Z.Bc,0,Ce),_e=1}}if(_e){if(ye.ka=0,ye.y=Z.sa,ye.O=Z.ta,ye.f=Z.qa,ye.N=Z.ra,ye.ea=Z.Ha,ye.Vd=Z.Ia,ye.fa=Z.R,ye.Rc=Z.B,ye.F=null,ye.J=0,!Vc){for(_e=-255;255>=_e;++_e)qc[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)zc[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)Wc[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)Hc[255+_e]=0>_e?0:255<_e?255:_e;Vc=1}aa=Sa,Ma=Na,zn=ni,Qt=ao,ar=Jt,Lr=Ko,Pr=jn,Jr=_s,Us=O,rl=ee,xo=fo,Li=x,Kl=de,wo=be,Jl=_i,Mc=Qi,nl=Zo,Ua=Pa,ks[0]=Hl,ks[1]=Jo,ks[2]=ii,ks[3]=Bc,ks[4]=as,ks[5]=Vl,ks[6]=bi,ks[7]=co,ks[8]=Yo,ks[9]=ja,Rn[0]=si,Rn[1]=Wl,Rn[2]=oo,Rn[3]=lo,Rn[4]=$n,Rn[5]=ys,Rn[6]=ka,Wn[0]=uo,Wn[1]=zl,Wn[2]=Ds,Wn[3]=Aa,Wn[4]=Qo,Wn[5]=Xo,Wn[6]=ho,_e=1}else _e=0}_e&&(_e=(function(Wt,Cr){for(Wt.M=0;Wt.M<Wt.Va;++Wt.M){var Dt,Ye=Wt.Jc[Wt.M&Wt.Xb],He=Wt.m,Mr=Wt;for(Dt=0;Dt<Mr.za;++Dt){var kt=He,zt=Mr,yr=zt.Ac,dn=zt.Bc+4*Dt,Yr=zt.zc,Ar=zt.ya[zt.aa+Dt];if(zt.Qa.Bb?Ar.$b=Ne(kt,zt.Pa.jb[0])?2+Ne(kt,zt.Pa.jb[2]):Ne(kt,zt.Pa.jb[1]):Ar.$b=0,zt.kc&&(Ar.Ad=Ne(kt,zt.Bd)),Ar.Za=!Ne(kt,145)+0,Ar.Za){var sn=Ar.Ob,hn=0;for(zt=0;4>zt;++zt){var _r,Vt=Yr[0+zt];for(_r=0;4>_r;++_r){Vt=Xd[yr[dn+_r]][Vt];for(var Zt=Mu[Ne(kt,Vt[0])];0<Zt;)Zt=Mu[2*Zt+Ne(kt,Vt[Zt])];Vt=-Zt,yr[dn+_r]=Vt}s(sn,hn,yr,dn,4),hn+=4,Yr[0+zt]=Vt}}else Vt=Ne(kt,156)?Ne(kt,128)?1:3:Ne(kt,163)?2:0,Ar.Ob[0]=Vt,a(yr,dn,Vt,4),a(Yr,0,Vt,4);Ar.Dd=Ne(kt,142)?Ne(kt,114)?Ne(kt,183)?1:3:2:0}if(Mr.m.Ka)return Gr(Wt,7,"Premature end-of-partition0 encountered.");for(;Wt.ja<Wt.za;++Wt.ja){if(Mr=Ye,kt=(He=Wt).rb[He.sb-1],yr=He.rb[He.sb+He.ja],Dt=He.ya[He.aa+He.ja],dn=He.kc?Dt.Ad:0)kt.la=yr.la=0,Dt.Za||(kt.Na=yr.Na=0),Dt.Hc=0,Dt.Gc=0,Dt.ia=0;else{var Nr,er;if(kt=yr,yr=Mr,dn=He.Pa.Xc,Yr=He.ya[He.aa+He.ja],Ar=He.pb[Yr.$b],zt=Yr.ad,sn=0,hn=He.rb[He.sb-1],Vt=_r=0,a(zt,sn,0,384),Yr.Za)var Tr=0,Ir=dn[3];else{Zt=o(16);var ur=kt.Na+hn.Na;if(ur=Wa(yr,dn[1],ur,Ar.Eb,0,Zt,0),kt.Na=hn.Na=(0<ur)+0,1<ur)aa(Zt,0,zt,sn);else{var En=Zt[0]+3>>3;for(Zt=0;256>Zt;Zt+=16)zt[sn+Zt]=En}Tr=1,Ir=dn[0]}var lr=15&kt.la,dr=15&hn.la;for(Zt=0;4>Zt;++Zt){var Xr=1&dr;for(En=er=0;4>En;++En)lr=lr>>1|(Xr=(ur=Wa(yr,Ir,ur=Xr+(1&lr),Ar.Sc,Tr,zt,sn))>Tr)<<7,er=er<<2|(3<ur?3:1<ur?2:zt[sn+0]!=0),sn+=16;lr>>=4,dr=dr>>1|Xr<<7,_r=(_r<<8|er)>>>0}for(Ir=lr,Tr=dr>>4,Nr=0;4>Nr;Nr+=2){for(er=0,lr=kt.la>>4+Nr,dr=hn.la>>4+Nr,Zt=0;2>Zt;++Zt){for(Xr=1&dr,En=0;2>En;++En)ur=Xr+(1&lr),lr=lr>>1|(Xr=0<(ur=Wa(yr,dn[2],ur,Ar.Qc,0,zt,sn)))<<3,er=er<<2|(3<ur?3:1<ur?2:zt[sn+0]!=0),sn+=16;lr>>=2,dr=dr>>1|Xr<<5}Vt|=er<<4*Nr,Ir|=lr<<4<<Nr,Tr|=(240&dr)<<Nr}kt.la=Ir,hn.la=Tr,Yr.Hc=_r,Yr.Gc=Vt,Yr.ia=43690&Vt?0:Ar.ia,dn=!(_r|Vt)}if(0<He.L&&(He.wa[He.Y+He.ja]=He.gd[Dt.$b][Dt.Za],He.wa[He.Y+He.ja].La|=!dn),Mr.Ka)return Gr(Wt,7,"Premature end-of-file encountered.")}if(_a(Wt),He=Cr,Mr=1,Dt=(Ye=Wt).D,kt=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)t:{if(Dt.M=Ye.M,Dt.uc=kt,os(Ye,Dt),Mr=1,Dt=(er=Ye.D).Nb,kt=(Vt=Ga[Ye.L])*Ye.R,yr=Vt/2*Ye.B,Zt=16*Dt*Ye.R,En=8*Dt*Ye.B,dn=Ye.sa,Yr=Ye.ta-kt+Zt,Ar=Ye.qa,zt=Ye.ra-yr+En,sn=Ye.Ha,hn=Ye.Ia-yr+En,dr=(lr=er.M)==0,_r=lr>=Ye.Va-1,Ye.Aa==2&&os(Ye,er),er.uc)for(Xr=(ur=Ye).D.M,e(ur.D.uc),er=ur.yb;er<ur.Hb;++er){Tr=er,Ir=Xr;var bn=(Kn=(qr=ur).D).Nb;Nr=qr.R;var Kn=Kn.wa[Kn.Y+Tr],Ur=qr.sa,$r=qr.ta+16*bn*Nr+16*Tr,Ln=Kn.dd,hr=Kn.tc;if(hr!=0)if(e(3<=hr),qr.L==1)0<Tr&&Mc(Ur,$r,Nr,hr+4),Kn.La&&Ua(Ur,$r,Nr,hr),0<Ir&&Jl(Ur,$r,Nr,hr+4),Kn.La&&nl(Ur,$r,Nr,hr);else{var Pn=qr.B,js=qr.qa,qs=qr.ra+8*bn*Pn+8*Tr,fn=qr.Ha,qr=qr.Ia+8*bn*Pn+8*Tr;bn=Kn.ld,0<Tr&&(Jr(Ur,$r,Nr,hr+4,Ln,bn),rl(js,qs,fn,qr,Pn,hr+4,Ln,bn)),Kn.La&&(Li(Ur,$r,Nr,hr,Ln,bn),wo(js,qs,fn,qr,Pn,hr,Ln,bn)),0<Ir&&(Pr(Ur,$r,Nr,hr+4,Ln,bn),Us(js,qs,fn,qr,Pn,hr+4,Ln,bn)),Kn.La&&(xo(Ur,$r,Nr,hr,Ln,bn),Kl(js,qs,fn,qr,Pn,hr,Ln,bn))}}if(Ye.ia&&alert("todo:DitherRow"),He.put!=null){if(er=16*lr,lr=16*(lr+1),dr?(He.y=Ye.sa,He.O=Ye.ta+Zt,He.f=Ye.qa,He.N=Ye.ra+En,He.ea=Ye.Ha,He.W=Ye.Ia+En):(er-=Vt,He.y=dn,He.O=Yr,He.f=Ar,He.N=zt,He.ea=sn,He.W=hn),_r||(lr-=Vt),lr>He.o&&(lr=He.o),He.F=null,He.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&er<lr&&(He.J=vr(Ye,He,er,lr-er),He.F=Ye.mb,He.F==null&&He.F.length==0)){Mr=Gr(Ye,3,"Could not decode alpha data.");break t}er<He.j&&(Vt=He.j-er,er=He.j,e(!(1&Vt)),He.O+=Ye.R*Vt,He.N+=Ye.B*(Vt>>1),He.W+=Ye.B*(Vt>>1),He.F!=null&&(He.J+=He.width*Vt)),er<lr&&(He.O+=He.v,He.N+=He.v>>1,He.W+=He.v>>1,He.F!=null&&(He.J+=He.v),He.ka=er-He.j,He.U=He.va-He.v,He.T=lr-er,Mr=He.put(He))}Dt+1!=Ye.Ic||_r||(s(Ye.sa,Ye.ta-kt,dn,Yr+16*Ye.R,kt),s(Ye.qa,Ye.ra-yr,Ar,zt+8*Ye.B,yr),s(Ye.Ha,Ye.Ia-yr,sn,hn+8*Ye.B,yr))}if(!Mr)return Gr(Wt,6,"Output aborted.")}return 1})(Z,ye)),ye.bc!=null&&ye.bc(ye),_e&=1}return _e?(Z.cb=0,_e):0})(f,k)||(m=f.a)}}else m=f.a}m==0&&U.Oa!=null&&U.Oa.fd&&(m=mo(U.ba))}U=m}F=U!=0?null:11>F?W.f.RGBA.eb:W.f.kb.y}else F=null;return F};var hl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(Y,me){for(var M="",z=0;z<4;z++)M+=String.fromCharCode(Y[me++]);return M}function v(Y,me){return Y[me+0]|Y[me+1]<<8}function N(Y,me){return(Y[me+0]|Y[me+1]<<8|Y[me+2]<<16)>>>0}function b(Y,me){return(Y[me+0]|Y[me+1]<<8|Y[me+2]<<16|Y[me+3]<<24)>>>0}new h;var y=[0],L=[0],A=[],P=new h,T=r,R=(function(Y,me){var M={},z=0,B=!1,K=0,ge=0;if(M.frames=[],!(function(E,V){for(var q=0;q<4;q++)if(E[V+q]!="RIFF".charCodeAt(q))return!0;return!1})(Y,me)){for(b(Y,me+=4),me+=8;me<Y.length;){var ue=g(Y,me),we=b(Y,me+=4);me+=4;var ae=we+(1&we);switch(ue){case"VP8 ":case"VP8L":M.frames[z]===void 0&&(M.frames[z]={}),(H=M.frames[z]).src_off=B?ge:me-8,H.src_size=K+we+8,z++,B&&(B=!1,K=0,ge=0);break;case"VP8X":(H=M.header={}).feature_flags=Y[me];var ne=me+4;H.canvas_width=1+N(Y,ne),ne+=3,H.canvas_height=1+N(Y,ne),ne+=3;break;case"ALPH":B=!0,K=ae+8,ge=me-8;break;case"ANIM":(H=M.header).bgcolor=b(Y,me),ne=me+4,H.loop_count=v(Y,ne),ne+=2;break;case"ANMF":var te,H;(H=M.frames[z]={}).offset_x=2*N(Y,me),me+=3,H.offset_y=2*N(Y,me),me+=3,H.width=1+N(Y,me),me+=3,H.height=1+N(Y,me),me+=3,H.duration=N(Y,me),me+=3,te=Y[me++],H.dispose=1&te,H.blend=te>>1&1}ue!="ANMF"&&(me+=ae)}return M}})(T,0);R.response=T,R.rgbaoutput=!0,R.dataurl=!1;var C=R.header?R.header:null,j=R.frames?R.frames:null;if(C){C.loop_counter=C.loop_count,y=[C.canvas_height],L=[C.canvas_width];for(var J=0;J<j.length&&j[J].blend!=0;J++);}var $=j[0],le=P.WebPDecodeRGBA(T,$.src_off,$.src_size,L,y);$.rgba=le,$.imgwidth=L[0],$.imgheight=y[0];for(var se=0;se<L[0]*y[0]*4;se++)A[se]=le[se];return this.width=L,this.height=y,this.data=A,this}(function(r){var e,t,s,a,o,c,d,h,g,v=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new h,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new c,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new c,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new N(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,g=new v}]);var N=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=E;Object.defineProperty(this,"pdf",{get:function(){return V}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(Q){q=!!Q}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Q){ie=!!Q}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Q){isNaN(Q)||(ce=Q)}});var re=0;Object.defineProperty(this,"posY",{get:function(){return re},set:function(Q){isNaN(Q)||(re=Q)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(Q){var Ve;typeof Q=="number"?Ve=[Q,Q,Q,Q]:((Ve=new Array(4))[0]=Q[0],Ve[1]=Q.length>=2?Q[1]:Ve[0],Ve[2]=Q.length>=3?Q[2]:Ve[0],Ve[3]=Q.length>=4?Q[3]:Ve[1]),g.margin=Ve}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Q){he=Q}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(Q){ve=Q}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(Q){Ne=Q}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(Q){Q instanceof v&&(g=Q)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(Q){g.path=Q}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Q){De=Q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Q){var Ve;Ve=b(Q),this.ctx.fillStyle=Ve.style,this.ctx.isFillTransparent=Ve.a===0,this.ctx.fillOpacity=Ve.a,this.pdf.setFillColor(Ve.r,Ve.g,Ve.b,{a:Ve.a}),this.pdf.setTextColor(Ve.r,Ve.g,Ve.b,{a:Ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Q){var Ve=b(Q);this.ctx.strokeStyle=Ve.style,this.ctx.isStrokeTransparent=Ve.a===0,this.ctx.strokeOpacity=Ve.a,Ve.a===0?this.pdf.setDrawColor(255,255,255):(Ve.a,this.pdf.setDrawColor(Ve.r,Ve.g,Ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Q){["butt","round","square"].indexOf(Q)!==-1&&(this.ctx.lineCap=Q,this.pdf.setLineCap(Q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Q){isNaN(Q)||(this.ctx.lineWidth=Q,this.pdf.setLineWidth(Q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Q){["bevel","round","miter"].indexOf(Q)!==-1&&(this.ctx.lineJoin=Q,this.pdf.setLineJoin(Q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Q){isNaN(Q)||(this.ctx.miterLimit=Q,this.pdf.setMiterLimit(Q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Q){this.ctx.textBaseline=Q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Q){["right","end","center","left","start"].indexOf(Q)!==-1&&(this.ctx.textAlign=Q)}});var We=null,qe=null,it=null;Object.defineProperty(this,"fontFaces",{get:function(){return it},set:function(Q){We=null,qe=null,it=Q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Q){var Ve;if(this.ctx.font=Q,(Ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Q))!==null){var Rt=Ve[1];Ve[2];var mt=Ve[3],Be=Ve[4];Ve[5];var ht=Ve[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(Ge==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var gt=(function(rt){var Rr,Gt,Bt=[],Ut=rt.trim();if(Ut==="")return mf;if(Ut in Fg)return[Fg[Ut]];for(;Ut!=="";){switch(Gt=null,Rr=(Ut=Mg(Ut)).charAt(0)){case'"':case"'":Gt=Pw(Ut.substring(1),Rr);break;default:Gt=Cw(Ut)}if(Gt===null||(Bt.push(Gt[0]),(Ut=Mg(Gt[1]))!==""&&Ut.charAt(0)!==","))return mf;Ut=Ut.replace(/^,/,"")}return Bt})(ht);if(this.fontFaces){var ft=(function(rt,Rr){var Gt=rt.getFontList(),Bt=JSON.stringify(Gt);if(We===null||qe!==Bt){var Ut=(function(gr){var pt=[];return Object.keys(gr).forEach(function(ir){gr[ir].forEach(function(vt){var Et=null;switch(vt){case"bold":Et={family:ir,weight:"bold"};break;case"italic":Et={family:ir,style:"italic"};break;case"bolditalic":Et={family:ir,weight:"bold",style:"italic"};break;case"":case"normal":Et={family:ir}}Et!==null&&(Et.ref={name:ir,style:vt},pt.push(Et))})}),pt})(Gt);We=(function(gr){for(var pt={},ir=0;ir<gr.length;++ir){var vt=gf(gr[ir]),Et=vt.family,nr=vt.stretch,It=vt.style,yt=vt.weight;pt[Et]=pt[Et]||{},pt[Et][nr]=pt[Et][nr]||{},pt[Et][nr][It]=pt[Et][nr][It]||{},pt[Et][nr][It][yt]=vt}return pt})(Ut.concat(Rr)),qe=Bt}return We})(this.pdf,this.fontFaces),Yt=gt.map(function(rt){return{family:rt,stretch:"normal",weight:mt,style:Rt}}),$t=(function(rt,Rr,Gt){for(var Bt=(Gt=Gt||{}).defaultFontFamily||"times",Ut=Object.assign({},Lw,Gt.genericFontFamilies||{}),gr=null,pt=null,ir=0;ir<Rr.length;++ir)if(Ut[(gr=gf(Rr[ir])).family]&&(gr.family=Ut[gr.family]),rt.hasOwnProperty(gr.family)){pt=rt[gr.family];break}if(!(pt=pt||rt[Bt]))throw new Error("Could not find a font-family for the rule '"+Bg(gr)+"' and default family '"+Bt+"'.");if(pt=(function(vt,Et){if(Et[vt])return Et[vt];var nr=Vf[vt],It=nr<=Vf.normal?-1:1,yt=Dg(Et,a1,nr,It);if(!yt)throw new Error("Could not find a matching font-stretch value for "+vt);return yt})(gr.stretch,pt),pt=(function(vt,Et){if(Et[vt])return Et[vt];for(var nr=i1[vt],It=0;It<nr.length;++It)if(Et[nr[It]])return Et[nr[It]];throw new Error("Could not find a matching font-style for "+vt)})(gr.style,pt),!(pt=(function(vt,Et){if(Et[vt])return Et[vt];if(vt===400&&Et[500])return Et[500];if(vt===500&&Et[400])return Et[400];var nr=Ew[vt],It=Dg(Et,o1,nr,vt<400?-1:1);if(!It)throw new Error("Could not find a matching font-weight for value "+vt);return It})(gr.weight,pt)))throw new Error("Failed to resolve a font for the rule '"+Bg(gr)+"'.");return pt})(ft,Yt);this.pdf.setFont($t.ref.name,$t.ref.style)}else{var Ct="";(mt==="bold"||parseInt(mt,10)>=700||Rt==="bold")&&(Ct="bold"),Rt==="italic"&&(Ct+="italic"),Ct.length===0&&(Ct="normal");for(var qt="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},at=0;at<gt.length;at++){if(this.pdf.internal.getFont(gt[at],Ct,{noFallback:!0,disableWarning:!0})!==void 0){qt=gt[at];break}if(Ct==="bolditalic"&&this.pdf.internal.getFont(gt[at],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=gt[at],Ct="bold";else if(this.pdf.internal.getFont(gt[at],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=gt[at],Ct="normal";break}}if(qt===""){for(var jt=0;jt<gt.length;jt++)if(Mt[gt[jt]]){qt=Mt[gt[jt]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Q){this.ctx.globalCompositeOperation=Q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Q){this.ctx.globalAlpha=Q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Q){this.ctx.lineDashOffset=Q,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Q){this.ctx.lineDash=Q,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Q){this.ctx.ignoreClearRect=!!Q}})};N.prototype.setLineDash=function(E){this.lineDash=E},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){j.call(this,"fill",!1)},N.prototype.stroke=function(){j.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(E,V){if(isNaN(E)||isNaN(V))throw br.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new c(E,V));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new c(E,V)},N.prototype.closePath=function(){var E=new c(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&pr(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){E=new c(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(E.x,E.y)},N.prototype.lineTo=function(E,V){if(isNaN(E)||isNaN(V))throw br.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new c(E,V));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new c(q.x,q.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},N.prototype.quadraticCurveTo=function(E,V,q,ie){if(isNaN(q)||isNaN(ie)||isNaN(E)||isNaN(V))throw br.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new c(q,ie)),re=this.ctx.transform.applyToPoint(new c(E,V));this.path.push({type:"qct",x1:re.x,y1:re.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new c(ce.x,ce.y)},N.prototype.bezierCurveTo=function(E,V,q,ie,ce,re){if(isNaN(ce)||isNaN(re)||isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie))throw br.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new c(ce,re)),ve=this.ctx.transform.applyToPoint(new c(E,V)),Ne=this.ctx.transform.applyToPoint(new c(q,ie));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:Ne.x,y2:Ne.y,x:he.x,y:he.y}),this.ctx.lastPoint=new c(he.x,he.y)},N.prototype.arc=function(E,V,q,ie,ce,re){if(isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie)||isNaN(ce))throw br.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(re=!!re,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new c(E,V));E=he.x,V=he.y;var ve=this.ctx.transform.applyToPoint(new c(0,q)),Ne=this.ctx.transform.applyToPoint(new c(0,0));q=Math.sqrt(Math.pow(ve.x-Ne.x,2)+Math.pow(ve.y-Ne.y,2))}Math.abs(ce-ie)>=2*Math.PI&&(ie=0,ce=2*Math.PI),this.path.push({type:"arc",x:E,y:V,radius:q,startAngle:ie,endAngle:ce,counterclockwise:re})},N.prototype.arcTo=function(E,V,q,ie,ce){throw new Error("arcTo not implemented.")},N.prototype.rect=function(E,V,q,ie){if(isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie))throw br.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,V),this.lineTo(E+q,V),this.lineTo(E+q,V+ie),this.lineTo(E,V+ie),this.lineTo(E,V),this.lineTo(E+q,V),this.lineTo(E,V)},N.prototype.fillRect=function(E,V,q,ie){if(isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie))throw br.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,V,q,ie),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},N.prototype.strokeRect=function(E,V,q,ie){if(isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie))throw br.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(E,V,q,ie),this.stroke())},N.prototype.clearRect=function(E,V,q,ie){if(isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie))throw br.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,V,q,ie))},N.prototype.save=function(E){E=typeof E!="boolean"||E;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},N.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(V),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(E){var V,q,ie,ce;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))V=0,q=0,ie=0,ce=0;else{var re=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(re!==null)V=parseInt(re[1]),q=parseInt(re[2]),ie=parseInt(re[3]),ce=1;else if((re=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)V=parseInt(re[1]),q=parseInt(re[2]),ie=parseInt(re[3]),ce=parseFloat(re[4]);else{if(ce=1,typeof E=="string"&&E.charAt(0)!=="#"){var he=new Qm(E);E=he.ok?he.toHex():"#000000"}E.length===4?(V=E.substring(1,2),V+=V,q=E.substring(2,3),q+=q,ie=E.substring(3,4),ie+=ie):(V=E.substring(1,3),q=E.substring(3,5),ie=E.substring(5,7)),V=parseInt(V,16),q=parseInt(q,16),ie=parseInt(ie,16)}}return{r:V,g:q,b:ie,a:ce,style:E}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},L=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(E,V,q,ie){if(isNaN(V)||isNaN(q)||typeof E!="string")throw br.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!y.call(this)){var ce=ae(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;z.call(this,{text:E,x:V,y:q,scale:re,angle:ce,align:this.textAlign,maxWidth:ie})}},N.prototype.strokeText=function(E,V,q,ie){if(isNaN(V)||isNaN(q)||typeof E!="string")throw br.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){ie=isNaN(ie)?void 0:ie;var ce=ae(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;z.call(this,{text:E,x:V,y:q,scale:re,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ie})}},N.prototype.measureText=function(E){if(typeof E!="string")throw br.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,q=this.pdf.internal.scaleFactor,ie=V.internal.getFontSize(),ce=V.getStringUnitWidth(E)*ie/V.internal.scaleFactor;return new function(re){var he=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:ce*=Math.round(96*q/72*1e4)/1e4})},N.prototype.scale=function(E,V){if(isNaN(E)||isNaN(V))throw br.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new h(E,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},N.prototype.rotate=function(E){if(isNaN(E))throw br.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new h(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},N.prototype.translate=function(E,V){if(isNaN(E)||isNaN(V))throw br.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new h(1,0,0,1,E,V);this.ctx.transform=this.ctx.transform.multiply(q)},N.prototype.transform=function(E,V,q,ie,ce,re){if(isNaN(E)||isNaN(V)||isNaN(q)||isNaN(ie)||isNaN(ce)||isNaN(re))throw br.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new h(E,V,q,ie,ce,re);this.ctx.transform=this.ctx.transform.multiply(he)},N.prototype.setTransform=function(E,V,q,ie,ce,re){E=isNaN(E)?1:E,V=isNaN(V)?0:V,q=isNaN(q)?0:q,ie=isNaN(ie)?1:ie,ce=isNaN(ce)?0:ce,re=isNaN(re)?0:re,this.ctx.transform=new h(E,V,q,ie,ce,re)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(E,V,q,ie,ce,re,he,ve,Ne){var De=this.pdf.getImageProperties(E),We=1,qe=1,it=1,Q=1;ie!==void 0&&ve!==void 0&&(it=ve/ie,Q=Ne/ce,We=De.width/ie*ve/ie,qe=De.height/ce*Ne/ce),re===void 0&&(re=V,he=q,V=0,q=0),ie!==void 0&&ve===void 0&&(ve=ie,Ne=ce),ie===void 0&&ve===void 0&&(ve=De.width,Ne=De.height);var Ve=this.ctx.transform.decompose(),Rt=ae(Ve.rotate.shx),mt=new h,Be=(mt=(mt=(mt=mt.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale)).applyToRectangle(new d(re-V*it,he-q*Q,ie*We,ce*qe));if(this.autoPaging){for(var ht,Ge=P.call(this,Be),gt=[],ft=0;ft<Ge.length;ft+=1)gt.indexOf(Ge[ft])===-1&&gt.push(Ge[ft]);C(gt);for(var Yt=gt[0],$t=gt[gt.length-1],Ct=Yt;Ct<$t+1;Ct++){this.pdf.setPage(Ct);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Ct===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Ct===1?0:at+(Ct-2)*jt;if(this.ctx.clip_path.length!==0){var Rr=this.path;ht=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ht,this.posX+this.margin[3],-rt+Mt+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=Rr}var Gt=JSON.parse(JSON.stringify(Be));Gt=R([Gt],this.posX+this.margin[3],-rt+Mt+this.ctx.prevPageLastElemOffset)[0];var Bt=(Ct>Yt||Ct<$t)&&A.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,jt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,Rt),Bt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(E,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,Rt)};var P=function(E,V,q){var ie=[];V=V||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":ie.push(Math.floor((E.y+ce)/q)+1);break;case"arc":ie.push(Math.floor((E.y+ce-E.radius)/q)+1),ie.push(Math.floor((E.y+ce+E.radius)/q)+1);break;case"qct":var re=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);ie.push(Math.floor((re.y+ce)/q)+1),ie.push(Math.floor((re.y+re.h+ce)/q)+1);break;case"bct":var he=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);ie.push(Math.floor((he.y+ce)/q)+1),ie.push(Math.floor((he.y+he.h+ce)/q)+1);break;case"rect":ie.push(Math.floor((E.y+ce)/q)+1),ie.push(Math.floor((E.y+E.h+ce)/q)+1)}for(var ve=0;ve<ie.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<ie[ve];)T.call(this);return ie},T=function(){var E=this.fillStyle,V=this.strokeStyle,q=this.font,ie=this.lineCap,ce=this.lineWidth,re=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=V,this.font=q,this.lineCap=ie,this.lineWidth=ce,this.lineJoin=re},R=function(E,V,q){for(var ie=0;ie<E.length;ie++)switch(E[ie].type){case"bct":E[ie].x2+=V,E[ie].y2+=q;case"qct":E[ie].x1+=V,E[ie].y1+=q;default:E[ie].x+=V,E[ie].y+=q}return E},C=function(E){return E.sort(function(V,q){return V-q})},j=function(E,V){var q=this.fillStyle,ie=this.strokeStyle,ce=this.lineCap,re=this.lineWidth,he=Math.abs(re*this.ctx.transform.scaleX),ve=this.lineJoin;if(this.autoPaging){for(var Ne,De,We=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),it=[],Q=0;Q<qe.length;Q++)if(qe[Q].x!==void 0)for(var Ve=P.call(this,qe[Q]),Rt=0;Rt<Ve.length;Rt+=1)it.indexOf(Ve[Rt])===-1&&it.push(Ve[Rt]);for(var mt=0;mt<it.length;mt++)for(;this.pdf.internal.getNumberOfPages()<it[mt];)T.call(this);C(it);for(var Be=it[0],ht=it[it.length-1],Ge=Be;Ge<ht+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=q,this.strokeStyle=ie,this.lineCap=ce,this.lineWidth=he,this.lineJoin=ve;var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=Ge===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Ge===1?0:Yt+(Ge-2)*$t;if(this.ctx.clip_path.length!==0){var qt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ne,this.posX+this.margin[3],-Ct+ft+this.ctx.prevPageLastElemOffset),J.call(this,E,!0),this.path=qt}if(De=JSON.parse(JSON.stringify(We)),this.path=R(De,this.posX+this.margin[3],-Ct+ft+this.ctx.prevPageLastElemOffset),V===!1||Ge===0){var Mt=(Ge>Be||Ge<ht)&&A.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,$t,null).clip().discardPath()),J.call(this,E,V),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=re}this.path=We}else this.lineWidth=he,J.call(this,E,V),this.lineWidth=re},J=function(E,V){if((E!=="stroke"||V||!L.call(this))&&(E==="stroke"||V||!y.call(this))){for(var q,ie,ce=[],re=this.path,he=0;he<re.length;he++){var ve=re[he];switch(ve.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:ve,deltas:[],abs:[]});break;case"lt":var Ne=ce.length;if(re[he-1]&&!isNaN(re[he-1].x)&&(q=[ve.x-re[he-1].x,ve.y-re[he-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ce[Ne-1].close!==!0&&ce[Ne-1].begin!==!0){ce[Ne-1].deltas.push(q),ce[Ne-1].abs.push(ve);break}}break;case"bct":q=[ve.x1-re[he-1].x,ve.y1-re[he-1].y,ve.x2-re[he-1].x,ve.y2-re[he-1].y,ve.x-re[he-1].x,ve.y-re[he-1].y],ce[ce.length-1].deltas.push(q);break;case"qct":var De=re[he-1].x+2/3*(ve.x1-re[he-1].x),We=re[he-1].y+2/3*(ve.y1-re[he-1].y),qe=ve.x+2/3*(ve.x1-ve.x),it=ve.y+2/3*(ve.y1-ve.y),Q=ve.x,Ve=ve.y;q=[De-re[he-1].x,We-re[he-1].y,qe-re[he-1].x,it-re[he-1].y,Q-re[he-1].x,Ve-re[he-1].y],ce[ce.length-1].deltas.push(q);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(ve)}}ie=V?null:E==="stroke"?"stroke":"fill";for(var Rt=!1,mt=0;mt<ce.length;mt++)if(ce[mt].arc)for(var Be=ce[mt].abs,ht=0;ht<Be.length;ht++){var Ge=Be[ht];Ge.type==="arc"?se.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,V,!Rt):B.call(this,Ge.x,Ge.y),Rt=!0}else if(ce[mt].close===!0)this.pdf.internal.out("h"),Rt=!1;else if(ce[mt].begin!==!0){var gt=ce[mt].start.x,ft=ce[mt].start.y;K.call(this,ce[mt].deltas,gt,ft),Rt=!0}ie&&Y.call(this,ie),V&&me.call(this)}},$=function(E){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-q;case"top":return E+V-q;case"hanging":return E+V-2*q;case"middle":return E+V/2-q;default:return E}},le=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(V,q){this.colorStops.push([V,q])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var se=function(E,V,q,ie,ce,re,he,ve,Ne){for(var De=ue.call(this,q,ie,ce,re),We=0;We<De.length;We++){var qe=De[We];We===0&&(Ne?M.call(this,qe.x1+E,qe.y1+V):B.call(this,qe.x1+E,qe.y1+V)),ge.call(this,E,V,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}ve?me.call(this):Y.call(this,he)},Y=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},me=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(E,V){this.pdf.internal.out(t(E)+" "+s(V)+" m")},z=function(E){var V;switch(E.align){case"right":case"end":V="right";break;case"center":V="center";break;default:V="left"}var q,ie,ce,re=this.pdf.getTextDimensions(E.text),he=$.call(this,E.y),ve=le.call(this,he)-re.h,Ne=this.ctx.transform.applyToPoint(new c(E.x,he));if(this.autoPaging){var De=this.ctx.transform.decompose(),We=new h;We=(We=(We=We.multiply(De.translate)).multiply(De.skew)).multiply(De.scale);for(var qe=this.ctx.transform.applyToRectangle(new d(E.x,he,re.w,re.h)),it=We.applyToRectangle(new d(E.x,ve,re.w,re.h)),Q=P.call(this,it),Ve=[],Rt=0;Rt<Q.length;Rt+=1)Ve.indexOf(Q[Rt])===-1&&Ve.push(Q[Rt]);C(Ve);for(var mt=Ve[0],Be=Ve[Ve.length-1],ht=mt;ht<Be+1;ht++){this.pdf.setPage(ht);var Ge=ht===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[2],Yt=ft-this.margin[0],$t=this.pdf.internal.pageSize.width-this.margin[1],Ct=$t-this.margin[3],qt=ht===1?0:gt+(ht-2)*Yt;if(this.ctx.clip_path.length!==0){var Mt=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(q,this.posX+this.margin[3],-1*qt+Ge),J.call(this,"fill",!0),this.path=Mt}var at=R([JSON.parse(JSON.stringify(it))],this.posX+this.margin[3],-qt+Ge+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*E.scale),ce=this.lineWidth,this.lineWidth=ce*E.scale);var jt=this.autoPaging!=="text";if(jt||at.y+at.h<=ft){if(jt||at.y>=Ge&&at.x<=$t){var rt=jt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||$t-at.x)[0],Rr=R([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-qt+Ge+this.ctx.prevPageLastElemOffset)[0],Gt=jt&&(ht>mt||ht<Be)&&A.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,Yt,null).clip().discardPath()),this.pdf.text(rt,Rr.x,Rr.y,{angle:E.angle,align:V,renderingMode:E.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else at.y<ft&&(this.ctx.prevPageLastElemOffset+=ft-at.y);E.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ce)}}else E.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*E.scale),ce=this.lineWidth,this.lineWidth=ce*E.scale),this.pdf.text(E.text,Ne.x+this.posX,Ne.y+this.posY,{angle:E.angle,align:V,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ce)},B=function(E,V,q,ie){q=q||0,ie=ie||0,this.pdf.internal.out(t(E+q)+" "+s(V+ie)+" l")},K=function(E,V,q){return this.pdf.lines(E,V,q,null,null)},ge=function(E,V,q,ie,ce,re,he,ve){this.pdf.internal.out([e(a(q+E)),e(o(ie+V)),e(a(ce+E)),e(o(re+V)),e(a(he+E)),e(o(ve+V)),"c"].join(" "))},ue=function(E,V,q,ie){for(var ce=2*Math.PI,re=Math.PI/2;V>q;)V-=ce;var he=Math.abs(q-V);he<ce&&ie&&(he=ce-he);for(var ve=[],Ne=ie?-1:1,De=V;he>1e-5;){var We=De+Ne*Math.min(he,re);ve.push(we.call(this,E,De,We)),he-=Math.abs(We-De),De=We}return ve},we=function(E,V,q){var ie=(q-V)/2,ce=E*Math.cos(ie),re=E*Math.sin(ie),he=ce,ve=-re,Ne=he*he+ve*ve,De=Ne+he*ce+ve*re,We=4/3*(Math.sqrt(2*Ne*De)-De)/(he*re-ve*ce),qe=he-We*ve,it=ve+We*he,Q=qe,Ve=-it,Rt=ie+V,mt=Math.cos(Rt),Be=Math.sin(Rt);return{x1:E*Math.cos(V),y1:E*Math.sin(V),x2:qe*mt-it*Be,y2:qe*Be+it*mt,x3:Q*mt-Ve*Be,y3:Q*Be+Ve*mt,x4:E*Math.cos(q),y4:E*Math.sin(q)}},ae=function(E){return 180*E/Math.PI},ne=function(E,V,q,ie,ce,re){var he=E+.5*(q-E),ve=V+.5*(ie-V),Ne=ce+.5*(q-ce),De=re+.5*(ie-re),We=Math.min(E,ce,he,Ne),qe=Math.max(E,ce,he,Ne),it=Math.min(V,re,ve,De),Q=Math.max(V,re,ve,De);return new d(We,it,qe-We,Q-it)},te=function(E,V,q,ie,ce,re,he,ve){var Ne,De,We,qe,it,Q,Ve,Rt,mt,Be,ht,Ge,gt,ft,Yt=q-E,$t=ie-V,Ct=ce-q,qt=re-ie,Mt=he-ce,at=ve-re;for(De=0;De<41;De++)mt=(Ve=(We=E+(Ne=De/40)*Yt)+Ne*((it=q+Ne*Ct)-We))+Ne*(it+Ne*(ce+Ne*Mt-it)-Ve),Be=(Rt=(qe=V+Ne*$t)+Ne*((Q=ie+Ne*qt)-qe))+Ne*(Q+Ne*(re+Ne*at-Q)-Rt),De==0?(ht=mt,Ge=Be,gt=mt,ft=Be):(ht=Math.min(ht,mt),Ge=Math.min(Ge,Be),gt=Math.max(gt,mt),ft=Math.max(ft,Be));return new d(Math.round(ht),Math.round(Ge),Math.round(gt-ht),Math.round(ft-Ge))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,V,q=(E=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:V}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(nt.API),(function(r){var e=function(c){var d,h,g,v,N,b,y,L,A,P;for(h=[],g=0,v=(c+=d="\0\0\0\0".slice(c.length%4||4)).length;v>g;g+=4)(N=(c.charCodeAt(g)<<24)+(c.charCodeAt(g+1)<<16)+(c.charCodeAt(g+2)<<8)+c.charCodeAt(g+3))!==0?(b=(N=((N=((N=((N=(N-(P=N%85))/85)-(A=N%85))/85)-(L=N%85))/85)-(y=N%85))/85)%85,h.push(b+33,y+33,L+33,A+33,P+33)):h.push(122);return(function(T,R){for(var C=R;C>0;C--)T.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(c){var d,h,g,v,N,b=String,y="length",L=255,A="charCodeAt",P="slice",T="replace";for(c[P](-2),c=c[P](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),g=[],v=0,N=(c+=d="uuuuu"[P](c[y]%5||5))[y];N>v;v+=5)h=52200625*(c[A](v)-33)+614125*(c[A](v+1)-33)+7225*(c[A](v+2)-33)+85*(c[A](v+3)-33)+(c[A](v+4)-33),g.push(L&h>>24,L&h>>16,L&h>>8,L&h);return(function(R,C){for(var j=C;j>0;j--)R.pop()})(g,d[y]),b.fromCharCode.apply(b,g)},s=function(c){return c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(c){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),d.test(c)===!1)return"";for(var h="",g=0;g<c.length;g+=2)h+=String.fromCharCode("0x"+(c[g]+c[g+1]));return h},o=function(c){for(var d=new Uint8Array(c.length),h=c.length;h--;)d[h]=c.charCodeAt(h);return(d=Mf(d)).reduce(function(g,v){return g+String.fromCharCode(v)},"")};r.processDataByFilters=function(c,d){var h=0,g=c||"",v=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":g=t(g),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=e(g),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=a(g),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=s(g),v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=o(g),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:g,reverseChain:v.reverse().join(" ")}}})(nt.API),(function(r){r.loadFile=function(e,t,s){return(function(a,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=(function(h,g,v){var N=new XMLHttpRequest,b=0,y=function(L){var A=L.length,P=[],T=String.fromCharCode;for(b=0;b<A;b+=1)P.push(T(255&L.charCodeAt(b)));return P.join("")};if(N.open("GET",h,!g),N.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(N.onload=function(){N.status===200?v(y(this.responseText)):v(void 0)}),N.send(null),g&&N.status===200)return y(N.responseText)})(a,o,c)}catch{}return d})(e,t,s)},r.loadImageFile=r.loadFile})(nt.API),(function(r){function e(){return(Pt.html2canvas?Promise.resolve(Pt.html2canvas):vu(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Pt.DOMPurify?Promise.resolve(Pt.DOMPurify):vu(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var h=pr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(d,h){var g=document.createElement(d);for(var v in h.className&&(g.className=h.className),h.innerHTML&&h.dompurify&&(g.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)g.style[v]=h.style[v];return g},o=function d(h,g){for(var v=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),N=h.firstChild;N;N=N.nextSibling)g!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||v.appendChild(d(N,g));return h.nodeType===1&&(h.nodeName==="CANVAS"?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v},c=function d(h){var g=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),v=d.convert(Promise.resolve(),g);return(v=v.setProgress(1,d,1,[d])).set(h)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(d,h){return d.__proto__=h||c.prototype,d},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(g){switch(s(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(g){return this.set({src:a("div",{innerHTML:d,dompurify:g})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},c.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,h(this.prop.container,g)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var g=this.opt.jsPDF,v=this.opt.fontFaces,N=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:N,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=v,v)for(var y=0;y<v.length;++y){var L=v[y],A=L.src.find(function(P){return P.format==="truetype"});A&&g.addFont(A.url,L.ref.name,L.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,g.context2d.save(!0),h(this.prop.container,b)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(d,h,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},c.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},c.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},c.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(d){if(s(d)!=="object")return this;var h=Object.keys(d||{}).map(function(g){if(g in c.template.prop)return function(){this.prop[g]=d[g]};switch(g){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[g]=d[g]}}},this);return this.then(function(){return this.thenList(h)})},c.prototype.get=function(d,h){return this.then(function(){var g=d in c.template.prop?this.prop[d]:this.opt[d];return h?h(g):g})},c.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},c.prototype.setPageSize=function(d){function h(g,v){return Math.floor(g*v/72*96)}return this.then(function(){(d=d||nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},c.prototype.setProgress=function(d,h,g,v){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),g!=null&&(this.progress.n=g),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(d,h,g,v){return this.setProgress(d?this.progress.val+d:null,h||null,g?this.progress.n+g:null,v?this.progress.stack.concat(v):null)},c.prototype.then=function(d,h){var g=this;return this.thenCore(d,h,function(v,N){return g.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(b){return g.updateProgress(null,v),b}).then(v,N).then(function(b){return g.updateProgress(1),b})})},c.prototype.thenCore=function(d,h,g){g=g||Promise.prototype.then;var v=this;d&&(d=d.bind(v)),h&&(h=h.bind(v));var N=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?v:c.convert(Object.assign({},v),Promise.prototype),b=g.call(N,d,h);return c.convert(b,v.__proto__)},c.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},c.prototype.thenList=function(d){var h=this;return d.forEach(function(g){h=h.thenCore(g)}),h},c.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return c.convert(h,this)},c.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},c.prototype.error=function(d){return this.then(function(){throw new Error(d)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,nt.getPageSize=function(d,h,g){if(pr(d)==="object"){var v=d;d=v.orientation,h=v.unit||h,g=v.format||g}h=h||"mm",g=g||"a4",d=(""+(d||"P")).toLowerCase();var N,b=(""+g).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":N=1;break;case"mm":N=72/25.4;break;case"cm":N=72/2.54;break;case"in":N=72;break;case"px":N=.75;break;case"pc":case"em":N=12;break;case"ex":N=6;break;default:throw"Invalid unit: "+h}var L,A=0,P=0;if(y.hasOwnProperty(b))A=y[b][1]/N,P=y[b][0]/N;else try{A=g[1],P=g[0]}catch{throw new Error("Invalid format: "+g)}if(d==="p"||d==="portrait")d="p",P>A&&(L=P,P=A,A=L);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",A>P&&(L=P,P=A,A=L)}return{width:P,height:A,unit:h,k:N,orientation:d}},r.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(gf):null;var g=new c(h);return h.worker?g:g.from(d).doCallback()}})(nt.API),nt.API.addJS=function(r){return $g=r,this.internal.events.subscribe("postPutResources",function(){Ed=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ed+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ug=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$g+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ed!==void 0&&Ug!==void 0&&this.internal.out("/Names <</JavaScript "+Ed+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var c=a[o],d=s.exec(c);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,v=[];for(o=0;o<g;o++){var N=t.internal.newObject();v.push(N);var b=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<v.length;o++)t.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var c={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var c=s.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var g=0;g<s.children.length;g++)this.renderItems(s.children[g])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(nt.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,s,a,o,c,d){var h,g=this.decode.DCT_DECODE,v=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(N){for(var b,y=256*N.charCodeAt(4)+N.charCodeAt(5),L=N.length,A={width:0,height:0,numcomponents:1},P=4;P<L;P+=2){if(P+=y,e.indexOf(N.charCodeAt(P+1))!==-1){b=256*N.charCodeAt(P+5)+N.charCodeAt(P+6),A={width:256*N.charCodeAt(P+7)+N.charCodeAt(P+8),height:b,numcomponents:N.charCodeAt(P+9)};break}y=256*N.charCodeAt(P+2)+N.charCodeAt(P+3)}return A})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}v={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:g,index:s,alias:a}}return v}})(nt.API),nt.API.processPNG=function(r,e,t,s){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,o=pw(r,{checkCrc:!0}),c=o.width,d=o.height,h=o.channels,g=o.palette,v=o.depth;a=g&&h===1?(function(se){for(var Y=se.width,me=se.height,M=se.data,z=se.palette,B=se.depth,K=!1,ge=[],ue=[],we=void 0,ae=!1,ne=0,te=0;te<z.length;te++){var H=H0(z[te],4),E=H[0],V=H[1],q=H[2],ie=H[3];ge.push(E,V,q),ie!=null&&(ie===0?(ne++,ue.length<1&&ue.push(te)):ie<255&&(ae=!0))}if(ae||ne>1){K=!0,ue=void 0;var ce=Y*me;we=new Uint8Array(ce);for(var re=new DataView(M.buffer),he=0;he<ce;he++){var ve=vf(re,he,B),Ne=H0(z[ve],4)[3];we[he]=Ne}}else ne===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:K?8:void 0,colorBytes:M,alphaBytes:we,needSMask:K,palette:ge,mask:ue}})(o):h===2||h===4?(function(se){for(var Y=se.data,me=se.width,M=se.height,z=se.channels,B=se.depth,K=z===2?"DeviceGray":"DeviceRGB",ge=z-1,ue=me*M,we=ge,ae=ue*we,ne=1*ue,te=Math.ceil(ae*B/8),H=Math.ceil(ne*B/8),E=new Uint8Array(te),V=new Uint8Array(H),q=new DataView(Y.buffer),ie=new DataView(E.buffer),ce=new DataView(V.buffer),re=!1,he=0;he<ue;he++){for(var ve=he*z,Ne=0;Ne<we;Ne++)Yg(ie,vf(q,ve+Ne,B),he*we+Ne,B);var De=vf(q,ve+we,B);De<(1<<B)-1&&(re=!0),Yg(ce,De,1*he,B)}return{colorSpace:K,colorsPerPixel:ge,sMaskBitsPerComponent:re?B:void 0,colorBytes:E,alphaBytes:V,needSMask:re}})(o):(function(se){var Y=se.data,me=se.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:me,colorsPerPixel:me==="DeviceGray"?1:3,colorBytes:Y instanceof Uint16Array?(function(M){for(var z=M.length,B=new Uint8Array(2*z),K=new DataView(B.buffer,B.byteOffset,B.byteLength),ge=0;ge<z;ge++)K.setUint16(2*ge,M[ge],!1);return B})(Y):Y,needSMask:!1}})(o);var N,b,y,L=a,A=L.colorSpace,P=L.colorsPerPixel,T=L.sMaskBitsPerComponent,R=L.colorBytes,C=L.alphaBytes,j=L.needSMask,J=L.palette,$=L.mask,le=null;return s!==nt.API.image_compression.NONE&&typeof Mf=="function"?(le=(function(se){var Y;switch(se){case nt.API.image_compression.FAST:Y=11;break;case nt.API.image_compression.MEDIUM:Y=13;break;case nt.API.image_compression.SLOW:Y=14;break;default:Y=12}return Y})(s),N=this.decode.FLATE_DECODE,b="/Predictor ".concat(le," /Colors ").concat(P," /BitsPerComponent ").concat(v," /Columns ").concat(c),r=Hg(R,Math.ceil(c*P*v/8),P,v,s),j&&(y=Hg(C,Math.ceil(c*T/8),1,T,s))):(N=void 0,b=void 0,r=R,j&&(y=C)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:r,index:e,filter:N,decodeParameters:b,transparency:$,palette:J,sMask:y,predictor:le,width:c,height:d,bitsPerComponent:v,sMaskBitsPerComponent:T,colorSpace:A}}},(function(r){r.processGIF89A=function(e,t,s,a){var o=new Rw(e),c=o.width,d=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var g={data:h,width:c,height:d},v=new yf(100).encode(g,100);return r.processJPEG.call(this,v,t,s,a)},r.processGIF87A=r.processGIF89A})(nt.API),Mi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Mi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){br.log("bit decode error:"+t)}},Mi.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var h=this.palette[o>>7-d&1];this.data[c+4*d]=h.blue,this.data[c+4*d+1]=h.green,this.data[c+4*d+2]=h.red,this.data[c+4*d+3]=255}t!==0&&(this.pos+=4-t)}},Mi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var o=this.datav.getUint8(this.pos++,!0),c=s*this.width*4+2*a*4,d=o>>4,h=15&o,g=this.palette[d];if(this.data[c]=g.blue,this.data[c+1]=g.green,this.data[c+2]=g.red,this.data[c+3]=255,2*a+1>=this.width)break;g=this.palette[h],this.data[c+4]=g.blue,this.data[c+4+1]=g.green,this.data[c+4+2]=g.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Mi.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var c=this.palette[a];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},Mi.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,g=o>>15?255:0,v=s*this.width*4+4*a;this.data[v]=h,this.data[v+1]=d,this.data[v+2]=c,this.data[v+3]=g}this.pos+=r}},Mi.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,g=(c>>11)/e*255|0,v=a*this.width*4+4*o;this.data[v]=g,this.data[v+1]=h,this.data[v+2]=d,this.data[v+3]=255}this.pos+=r}},Mi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=255}this.pos+=this.width%4}},Mi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=c}},Mi.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,s,a){var o=new Mi(e,!1),c=o.width,d=o.height,h={data:o.getData(),width:c,height:d},g=new yf(100).encode(h,100);return r.processJPEG.call(this,g,t,s,a)}})(nt.API),Qg.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,s,a){var o=new Qg(e),c=o.width,d=o.height,h={data:o.getData(),width:c,height:d},g=new yf(100).encode(h,100);return r.processJPEG.call(this,g,t,s,a)}})(nt.API),nt.API.processRGBA=function(r,e,t){for(var s=r.data,a=s.length,o=new Uint8Array(a/4*3),c=new Uint8Array(a/4),d=0,h=0,g=0;g<a;g+=4){var v=s[g],N=s[g+1],b=s[g+2],y=s[g+3];o[d++]=v,o[d++]=N,o[d++]=b,c[h++]=y}var L=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:L,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},nt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nc=nt.API,Ld=Nc.getCharWidthsArray=function(r,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:a.metadata.Unicode.widths,h=d.fof?d.fof:1,g=e.kerning?e.kerning:a.metadata.Unicode.kerning,v=g.fof?g.fof:1,N=e.doKerning!==!1,b=0,y=r.length,L=0,A=d[0]||h,P=[];for(t=0;t<y;t++)s=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?P.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+c*(1e3/o)||0)/1e3):(b=N&&pr(g[s])==="object"&&!isNaN(parseInt(g[s][L],10))?g[s][L]/v:0,P.push((d[s]||A)/h+b)),L=s;return P},qg=Nc.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Nc.processArabic&&(r=Nc.processArabic(r)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(r,t,a)/t:Ld.apply(this,arguments).reduce(function(o,c){return o+c},0)},zg=function(r,e,t,s){for(var a=[],o=0,c=r.length,d=0;o!==c&&d+e[o]<t;)d+=e[o],o++;a.push(r.slice(0,o));var h=o;for(d=0;o!==c;)d+e[o]>s&&(a.push(r.slice(h,o)),d=0,h=o),d+=e[o],o++;return h!==o&&a.push(r.slice(h,o)),a},Wg=function(r,e,t){t||(t={});var s,a,o,c,d,h,g,v=[],N=[v],b=t.textIndent||0,y=0,L=0,A=r.split(" "),P=Ld.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?A[0].length+2:t.lineIndent||0){var T=Array(h).join(" "),R=[];A.map(function(j){(j=j.split(/\s*\n/)).length>1?R=R.concat(j.map(function(J,$){return($&&J.length?`
`:"")+J})):R.push(j[0])}),A=R,h=qg.apply(this,[T,t])}for(o=0,c=A.length;o<c;o++){var C=0;if(s=A[o],h&&s[0]==`
`&&(s=s.substr(1),C=1),b+y+(L=(a=Ld.apply(this,[s,t])).reduce(function(j,J){return j+J},0))>e||C){if(L>e){for(d=zg.apply(this,[s,a,e-(b+y),e]),v.push(d.shift()),v=[d.pop()];d.length;)N.push([d.shift()]);L=a.slice(s.length-(v[0]?v[0].length:0)).reduce(function(j,J){return j+J},0)}else v=[s];N.push(v),b=L+h,y=P}else v.push(s),b+=y+L,y=P}return g=h?function(j,J){return(J?T:"")+j.join(" ")}:function(j){return j.join(" ")},N.map(g)},Nc.splitTextToSize=function(r,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var N=this.internal.getFont(v.fontName,v.fontStyle),b="Unicode";return N.metadata[b]?{widths:N.metadata[b].widths||{0:1},kerning:N.metadata[b].kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var d,h,g=[];for(d=0,h=s.length;d<h;d++)g=g.concat(Wg.apply(this,[s[d],c,o]));return g},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var c=function(b){return"0x"+parseInt(b,10).toString(16)},d=r.__fontmetrics__.compress=function(b){var y,L,A,P,T=["{"];for(var R in b){if(y=b[R],isNaN(parseInt(R,10))?L="'"+R+"'":(R=parseInt(R,10),L=(L=c(R).slice(2)).slice(0,-1)+a[L.slice(-1)]),typeof y=="number")y<0?(A=c(y).slice(3),P="-"):(A=c(y).slice(2),P=""),A=P+A.slice(0,-1)+a[A.slice(-1)];else{if(pr(y)!=="object")throw new Error("Don't know what to do with value type "+pr(y)+".");A=d(y)}T.push(L+A)}return T.push("}"),T.join("")},h=r.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,L,A,P,T={},R=1,C=T,j=[],J="",$="",le=b.length-1,se=1;se<le;se+=1)(P=b[se])=="'"?y?(A=y.join(""),y=void 0):y=[]:y?y.push(P):P=="{"?(j.push([C,A]),C={},A=void 0):P=="}"?((L=j.pop())[0][L[1]]=C,A=void 0,C=L[0]):P=="-"?R=-1:A===void 0?s.hasOwnProperty(P)?(J+=s[P],A=parseInt(J,16)*R,R=1,J=""):J+=P:s.hasOwnProperty(P)?($+=s[P],C[A]=parseInt($,16)*R,R=1,A=void 0,$=""):$+=P;return T},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},N={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(b){var y=b.font,L=N.Unicode[y.postScriptName];L&&(y.metadata.Unicode={},y.metadata.Unicode.widths=L.widths,y.metadata.Unicode.kerning=L.kerning);var A=v.Unicode[y.postScriptName];A&&(y.metadata.Unicode.encoding=A,y.encoding=A.codePages[0])}])})(nt.API),(function(r){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};r.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Id(d)),c.metadata=r.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,s)}}])})(nt),nt.API.addSvgAsImage=function(r,e,t,s,a,o,c,d){if(isNaN(e)||isNaN(t))throw br.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw br.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var g=h.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},N=this;return(Pt.canvg?Promise.resolve(Pt.canvg):vu(()=>import("./index.es-DIZbx47P.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(g,r,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(v)}).then(function(){N.addImage(h.toDataURL("image/jpeg",1),e,t,s,a,c,d)})},nt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},nt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var s,a,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),h=[],g=0,v=0,N=0;function b(L,A){var P,T=!1;for(P=0;P<L.length;P+=1)L[P]===A&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var y=d.length;for(N=0;N<y;N+=1)t[d[N]].value=t[d[N]].defaultValue,t[d[N]].explicitSet=!1}if(pr(r)==="object"){for(a in r)if(o=r[a],b(d,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&b(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(g=0;g<o.length;g+=1)if(s=!0,o[g].length===1&&typeof o[g][0]=="number")h.push(String(o[g]-1));else if(o[g].length>1){for(v=0;v<o[g].length;v+=1)typeof o[g][v]!="number"&&(s=!1);s===!0&&h.push([o[g][0]-1,o[g][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var L,A=[];for(L in t)t[L].explicitSet===!0&&(t[L].type==="name"?A.push("/"+L+" /"+t[L].value):A.push("/"+L+" "+t[L].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),g=o.length+c.length+d.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(a+o+c+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(nt.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,c){for(var d,h=c.metadata.Unicode.widths,g=["","0","00","000","0000"],v=[""],N=0,b=o.length;N<b;++N){if(d=c.metadata.characterToGlyph(o.charCodeAt(N)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=o.charCodeAt(N),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return v.join("");d=d.toString(16),v.push(g[4-d.length],d)}return v.join("")},s=function(o){var c,d,h,g,v,N,b;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],N=0,b=(d=Object.keys(o).sort(function(y,L){return y-L})).length;N<b;N++)c=d[N],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(g=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+g+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var d=c.font,h=c.out,g=c.newObject,v=c.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="Identity-H"){for(var N=d.metadata.Unicode.widths,b=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",L=0;L<b.length;L++)y+=String.fromCharCode(b[L]);var A=g();v({data:y,addLength1:!0,objectId:A}),h("endobj");var P=g();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:P}),h("endobj");var T=g();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Lc(d.fontName)),h("/FontFile2 "+A+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var R=g();h("<<"),h("/Type /Font"),h("/BaseFont /"+Lc(d.fontName)),h("/FontDescriptor "+T+" 0 R"),h("/W "+r.API.PDFObject.convert(N)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=g(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+P+" 0 R"),h("/BaseFont /"+Lc(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+R+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var d=c.font,h=c.out,g=c.newObject,v=c.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var N=d.metadata.rawData,b="",y=0;y<N.length;y++)b+=String.fromCharCode(N[y]);var L=g();v({data:b,addLength1:!0,objectId:L}),h("endobj");var A=g();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:A}),h("endobj");var P=g();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+L+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+Lc(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=g();for(var T=0;T<d.metadata.hmtx.widths.length;T++)d.metadata.hmtx.widths[T]=parseInt(d.metadata.hmtx.widths[T]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+Lc(d.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]);var a=function(o){var c,d=o.text||"",h=o.x,g=o.y,v=o.options||{},N=o.mutex||{},b=N.pdfEscape,y=N.activeFontKey,L=N.fonts,A=y,P="",T=0,R="",C=L[A].encoding;if(L[A].encoding!=="Identity-H")return{text:d,x:h,y:g,options:v,mutex:N};for(R=d,A=y,Array.isArray(d)&&(R=d[0]),T=0;T<R.length;T+=1)L[A].metadata.hasOwnProperty("cmap")&&(c=L[A].metadata.cmap.unicode.codeMap[R[T].charCodeAt(0)]),c||R[T].charCodeAt(0)<256&&L[A].metadata.hasOwnProperty("Unicode")?P+=R[T]:P+="";var j="";return parseInt(A.slice(1))<14||C==="WinAnsiEncoding"?j=b(P,A).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(j=t(P,L[A])),N.isHex=!0,{text:j,x:h,y:g,options:v,mutex:N}};e.events.push(["postProcessText",function(o){var c=o.text||"",d=[],h={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var g=0;for(g=0;g<c.length;g+=1)Array.isArray(c[g])&&c[g].length===3?d.push([a(Object.assign({},h,{text:c[g][0]})).text,c[g][1],c[g][2]]):d.push(a(Object.assign({},h,{text:c[g]})).text);o.text=d}else o.text=a(Object.assign({},h,{text:c})).text}])})(nt),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(nt.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(s){var a,o,c,d,h,g,v,N=e,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,C=0;this.__bidiEngine__={};var j=function(M){var z=M.charCodeAt(),B=z>>8,K=A[B];return K!==void 0?N[256*K+(255&z)]:B===252||B===253?"AL":T.test(B)?"L":B===8?"R":"N"},J=function(M){for(var z,B=0;B<M.length;B++){if((z=j(M.charAt(B)))==="L")return!1;if(z==="R")return!0}return!1},$=function(M,z,B,K){var ge,ue,we,ae,ne=z[K];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(ne="AN");break;case"AL":R=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":K<1||K+1>=z.length||(ge=B[K-1])!=="EN"&&ge!=="AN"||(ue=z[K+1])!=="EN"&&ue!=="AN"?ne="N":R&&(ue="AN"),ne=ue===ge?ue:"N";break;case"ES":ne=(ge=K>0?B[K-1]:"B")==="EN"&&K+1<z.length&&z[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&B[K-1]==="EN"){ne="EN";break}if(R){ne="N";break}for(we=K+1,ae=z.length;we<ae&&z[we]==="ET";)we++;ne=we<ae&&z[we]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(ae=z.length,we=K+1;we<ae&&z[we]==="NSM";)we++;if(we<ae){var te=M[K],H=te>=1425&&te<=2303||te===64286;if(ge=z[we],H&&(ge==="R"||ge==="AL")){ne="R";break}}}ne=K<1||(ge=z[K-1])==="B"?"N":B[K-1];break;case"B":R=!1,a=!0,ne=C;break;case"S":o=!0,ne="N"}return ne},le=function(M,z,B){var K=M.split("");return B&&se(K,B,{hiLevel:C}),K.reverse(),z&&z.reverse(),K.join("")},se=function(M,z,B){var K,ge,ue,we,ae,ne=-1,te=M.length,H=0,E=[],V=C?y:b,q=[];for(R=!1,a=!1,o=!1,ge=0;ge<te;ge++)q[ge]=j(M[ge]);for(ue=0;ue<te;ue++){if(ae=H,E[ue]=$(M,q,E,ue),K=240&(H=V[ae][L[E[ue]]]),H&=15,z[ue]=we=V[H][5],K>0)if(K===16){for(ge=ne;ge<ue;ge++)z[ge]=1;ne=-1}else ne=-1;if(V[H][6])ne===-1&&(ne=ue);else if(ne>-1){for(ge=ne;ge<ue;ge++)z[ge]=we;ne=-1}q[ue]==="B"&&(z[ue]=0),B.hiLevel|=we}o&&(function(ie,ce,re){for(var he=0;he<re;he++)if(ie[he]==="S"){ce[he]=C;for(var ve=he-1;ve>=0&&ie[ve]==="WS";ve--)ce[ve]=C}})(q,z,te)},Y=function(M,z,B,K,ge){if(!(ge.hiLevel<M)){if(M===1&&C===1&&!a)return z.reverse(),void(B&&B.reverse());for(var ue,we,ae,ne,te=z.length,H=0;H<te;){if(K[H]>=M){for(ae=H+1;ae<te&&K[ae]>=M;)ae++;for(ne=H,we=ae-1;ne<we;ne++,we--)ue=z[ne],z[ne]=z[we],z[we]=ue,B&&(ue=B[ne],B[ne]=B[we],B[we]=ue);H=ae}H++}}},me=function(M,z,B){var K=M.split(""),ge={hiLevel:C};return B||(B=[]),se(K,B,ge),(function(ue,we,ae){if(ae.hiLevel!==0&&v)for(var ne,te=0;te<ue.length;te++)we[te]===1&&(ne=P.indexOf(ue[te]))>=0&&(ue[te]=P[ne+1])})(K,B,ge),Y(2,K,z,B,ge),Y(1,K,z,B,ge),K.join("")};return this.__bidiEngine__.doBidiReorder=function(M,z,B){if((function(ge,ue){if(ue)for(var we=0;we<ge.length;we++)ue[we]=we;d===void 0&&(d=J(ge)),g===void 0&&(g=J(ge))})(M,z),c||!h||g)if(c&&h&&d^g)C=d?1:0,M=le(M,z,B);else if(!c&&h&&g)C=d?1:0,M=me(M,z,B),M=le(M,z);else if(!c||d||h||g){if(c&&!h&&d^g)M=le(M,z),d?(C=0,M=me(M,z,B)):(C=1,M=me(M,z,B),M=le(M,z));else if(c&&d&&!h&&g)C=1,M=me(M,z,B),M=le(M,z);else if(!c&&!h&&d^g){var K=v;d?(C=1,M=me(M,z,B),C=0,v=!1,M=me(M,z,B),v=K):(C=0,M=me(M,z,B),M=le(M,z),C=1,v=!1,M=me(M,z,B),v=K,M=le(M,z))}}else C=0,M=me(M,z,B);else C=d?1:0,M=me(M,z,B);return M},this.__bidiEngine__.setOptions=function(M){M&&(c=M.isInputVisual,h=M.isOutputVisual,d=M.isInputRtl,g=M.isOutputRtl,v=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(c=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?c.push([t.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):c.push([t.doBidiReorder(a[d])]);s.text=c}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(nt),nt.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Vo(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Yw(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Dw(this.contents),this.head=new Bw(this),this.name=new zw(this),this.cmap=new c1(this),this.toUnicode={},this.hhea=new Mw(this),this.maxp=new Ww(this),this.hmtx=new Hw(this),this.post=new $w(this),this.os2=new Uw(this),this.loca=new Jw(this),this.glyf=new Vw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,h,g;for(g=[],c=0,d=(h=this.bbox).length;c<d;c++)e=h[c],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,s){var a,o,c,d;for(c=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)a=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return c*(t/1e3)},r.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},r})();var Vi,Vo=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},r.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,s,a,o,c,d,h;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^c)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*c+256*d+h},r.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},r.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},r})(),Dw=(function(){var r;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,c,d,h,g,v,N,b,y,L,A;for(A in y=Object.keys(t).length,h=Math.log(2),N=16*Math.floor(Math.log(y)/h),c=Math.floor(N/h),v=16*y-N,(a=new Vo).writeInt(this.scalarType),a.writeShort(y),a.writeShort(N),a.writeShort(c),a.writeShort(v),o=16*y,g=a.pos+o,d=null,L=[],t)for(b=t[A],a.writeString(A),a.writeInt(r(b)),a.writeInt(g),a.writeInt(b.length),L=L.concat(b),A==="head"&&(d=g),g+=b.length;g%4;)L.push(0),g++;return a.write(L),s=2981146554-r(a.data),a.pos=d+8,a.writeUInt32(s),a.data},r=function(t){var s,a,o,c;for(t=u1.call(t);t.length%4;)t.push(0);for(o=new Vo(t),a=0,s=0,c=t.length;s<c;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),Fw={}.hasOwnProperty,ma=function(r,e){for(var t in e)Fw.call(e,t)&&(r[t]=e[t]);function s(){this.constructor=r}return s.prototype=e.prototype,r.prototype=new s,r.__super__=e.prototype,r};Vi=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var Bw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Vo).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),Zg=(function(){function r(e,t){var s,a,o,c,d,h,g,v,N,b,y,L,A,P,T,R,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),N=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(y=e.readUInt16(),b=y/2,e.pos+=6,o=(function(){var j,J;for(J=[],h=j=0;0<=b?j<b:j>b;h=0<=b?++j:--j)J.push(e.readUInt16());return J})(),e.pos+=2,A=(function(){var j,J;for(J=[],h=j=0;0<=b?j<b:j>b;h=0<=b?++j:--j)J.push(e.readUInt16());return J})(),g=(function(){var j,J;for(J=[],h=j=0;0<=b?j<b:j>b;h=0<=b?++j:--j)J.push(e.readUInt16());return J})(),v=(function(){var j,J;for(J=[],h=j=0;0<=b?j<b:j>b;h=0<=b?++j:--j)J.push(e.readUInt16());return J})(),a=(this.length-e.pos+this.offset)/2,d=(function(){var j,J;for(J=[],h=j=0;0<=a?j<a:j>a;h=0<=a?++j:--j)J.push(e.readUInt16());return J})(),h=T=0,C=o.length;T<C;h=++T)for(P=o[h],s=R=L=A[h];L<=P?R<=P:R>=P;s=L<=P?++R:--R)v[h]===0?c=s+g[h]:(c=d[v[h]/2+(s-L)-(b-h)]||0)!==0&&(c+=g[h]),this.codeMap[s]=65535&c}e.pos=N}return r.encode=function(e,t){var s,a,o,c,d,h,g,v,N,b,y,L,A,P,T,R,C,j,J,$,le,se,Y,me,M,z,B,K,ge,ue,we,ae,ne,te,H,E,V,q,ie,ce,re,he,ve,Ne,De,We;switch(K=new Vo,c=Object.keys(e).sort(function(qe,it){return qe-it}),t){case"macroman":for(A=0,P=(function(){var qe=[];for(L=0;L<256;++L)qe.push(0);return qe})(),R={0:0},o={},ge=0,ne=c.length;ge<ne;ge++)R[ve=e[a=c[ge]]]==null&&(R[ve]=++A),o[a]={old:e[a],new:R[e[a]]},P[a]=R[e[a]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(P),{charMap:o,subtable:K.data,maxGlyphID:A+1};case"unicode":for(z=[],N=[],C=0,R={},s={},T=g=null,ue=0,te=c.length;ue<te;ue++)R[J=e[a=c[ue]]]==null&&(R[J]=++C),s[a]={old:J,new:R[J]},d=R[J]-a,T!=null&&d===g||(T&&N.push(T),z.push(a),g=d),T=a;for(T&&N.push(T),N.push(65535),z.push(65535),me=2*(Y=z.length),se=2*Math.pow(Math.log(Y)/Math.LN2,2),b=Math.log(se/2)/Math.LN2,le=2*Y-se,h=[],$=[],y=[],L=we=0,H=z.length;we<H;L=++we){if(M=z[L],v=N[L],M===65535){h.push(0),$.push(0);break}if(M-(B=s[M].new)>=32768)for(h.push(0),$.push(2*(y.length+Y-L)),a=ae=M;M<=v?ae<=v:ae>=v;a=M<=v?++ae:--ae)y.push(s[a].new);else h.push(B-M),$.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*Y+2*y.length),K.writeUInt16(0),K.writeUInt16(me),K.writeUInt16(se),K.writeUInt16(b),K.writeUInt16(le),re=0,E=N.length;re<E;re++)a=N[re],K.writeUInt16(a);for(K.writeUInt16(0),he=0,V=z.length;he<V;he++)a=z[he],K.writeUInt16(a);for(Ne=0,q=h.length;Ne<q;Ne++)d=h[Ne],K.writeUInt16(d);for(De=0,ie=$.length;De<ie;De++)j=$[De],K.writeUInt16(j);for(We=0,ce=y.length;We<ce;We++)A=y[We],K.writeUInt16(A);return{charMap:s,subtable:K.data,maxGlyphID:C+1}}},r})(),c1=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Zg(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Zg.encode(e,t),(a=new Vo).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},r})(),Mw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Uw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),$w=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="post",r.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var c,d,h;for(h=[],o=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;o=0<=d?++c:--c)h.push(e.readUInt32());return h}).call(this)}},r})(),qw=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="name",r.prototype.parse=function(e){var t,s,a,o,c,d,h,g,v,N,b;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},o=v=0,N=s.length;v<N;o=++v)a=s[o],e.pos=a.offset,g=e.readString(a.length),c=new qw(g,a),h[b=a.nameID]==null&&(h[b]=[]),h[a.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),Ww=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),Hw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,s,a,o,c,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var g,v;for(v=[],t=g=0;0<=a?g<a:g>a;t=0<=a?++g:--g)v.push(e.readInt16());return v})(),this.widths=(function(){var g,v,N,b;for(b=[],g=0,v=(N=this.metrics).length;g<v;g++)o=N[g],b.push(o.advance);return b}).call(this),s=this.widths[this.widths.length-1],h=[],t=c=0;0<=a?c<a:c>a;t=0<=a?++c:--c)h.push(this.widths.push(s));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),u1=[].slice,Vw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,s,a,o,c,d,h,g,v,N;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,c=(d=new Vo(t.read(a))).readShort(),g=d.readShort(),N=d.readShort(),h=d.readShort(),v=d.readShort(),this.cache[e]=c===-1?new Kw(d,g,N,h,v):new Gw(d,c,g,N,h,v),this.cache[e]))},r.prototype.encode=function(e,t,s){var a,o,c,d,h;for(c=[],o=[],d=0,h=t.length;d<h;d++)a=e[t[d]],o.push(c.length),a&&(c=c.concat(a.encode(s)));return o.push(c.length),{table:c,offsets:o}},r})(),Gw=(function(){function r(e,t,s,a,o,c){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Kw=(function(){function r(e,t,s,a,o){var c,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return r.prototype.encode=function(){var e,t,s;for(t=new Vo(u1.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Jw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="loca",r.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,c=0;c<s.length;++c)if(s[c]=a,o<t.length&&t[o]==c){++o,s[c]=a;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(a+=h)}for(var g=new Array(4*s.length),v=0;v<s.length;++v)g[4*v+3]=255&s[v],g[4*v+2]=(65280&s[v])>>8,g[4*v+1]=(16711680&s[v])>>16,g[4*v]=(4278190080&s[v])>>24;return g},r})(),Yw=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},r.prototype.glyphsFor=function(e){var t,s,a,o,c,d,h;for(a={},c=0,d=e.length;c<d;c++)a[o=e[c]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))s=h[o],a[o]=s;return a},r.prototype.encode=function(e,t){var s,a,o,c,d,h,g,v,N,b,y,L,A,P,T;for(a in s=c1.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),y={0:0},T=s.charMap)y[(h=T[a]).old]=h.new;for(L in b=s.maxGlyphID,c)L in y||(y[L]=b++);return v=(function(R){var C,j;for(C in j={},R)j[R[C]]=C;return j})(y),N=Object.keys(v).sort(function(R,C){return R-C}),A=(function(){var R,C,j;for(j=[],R=0,C=N.length;R<C;R++)d=N[R],j.push(v[d]);return j})(),o=this.font.glyf.encode(c,A,y),g=this.font.loca.encode(o.offsets,A),P={cmap:this.font.cmap.raw(),glyf:o.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},r})();nt.API.PDFObject=(function(){var r;function e(){}return r=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,c;if(Array.isArray(t))return"["+(function(){var d,h,g;for(g=[],d=0,h=t.length;d<h;d++)s=t[d],g.push(e.convert(s));return g})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)c=t[a],o.push("/"+a+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+t},e})();const Xw=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:et,AcroFormButton:Sn,AcroFormCheckBox:_u,AcroFormChoiceField:Cl,AcroFormComboBox:Il,AcroFormEditBox:wu,AcroFormListBox:Tl,AcroFormPasswordField:Nu,AcroFormPushButton:bu,AcroFormRadioButton:Ol,AcroFormTextField:Ho,GState:Iu,ShadingPattern:zo,TilingPattern:Ll,default:nt,jsPDF:nt},Symbol.toStringTag,{value:"Module"}));function Qw({userRole:r,assignedDepotId:e}){const[t,s]=Te.useState("trips"),[a,o]=Te.useState([]),[c,d]=Te.useState([]),[h,g]=Te.useState([]),[v,N]=Te.useState(!0),[b,y]=Te.useState("all"),[L,A]=Te.useState({}),[P,T]=Te.useState(new Set),R=zi(B=>B.isOnline);Zs(B=>B.pendingOperations),Te.useEffect(()=>{C()},[]);const C=async()=>{N(!0);try{const[B,K,ge]=await Promise.all([Rl.getAllWithProgress(),Xs.getAll(),yi.getAll()]),ue=B.trips||[];let we=K.bookings||[],ae=[];if(r==="depot_manager"&&e)try{const{depotRoutesApi:H}=await vu(async()=>{const{depotRoutesApi:V}=await Promise.resolve().then(()=>Ry);return{depotRoutesApi:V}},void 0);ae=(await H.getByDepotId(e)).forwardingDepotIds||[],console.log("Forwarding destinations for Trips & Deliveries:",ae)}catch(H){console.error("Error fetching depot routes:",H)}const ne=r==="depot_manager"&&e?ue.filter(H=>H.origin_depot_id===e||H.destination_depot_id===e||ae.includes(H.destination_depot_id)):ue,te=r==="depot_manager"&&e?we.filter(H=>(H.destination_depot_id===e||H.origin_depot_id===e)&&H.status!=="booked"):we;o(ne),d(te),g(ge.depots||[])}catch(B){console.error("Error loading data:",B)}finally{N(!1)}},j=async(B,K)=>{const ge=K?{status:"delivered",to_pay_collected_method:K,to_pay_collected_at:new Date().toISOString()}:null;if(R)try{if(K?await Xs.update(B,ge):await Xs.updateStatus(B,"delivered"),L[B]){const ue={...L};delete ue[B],A(ue)}await C()}catch(ue){console.error("Error marking delivered:",ue),Rf(ue)?(console.log("[TripsDeliveries] Network error detected, queuing delivery"),J(B,K,ge)):alert("Error marking as delivered")}else J(B,K,ge)},J=(B,K,ge)=>{if(Pl("MARK_DELIVERED",{bookingId:B,paymentMethod:K,updates:ge},{entityType:"delivery",entityId:B,optimisticData:{status:"delivered",markedAt:new Date().toISOString()}}),T(ue=>new Set([...ue,B])),d(ue=>ue.map(we=>we.id===B?{...we,status:"delivered"}:we)),L[B]){const ue={...L};delete ue[B],A(ue)}},$=async(B,K)=>{if(R)try{await Rl.update(B,{status:K}),await C()}catch(ge){console.error("Error updating trip status:",ge),Rf(ge)?(console.log("[TripsDeliveries] Network error detected, queuing trip update"),Pl("UPDATE_TRIP_STATUS",{tripId:B,status:K},{entityType:"trip",entityId:B}),o(ue=>ue.map(we=>we.id===B?{...we,status:K}:we))):alert("Error updating trip status")}else Pl("UPDATE_TRIP_STATUS",{tripId:B,status:K},{entityType:"trip",entityId:B}),o(ge=>ge.map(ue=>ue.id===B?{...ue,status:K}:ue))},le=B=>{const K=new nt,ge=K.internal.pageSize.getWidth();let ue=15;K.setFontSize(18),K.setFont("helvetica","bold"),K.text("DRIVER'S MEMO",ge/2,ue,{align:"center"}),ue+=8,K.setFontSize(12),K.setFont("helvetica","normal"),K.text("DRT Mango Transport",ge/2,ue,{align:"center"}),ue+=12,K.setFontSize(11),K.setFont("helvetica","bold"),K.text("Trip Details",14,ue),ue+=6,K.setFont("helvetica","normal"),K.setFontSize(10),K.text(`Trip Number: ${B.trip_number||B.id}`,14,ue),ue+=5,K.text(`Driver: ${B.driver_name} | Phone: ${B.driver_phone||"N/A"}`,14,ue),ue+=5,K.text(`Vehicle: ${B.vehicle_number}`,14,ue),ue+=5,K.text(`Date: ${new Date().toLocaleDateString("en-IN")}`,14,ue),ue+=10;const we={};h.forEach((ne,te)=>{we[ne.name]=te+1});const ae=c.filter(ne=>ne.status==="in_transit").sort((ne,te)=>{const H=we[ne.destination_depot_name]||999,E=we[te.destination_depot_name]||999;return H-E});K.setFontSize(11),K.setFont("helvetica","bold"),K.text(`Bookings (${ae.length} items)`,14,ue),ue+=8,K.setDrawColor(200),K.line(14,ue-2,ge-14,ue-2),ae.forEach((ne,te)=>{ue>260&&(K.addPage(),ue=15),K.setFillColor(245,245,245),K.rect(14,ue,ge-28,8,"F"),K.setFontSize(10),K.setFont("helvetica","bold"),K.text(`${te+1}. ${ne.receipt_number} - ${ne.destination_depot_name}`,16,ue+5),ue+=10,K.setFont("helvetica","normal"),K.setFontSize(9),K.text(`Sender: ${ne.sender_name} | ${ne.sender_phone}`,16,ue),ue+=4,K.text(`From: ${ne.origin_depot_name}  To: ${ne.destination_depot_name}`,16,ue),ue+=4,K.text(`Amount: Rs. ${(Number(ne.total_amount)||0).toLocaleString("en-IN")}`,16,ue),ue+=5,Array.isArray(ne.receivers)&&ne.receivers.forEach((H,E)=>{ue>265&&(K.addPage(),ue=15),K.setFont("helvetica","bold"),K.text(`  Receiver ${E+1}: ${H.name} | ${H.phone}`,16,ue),ue+=4,K.setFont("helvetica","normal"),H.address&&(K.text(`    Address: ${H.address}`,16,ue),ue+=4),Array.isArray(H.packages)&&H.packages.forEach(V=>{ue>265&&(K.addPage(),ue=15),K.text(`    - ${V.size}: ${V.quantity} pcs @ Rs.${V.price_per_unit||0} = Rs.${V.total_price||0}`,16,ue),ue+=4})}),ue+=4}),ue>260&&(K.addPage(),ue=15),ue+=5,K.setDrawColor(200),K.line(14,ue,ge-14,ue),ue+=8,K.setFontSize(8),K.text(`Generated on: ${new Date().toLocaleString("en-IN")}`,14,ue),K.text("Driver Signature: _________________",ge-80,ue),K.save(`DriverMemo_${B.trip_number||B.id}_${new Date().toISOString().split("T")[0]}.pdf`)},se=B=>{switch(B){case"in_transit":return"bg-blue-100 text-blue-700";case"loading":case"planned":return"bg-orange-100 text-orange-700";case"completed":case"delivered":return"bg-green-100 text-green-700";case"booked":return"bg-yellow-100 text-yellow-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Y=B=>B?new Date(B).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",me=B=>{let K=0;return Array.isArray(B.receivers)&&B.receivers.forEach(ge=>{Array.isArray(ge.packages)&&ge.packages.forEach(ue=>{K+=Number(ue.quantity)||0})}),K},M=c.filter(B=>B.status!=="booked"&&(b==="all"?["in_transit","delivered"].includes(B.status):B.status===b)),z=a.filter(B=>b==="all"||B.status===b);return v?u.jsx("div",{className:"p-8",children:u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading trips and deliveries..."})]})}):u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Trips & Deliveries"}),u.jsx("p",{className:"text-gray-600",children:"Track all trips and manage deliveries"})]}),!R&&u.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xl",children:""}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-amber-800",children:"You're currently offline. "}),u.jsx("span",{className:"text-amber-700",children:"Delivery updates will be synced when you're back online."})]})]})}),u.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 border-b border-gray-200",children:[u.jsxs("button",{onClick:()=>{s("trips"),y("all")},className:`px-6 py-3 font-medium border-b-2 transition-colors ${t==="trips"?"border-orange-500 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["All Trips (",a.length,")"]}),u.jsxs("button",{onClick:()=>{s("deliveries"),y("all")},className:`px-6 py-3 font-medium border-b-2 transition-colors ${t==="deliveries"?"border-orange-500 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Deliveries (",c.filter(B=>["in_transit","delivered"].includes(B.status)).length,")"]})]}),u.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>y("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="all"?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),t==="trips"?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>y("in_transit"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="in_transit"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Transit"}),u.jsx("button",{onClick:()=>y("completed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="completed"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Completed"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>y("in_transit"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="in_transit"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Transit"}),u.jsx("button",{onClick:()=>y("delivered"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="delivered"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Delivered"})]})]}),t==="trips"&&u.jsx("div",{className:"space-y-4",children:z.length>0?z.map(B=>{var K;return u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:B.trip_number||B.id}),u.jsx("p",{className:"text-sm text-gray-600",children:B.id})]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${se(B.status)}`,children:(K=B.status)==null?void 0:K.replace("_"," ")})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Driver"}),u.jsx("p",{className:"text-sm font-medium text-gray-900",children:B.driver_name}),B.driver_phone&&u.jsx("p",{className:"text-xs text-gray-500",children:B.driver_phone})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Vehicle"}),u.jsx("p",{className:"text-sm font-medium text-gray-900",children:B.vehicle_number})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Trip Cost"}),u.jsxs("p",{className:"text-sm font-medium text-red-600",children:["",(Number(B.trip_cost)||0).toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Revenue"}),u.jsxs("p",{className:"text-sm font-medium text-green-600",children:["",c.filter(ge=>ge.status==="in_transit"||ge.status==="delivered").reduce((ge,ue)=>ge+(Number(ue.total_amount)||0),0).toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Delivery Progress"}),u.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[B.delivered_bookings||0,"/",B.total_bookings||0," delivered"]}),B.total_bookings>0&&u.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:`h-2 rounded-full transition-all ${B.delivered_bookings===B.total_bookings?"bg-green-500":"bg-orange-500"}`,style:{width:`${B.delivered_bookings/B.total_bookings*100}%`}})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Departure"}),u.jsx("p",{className:"text-sm font-medium text-gray-900",children:Y(B.departure_time)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"ETA"}),u.jsx("p",{className:"text-sm font-medium text-gray-900",children:Y(B.arrival_time)})]})]}),B.status==="in_transit"&&B.total_bookings>0&&u.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("p",{className:"text-xs text-blue-700",children:[" This trip will auto-complete when all ",B.total_bookings," receipts are marked as delivered."]})}),u.jsxs("div",{className:"flex gap-3 mt-4 flex-wrap",children:[u.jsx("button",{onClick:()=>le(B),className:"px-4 py-2 text-sm bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors",children:" Download Memo"}),B.status==="planned"&&u.jsx("button",{onClick:()=>$(B.id,"in_transit"),className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Start Trip"})]})]})},B.id)}):u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[u.jsx("p",{className:"text-gray-500 text-lg",children:"No trips found"}),u.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Create a new trip from the Trip Creation page"})]})}),t==="deliveries"&&u.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt #"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sender"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Packages"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:M.length>0?M.map(B=>{var K;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("p",{className:"font-medium text-gray-900",children:B.receipt_number}),u.jsx("p",{className:"text-xs text-gray-500",children:Y(B.created_at)})]}),u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("p",{className:"font-medium text-gray-900",children:B.sender_name}),u.jsx("p",{className:"text-xs text-gray-500",children:B.sender_phone})]}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("p",{className:"text-sm text-gray-900",children:[B.origin_depot_name,"  ",B.destination_depot_name]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("p",{className:"text-sm font-medium text-gray-900",children:me(B)})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("p",{className:"text-sm font-medium text-green-600",children:["",(Number(B.total_amount)||0).toLocaleString("en-IN")]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B.payment_method==="cash"?"bg-green-100 text-green-700":B.payment_method==="online"?"bg-purple-100 text-purple-700":B.payment_method==="credit"?"bg-yellow-100 text-yellow-700":B.payment_method==="to_pay"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:B.payment_method==="cash"?"Cash":B.payment_method==="online"?"Online":B.payment_method==="credit"?"Credit":B.payment_method==="to_pay"?"To-Pay":B.payment_method||"N/A"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${se(B.status)}`,children:(K=B.status)==null?void 0:K.replace("_"," ")})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[P.has(B.id)&&u.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-amber-600 mb-1",children:[u.jsx("span",{className:"animate-pulse",children:""})," Pending sync"]}),B.status==="in_transit"&&B.payment_method==="to_pay"?u.jsxs("div",{className:"flex flex-col gap-2 min-w-[140px]",children:[u.jsxs("select",{value:L[B.id]||"",onChange:ge=>A({...L,[B.id]:ge.target.value}),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-orange-500",children:[u.jsx("option",{value:"",children:"Select Payment"}),u.jsx("option",{value:"cash",children:"Cash"}),u.jsx("option",{value:"online",children:"Online/UPI"})]}),u.jsx("button",{onClick:()=>j(B.id,L[B.id]),disabled:!L[B.id],className:`text-sm font-medium px-2 py-1 rounded ${L[B.id]?"text-green-600 hover:text-green-700 hover:bg-green-50":"text-gray-400 cursor-not-allowed bg-gray-50"}`,children:R?"Mark Delivered":" Mark (Offline)"})]}):B.status==="in_transit"?u.jsx("button",{onClick:()=>j(B.id),className:"text-sm text-green-600 hover:text-green-700 font-medium",children:R?"Mark Delivered":" Mark (Offline)"}):B.status==="delivered"?u.jsxs("span",{className:"text-sm text-green-600",children:[" Delivered ",P.has(B.id)&&"(syncing...)"]}):null]})]},B.id)}):u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No deliveries found"})})})]})})})]})}function Zw({assignedDepotId:r}){const[e,t]=Te.useState({from:"",to:""}),[s,a]=Te.useState("bookings"),[o,c]=Te.useState(!0),[d,h]=Te.useState({totalBookings:0,bookedCount:0,inTransitCount:0,deliveredCount:0,pendingCount:0,totalRevenue:0,totalPackages:0,revenueByMethod:{cash:0,online:0,to_pay:0,credit:0}}),[g,v]=Te.useState({totalTrips:0,completedTrips:0,activeTrips:0,pendingTrips:0,totalTripCost:0}),[N,b]=Te.useState([]),[y,L]=Te.useState([]);Te.useEffect(()=>{A()},[]);const A=async()=>{c(!0);try{const j=e.from||void 0,J=e.to||void 0,[$,le,se,Y]=await Promise.all([pu.getBookingSummary(j,J,r),pu.getTripSummary(j,J,r),pu.getTopCustomers(5,j,J,r),pu.getTopRoutes(5,j,J,r)]);h($),v(le),b(se.customers),L(Y.routes)}catch(j){console.error("Error loading reports:",j)}finally{c(!1)}},P=()=>{A()},T=j=>j>=1e5?`${(j/1e5).toFixed(2)}L`:`${j.toLocaleString("en-IN")}`,R=()=>{const j=new nt,J=j.internal.pageSize.getWidth();let $=20;j.setFontSize(20),j.setFont("helvetica","bold"),j.text("DRT Mango Transport - Reports",J/2,$,{align:"center"}),$+=10,j.setFontSize(10),j.setFont("helvetica","normal");const le=e.from&&e.to?`Period: ${e.from} to ${e.to}`:"Period: All Time";j.text(le,J/2,$,{align:"center"}),$+=15,j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Booking Summary",14,$),$+=8,j.setFontSize(10),j.setFont("helvetica","normal"),j.text(`Total Bookings: ${d.totalBookings}`,14,$),$+=6,j.text(`Delivered: ${d.deliveredCount}`,14,$),$+=6,j.text(`In Transit: ${d.inTransitCount}`,14,$),$+=6,j.text(`Booked (Pending): ${d.bookedCount}`,14,$),$+=6,j.text(`Total Revenue: ${T(d.totalRevenue)}`,14,$),$+=6,j.text(`Total Packages: ${d.totalPackages}`,14,$),$+=12,j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Trip Summary",14,$),$+=8,j.setFontSize(10),j.setFont("helvetica","normal"),j.text(`Total Trips: ${g.totalTrips}`,14,$),$+=6,j.text(`Completed: ${g.completedTrips}`,14,$),$+=6,j.text(`Active: ${g.activeTrips}`,14,$),$+=6,j.text(`Total Trip Cost: ${T(g.totalTripCost)}`,14,$),$+=12,j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Revenue by Payment Method",14,$),$+=8,j.setFontSize(10),j.setFont("helvetica","normal"),j.text(`Cash: ${T(d.revenueByMethod.cash)}`,14,$),$+=6,j.text(`Online: ${T(d.revenueByMethod.online)}`,14,$),$+=6,j.text(`To Pay: ${T(d.revenueByMethod.to_pay)}`,14,$),$+=6,j.text(`Credit: ${T(d.revenueByMethod.credit)}`,14,$),$+=12,N.length>0&&(j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Top Customers",14,$),$+=8,j.setFontSize(10),j.setFont("helvetica","normal"),N.forEach((se,Y)=>{j.text(`${Y+1}. ${se.name} - ${se.bookings} bookings - ${T(se.revenue)}`,14,$),$+=6}),$+=6),y.length>0&&(j.setFontSize(14),j.setFont("helvetica","bold"),j.text("Top Routes",14,$),$+=8,j.setFontSize(10),j.setFont("helvetica","normal"),y.forEach((se,Y)=>{j.text(`${Y+1}. ${se.route} - ${se.trips} bookings - ${T(se.revenue)}`,14,$),$+=6})),j.setFontSize(8),j.text(`Generated on: ${new Date().toLocaleString("en-IN")}`,14,285),j.save(`DRT_Report_${new Date().toISOString().split("T")[0]}.pdf`)},C=()=>{let j=`DRT Mango Transport - Reports

`;j+=`BOOKING SUMMARY
`,j+=`Total Bookings,${d.totalBookings}
`,j+=`Delivered,${d.deliveredCount}
`,j+=`In Transit,${d.inTransitCount}
`,j+=`Booked (Pending),${d.bookedCount}
`,j+=`Total Revenue,${d.totalRevenue}
`,j+=`Total Packages,${d.totalPackages}

`,j+=`TRIP SUMMARY
`,j+=`Total Trips,${g.totalTrips}
`,j+=`Completed,${g.completedTrips}
`,j+=`Active,${g.activeTrips}
`,j+=`Total Trip Cost,${g.totalTripCost}

`,j+=`REVENUE BY PAYMENT METHOD
`,j+=`Cash,${d.revenueByMethod.cash}
`,j+=`Online,${d.revenueByMethod.online}
`,j+=`To Pay,${d.revenueByMethod.to_pay}
`,j+=`Credit,${d.revenueByMethod.credit}

`,j+=`TOP CUSTOMERS
`,j+=`Rank,Name,Phone,Bookings,Revenue
`,N.forEach((le,se)=>{j+=`${se+1},${le.name},${le.phone},${le.bookings},${le.revenue}
`}),j+=`
`,j+=`TOP ROUTES
`,j+=`Rank,Route,Bookings,Revenue
`,y.forEach((le,se)=>{j+=`${se+1},"${le.route}",${le.trips},${le.revenue}
`});const J=new Blob([j],{type:"text/csv;charset=utf-8;"}),$=document.createElement("a");$.href=URL.createObjectURL(J),$.download=`DRT_Report_${new Date().toISOString().split("T")[0]}.csv`,$.click()};return o?u.jsx("div",{className:"p-8",children:u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading reports..."})]})}):u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),u.jsx("p",{className:"text-gray-600",children:"Analytics and business insights"})]}),u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),u.jsxs("select",{id:"reportType",value:s,onChange:j=>a(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[u.jsx("option",{value:"bookings",children:"Bookings Report"}),u.jsx("option",{value:"trips",children:"Trips Report"}),u.jsx("option",{value:"revenue",children:"Revenue Report"}),u.jsx("option",{value:"customers",children:"Customer Report"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),u.jsx("input",{id:"dateFrom",type:"date",value:e.from,onChange:j=>t({...e,from:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),u.jsx("input",{id:"dateTo",type:"date",value:e.to,onChange:j=>t({...e,to:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsx("div",{className:"flex items-end",children:u.jsx("button",{onClick:P,className:"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Generate Report"})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Booking Summary"})}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Total Bookings"}),u.jsx("span",{className:"font-bold text-gray-900",children:d.totalBookings})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Delivered"}),u.jsx("span",{className:"font-bold text-green-600",children:d.deliveredCount})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"In Transit"}),u.jsx("span",{className:"font-bold text-blue-600",children:d.inTransitCount})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Booked (Pending)"}),u.jsx("span",{className:"font-bold text-yellow-600",children:d.bookedCount})]}),u.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-600",children:"Total Revenue"}),u.jsx("span",{className:"font-bold text-orange-600",children:T(d.totalRevenue)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Total Packages"}),u.jsx("span",{className:"font-bold text-gray-900",children:d.totalPackages})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Trip Summary"})}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Total Trips"}),u.jsx("span",{className:"font-bold text-gray-900",children:g.totalTrips})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Completed"}),u.jsx("span",{className:"font-bold text-green-600",children:g.completedTrips})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Active"}),u.jsx("span",{className:"font-bold text-blue-600",children:g.activeTrips})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Pending"}),u.jsx("span",{className:"font-bold text-yellow-600",children:g.pendingTrips})]}),u.jsx("div",{className:"pt-4 border-t border-gray-200",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Total Trip Cost"}),u.jsx("span",{className:"font-bold text-orange-600",children:T(g.totalTripCost)})]})})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 mb-6",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Revenue by Payment Method"})}),u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cash"}),u.jsx("p",{className:"text-xl font-bold text-green-600",children:T(d.revenueByMethod.cash)})]}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Online"}),u.jsx("p",{className:"text-xl font-bold text-blue-600",children:T(d.revenueByMethod.online)})]}),u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"To Pay"}),u.jsx("p",{className:"text-xl font-bold text-yellow-600",children:T(d.revenueByMethod.to_pay)})]}),u.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Credit"}),u.jsx("p",{className:"text-xl font-bold text-purple-600",children:T(d.revenueByMethod.credit)})]})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Top Customers"})}),u.jsx("div",{className:"divide-y divide-gray-200",children:N.length>0?N.map((j,J)=>u.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"font-bold text-orange-600",children:J+1})}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-gray-900",children:j.name}),u.jsx("p",{className:"text-xs text-gray-500",children:j.phone})]})]}),u.jsx("span",{className:"font-bold text-orange-600",children:T(j.revenue)})]}),u.jsx("div",{className:"ml-11",children:u.jsxs("span",{className:"text-sm text-gray-600",children:[j.bookings," bookings"]})})]},J)):u.jsx("div",{className:"p-6 text-center text-gray-500",children:"No customers found"})})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsx("h2",{className:"font-bold text-gray-900",children:"Top Routes"})}),u.jsx("div",{className:"divide-y divide-gray-200",children:y.length>0?y.map((j,J)=>u.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"font-bold text-blue-600",children:J+1})}),u.jsx("span",{className:"font-medium text-gray-900",children:j.route})]}),u.jsx("span",{className:"font-bold text-orange-600",children:T(j.revenue)})]}),u.jsx("div",{className:"ml-11",children:u.jsxs("span",{className:"text-sm text-gray-600",children:[j.trips," bookings"]})})]},J)):u.jsx("div",{className:"p-6 text-center text-gray-500",children:"No routes found"})})]})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{onClick:R,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Export as PDF"}),u.jsx("button",{onClick:C,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Export as Excel"})]})]})}function eb({assignedDepotId:r}){const[e,t]=Te.useState({from:"",to:""}),[s,a]=Te.useState(null),[o,c]=Te.useState(null),[d,h]=Te.useState(!1);Te.useEffect(()=>{r&&g()},[r]);const g=async()=>{if(r){h(!0);try{const b=e.from||void 0,y=e.to||void 0,[L,A]=await Promise.all([Tf.getPaymentReport(r,b,y),Tf.getDeliveryReport(r,b,y)]);a(L),c(A)}catch(b){console.error("Error loading reports:",b),alert("Failed to load reports")}finally{h(!1)}}},v=()=>{g()},N=(b,y)=>{if(!b||b.length===0){alert("No data to export");return}const L=Object.keys(b[0]).join(","),A=b.map(j=>Object.values(j).map(J=>typeof J=="string"&&J.includes(",")?`"${J}"`:J).join(",")),P=[L,...A].join(`
`),T=new Blob([P],{type:"text/csv"}),R=URL.createObjectURL(T),C=document.createElement("a");C.href=R,C.download=`${y}_${new Date().toISOString().split("T")[0]}.csv`,C.click(),URL.revokeObjectURL(R)};return r?u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Depot Reports"}),u.jsx("p",{className:"text-gray-600",children:"Payment and delivery tracking for your depot"})]}),u.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200 mb-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),u.jsx("input",{type:"date",value:e.from,onChange:b=>t({...e,from:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),u.jsx("input",{type:"date",value:e.to,onChange:b=>t({...e,to:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsx("div",{className:"self-end",children:u.jsx("button",{onClick:v,disabled:d,className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:bg-gray-300",children:d?"Loading...":"Apply Filter"})})]})}),u.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Payment Report (To-Pay Collections)"}),u.jsx("button",{onClick:()=>s&&N(s.payments,"payment_report"),className:"px-4 py-2 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Export Excel"})]}),s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Collections"}),u.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",s.summary.total.toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Cash"}),u.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",s.summary.cash.toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Online/UPI"}),u.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",s.summary.online.toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Payments"}),u.jsx("p",{className:"text-2xl font-bold text-gray-700",children:s.summary.count})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Receipt"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Amount"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.payments.map((b,y)=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(b.date).toLocaleDateString("en-IN")}),u.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:b.receipt_number}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.customer_name}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:b.destination}),u.jsx("td",{className:"px-4 py-3 text-sm",children:u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.payment_method==="cash"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:b.payment_method==="cash"?"Cash":"Online"})}),u.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:["",b.amount.toLocaleString("en-IN")]})]},y))})]})})]}),!s&&!d&&u.jsx("p",{className:"text-center text-gray-500 py-8",children:"No payment data available"})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Delivery Report"}),u.jsx("button",{onClick:()=>o&&N(o.deliveries,"delivery_report"),className:"px-4 py-2 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Export Excel"})]}),o&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.summary.total})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Delivered"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.summary.delivered})]}),u.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.summary.pending})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Packages"}),u.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.summary.totalPackages})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Receipt"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Packages"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.deliveries.map((b,y)=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(b.date).toLocaleDateString("en-IN")}),u.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:b.receipt_number}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.customer_name}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:b.destination}),u.jsx("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-900",children:b.packages}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:b.delivery_instructions.includes("Home")?"Home Delivery":"Pickup"}),u.jsx("td",{className:"px-4 py-3 text-sm",children:u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.status==="delivered"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:b.status==="delivered"?"Delivered":"Pending"})})]},y))})]})})]}),!o&&!d&&u.jsx("p",{className:"text-center text-gray-500 py-8",children:"No delivery data available"})]})]}):u.jsx("div",{className:"p-8",children:u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-gray-600",children:"No depot assigned"})})})}function tb({assignedDepotId:r}){const[e,t]=Te.useState(""),[s,a]=Te.useState("all"),[o,c]=Te.useState(null),[d,h]=Te.useState([]),[g,v]=Te.useState(!0),[N,b]=Te.useState(!1);Te.useEffect(()=>{y()},[]);const y=async()=>{try{const{bookings:R}=await Xs.getAll();let C=(R||[]).map(j=>{var J,$;return{id:j.receipt_number||j.id,bookingId:j.id,customer:j.sender_name||j.customer_name||"N/A",customerPhone:j.sender_phone||j.customer_phone||"",destination:j.destination_depot_name||j.destination_location||"N/A",date:j.created_at,amount:Number(j.total_amount)||0,paymentMode:(($=(J=j.payment_method)==null?void 0:J.replace("_"," "))==null?void 0:$.toUpperCase())||"Cash",status:j.payment_method==="credit"||j.payment_method==="to_pay"?"pending":"paid",booking_status:j.status,invoiceNumber:j.receipt_number||j.id,receivers:j.receivers||[],destination_depot_id:j.destination_depot_id,origin_depot_id:j.origin_depot_id}});r&&(C=C.filter(j=>(j.destination_depot_id===r||j.origin_depot_id===r)&&j.booking_status!=="booked")),h(C)}catch(R){console.error("Error loading receipts:",R)}finally{v(!1)}},L=R=>{c(R),b(!0)},A=R=>{c(R),b(!0),setTimeout(()=>window.print(),100)},P=R=>{const C=new nt({format:"a5",unit:"mm",orientation:"landscape"}),j=C.internal.pageSize.getWidth();C.internal.pageSize.getHeight();const J=15;let $=15;if(C.setFontSize(16),C.setFont("helvetica","bold"),C.setTextColor(0,0,0),C.text("DRT MANGO TRANSPORT",j/2,$,{align:"center"}),$+=6,C.setFontSize(8),C.setFont("helvetica","normal"),C.text("AT POST JAMSANDE, TAL.DEVGAD, DIST. SINDHUDURG MOB: 9422584166, 9422435348",j/2,$,{align:"center"}),$+=8,C.setFontSize(10),C.setFont("helvetica","normal"),C.text("Receipt Number",j/2,$,{align:"center"}),$+=5,C.setFontSize(12),C.setFont("helvetica","bold"),C.text(R.id,j/2,$,{align:"center"}),$+=10,C.setFontSize(10),C.setFont("helvetica","normal"),C.text(`Destination: ${R.destination||"N/A"}`,J,$),C.text(`Date: ${new Date(R.date).toLocaleDateString("en-IN")}`,j-J,$,{align:"right"}),$+=8,C.setFontSize(10),C.setFont("helvetica","normal"),C.text(`Sender: ${R.customer||"N/A"} (${R.customerPhone||"N/A"})`,j/2,$,{align:"center"}),$+=10,R.receivers&&R.receivers.length>0){C.setFontSize(10),C.setFont("helvetica","bold"),C.text("RECEIVERS & PACKAGES",J,$),$+=10,C.setFont("helvetica","normal"),C.setFontSize(10);const Y=J+30,me=j-J-10;R.receivers.forEach((M,z)=>{var ge,ue;const B=`${z+1}. ${((ge=M.name)==null?void 0:ge.toUpperCase())||"N/A"} (${M.phone||"N/A"})`;C.text(B,Y,$);const K=((ue=M.packages)==null?void 0:ue.map(we=>`${we.size}  ${we.quantity} = ${(we.quantity*we.price_per_unit).toFixed(0)}`).join(", "))||"";K&&C.text(K,me,$,{align:"right"}),$+=8})}$+=5,C.setFontSize(11),C.setFont("helvetica","bold"),C.text(`TOTAL: ${R.amount.toLocaleString("en-IN")}`,j-J,$,{align:"right"}),$+=6,C.setFontSize(9),C.setFont("helvetica","normal"),C.text(`(${R.paymentMode||"CASH"})`,j-J,$,{align:"right"}),$+=12,C.setFontSize(10),C.setFont("helvetica","bold"),C.text("THANK YOU FOR USING OUR SERVICES",j/2,$,{align:"center"}),$+=15;const le=40,se=j-J-le;C.setLineWidth(.5),C.line(se,$,se+le,$),$+=4,C.setFontSize(8),C.setFont("helvetica","normal"),C.text("SIGN",se+le/2,$,{align:"center"}),C.save(`${R.id}.pdf`)},T=d.filter(R=>{if(!e.trim())return s==="all"||R.status===s;const C=e.toLowerCase(),j=(R.customer||"").toLowerCase().includes(C)||(R.bookingId||"").toLowerCase().includes(C)||(R.id||"").toLowerCase().includes(C)||(R.destination||"").toLowerCase().includes(C),J=s==="all"||R.status===s;return j&&J});return T.reduce((R,C)=>R+C.amount,0),T.filter(R=>R.status==="paid").reduce((R,C)=>R+C.amount,0),T.filter(R=>R.status==="pending").reduce((R,C)=>R+C.amount,0),g?u.jsx("div",{className:"p-8",children:"Loading receipts..."}):u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"All Receipts"}),u.jsx("p",{className:"text-gray-600",children:"View and manage all payment receipts"})]}),u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx("input",{type:"text",placeholder:"Search by customer, booking ID, or receipt number...",value:e,onChange:R=>t(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),u.jsx("div",{children:u.jsxs("select",{value:s,onChange:R=>a(R.target.value),className:"w-full md:w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[u.jsx("option",{value:"all",children:"All Status"}),u.jsx("option",{value:"paid",children:"Paid"}),u.jsx("option",{value:"pending",children:"Pending"})]})})]})}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt Details"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map(R=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:R.id}),u.jsx("p",{className:"text-sm text-gray-600",children:R.invoiceNumber}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Booking: ",R.bookingId]})]})}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("p",{className:"font-medium text-gray-900",children:R.customer})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("p",{className:"text-sm text-gray-900",children:new Date(R.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("p",{className:"font-bold text-gray-900",children:["",R.amount.toLocaleString("en-IN")]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("p",{className:"text-sm text-gray-900",children:R.paymentMode})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${R.status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:R.status})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>L(R),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View"}),u.jsx("button",{onClick:()=>A(R),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Print"}),u.jsx("button",{onClick:()=>P(R),className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"Download"})]})})]},R.id))})]})}),T.length===0&&u.jsx("div",{className:"p-12 text-center",children:u.jsx("p",{className:"text-gray-500",children:"No receipts found matching your criteria"})})]}),N&&o&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 print:bg-white print:relative",children:u.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto print:rounded-none print:max-w-full print:mx-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 print:hidden",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Receipt Details"}),u.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-orange-500",children:"DRT MANGO TRANSPORT"}),u.jsx("p",{className:"text-lg font-medium mt-2",children:o.id}),u.jsx("p",{className:"text-sm text-gray-600",children:new Date(o.date).toLocaleDateString("en-IN")})]}),u.jsxs("div",{className:"space-y-3 border-t border-b py-4",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Destination:"}),u.jsx("span",{className:"font-medium",children:o.destination})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Customer:"}),u.jsx("span",{className:"font-medium",children:o.customer})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Payment Mode:"}),u.jsx("span",{className:"font-medium",children:o.paymentMode})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Status:"}),u.jsx("span",{className:`font-medium ${o.status==="paid"?"text-green-600":"text-orange-600"}`,children:o.status.toUpperCase()})]})]}),o.receivers&&o.receivers.length>0&&u.jsxs("div",{className:"mt-4",children:[u.jsx("h4",{className:"font-semibold mb-2",children:"Receivers & Packages:"}),o.receivers.map((R,C)=>{var j;return u.jsxs("div",{className:"ml-2 mb-2",children:[u.jsxs("p",{className:"font-medium",children:[R.name," (",R.phone,")"]}),(j=R.packages)==null?void 0:j.map((J,$)=>u.jsxs("p",{className:"text-sm text-gray-600 ml-4",children:[J.size,"  ",J.quantity," = ",(J.quantity*J.price_per_unit).toFixed(0)]},$))]},C)})]}),u.jsx("div",{className:"mt-6 bg-yellow-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-lg font-bold",children:"TOTAL:"}),u.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["",o.amount.toLocaleString("en-IN")]})]})}),u.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[u.jsx("button",{onClick:()=>window.print(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Print"}),u.jsx("button",{onClick:()=>P(o),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Download PDF"})]})]})})]})}function rb({assignedDepotId:r}){var K,ge,ue,we,ae,ne;const[e,t]=Te.useState(""),[s,a]=Te.useState(null),[o,c]=Te.useState([]),[d,h]=Te.useState(!0),[g,v]=Te.useState({totalCredit:0,totalAdvancePaid:0,totalNetOutstanding:0}),[N,b]=Te.useState(!1),[y,L]=Te.useState(""),[A,P]=Te.useState("cash"),[T,R]=Te.useState(""),[C,j]=Te.useState(!1);Te.useEffect(()=>{J()},[]);const J=async()=>{try{const{accounts:te,totalCredit:H,totalAdvancePaid:E,totalNetOutstanding:V}=await Pf.getCreditSummary(r);c(te),v({totalCredit:H,totalAdvancePaid:E,totalNetOutstanding:V})}catch(te){console.error("Error loading credit data:",te)}finally{h(!1)}},$=()=>o.find(te=>te.id===s),le=async()=>{const te=parseFloat(y);if(!te||te<=0){alert("Please enter a valid payment amount");return}const H=$();if(H){j(!0);try{const{payment:E}=await Pf.recordPayment({customer_name:H.customer,customer_phone:H.phone,amount:te,payment_method:A,notes:T});se(E,H),alert(`Payment of ${te.toLocaleString("en-IN")} recorded! Receipt: ${E.receipt_number}`),b(!1),L(""),R(""),h(!0),await J()}catch(E){console.error("Error recording payment:",E),alert("Failed to record payment. Please try again.")}finally{j(!1)}}},se=(te,H)=>{var re;const E=new nt,V=E.internal.pageSize.getWidth();let q=20;E.setFontSize(20),E.setFont("helvetica","bold"),E.setTextColor(247,137,30),E.text("DRT MANGO TRANSPORT",V/2,q,{align:"center"}),q+=10,E.setFontSize(14),E.setTextColor(0,0,0),E.text("ADVANCE PAYMENT RECEIPT",V/2,q,{align:"center"}),q+=15,E.setFontSize(11),E.setFont("helvetica","normal"),E.text(`Receipt No: ${te.receipt_number}`,15,q),q+=8,E.text(`Date: ${new Date(te.payment_date).toLocaleDateString("en-IN")}`,15,q),q+=12,E.setFont("helvetica","bold"),E.text(`Customer: ${H.customer}`,15,q),E.setFont("helvetica","normal"),q+=6,E.text(`Phone: ${H.phone}`,15,q),q+=12,E.setFillColor(254,243,199),E.roundedRect(15,q,V-30,45,3,3,"F"),q+=10,E.setFont("helvetica","bold"),E.text("Credit Summary",V/2,q,{align:"center"}),q+=10,E.setFont("helvetica","normal"),E.text("Total Credit:",25,q),E.text(`${H.totalCredit.toLocaleString("en-IN")}`,V-25,q,{align:"right"}),q+=8,E.text("Advance Paid (including this):",25,q);const ie=H.advancePaid+Number(te.amount);E.text(`${ie.toLocaleString("en-IN")}`,V-25,q,{align:"right"}),q+=8,E.setFont("helvetica","bold"),E.setTextColor(220,38,38),E.text("Net Outstanding:",25,q);const ce=Math.max(0,H.totalCredit-ie);E.text(`${ce.toLocaleString("en-IN")}`,V-25,q,{align:"right"}),q+=15,E.setTextColor(22,163,74),E.setFontSize(14),E.text(`THIS PAYMENT: ${Number(te.amount).toLocaleString("en-IN")}`,V/2,q,{align:"center"}),q+=8,E.setFontSize(10),E.setTextColor(100,100,100),E.text(`Payment Method: ${((re=te.payment_method)==null?void 0:re.toUpperCase())||"CASH"}`,V/2,q,{align:"center"}),E.save(`${te.receipt_number}.pdf`)},Y=s?[...(((K=$())==null?void 0:K.bookings)||[]).map(te=>({id:te.id,type:"debit",amount:te.amount,description:`Booking ${te.receiptNumber||te.id}`,date:te.date,destination:te.destination})),...(((ge=$())==null?void 0:ge.payments)||[]).map(te=>({id:te.id,type:"credit",amount:te.amount,description:`Payment ${te.receiptNumber||""}`,date:te.date,method:te.method}))].sort((te,H)=>new Date(H.date).getTime()-new Date(te.date).getTime()):[],me=o.filter(te=>(te.customer||"").toLowerCase().includes(e.toLowerCase())||(te.id||"").toLowerCase().includes(e.toLowerCase())||(te.phone||"").toLowerCase().includes(e.toLowerCase())),M=g.totalCredit,z=g.totalAdvancePaid,B=g.totalNetOutstanding;return d?u.jsx("div",{className:"p-8",children:"Loading credit data..."}):u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Credit Ledger"}),u.jsx("p",{className:"text-gray-600",children:"Manage customer credit accounts and payments"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[u.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Credit Issued"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",(M/1e5).toFixed(2),"L"]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Paid"}),u.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",z>=1e5?(z/1e5).toFixed(2)+"L":z.toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Outstanding"}),u.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",B>=1e5?(B/1e5).toFixed(2)+"L":B.toLocaleString("en-IN")]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Credit Accounts"}),u.jsx("button",{className:"px-4 py-2 text-sm bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add New Account"})]}),u.jsx("input",{type:"text",placeholder:"Search by customer name or account ID...",value:e,onChange:te=>t(te.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsx("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:me.map(te=>u.jsxs("div",{className:`p-6 cursor-pointer transition-colors ${s===te.id?"bg-orange-50":"hover:bg-gray-50"}`,onClick:()=>a(te.id),children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-900",children:te.customer}),u.jsx("p",{className:"text-sm text-gray-600",children:te.id}),u.jsx("p",{className:"text-xs text-gray-500",children:te.phone})]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${te.outstanding===0?"bg-green-100 text-green-700":te.outstanding>te.creditLimit*.8?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:te.netOutstanding===0?"Clear":"Outstanding"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Total Credit"}),u.jsxs("p",{className:"font-medium text-gray-900",children:["",(te.totalCredit||0).toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Advance Paid"}),u.jsxs("p",{className:"font-medium text-green-600",children:["",(te.advancePaid||0).toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Net Outstanding"}),u.jsxs("p",{className:"font-medium text-orange-600",children:["",(te.netOutstanding||0).toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Bookings"}),u.jsx("p",{className:"font-medium text-gray-900",children:te.bookingCount||0})]})]}),te.totalCredit>0&&u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[u.jsx("span",{children:"Payment Progress"}),u.jsxs("span",{children:[Math.round((te.advancePaid||0)/te.totalCredit*100),"% paid"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:`h-2 rounded-full ${(te.advancePaid||0)/te.totalCredit>.8?"bg-green-500":(te.advancePaid||0)/te.totalCredit>.5?"bg-yellow-500":"bg-orange-500"}`,style:{width:`${Math.min((te.advancePaid||0)/te.totalCredit*100,100)}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[u.jsxs("span",{children:[te.bookingCount||0," bookings"]}),te.lastPayment&&u.jsxs("span",{children:["Last: ",new Date(te.lastPayment).toLocaleDateString("en-IN",{day:"numeric",month:"short"})]})]})]},te.id))})]})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 sticky top-8",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:s?"Account Transactions":"Recent Transactions"}),s&&u.jsx("button",{onClick:()=>a(null),className:"text-sm text-orange-600 hover:text-orange-700 mt-2",children:" View all transactions"})]}),u.jsx("div",{className:"max-h-[600px] overflow-y-auto divide-y divide-gray-200",children:Y.length>0?Y.map(te=>u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-xs text-gray-600",children:te.description}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(te.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),u.jsx("div",{className:"text-right",children:u.jsxs("p",{className:`font-bold text-sm ${te.type==="credit"?"text-green-600":"text-orange-600"}`,children:[te.type==="credit"?"+":"-","",te.amount.toLocaleString("en-IN")]})})]})},te.id)):u.jsx("div",{className:"p-8 text-center",children:u.jsx("p",{className:"text-gray-500 text-sm",children:"Select a customer to view transactions"})})}),s&&u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsx("button",{onClick:()=>b(!0),className:"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:"Record Payment"})})]})})]}),N&&s&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Record Advance Payment"}),u.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("p",{className:"text-gray-600",children:["Customer: ",u.jsx("strong",{children:(ue=$())==null?void 0:ue.customer})]}),u.jsxs("div",{className:"mt-2 bg-gray-50 rounded-lg p-3",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:"Total Credit:"}),u.jsxs("span",{className:"font-medium",children:["",(((we=$())==null?void 0:we.totalCredit)||0).toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:"Advance Paid:"}),u.jsxs("span",{className:"font-medium text-green-600",children:["",(((ae=$())==null?void 0:ae.advancePaid)||0).toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"flex justify-between text-sm font-bold border-t mt-2 pt-2",children:[u.jsx("span",{children:"Net Outstanding:"}),u.jsxs("span",{className:"text-orange-600",children:["",(((ne=$())==null?void 0:ne.netOutstanding)||0).toLocaleString("en-IN")]})]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Amount ()"}),u.jsx("input",{type:"number",value:y,onChange:te=>L(te.target.value),placeholder:"Enter amount",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),u.jsxs("select",{value:A,onChange:te=>P(te.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[u.jsx("option",{value:"cash",children:"Cash"}),u.jsx("option",{value:"upi",children:"UPI"}),u.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),u.jsx("option",{value:"cheque",children:"Cheque"})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),u.jsx("input",{type:"text",value:T,onChange:te=>R(te.target.value),placeholder:"e.g., Season 2024 partial payment",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),u.jsx("button",{onClick:le,disabled:!y||C,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:C?"Processing...":"Record Payment"})]})]})})]})}function nb({userRole:r}){const[e,t]=Te.useState("users");return r!=="owner"?u.jsx("div",{className:"p-8",children:u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:u.jsx("p",{className:"text-red-700",children:"You don't have permission to access Settings."})})}):u.jsxs("div",{className:"p-8",children:[u.jsx("div",{className:"mb-8 flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),u.jsx("p",{className:"text-gray-600",children:"Manage system configuration and preferences"})]})}),u.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto",children:[u.jsx(Sc,{active:e==="users",onClick:()=>t("users"),children:"User Management"}),u.jsx(Sc,{active:e==="depots",onClick:()=>t("depots"),children:"Depots"}),u.jsx(Sc,{active:e==="routes",onClick:()=>t("routes"),children:"Depot Routes"}),u.jsx(Sc,{active:e==="pricing",onClick:()=>t("pricing"),children:"Packages & Pricing"}),u.jsx(Sc,{active:e==="season",onClick:()=>t("season"),children:"Season"}),u.jsx(Sc,{active:e==="backup",onClick:()=>t("backup"),children:"Backup & Restore"})]}),e==="users"&&u.jsx(sb,{}),e==="depots"&&u.jsx(ib,{}),e==="routes"&&u.jsx(ab,{}),e==="pricing"&&u.jsx(ob,{}),e==="season"&&u.jsx(lb,{}),e==="backup"&&u.jsx(cb,{})]})}function Sc({active:r,onClick:e,children:t}){return u.jsx("button",{onClick:e,className:`px-6 py-3 font-medium border-b-2 transition-colors whitespace-nowrap ${r?"border-orange-500 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:t})}function sb(){const[r,e]=Te.useState([]),[t,s]=Te.useState([]),[a,o]=Te.useState(!0),[c,d]=Te.useState(!1),[h,g]=Te.useState(null),[v,N]=Te.useState({name:"",email:"",password:"",role:"booking_clerk",assignedDepot:"",status:"active"});Te.useEffect(()=>{b()},[]);const b=async()=>{try{const[P,T]=await Promise.all([fu.getAll(),yi.getAll()]);e(P.users||[]),s(T.depots||[])}catch(P){console.error("Error loading data:",P)}finally{o(!1)}},y=async P=>{P.preventDefault();try{if(h){const T={...v};T.password||delete T.password,await fu.update(h.id,T)}else{if(!v.password){alert("Password is required for new users");return}await fu.create(v)}d(!1),g(null),N({name:"",email:"",password:"",role:"booking_clerk",assignedDepot:"",status:"active"}),b()}catch(T){console.error("Error saving user:",T),alert("Failed to save user")}},L=P=>{g(P),N({name:P.name,email:P.email,password:"",role:P.role==="owner"?"booking_clerk":P.role,assignedDepot:P.assignedDepot||"",status:P.status}),d(!0)},A=async P=>{if(confirm("Are you sure you want to delete this user?"))try{await fu.delete(P),b()}catch(T){console.error("Error deleting user:",T),alert("Failed to delete user")}};return a?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Users"}),u.jsx("button",{onClick:()=>{d(!0),g(null),N({name:"",email:"",password:"",role:"booking_clerk",assignedDepot:"",status:"active"})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add User"})]}),c&&u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:h?"Edit User":"New User"}),u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),u.jsx("input",{type:"text",value:v.name,onChange:P=>N({...v,name:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),u.jsx("input",{type:"email",value:v.email,onChange:P=>N({...v,email:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,disabled:!!h})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",h?"(leave blank to keep current)":"*"]}),u.jsx("input",{type:"password",value:v.password,onChange:P=>N({...v,password:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!h,placeholder:h?"Leave blank to keep current password":""})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),u.jsxs("select",{value:v.role,onChange:P=>N({...v,role:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[u.jsx("option",{value:"booking_clerk",children:"Booking Clerk"}),u.jsx("option",{value:"depot_manager",children:"Depot Manager"})]})]}),v.role==="depot_manager"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Depot *"}),u.jsxs("select",{value:v.assignedDepot,onChange:P=>N({...v,assignedDepot:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[u.jsx("option",{value:"",children:"Select a depot"}),t.map(P=>{var T;return u.jsxs("option",{value:P.name,children:[P.number,". ",P.name," (",(T=P.type)==null?void 0:T.replace("_"," "),")"]},P.id)})]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[h?"Update":"Create"," User"]}),u.jsx("button",{type:"button",onClick:()=>{d(!1),g(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned Depot"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-200",children:[r.map(P=>{var T,R;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:P.name}),u.jsx("td",{className:"px-6 py-4",children:P.email}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs capitalize",children:(T=P.role)==null?void 0:T.replace("_"," ")})}),u.jsx("td",{className:"px-6 py-4",children:P.assignedDepot?((R=t.find(C=>C.id===P.assignedDepot))==null?void 0:R.name)||P.assignedDepot:"-"}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:P.status})}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>L(P),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"Edit"}),u.jsx("button",{onClick:()=>A(P.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})})]},P.id)}),r.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:'No users found. Click "Add User" to create one.'})})]})]})})]})}function ib(){const[r,e]=Te.useState([]),[t,s]=Te.useState(!0),[a,o]=Te.useState(!1),[c,d]=Te.useState(null),[h,g]=Te.useState({name:"",type:"origin",address:"",contactPerson:"",contactPhone:""});Te.useEffect(()=>{v()},[]);const v=async()=>{try{const L=await yi.getAll();e(L.depots||[])}catch(L){console.error("Error loading depots:",L)}finally{s(!1)}},N=async L=>{L.preventDefault();try{c?await yi.update(c.id,h):await yi.create(h),o(!1),d(null),g({name:"",type:"origin",address:"",contactPerson:"",contactPhone:""}),v()}catch(A){console.error("Error saving depot:",A),alert("Failed to save depot")}},b=L=>{d(L),g({name:L.name,type:L.type,address:L.address||"",contactPerson:L.contactPerson||"",contactPhone:L.contactPhone||""}),o(!0)},y=async L=>{if(confirm("Are you sure you want to delete this depot?"))try{await yi.delete(L),v()}catch(A){console.error("Error deleting depot:",A),alert("Failed to delete depot")}};return t?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Depots"}),u.jsx("button",{onClick:()=>{o(!0),d(null),g({name:"",type:"origin",address:"",contactPerson:"",contactPhone:""})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add Depot"})]}),a&&u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:c?"Edit Depot":"New Depot"}),u.jsxs("form",{onSubmit:N,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Name *"}),u.jsx("input",{type:"text",value:h.name,onChange:L=>g({...h,name:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Devgad",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),u.jsxs("select",{value:h.type,onChange:L=>g({...h,type:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[u.jsx("option",{value:"origin",children:"Origin Depot"}),u.jsx("option",{value:"managed",children:"Managed Depot"}),u.jsx("option",{value:"direct_pickup",children:"Direct Pickup by Customer"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),u.jsx("input",{type:"text",value:h.address,onChange:L=>g({...h,address:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Full address"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person"}),u.jsx("input",{type:"text",value:h.contactPerson,onChange:L=>g({...h,contactPerson:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),u.jsx("input",{type:"tel",value:h.contactPhone,onChange:L=>g({...h,contactPhone:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[c?"Update":"Create"," Depot"]}),u.jsx("button",{type:"button",onClick:()=>{o(!1),d(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Number"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-200",children:[r.map(L=>{var A;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 font-medium",children:L.number}),u.jsx("td",{className:"px-6 py-4 font-medium",children:L.name}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${L.type==="origin"?"bg-purple-100 text-purple-700":L.type==="managed"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:(A=L.type)==null?void 0:A.replace("_"," ")})}),u.jsxs("td",{className:"px-6 py-4 text-sm",children:[L.contactPerson&&u.jsx("div",{children:L.contactPerson}),L.contactPhone&&u.jsx("div",{className:"text-gray-500",children:L.contactPhone}),!L.contactPerson&&!L.contactPhone&&"-"]}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>b(L),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"Edit"}),u.jsx("button",{onClick:()=>y(L.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})})]},L.id)}),r.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:'No depots found. Click "Add Depot" to create one.'})})]})]})})]})}function ab(){const[r,e]=Te.useState([]),[t,s]=Te.useState([]),[a,o]=Te.useState(!0),[c,d]=Te.useState(!1),[h,g]=Te.useState(null),[v,N]=Te.useState({originDepotId:"",forwardingDepotIds:[]});Te.useEffect(()=>{b()},[]);const b=async()=>{try{const[P,T]=await Promise.all([Tc.getAll(),yi.getAll()]);e(P.routes||[]),s(T.depots||[])}catch(P){console.error("Error loading data:",P)}finally{o(!1)}},y=async P=>{P.preventDefault();try{h?await Tc.update(h.id,v):await Tc.create(v),d(!1),g(null),N({originDepotId:"",forwardingDepotIds:[]}),b()}catch(T){console.error("Error saving route:",T),alert("Failed to save route")}},L=async P=>{if(confirm("Are you sure you want to delete this route?"))try{await Tc.delete(P),b()}catch(T){console.error("Error deleting route:",T),alert("Failed to delete route")}},A=t.filter(P=>P.type==="managed");return a?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Info:"})," Depot Routes allow managed depots to forward packages to other depots. When configured, packages meant for forwarded depots will appear in the origin depot manager's dashboard."]})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Depot Routes"}),u.jsx("button",{onClick:()=>{d(!0),g(null),N({originDepotId:"",forwardingDepotIds:[]})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add Route"})]}),c&&u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:h?"Edit Route":"New Route"}),u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin Depot (Managed) *"}),u.jsxs("select",{value:v.originDepotId,onChange:P=>N({...v,originDepotId:P.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[u.jsx("option",{value:"",children:"Select a managed depot"}),A.map(P=>u.jsx("option",{value:P.id,children:P.name},P.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forwarding Depots *"}),u.jsx("div",{className:"border border-gray-300 rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto",children:t.filter(P=>P.id!==v.originDepotId).map(P=>{var T;return u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:v.forwardingDepotIds.includes(P.id),onChange:R=>{R.target.checked?N({...v,forwardingDepotIds:[...v.forwardingDepotIds,P.id]}):N({...v,forwardingDepotIds:v.forwardingDepotIds.filter(C=>C!==P.id)})},className:"w-4 h-4 text-orange-500 border-gray-300 rounded"}),u.jsxs("span",{className:"text-sm",children:[P.name," (",(T=P.type)==null?void 0:T.replace("_"," "),")"]})]},P.id)})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[h?"Update":"Create"," Route"]}),u.jsx("button",{type:"button",onClick:()=>{d(!1),g(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[r.map(P=>{const T=t.find(C=>C.id===P.originDepotId),R=t.filter(C=>{var j;return(j=P.forwardingDepotIds)==null?void 0:j.includes(C.id)});return u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900",children:(T==null?void 0:T.name)||"Unknown"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Origin Depot"})]}),u.jsx("button",{onClick:()=>L(P.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Forwards to:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(C=>u.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:C.name},C.id))})]})]},P.id)}),r.length===0&&u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:u.jsx("p",{className:"text-gray-500",children:'No depot routes configured. Click "Add Route" to create one.'})})]})]})}function ob(){const[r,e]=Te.useState([]),[t,s]=Te.useState([]),[a,o]=Te.useState([]),[c,d]=Te.useState(!0),[h,g]=Te.useState(!1),[v,N]=Te.useState(null),[b,y]=Te.useState({name:"",basePrice:0});Te.useEffect(()=>{L()},[]);const L=async()=>{try{const[C,j,J]=await Promise.all([Cc.getAll(),yi.getAll(),Fd.getAll()]);e(C.packages||[]),s(j.depots||[]),o(J.pricing||[])}catch(C){console.error("Error loading data:",C)}finally{d(!1)}},A=async C=>{C.preventDefault();try{v?await Cc.update(v.id,b):await Cc.create(b),g(!1),N(null),y({name:"",basePrice:0}),L()}catch(j){console.error("Error saving package:",j),alert("Failed to save package")}},P=async C=>{if(confirm("Are you sure you want to delete this package?"))try{await Cc.delete(C),L()}catch(j){console.error("Error deleting package:",j),alert("Failed to delete package")}},T=async(C,j,J)=>{const $=parseFloat(J);if(!isNaN($))try{await Fd.update(C,j,$),L()}catch(le){console.error("Error updating price:",le),alert("Failed to update price")}},R=(C,j)=>{const J=a.find(le=>le.packageId===C&&le.depotId===j);if(J)return J.price;const $=r.find(le=>le.id===C);return($==null?void 0:$.basePrice)||0};return c?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Packages & Pricing"}),u.jsx("button",{onClick:()=>{g(!0),N(null),y({name:"",basePrice:0})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add Package Size"})]}),h&&u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:v?"Edit Package":"New Package"}),u.jsxs("form",{onSubmit:A,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package Size Name *"}),u.jsx("input",{type:"text",value:b.name,onChange:C=>y({...b,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 1 Dz",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Price () *"}),u.jsx("input",{type:"number",value:b.basePrice,onChange:C=>y({...b,basePrice:Number(C.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 50",required:!0})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[v?"Update":"Create"," Package"]}),u.jsx("button",{type:"button",onClick:()=>{g(!1),N(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",style:{width:0,minWidth:"100%"},children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[u.jsx("h3",{className:"font-bold text-gray-900",children:"Pricing Overview"}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Base prices can be overridden per depot. Use horizontal scroll to view all depots."})]}),u.jsx("div",{style:{overflowX:"auto",maxHeight:"70vh",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:u.jsxs("table",{className:"w-full text-sm",style:{minWidth:"1200px"},children:[u.jsx("thead",{style:{position:"sticky",top:0,zIndex:40},children:u.jsxs("tr",{className:"bg-gray-100",children:[u.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase",style:{position:"sticky",left:0,zIndex:30,backgroundColor:"#f3f4f6",minWidth:"180px",borderRight:"2px solid #e5e7eb"},children:"Package Size"}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase",style:{position:"sticky",left:"180px",zIndex:30,backgroundColor:"#f3f4f6",minWidth:"130px",borderRight:"2px solid #e5e7eb"},children:"Base Price"}),t.filter(C=>!["Devgad","Shirgaon"].includes(C.name)).map(C=>{var j;return u.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase whitespace-nowrap",style:{minWidth:"130px"},children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{children:C.name}),u.jsx("span",{className:"text-[10px] text-gray-500 font-normal lowercase",children:(j=C.type)==null?void 0:j.replace("_"," ")})]})},C.id)}),u.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase",style:{minWidth:"130px"},children:"Actions"})]})}),u.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.map(C=>u.jsxs("tr",{className:"hover:bg-amber-50 transition-colors border-b border-gray-200",children:[u.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",style:{position:"sticky",left:0,zIndex:20,backgroundColor:"white",minWidth:"180px",borderRight:"2px solid #e5e7eb"},children:C.name}),u.jsxs("td",{className:"px-6 py-4 font-bold text-orange-600",style:{position:"sticky",left:"180px",zIndex:20,backgroundColor:"white",minWidth:"130px",borderRight:"2px solid #e5e7eb"},children:["",C.basePrice]}),t.filter(j=>!["Devgad","Shirgaon"].includes(j.name)).map(j=>{const J=R(C.id,j.id),$=a.some(le=>le.packageId===C.id&&le.depotId===j.id);return u.jsxs("td",{className:"px-6 py-4 border-r border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-gray-500 text-xs",children:""}),u.jsx("input",{type:"number",defaultValue:J,onBlur:le=>{const se=le.target.value;se&&parseFloat(se)!==J&&T(C.id,j.id,se)},className:`w-20 px-2 py-1 border rounded text-sm transition-all focus:ring-2 focus:ring-orange-500 focus:border-transparent ${$?"border-orange-500 bg-orange-50 text-orange-900 font-medium":"border-gray-200 text-gray-600 bg-gray-50 hover:bg-white hover:border-gray-300"}`,placeholder:String(C.basePrice)})]}),$&&u.jsx("span",{className:"text-[10px] text-orange-600 block mt-1 font-medium",children:"Custom Price"})]},j.id)}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{N(C),y({name:C.name,basePrice:C.basePrice}),g(!0)},className:"text-xs font-medium text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded transition-colors",children:"Edit"}),u.jsx("button",{onClick:()=>P(C.id),className:"text-xs font-medium text-red-600 hover:text-red-800 bg-red-50 hover:bg-red-100 px-3 py-1.5 rounded transition-colors",children:"Delete"})]})})]},C.id)),r.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:t.length+3,className:"px-6 py-12 text-center text-gray-500",children:u.jsxs("div",{className:"flex flex-col items-center justify-center",children:[u.jsx("span",{className:"text-4xl mb-4",children:""}),u.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No packages found"}),u.jsx("p",{className:"text-sm",children:'Click "Add Package Size" above to create your first package.'})]})})})]})]})})]})]})}function lb(){const[r,e]=Te.useState({startDate:"",endDate:"",year:new Date().getFullYear()}),[t,s]=Te.useState(!0),[a,o]=Te.useState(!1),[c,d]=Te.useState(!1);Te.useEffect(()=>{h()},[]);const h=async()=>{try{const b=await Pu.get();b.season&&Object.keys(b.season).length>0&&e(b.season)}catch(b){console.error("Error loading season:",b)}finally{s(!1)}},g=async b=>{b.preventDefault(),o(!0);try{await Pu.update(r),await h(),d(!1),alert("Season updated successfully!")}catch(y){console.error("Error updating season:",y),alert("Failed to update season")}finally{o(!1)}},v=()=>{if(!r.startDate||!r.endDate)return!1;const b=new Date;b.setHours(0,0,0,0);const y=new Date(r.startDate+"T00:00:00"),L=new Date(r.endDate+"T23:59:59");return isNaN(y.getTime())||isNaN(L.getTime())?(console.error("Invalid season dates:",{startDate:r.startDate,endDate:r.endDate}),!1):b>=y&&b<=L},N=b=>b?new Date(b+"T00:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return t?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:`rounded-xl border p-6 ${v()?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"text-2xl",children:v()?"":""}),u.jsxs("h3",{className:"font-bold text-gray-900",children:["Season Status: ",v()?"Active":"Inactive"]})]}),u.jsx("p",{className:"text-sm text-gray-700",children:v()?`The mango season is currently active. Bookings and trips can be created.${r.startDate&&r.endDate?` Current season is from ${N(r.startDate)} to ${N(r.endDate)}.`:""}`:`The season is currently inactive. No bookings or trips can be created outside the season dates.${r.startDate&&r.endDate?` Season dates: ${N(r.startDate)} to ${N(r.endDate)}.`:""}`}),!c&&u.jsx("button",{onClick:()=>d(!0),className:"mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium text-sm",children:"Edit Season"})]}),c&&u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 max-w-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Season Configuration"}),u.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),u.jsxs("form",{onSubmit:g,className:"space-y-6",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Season Year *"}),u.jsx("input",{type:"number",value:r.year,onChange:b=>e({...r,year:Number(b.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),u.jsx("input",{type:"date",value:r.startDate,onChange:b=>e({...r,startDate:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),u.jsx("input",{type:"date",value:r.endDate,onChange:b=>e({...r,endDate:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]})]}),u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:"Warning:"})," After the end date, no new bookings or trips can be created until the next season is configured."]})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50",children:a?"Saving...":"Update Season"}),u.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"})]})]})]})]})}function cb(){const[r,e]=Te.useState(!1),[t,s]=Te.useState(!1),[a,o]=Te.useState(null),c=async()=>{e(!0);try{const v=(await Cf.create()).backup,N=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),b=URL.createObjectURL(N),y=document.createElement("a");y.href=b,y.download=`mango-express-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(b),alert("Backup created and downloaded successfully!")}catch(g){console.error("Error creating backup:",g),alert("Failed to create backup")}finally{e(!1)}},d=g=>{var b;const v=(b=g.target.files)==null?void 0:b[0];if(!v)return;const N=new FileReader;N.onload=y=>{var L;try{const A=JSON.parse((L=y.target)==null?void 0:L.result);o(A)}catch(A){console.error("Error parsing backup file:",A),alert("Invalid backup file format")}},N.readAsText(v)},h=async()=>{if(!a){alert("Please select a backup file first");return}if(confirm("Are you sure you want to restore this backup? This will overwrite all current data!")){s(!0);try{await Cf.restore(a.data),alert("Data restored successfully! Please refresh the page."),o(null)}catch(g){console.error("Error restoring backup:",g),alert("Failed to restore backup")}finally{s(!1)}}};return u.jsxs("div",{className:"space-y-6 max-w-3xl",children:[u.jsx("h2",{className:"font-bold text-gray-900",children:"Backup & Restore"}),u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Create Backup"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download a complete backup of all system data including bookings, trips, users, depots, and settings."}),u.jsx("button",{onClick:c,disabled:r,className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50",children:r?"Creating Backup...":"Download Backup"})]}),u.jsx("div",{className:"text-6xl",children:""})]})}),u.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Restore Backup"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a backup file to restore all data. This will overwrite all current data."}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"sr-only",children:"Choose backup file"}),u.jsx("input",{type:"file",accept:".json",onChange:d,className:`block w-full text-sm text-gray-500\r
                      file:mr-4 file:py-2 file:px-4\r
                      file:rounded-lg file:border-0\r
                      file:bg-orange-50 file:text-orange-700\r
                      hover:file:bg-orange-100\r
                      file:cursor-pointer cursor-pointer`})]})}),a&&u.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:u.jsxs("p",{className:"text-sm text-green-800",children:[u.jsx("strong",{children:"Backup loaded:"})," Created on ",new Date(a.timestamp).toLocaleString("en-IN")]})}),u.jsx("button",{onClick:h,disabled:t||!a,className:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium disabled:opacity-50",children:t?"Restoring...":"Restore Backup"})]})]}),u.jsx("div",{className:"text-6xl",children:""})]})}),u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-sm text-red-800",children:[u.jsx("strong",{children:" Warning:"})," Restoring a backup will permanently overwrite all current data. Make sure to create a backup of your current data before restoring."]})})]})}function ub(){const{isOnline:r,setOnline:e,lastOnlineAt:t}=zi();return Te.useEffect(()=>{e(navigator.onLine);const s=()=>{console.log("[Network] Connection restored"),e(!0)},a=()=>{console.log("[Network] Connection lost"),e(!1)};return window.addEventListener("online",s),window.addEventListener("offline",a),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}},[e]),{isOnline:r,lastOnlineAt:t}}function db(){ub();const r=zi(h=>h.isOnline),e=Zs(h=>h.pendingOperations),t=Zs(h=>h.isSyncing),s=e.filter(h=>h.status==="pending"||h.status==="syncing").length,a=e.filter(h=>h.status==="failed").length,[o,c]=Al.useState(!1),d=async()=>{c(!0);try{await Zy()}finally{c(!1)}};return r&&s===0&&a===0?null:u.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[!r&&u.jsxs("div",{className:"bg-amber-500 text-white px-4 py-2 flex items-center justify-center gap-2 shadow-lg",children:[u.jsx("svg",{className:"w-5 h-5 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3"})}),u.jsx("span",{className:"font-medium",children:"You're offline"}),u.jsx("span",{className:"text-amber-100",children:" Changes will sync when connection is restored"})]}),(s>0||a>0)&&u.jsxs("div",{className:`px-4 py-2 flex items-center justify-center gap-3 ${a>0?"bg-red-500 text-white":t?"bg-blue-500 text-white":"bg-gray-700 text-white"}`,children:[t&&u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{className:"font-medium",children:"Syncing changes..."})]}),!t&&s>0&&u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsxs("span",{className:"font-medium",children:[s," pending ",s===1?"change":"changes"]}),r&&u.jsx("span",{className:"text-gray-300",children:" Will sync shortly"})]}),a>0&&u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),u.jsxs("span",{className:"font-medium",children:[a," failed ",a===1?"operation":"operations"]}),u.jsx("button",{onClick:d,disabled:o||!r,className:"ml-2 px-3 py-1 bg-white text-red-500 rounded-md text-sm font-medium hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Retrying...":"Retry"})]})]})]})}function hb(){const r=Zs(o=>o.conflicts),e=Zs(o=>o.resolveConflict);if(r.length===0)return null;const t=async(o,c)=>{e(o,c),c==="keep_local"&&setTimeout(()=>Oc(),500)},s=o=>{switch(o){case"booking":return"Booking";case"trip":return"Trip";case"delivery":return"Delivery";default:return o}},a=o=>o?o.sender_name?`Sender: ${o.sender_name}`:o.driver_name?`Driver: ${o.driver_name}`:o.status?`Status: ${o.status}`:JSON.stringify(o,null,2).slice(0,200)+"...":"No data available";return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[u.jsx("div",{className:"p-6 border-b border-gray-200 bg-red-50",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-3xl",children:""}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Sync Conflict Detected"}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.length," ",r.length===1?"item has":"items have"," been modified elsewhere. Please choose how to resolve."]})]})]})}),u.jsx("div",{className:"divide-y divide-gray-200",children:r.map(o=>u.jsx(fb,{conflict:o,onResolve:t,formatEntityType:s,formatData:a},o.operationId))}),r.length>1&&u.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>r.forEach(o=>t(o.operationId,"keep_server")),className:"px-4 py-2 text-sm text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Keep All Server Changes"}),u.jsx("button",{onClick:()=>r.forEach(o=>t(o.operationId,"keep_local")),className:"px-4 py-2 text-sm text-white bg-orange-500 rounded-lg hover:bg-orange-600",children:"Keep All My Changes"})]})]})})}function fb({conflict:r,onResolve:e,formatEntityType:t,formatData:s}){const[a,o]=Al.useState(!1);return u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded mb-2",children:t(r.entityType)}),u.jsx("p",{className:"font-medium text-gray-900",children:r.entityId!=="unknown"?`ID: ${r.entityId}`:"New Item"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Conflicted at: ",new Date(r.conflictedAt).toLocaleString()]})]}),u.jsx("button",{onClick:()=>o(!a),className:"text-sm text-blue-600 hover:underline",children:a?"Hide Details":"Show Details"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[u.jsx("p",{className:"text-xs font-medium text-blue-700 mb-2",children:" Your Changes"}),u.jsx("p",{className:"text-sm text-gray-700",children:s(r.localData)}),a&&u.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded overflow-auto max-h-32",children:JSON.stringify(r.localData,null,2)})]}),u.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[u.jsx("p",{className:"text-xs font-medium text-green-700 mb-2",children:" Server Version"}),u.jsx("p",{className:"text-sm text-gray-700",children:r.serverData?s(r.serverData):"Modified by another user"}),a&&r.serverData&&u.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded overflow-auto max-h-32",children:JSON.stringify(r.serverData,null,2)})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>e(r.operationId,"keep_local"),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm font-medium",children:"Keep My Changes"}),u.jsx("button",{onClick:()=>e(r.operationId,"keep_server"),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm font-medium",children:"Use Server Version"}),u.jsx("button",{onClick:()=>e(r.operationId,"cancel"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium",children:"Discard"})]})]})}function pb(){const[r,e]=Te.useState(!1),[t,s]=Te.useState("dashboard"),[a,o]=Te.useState(null),[c,d]=Te.useState(null),[h,g]=Te.useState(null),[v,N]=Te.useState(null);Te.useEffect(()=>(e5(),()=>{t5()}),[]);const b=async(L,A,P)=>{if(e(!0),o(L),d(A),g(P||null),console.log("handleLogin called:",{role:L,id:A,depotId:P}),L==="depot_manager"&&P){console.log("Fetching depot info for:",P);try{const T=await yi.getById(P);console.log("Depot info fetched:",T),N(T)}catch(T){console.error("Error fetching depot info:",T)}}s("dashboard")},y=()=>{e(!1),s("dashboard")};return r?u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(db,{}),u.jsx(hb,{}),u.jsxs("div",{className:"flex",children:[u.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 min-h-screen",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center overflow-hidden",children:u.jsx("img",{src:"/logo.webp",alt:"Mango Express Logo",className:"w-full h-full object-contain p-1"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-bold text-gray-900",children:"Mango Express"}),u.jsx("p",{className:"text-sm text-gray-500 capitalize",children:a.replace("_"," ")})]})]}),u.jsxs("nav",{className:"space-y-1",children:[u.jsx(Uo,{icon:"",label:"Dashboard",active:t==="dashboard",onClick:()=>s("dashboard")}),(a==="owner"||a==="booking_clerk")&&u.jsx(Uo,{icon:"",label:"New Booking",active:t==="new_booking",onClick:()=>s("new_booking")}),(a==="owner"||a==="booking_clerk"||a==="depot_manager"&&(v==null?void 0:v.forwarding_enabled))&&u.jsx(Uo,{icon:"",label:v!=null&&v.forwarding_enabled?"Create Forwarding Trip":"Create Trip",active:t==="trip_creation",onClick:()=>s("trip_creation")}),u.jsx(Uo,{icon:"",label:"Trips & Deliveries",active:t==="trips_deliveries",onClick:()=>s("trips_deliveries")}),(a==="owner"||a==="depot_manager")&&u.jsx(Uo,{icon:"",label:"Reports",active:t==="reports",onClick:()=>s("reports")}),(a==="owner"||a==="depot_manager")&&u.jsx(Uo,{icon:"",label:"All Receipts",active:t==="receipts",onClick:()=>s("receipts")}),a==="owner"&&u.jsx(Uo,{icon:"",label:"Credit Ledger",active:t==="credit_ledger",onClick:()=>s("credit_ledger")}),a==="owner"&&u.jsx(Uo,{icon:"",label:"Settings",active:t==="settings",onClick:()=>s("settings")})]}),u.jsx("button",{onClick:y,className:"mt-8 w-full px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Logout"})]})}),u.jsxs("main",{className:"flex-1",children:[t==="dashboard"&&u.jsx(Fy,{userRole:a,assignedDepotId:h}),t==="new_booking"&&(a==="owner"||a==="booking_clerk")&&u.jsx(r5,{onNavigate:s}),t==="trip_creation"&&(a==="owner"||a==="booking_clerk"||a==="depot_manager"&&(v==null?void 0:v.forwarding_enabled))&&u.jsx(l5,{userRole:a,assignedDepotId:h}),t==="trips_deliveries"&&u.jsx(Qw,{userRole:a,assignedDepotId:h}),t==="reports"&&a==="owner"&&u.jsx(Zw,{assignedDepotId:h}),t==="reports"&&a==="depot_manager"&&h&&u.jsx(eb,{assignedDepotId:h}),t==="receipts"&&(a==="owner"||a==="depot_manager")&&u.jsx(tb,{assignedDepotId:h}),t==="credit_ledger"&&a==="owner"&&u.jsx(rb,{assignedDepotId:h}),t==="settings"&&a==="owner"&&u.jsx(nb,{userRole:a})]})]})]}):u.jsx(Dy,{onLogin:b})}function Uo({icon:r,label:e,active:t,onClick:s}){return u.jsxs("button",{onClick:s,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${t?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,children:[u.jsx("span",{children:r}),u.jsx("span",{className:"font-medium",children:e})]})}e2.createRoot(document.getElementById("root")).render(u.jsx(pb,{}));export{pr as _,mb as c,H1 as g};
